<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Bitcoin By Doing - Interactive Bitcoin Education</title>
    <meta name="description" content="Master Bitcoin through hands-on experience, real-time data, and interactive simulations powered by AI">

    <!-- Resource Hints for Performance -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Preload Critical Assets -->
    <link rel="preload" href="css/style-enhanced.css" as="style">
    <link rel="preload" href="js/main.js" as="script">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400;0,600;0,700;1,400;1,600&display=swap" as="style">

    <!-- Critical Styles -->
    <link rel="stylesheet" href="css/style-enhanced.css">
    <link rel="stylesheet" href="css/ai-agents.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400;0,600;0,700;1,400;1,600&display=swap" rel="stylesheet">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#f7931a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Bitcoin Academy">
</head>
<body>
    <!-- Header with Bitcoin Network Status -->
    <header id="header" role="banner">
        <nav role="navigation" aria-label="Main navigation">
            <div class="nav-brand">
                <h1>Learn Bitcoin By Doing</h1>
                <div class="bitcoin-status" id="bitcoin-status">
                    <span class="status-indicator" id="network-status"></span>
                    <span class="btc-price" id="btc-price">Loading...</span>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#ai-agents">AI Learning</a></li>
                <li><a href="#why-bitcoin">Why Bitcoin</a></li>
                <li><a href="#learn">Learn</a></li>
                <li><a href="#simulate">Simulate</a></li>
                <li><a href="#courses">Courses</a></li>
                <li><a href="#intelligence">Intelligence</a></li>
                <li><a href="#tools">Tools</a></li>
            </ul>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main role="main" aria-label="Main content">
        <!-- Hero Section with Live Bitcoin Data -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h1>Learn Bitcoin <em>By Doing</em></h1>
                <p class="hero-subtitle">Master Bitcoin through hands-on experience, real-time data, and interactive simulations</p>

                <div class="hero-actions hero-actions--stacked">
                    <button class="cta-primary" id="cta-start-journey">Start My Guided Path</button>
                    <a href="/interactive-demos/" class="cta-secondary" id="cta-browse-demos">Browse Interactive Demos</a>
                </div>

                <div class="hero-journey" id="hero-journey">
                    <div class="journey-current">
                        <span class="journey-label">You are:</span>
                        <span class="journey-persona" id="journey-persona">Select a persona to begin</span>
                    </div>
                    <div class="journey-next">
                        <span class="journey-label">Next step:</span>
                        <button class="journey-next-action" id="journey-next-action">Choose your starting path</button>
                    </div>
                </div>

                <!-- Live Bitcoin Dashboard -->
                <div class="live-dashboard">
                    <div class="dashboard-card">
                        <h3>Current Network</h3>
                        <div class="metric-value" id="block-height">Loading...</div>
                        <div class="metric-label">Block Height</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Mempool Size</h3>
                        <div class="metric-value" id="mempool-size">Loading...</div>
                        <div class="metric-label">Transactions</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Fee Estimate</h3>
                        <div class="metric-value" id="fee-estimate">Loading...</div>
                        <div class="metric-label">sats/vB</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Mining Difficulty</h3>
                        <div class="metric-value" id="difficulty">Loading...</div>
                        <div class="metric-label">Adjusted</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="journey-progress" class="journey-progress">
            <div class="journey-progress__card">
                <div class="journey-progress__header">
                    <h2>Your Path to Sovereignty</h2>
                    <span class="journey-stage" id="journey-stage">Stage: Discover</span>
                </div>
                <p class="journey-progress__subtitle">A structured journey from curiosity to confidence.</p>
                <div class="journey-progress__bar">
                    <div class="journey-progress__fill" id="journey-progress-fill"></div>
                </div>
                <div class="journey-progress__meta">
                    <span class="journey-progress__text" id="journey-progress-text">0% complete</span>
                    <button class="journey-progress__next" id="journey-progress-button">Go to next step</button>
                </div>
            </div>
        </section>

        <aside class="journey-guide" id="journey-guide">
            <div class="journey-guide__content">
                <div class="journey-guide__body">
                    <h3 id="journey-guide-title">Select a persona to begin</h3>
                    <p id="journey-guide-description">Choose a learner profile so we can recommend the first step.</p>
                </div>
                <div class="journey-guide__actions">
                    <button class="journey-guide__primary" id="journey-guide-start">Start next step</button>
                    <button class="journey-guide__secondary" id="journey-guide-skip">View full journey</button>
                </div>
            </div>
        </aside>

        <section id="journey-map" class="journey-map">
            <div class="journey-map__header">
                <h2>Follow Your Guided Path</h2>
                <p class="journey-map__intro" id="journey-map-intro">Pick a persona to unlock a recommended flow.</p>
            </div>
            <div class="journey-map__grid" id="journey-map-grid"></div>
        </section>

        <section id="foundation" class="foundation">
            <div class="container">
                <h2 class="section-title">Your Path to Sovereignty</h2>
                <p class="section-intro">A structured journey from curiosity to confidence.</p>

                <div class="foundation-grid">
                    <article class="foundation-card" id="foundation-intro">
                        <span class="foundation-step">Foundation</span>
                        <h3>Understand the Why</h3>
                        <p>Learn how money, banking, and inflation work today—and why Bitcoin emerged as the antidote.</p>
                    </article>
                    <article class="foundation-card" id="foundation-basics">
                        <span class="foundation-step">Step 1</span>
                        <h3>Bitcoin Basics</h3>
                        <p>Grasp the essentials: wallets, keys, blockchain fundamentals, and how to send your first transaction safely.</p>
                    </article>
                    <article class="foundation-card" id="foundation-deeper">
                        <span class="foundation-step">Step 2</span>
                        <h3>Going Deeper</h3>
                        <p>Explore mining, UTXOs, consensus, and the economic incentives that keep Bitcoin unstoppable.</p>
                    </article>
                    <article class="foundation-card" id="foundation-custody">
                        <span class="foundation-step">Step 3</span>
                        <h3>Self-Custody Mastery</h3>
                        <p>Become your own bank: hardware wallets, multi-sig, backup strategies, inheritance planning, and risk drills.</p>
                    </article>
                    <article class="foundation-card" id="foundation-advanced">
                        <span class="foundation-step">Step 4</span>
                        <h3>Advanced Topics</h3>
                        <p>Run your own node, experiment with the Lightning Network, strengthen privacy, and contribute back to Bitcoin.</p>
                    </article>
                </div>
            </div>
        </section>

    <!-- AI-Powered Learning Agents Section -->
    <section id="ai-agents" class="section-padding">
        <div class="container">
            <h2 class="section-title">AI-Powered Bitcoin Learning Agents</h2>
            <p class="section-intro">Experience Bitcoin education through cutting-edge generative AI agents that create personalized, interactive learning experiences just for you.</p>
            
            <!-- Story Generator -->
            <div class="agent-card" id="visual-synthesizer">
                <h3><span class="agent-icon">📖</span> Your Bitcoin Journey</h3>
                <p>Generate personalized Bitcoin stories based on your learning level and interests.</p>
                <button class="btn-primary" onclick="window.aiAgents.storyAgent.generatePersonalizedStory()">Create My Story</button>
                <div id="story-output" class="agent-output"></div>
            </div>

            <!-- Visual Concept Synthesizer -->
            <div class="agent-card">
                <h3><span class="agent-icon">🎨</span> Visual Concept Explorer</h3>
                <p>Transform complex Bitcoin concepts into visual metaphors and interactive animations.</p>
                <select id="concept-selector" class="concept-select">
                    <option value="blockchain">Blockchain</option>
                    <option value="mining">Mining</option>
                    <option value="lightning">Lightning Network</option>
                    <option value="consensus">Consensus</option>
                </select>
                <button class="btn-primary" onclick="window.aiAgents.visualAgent.generateVisualExplanation(document.getElementById('concept-selector').value)">Visualize Concept</button>
                <div id="visual-output" class="agent-output"></div>
            </div>

            <!-- Debate Simulator -->
            <div class="agent-card">
                <h3><span class="agent-icon">💬</span> Bitcoin Debate Arena</h3>
                <p>Watch AI agents debate Bitcoin from multiple perspectives - economist vs environmentalist, technologist vs regulator.</p>
                <input type="text" id="debate-topic" placeholder="Enter debate topic (e.g., 'Bitcoin and Energy')" class="debate-input">
                <button class="btn-primary" onclick="window.aiAgents.debateAgent.createDebate(document.getElementById('debate-topic').value)">Start Debate</button>
                <div id="debate-output" class="agent-output"></div>
            </div>

            <!-- Future Scenario Generator -->
            <div class="agent-card">
                <h3><span class="agent-icon">🔮</span> Bitcoin Future Simulator</h3>
                <p>Explore realistic scenarios of Bitcoin's impact on the world in 2030, 2040, and beyond.</p>
                <div class="timeframe-selector">
                    <button class="timeframe-btn" data-timeframe="nearTerm">2025-2030</button>
                    <button class="timeframe-btn" data-timeframe="midTerm">2030-2040</button>
                    <button class="timeframe-btn" data-timeframe="longTerm">2040+</button>
                </div>
                <div id="future-output" class="agent-output"></div>
            </div>

            <!-- Personal Advisor -->
            <div class="agent-card">
                <h3><span class="agent-icon">🎯</span> Personal Bitcoin Advisor</h3>
                <p>Get personalized Bitcoin strategies based on your goals, risk tolerance, and situation.</p>
                <div class="advisor-form">
                    <select id="risk-tolerance" class="advisor-select">
                        <option value="conservative">Conservative</option>
                        <option value="moderate">Moderate</option>
                        <option value="aggressive">Aggressive</option>
                    </select>
                    <select id="time-horizon" class="advisor-select">
                        <option value="short-term">Short-term (< 1 year)</option>
                        <option value="medium-term">Medium-term (1-5 years)</option>
                        <option value="long-term">Long-term (5+ years)</option>
                    </select>
                    <button class="btn-primary" onclick="window.aiAgents.advisorAgent.generatePersonalStrategy({riskTolerance: document.getElementById('risk-tolerance').value, timeHorizon: document.getElementById('time-horizon').value})">Get My Strategy</button>
                </div>
                <div id="advisor-output" class="agent-output"></div>
            </div>

            <!-- Blockchain Poetry -->
            <div class="agent-card">
                <h3><span class="agent-icon">✨</span> Blockchain Poetry Generator</h3>
                <p>Transform real-time blockchain data into educational poetry and haikus.</p>
                <button class="btn-primary" onclick="window.aiAgents.poetryAgent.generateBlockchainPoetry({}, 'haiku')">Generate Haiku</button>
                <button class="btn-secondary" onclick="window.aiAgents.poetryAgent.generateBlockchainPoetry({}, 'sonnet')">Create Sonnet</button>
                <div id="poetry-output" class="agent-output"></div>
            </div>

            <!-- Time Machine -->
            <div class="agent-card">
                <h3><span class="agent-icon">⏰</span> Bitcoin Time Machine</h3>
                <p>Travel through Bitcoin's history from the genesis block to the future you're building.</p>
                <div class="era-selector">
                    <button class="era-btn" data-era="genesis">2008-2009: Genesis</button>
                    <button class="era-btn" data-era="earlyDays">2010-2011: Early Days</button>
                    <button class="era-btn" data-era="mainstream">2017: Mainstream</button>
                    <button class="era-btn" data-era="institutional">2020: Institutional</button>
                    <button class="era-btn" data-era="future">2024+: Your Era</button>
                </div>
                <div id="timemachine-output" class="agent-output"></div>
            </div>

            <!-- Philosophy Generator -->
            <div class="agent-card">
                <h3><span class="agent-icon">🤔</span> Bitcoin Philosophy Explorer</h3>
                <p>Explore deep philosophical questions about Bitcoin, freedom, sovereignty, and the nature of money.</p>
                <select id="philosophy-topic" class="philosophy-select">
                    <option value="sovereignty">Sovereignty</option>
                    <option value="freedom">Freedom</option>
                    <option value="value">Value</option>
                    <option value="trust">Trust</option>
                    <option value="time">Time</option>
                </select>
                <select id="philosophy-framework" class="philosophy-select">
                    <option value="libertarian">Libertarian</option>
                    <option value="cypherpunk">Cypherpunk</option>
                    <option value="austrian">Austrian Economics</option>
                    <option value="ethical">Ethical</option>
                </select>
                <button class="btn-primary" onclick="window.aiAgents.philosophyAgent.generatePhilosophicalDiscussion(document.getElementById('philosophy-topic').value, document.getElementById('philosophy-framework').value)">Explore Philosophy</button>
                <div id="philosophy-output" class="agent-output"></div>
            </div>

            <!-- Agent Orchestra -->
            <div class="agent-orchestra">
                <h3>🎭 Agent Orchestra</h3>
                <p>Combine multiple AI agents for a comprehensive learning experience tailored to your journey.</p>
                <button class="btn-special" onclick="window.orchestrateAgents()">Launch Full Experience</button>
            </div>
        </div>
    </section>

    <!-- Why Bitcoin - First Principles Section -->
        <section id="why-bitcoin" class="why-bitcoin">
            <div class="section-header">
                <h2>Why Bitcoin: First Principles</h2>
                <p>Understand the problems with today’s financial system and how Bitcoin solves them</p>
                <div class="principles-progress">
                    <span id="principles-understood">0</span>/5 principles understood
                </div>
            </div>

            <div class="principles-grid">
                <!-- Principle 0: What makes money good? -->
                <div class="principle-card" data-principle="money-properties">
                    <div class="principle-header">
                        <h3>Principle 0: What Makes Money Good?</h3>
                        <span class="tag">Sound Money</span>
                    </div>
                    <p>Compare properties of different monies: scarcity, durability, divisibility, portability, verifiability, and fungibility.</p>
                    <div class="demo" id="demo-money-properties">
                        <div class="properties-table">
                            <div class="properties-row header">
                                <div>Property</div>
                                <div>Shells</div>
                                <div>Gold</div>
                                <div>Fiat</div>
                                <div>Bitcoin</div>
                            </div>
                            <div class="properties-row">
                                <div>Scarcity</div>
                                <div>★</div>
                                <div>★★★</div>
                                <div>★</div>
                                <div>★★★★</div>
                            </div>
                            <div class="properties-row">
                                <div>Durability</div>
                                <div>★</div>
                                <div>★★★★</div>
                                <div>★★★</div>
                                <div>★★★★</div>
                            </div>
                            <div class="properties-row">
                                <div>Divisibility</div>
                                <div>★</div>
                                <div>★★</div>
                                <div>★★★</div>
                                <div>★★★★</div>
                            </div>
                            <div class="properties-row">
                                <div>Portability</div>
                                <div>★</div>
                                <div>★★</div>
                                <div>★★★★</div>
                                <div>★★★★</div>
                            </div>
                            <div class="properties-row">
                                <div>Verifiability</div>
                                <div>★</div>
                                <div>★★</div>
                                <div>★★★</div>
                                <div>★★★★</div>
                            </div>
                            <div class="properties-row">
                                <div>Fungibility</div>
                                <div>★★</div>
                                <div>★★★</div>
                                <div>★★★</div>
                                <div>★★★</div>
                            </div>
                        </div>
                        <small class="demo-caption">Interactive comparison demo by Dalia</small>
                    </div>
                    <button class="understood-btn" onclick="markPrincipleUnderstood('money-properties')">I understand</button>
                </div>

                <!-- Principle 1: Double-Spending Problem -->
                <div class="principle-card" data-principle="double-spend">
                    <div class="principle-header">
                        <h3>Principle 1: The Double-Spend Problem</h3>
                        <span class="tag">Digital Money</span>
                    </div>
                    <p>Why digital money is hard: without a global ledger, the same coin can be spent twice.</p>
                    <div class="demo" id="demo-double-spend">
                        <div class="ledger">
                            <div class="ledger-title">Shared Ledger</div>
                            <ul id="ledger-entries"></ul>
                        </div>
                        <div class="actions">
                            <button onclick="demoSend('Alice','Bob',1)">Alice → 1 BTC → Bob</button>
                            <button onclick="demoDoubleSpend('Alice','Charlie',1)">Try Double-Spend to Charlie</button>
                        </div>
                        <div id="double-spend-status" class="status"></div>
                        <small class="demo-caption">Original educational demo by Dalia</small>
                    </div>
                    <button class="understood-btn" onclick="markPrincipleUnderstood('double-spend')">I understand</button>
                </div>

                <!-- Principle 2: The Trust Problem -->
                <div class="principle-card" data-principle="trust-problem">
                    <div class="principle-header">
                        <h3>Principle 2: The Trust Problem</h3>
                        <span class="tag">Centralization</span>
                    </div>
                    <p>Who controls the ledger controls you. History shows centralized power gets abused.</p>
                    <div class="demo" id="demo-trust">
                        <div class="keeper-options">
                            <label><input type="radio" name="keeper" value="central-bank"> Central Bank</label>
                            <label><input type="radio" name="keeper" value="tech-company"> Tech Company</label>
                            <label><input type="radio" name="keeper" value="cooperative"> Cooperative</label>
                            <label><input type="radio" name="keeper" value="algorithm" checked> Decentralized Algorithm</label>
                        </div>
                        <button onclick="evaluateKeeper()">Evaluate Risks</button>
                        <div id="keeper-result" class="result"></div>
                        <small class="demo-caption">Original educational demo by Dalia</small>
                    </div>
                    <button class="understood-btn" onclick="markPrincipleUnderstood('trust-problem')">I understand</button>
                </div>

                <!-- Principle 3: Consensus Among Strangers -->
                <div class="principle-card" data-principle="consensus">
                    <div class="principle-header">
                        <h3>Principle 3: Consensus Among Strangers</h3>
                        <span class="tag">Byzantine Faults</span>
                    </div>
                    <p>How can thousands of strangers agree on truth when some are dishonest?</p>
                    <div class="demo" id="demo-consensus">
                        <div class="nodes">
                            <label><input type="checkbox" class="node-toggle" checked> Node 1 (Honest)</label>
                            <label><input type="checkbox" class="node-toggle" checked> Node 2 (Honest)</label>
                            <label><input type="checkbox" class="node-toggle" checked> Node 3 (Honest)</label>
                            <label><input type="checkbox" class="node-toggle"> Node 4 (Dishonest)</label>
                            <label><input type="checkbox" class="node-toggle" checked> Node 5 (Honest)</label>
                        </div>
                        <button onclick="simulateConsensus()">Simulate Consensus</button>
                        <div id="consensus-result" class="result"></div>
                        <small class="demo-caption">Original educational demo by Dalia</small>
                    </div>
                    <button class="understood-btn" onclick="markPrincipleUnderstood('consensus')">I understand</button>
                </div>

                <!-- Principle 4: Proof of Work -->
                <div class="principle-card" data-principle="pow">
                    <div class="principle-header">
                        <h3>Principle 4: Proof of Work</h3>
                        <span class="tag">Security</span>
                    </div>
                    <p>Make voting expensive so fake identities don’t matter. Find a hash with leading zeros.</p>
                    <div class="demo" id="demo-pow">
                        <div class="pow-controls">
                            <label>Message: <input type="text" id="pow-message" value="Alice pays Bob 1 BTC"></label>
                            <label>Difficulty: <input type="number" id="pow-difficulty" value="4" min="1" max="6"> leading zeros</label>
                            <div class="pow-row">
                                <label>Nonce: <input type="number" id="pow-nonce" value="0"></label>
                                <button onclick="tryNonce()">Try Nonce</button>
                                <button onclick="autoSolve()">Auto-Solve</button>
                                <button onclick="resetPow()">Reset</button>
                            </div>
                        </div>
                        <div class="pow-output">
                            <div>Hash: <code id="pow-hash">-</code></div>
                            <div id="pow-status" class="status"></div>
                        </div>
                        <small class="demo-caption">Original educational demo by Dalia</small>
                    </div>
                    <button class="understood-btn" onclick="markPrincipleUnderstood('pow')">I understand</button>
                </div>
            </div>

            <div class="context-note">
                <p>These principles include monetary cycles, inflation risk, centralization risks, and why Bitcoin’s design (scarcity, decentralization, proof of work) addresses them.</p>
                <p class="source-note">Content synthesized and authored by Dalia. Interactive demos are original and not sourced from third-party websites.</p>
            </div>
        </section>

        <!-- Interactive Learning Modules -->
        <section id="learn" class="learning-modules">
            <div class="section-header">
                <h2>Interactive Learning Modules</h2>
                <p>Discover Bitcoin concepts through guided exploration and hands-on practice</p>
            </div>

            <div class="modules-grid">
                <!-- Bitcoin Fundamentals Module -->
                <div class="module-card" data-module="fundamentals">
                    <div class="module-header">
                        <h3>Bitcoin Fundamentals</h3>
                        <div class="module-status">
                            <span class="difficulty">Beginner</span>
                            <span class="duration">2-3 hours</span>
                        </div>
                    </div>
                    <div class="module-content">
                        <p>Master the basics through Socratic questioning and real-world examples</p>
                        <ul class="learning-objectives">
                            <li>What is Bitcoin and how does it work?</li>
                            <li>Understanding digital scarcity</li>
                            <li>Bitcoin vs traditional money</li>
                        </ul>
                        <div class="module-preview" id="fundamentals-preview">
                            <div class="socratic-question">
                                <strong>Explore:</strong> "Why do people say Bitcoin is 'digital gold'?"
                            </div>
                        </div>
                    </div>
                    <button class="module-start" onclick="startModule('fundamentals')">Start Learning</button>
                </div>

                <!-- Transaction Mechanics Module -->
                <div class="module-card" data-module="transactions">
                    <div class="module-header">
                        <h3>Transaction Mechanics</h3>
                        <div class="module-status">
                            <span class="difficulty">Intermediate</span>
                            <span class="duration">3-4 hours</span>
                        </div>
                    </div>
                    <div class="module-content">
                        <p>Deep dive into how Bitcoin transactions actually work with live examples</p>
                        <ul class="learning-objectives">
                            <li>Inputs, outputs, and UTXOs</li>
                            <li>Transaction fees and mempool</li>
                            <li>Script types and addresses</li>
                        </ul>
                        <div class="module-preview" id="transactions-preview">
                            <div class="live-transaction" id="latest-transaction">
                                Loading latest transaction...
                            </div>
                        </div>
                    </div>
                    <button class="module-start" onclick="startModule('transactions')">Start Learning</button>
                </div>

                <!-- Security & Custody Module -->
                <div class="module-card" data-module="security">
                    <div class="module-header">
                        <h3>Security & Custody</h3>
                        <div class="module-status">
                            <span class="difficulty">Essential</span>
                            <span class="duration">2-3 hours</span>
                        </div>
                    </div>
                    <div class="module-content">
                        <p>Learn to secure your Bitcoin properly through guided practice</p>
                        <ul class="learning-objectives">
                            <li>Private keys and seed phrases</li>
                            <li>Wallet types and security models</li>
                            <li>Common security mistakes to avoid</li>
                        </ul>
                        <div class="module-preview" id="security-preview">
                            <div class="security-tip">
                                <strong>Practice:</strong> Generate and secure a test wallet (no real funds)
                            </div>
                        </div>
                    </div>
                    <button class="module-start" onclick="startModule('security')">Start Learning</button>
                </div>
            </div>
        </section>

        <!-- Interactive Simulations -->
        <section id="simulate" class="simulations">
            <div class="section-header">
                <h2>Interactive Bitcoin Simulations</h2>
                <p>Practice with real Bitcoin tools in a safe environment</p>
            </div>

            <div class="simulations-grid">
                <!-- Transaction Simulator -->
                <div class="simulation-card">
                    <h3>Transaction Simulator</h3>
                    <p>Build and analyze Bitcoin transactions with current network data</p>
                    <div class="simulation-preview">
                        <div class="tx-builder" id="tx-simulator">
                            <div class="simulation-controls">
                                <button onclick="loadSimulation('transaction')">Launch Simulator</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fee Calculator -->
                <div class="simulation-card">
                    <h3>Smart Fee Calculator</h3>
                    <p>Calculate optimal fees using live mempool data</p>
                    <div class="simulation-preview">
                        <div class="fee-calculator" id="fee-calculator">
                            <div class="simulation-controls">
                                <button onclick="loadSimulation('fees')">Launch Calculator</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wallet Security Simulator -->
                <div class="simulation-card">
                    <h3>Wallet Security Trainer</h3>
                    <p>Practice wallet security with interactive scenarios</p>
                    <div class="simulation-preview">
                        <div class="security-trainer" id="security-trainer">
                            <div class="simulation-controls">
                                <button onclick="loadSimulation('security')">Launch Trainer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI-Generated Courses -->
        <section id="courses" class="ai-courses">
            <div class="section-header">
                <h2>AI-Generated Courses</h2>
                <p>Personalized learning paths created by your Bitcoin MCP agents</p>
                <div class="course-generator">
                    <button class="generate-course" onclick="generateNewCourse()">Generate New Course</button>
                    <div class="generation-options">
                        <select id="course-topic">
                            <option value="lightning">Lightning Network</option>
                            <option value="mining">Bitcoin Mining</option>
                            <option value="economics">Bitcoin Economics</option>
                            <option value="history">Bitcoin History</option>
                            <option value="development">Bitcoin Development</option>
                        </select>
                        <select id="course-level">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate">Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="courses-grid" id="generated-courses">
                <!-- Courses will be dynamically loaded here -->
                <div class="course-placeholder">
                    <p>Generate your first course to get started!</p>
                </div>
            </div>
        </section>

        <!-- Bitcoin Intelligence Dashboard -->
        <section id="intelligence" class="intelligence">
            <div class="section-header">
                <h2>Bitcoin Intelligence</h2>
                <p>Real-time insights from your Bitcoin monitoring agents</p>
            </div>

            <div class="intelligence-dashboard">
                <div class="intelligence-summary" id="intelligence-summary">
                    <h3>Latest Intelligence Summary</h3>
                    <div class="summary-content" id="summary-content">
                        Loading latest intelligence...
                    </div>
                    <button onclick="updateIntelligence()">Refresh Intelligence</button>
                </div>

                <div class="threat-monitor" id="threat-monitor">
                    <h3>Security Alerts</h3>
                    <div class="alerts-list" id="security-alerts">
                        No current security alerts
                    </div>
                </div>

                <div class="educational-opportunities" id="educational-opportunities">
                    <h3>Educational Insights</h3>
                    <div class="opportunities-list" id="edu-opportunities">
                        Loading educational opportunities...
                    </div>
                </div>

                <div class="market-intelligence" id="market-intelligence">
                    <h3>Market Intelligence</h3>
                    <div class="market-data" id="market-data">
                        Loading market analysis...
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Tools -->
        <section id="tools" class="tools">
            <div class="section-header">
                <h2>Interactive Bitcoin Tools</h2>
                <p>Practical tools powered by real Bitcoin data</p>
            </div>

            <div class="tools-grid">
                <div class="tool-card">
                    <h3>Address Validator</h3>
                    <p>Validate and analyze Bitcoin addresses</p>
                    <div class="tool-interface">
                        <input type="text" id="address-input" placeholder="Enter Bitcoin address">
                        <button onclick="validateAddress()">Validate</button>
                        <div class="tool-result" id="address-result"></div>
                    </div>
                </div>

                <div class="tool-card">
                    <h3>Unit Converter</h3>
                    <p>Convert between Bitcoin units</p>
                    <div class="tool-interface">
                        <input type="number" id="amount-input" placeholder="Amount">
                        <select id="from-unit">
                            <option value="btc">BTC</option>
                            <option value="sats">Satoshis</option>
                            <option value="mbtc">mBTC</option>
                        </select>
                        <span>to</span>
                        <select id="to-unit">
                            <option value="sats">Satoshis</option>
                            <option value="btc">BTC</option>
                            <option value="mbtc">mBTC</option>
                        </select>
                        <button onclick="convertUnits()">Convert</button>
                        <div class="tool-result" id="conversion-result"></div>
                    </div>
                </div>

                <div class="tool-card">
                    <h3>Transaction Explorer</h3>
                    <p>Explore and decode Bitcoin transactions</p>
                    <div class="tool-interface">
                        <input type="text" id="txid-input" placeholder="Enter transaction ID">
                        <button onclick="exploreTx()">Explore</button>
                        <div class="tool-result" id="tx-result"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer role="contentinfo" aria-label="Site footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Learn Bitcoin By Doing</h3>
                <p>Master Bitcoin through hands-on experience and interactive education</p>
            </div>
            <div class="footer-section">
                <h4>Learning Modules</h4>
                <ul>
                    <li><a href="#learn">Bitcoin Fundamentals</a></li>
                    <li><a href="#learn">Transaction Mechanics</a></li>
                    <li><a href="#learn">Security & Custody</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>AI-Powered Features</h4>
                <ul>
                    <li><a href="#simulate">Interactive Simulations</a></li>
                    <li><a href="#courses">Generated Courses</a></li>
                    <li><a href="#intelligence">Bitcoin Intelligence</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Tools</h4>
                <ul>
                    <li><a href="#tools">Address Validator</a></li>
                    <li><a href="#tools">Unit Converter</a></li>
                    <li><a href="#tools">Transaction Explorer</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Learn Bitcoin By Doing. Created by Dalia.</p>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p id="loading-message">Loading Bitcoin Academy...</p>
    </div>

    <!-- Modal for Interactive Learning -->
    <div id="learning-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLearningModal()">&times;</span>
            <div id="learning-content">
                <!-- Dynamic learning content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Persona Selection Modal -->
    <div class="persona-modal hidden" id="persona-modal" role="dialog" aria-modal="true" aria-labelledby="persona-modal-title">
        <div class="persona-modal__dialog">
            <button class="persona-modal__close" id="persona-close" aria-label="Close persona selection">&times;</button>
            <h2 id="persona-modal-title">Choose Your Learning Persona</h2>
            <p class="persona-modal__intro">We’ll tailor your journey based on your goals. Pick the description that feels closest— you can change it anytime.</p>
            <div class="persona-grid" id="persona-grid"></div>
            <div class="persona-actions">
                <button class="persona-actions__skip" id="persona-skip">Explore without guidance</button>
                <button class="persona-actions__continue" id="persona-continue" disabled>Continue with this path</button>
            </div>
        </div>
    </div>

    <div class="journey-stage-modal hidden" id="journey-stage-modal" role="dialog" aria-modal="true" aria-labelledby="journey-stage-title">
        <div class="journey-stage-modal__dialog">
            <button class="journey-stage-modal__close" id="journey-stage-close" aria-label="Close stage guidance">&times;</button>
            <span class="journey-stage-modal__badge" id="journey-stage-badge">Stage</span>
            <h2 class="journey-stage-modal__title" id="journey-stage-title"></h2>
            <p class="journey-stage-modal__description" id="journey-stage-description"></p>
            <ul class="journey-stage-modal__list" id="journey-stage-list"></ul>
            <div class="journey-stage-modal__actions">
                <button class="journey-stage-modal__primary" id="journey-stage-start">Take me there</button>
                <button class="journey-stage-modal__secondary" id="journey-stage-complete">Mark stage complete</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/mcp-client.js"></script>
    <script type="module">
        import { eventTracker } from './js/utils/event-tracking.js';
        import { certificationEngine } from './js/utils/certification-engine.js';

        window.eventTracker = eventTracker;
        window.certificationEngine = certificationEngine;

        window.eventTracker.trackPageView('home', 'journey', {
            path: window.location.pathname,
            persona: localStorage.getItem('journey-state-v1') ? 'returning' : 'new'
        });
    </script>
    <script src="js/journey.js"></script>
    <script src="js/bitcoin-data.js"></script>
    <script src="js/simulations.js"></script>
    <script src="js/mining-simulator.js"></script>
    <script src="js/course-generator.js"></script>
    <script src="js/intelligence.js"></script>
    <script src="js/tools.js"></script>
    <script src="js/main.js"></script>
    <script src="js/ai-agents.js"></script>
    <script src="js/ai-agents-extended.js"></script>
    <script>
        // Initialize AI Agents when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the AI agents with MCP client
            window.aiAgents = new BitcoinAIAgents(window.mcpClient);
            
            // Set up event listeners for buttons
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const timeframe = this.dataset.timeframe;
                    window.aiAgents.futureAgent.generateScenario(timeframe).then(result => {
                        document.getElementById('future-output').innerHTML = formatAgentOutput(result);
                        document.getElementById('future-output').classList.add('active');
                    });
                });
            });
            
            document.querySelectorAll('.era-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const era = this.dataset.era;
                    window.aiAgents.timeMachineAgent.travelToEra(era).then(result => {
                        document.getElementById('timemachine-output').innerHTML = formatAgentOutput(result);
                        document.getElementById('timemachine-output').classList.add('active');
                    });
                });
            });
            
            // Orchestrate all agents for comprehensive experience
            window.orchestrateAgents = async function() {
                const outputs = await Promise.all([
                    window.aiAgents.storyAgent.generatePersonalizedStory(),
                    window.aiAgents.visualAgent.generateVisualExplanation('blockchain'),
                    window.aiAgents.futureAgent.generateScenario('nearTerm'),
                    window.aiAgents.advisorAgent.generatePersonalStrategy()
                ]);
                
                // Display all outputs in a special orchestrated view
                alert('Full AI Experience Launched! Check each agent card for your personalized content.');
            };
            
            // Helper function to format agent output
            function formatAgentOutput(result) {
                if (typeof result === 'object') {
                    return `<div class="formatted-output">
                        <h4>Generated Content</h4>
                        <pre>${JSON.stringify(result, null, 2)}</pre>
                    </div>`;
                }
                return result;
            }
        });

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('✅ Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.error('❌ Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
