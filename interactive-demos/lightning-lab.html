<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lightning Lab ‚Äì Bitcoin Sovereign Academy</title>
  <link rel="stylesheet" href="/css/brand.css">
  <style>
    :root {
      --primary-orange: #f7931a;
      --primary-dark: #0a0a0a;
      --secondary-dark: #1a1a1a;
      --text-light: #e0e0e0;
      --text-dim: #999;
      --success-green: #4CAF50;
      --danger-red: #F44336;
      --lightning-yellow: #FFC107;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--primary-dark);
      color: var(--text-light);
      min-height: 100vh;
      padding: 2rem;
    }

    .back-btn {
      display: inline-block;
      margin-bottom: 2rem;
      color: var(--primary-orange);
      text-decoration: none;
      font-size: 1rem;
      transition: opacity 0.3s ease;
    }

    .back-btn:hover {
      opacity: 0.7;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .header h1 {
      color: var(--primary-orange);
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .header p {
      color: var(--text-dim);
      font-size: 1.1rem;
    }

    /* Section styling */
    .section {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(247, 147, 26, 0.2);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .section h2 {
      color: var(--primary-orange);
      font-size: 1.5rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Channel visualization */
    .channel-demo {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      padding: 2rem;
      margin: 1.5rem 0;
    }

    .channel-bar {
      height: 60px;
      background: linear-gradient(to right, var(--success-green) 50%, var(--primary-orange) 50%);
      border-radius: 8px;
      position: relative;
      margin: 2rem 0;
      box-shadow: 0 4px 15px rgba(247, 147, 26, 0.3);
      transition: all 0.5s ease;
    }

    .channel-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }

    .channel-label {
      text-align: center;
    }

    .channel-label .amount {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--lightning-yellow);
    }

    .channel-label .name {
      color: var(--text-dim);
      font-size: 0.9rem;
    }

    /* Payment controls */
    .payment-controls {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
      margin: 2rem 0;
    }

    .payment-controls input {
      flex: 1;
      min-width: 200px;
      padding: 0.8rem;
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(247, 147, 26, 0.3);
      border-radius: 8px;
      color: var(--text-light);
      font-size: 1rem;
    }

    .payment-controls button {
      padding: 0.8rem 2rem;
      background: linear-gradient(135deg, var(--primary-orange), #ff6b00);
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .payment-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(247, 147, 26, 0.4);
    }

    .payment-controls button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Transaction log */
    .tx-log {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      padding: 1rem;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
    }

    .tx-log .tx-entry {
      padding: 0.5rem;
      border-bottom: 1px solid rgba(247, 147, 26, 0.1);
      display: flex;
      justify-content: space-between;
    }

    .tx-log .tx-entry:last-child {
      border-bottom: none;
    }

    .tx-log .tx-entry.send {
      color: var(--danger-red);
    }

    .tx-log .tx-entry.receive {
      color: var(--success-green);
    }

    /* Stats grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(247, 147, 26, 0.3);
      border-radius: 8px;
      padding: 1.5rem;
      text-align: center;
    }

    .stat-card .value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--lightning-yellow);
      margin-bottom: 0.5rem;
    }

    .stat-card .label {
      color: var(--text-dim);
      font-size: 0.9rem;
    }

    /* Socratic questions */
    .socratic-section {
      background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(255, 107, 0, 0.05));
      border: 2px solid rgba(247, 147, 26, 0.3);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .socratic-section h3 {
      color: var(--primary-orange);
      font-size: 1.3rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .question {
      background: rgba(0, 0, 0, 0.3);
      border-left: 4px solid var(--primary-orange);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .question strong {
      color: var(--lightning-yellow);
      font-size: 1.1rem;
      display: block;
      margin-bottom: 1rem;
    }

    .reveal-btn {
      background: rgba(247, 147, 26, 0.2);
      border: 2px solid var(--primary-orange);
      color: var(--primary-orange);
      padding: 0.6rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .reveal-btn:hover {
      background: var(--primary-orange);
      color: white;
    }

    .answer {
      display: none;
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(76, 175, 80, 0.1);
      border-left: 4px solid var(--success-green);
      border-radius: 8px;
      line-height: 1.6;
    }

    .answer.revealed {
      display: block;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Info boxes */
    .info-box {
      background: rgba(33, 150, 243, 0.1);
      border-left: 4px solid #2196F3;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .info-box strong {
      color: #2196F3;
    }

    .warning-box {
      background: rgba(255, 193, 7, 0.1);
      border-left: 4px solid var(--lightning-yellow);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .warning-box strong {
      color: var(--lightning-yellow);
    }

    /* Comparison table */
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid rgba(247, 147, 26, 0.2);
    }

    .comparison-table th {
      background: rgba(247, 147, 26, 0.2);
      color: var(--primary-orange);
      font-weight: bold;
    }

    .comparison-table tr:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .checkmark {
      color: var(--success-green);
      font-weight: bold;
    }

    .cross {
      color: var(--danger-red);
      font-weight: bold;
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }

      .header h1 {
        font-size: 2rem;
      }

      .section {
        padding: 1.5rem;
      }

      .payment-controls {
        flex-direction: column;
      }

      .payment-controls input,
      .payment-controls button {
        width: 100%;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <a href="../index.html" class="back-btn">‚Üê Back to Demos</a>

  <div class="container">
    <div class="header">
      <h1>‚ö° Lightning Lab</h1>
      <p>Experience instant Bitcoin payments on the Lightning Network</p>
    </div>

    <!-- Introduction Section -->
    <div class="section">
      <h2>üí° What is the Lightning Network?</h2>
      <p style="line-height: 1.8; margin-bottom: 1rem;">
        The Lightning Network is a "Layer 2" payment protocol built on top of Bitcoin. It enables instant, low-cost transactions
        by creating payment channels between users. Instead of every transaction being recorded on the Bitcoin blockchain,
        Lightning allows unlimited off-chain transactions, with only the opening and closing of channels touching the main chain.
      </p>

      <div class="info-box">
        <strong>üí° Key Benefits:</strong> Instant settlements (< 1 second), near-zero fees (< 1 sat), unlimited scalability,
        enhanced privacy, and micropayment support.
      </div>
    </div>

    <!-- Interactive Channel Demo -->
    <div class="section">
      <h2>üîÑ Interactive Channel Demo</h2>
      <p style="margin-bottom: 1.5rem;">
        This simulator shows a Lightning payment channel between <strong>You</strong> and <strong>Alice</strong>.
        Each side of the channel represents how much Bitcoin each party controls. Send payments back and forth
        to see the balance shift!
      </p>

      <div class="channel-demo">
        <h3 style="color: var(--lightning-yellow); text-align: center; margin-bottom: 1rem;">
          Channel Capacity: <span id="channel-capacity">1,000,000</span> sats
        </h3>

        <div class="channel-bar" id="channel-bar"></div>

        <div class="channel-labels">
          <div class="channel-label">
            <div class="amount" id="your-balance">500,000</div>
            <div class="name">Your Balance (sats)</div>
          </div>
          <div class="channel-label">
            <div class="amount" id="alice-balance">500,000</div>
            <div class="name">Alice's Balance (sats)</div>
          </div>
        </div>

        <div class="payment-controls">
          <input
            type="number"
            id="payment-amount"
            placeholder="Amount (sats)"
            value="50000"
            min="1000"
            max="500000"
          />
          <button onclick="sendPayment()">Send to Alice ‚Üí</button>
          <button onclick="receivePayment()">‚Üê Receive from Alice</button>
          <button onclick="resetChannel()" style="background: rgba(244, 67, 54, 0.8);">Reset Channel</button>
        </div>

        <div class="warning-box">
          <strong>‚ö†Ô∏è Note:</strong> You can only send as much as you have in your side of the channel.
          If you run out of balance, you need to receive payments or close and reopen the channel.
        </div>

        <h4 style="color: var(--text-light); margin-top: 2rem; margin-bottom: 1rem;">Transaction Log:</h4>
        <div class="tx-log" id="tx-log">
          <div style="text-align: center; color: var(--text-dim);">No transactions yet. Send your first payment!</div>
        </div>
      </div>

      <!-- Channel Statistics -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="value" id="total-sent">0</div>
          <div class="label">Total Sent (sats)</div>
        </div>
        <div class="stat-card">
          <div class="value" id="total-received">0</div>
          <div class="label">Total Received (sats)</div>
        </div>
        <div class="stat-card">
          <div class="value" id="tx-count">0</div>
          <div class="label">Transactions</div>
        </div>
        <div class="stat-card">
          <div class="value" id="total-fees">~0</div>
          <div class="label">Total Fees (sats)</div>
        </div>
      </div>
    </div>

    <!-- Lightning vs Bitcoin Comparison -->
    <div class="section">
      <h2>‚öñÔ∏è Lightning vs On-Chain Bitcoin</h2>
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Feature</th>
            <th>On-Chain Bitcoin</th>
            <th>Lightning Network</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Transaction Speed</strong></td>
            <td>10-60 minutes (1-6 confirmations)</td>
            <td>< 1 second <span class="checkmark">‚ö°</span></td>
          </tr>
          <tr>
            <td><strong>Transaction Fees</strong></td>
            <td>$1 - $50 (depending on network)</td>
            <td>< 1 sat (~$0.0003) <span class="checkmark">‚úì</span></td>
          </tr>
          <tr>
            <td><strong>Throughput</strong></td>
            <td>~7 transactions/second</td>
            <td>Millions of transactions/second <span class="checkmark">‚úì</span></td>
          </tr>
          <tr>
            <td><strong>Minimum Payment</strong></td>
            <td>~546 sats (dust limit)</td>
            <td>1 sat (or less) <span class="checkmark">‚úì</span></td>
          </tr>
          <tr>
            <td><strong>Privacy</strong></td>
            <td>Public on blockchain</td>
            <td>Only channel parties know <span class="checkmark">‚úì</span></td>
          </tr>
          <tr>
            <td><strong>Setup Required</strong></td>
            <td>None <span class="checkmark">‚úì</span></td>
            <td>Must open/fund channel first</td>
          </tr>
          <tr>
            <td><strong>Recipient Online?</strong></td>
            <td>No <span class="checkmark">‚úì</span></td>
            <td>Yes (or use LSP)</td>
          </tr>
          <tr>
            <td><strong>Security</strong></td>
            <td>Maximally secure <span class="checkmark">‚úì</span></td>
            <td>Secure (requires channel monitoring)</td>
          </tr>
        </tbody>
      </table>

      <div class="info-box" style="margin-top: 1.5rem;">
        <strong>üí° Best Use Cases:</strong><br>
        <strong>On-Chain:</strong> Large payments, cold storage, maximum security, settlement finality.<br>
        <strong>Lightning:</strong> Small/frequent payments, instant coffee purchases, streaming sats, gaming, tips.
      </div>
    </div>

    <!-- Socratic Questions -->
    <div class="socratic-section">
      <h3>üéì Test Your Understanding</h3>

      <div class="question">
        <strong>Q1: Why doesn't every Lightning transaction appear on the Bitcoin blockchain?</strong>
        <button class="reveal-btn" onclick="toggleAnswer('answer1')">Reveal Answer</button>
        <div class="answer" id="answer1">
          <p>
            Lightning transactions happen <strong>off-chain</strong> within payment channels. Only two transactions
            ever touch the blockchain: (1) opening the channel (funding transaction) and (2) closing the channel
            (settlement transaction). Everything in between happens instantly off-chain through signed balance updates.
          </p>
          <p style="margin-top: 0.5rem;">
            Think of it like a bar tab: you don't pay for each drink individually (on-chain), instead you open a tab
            (channel), buy many drinks (off-chain payments), and settle the final bill when leaving (channel close).
          </p>
        </div>
      </div>

      <div class="question">
        <strong>Q2: What happens if you try to send more sats than you have in your side of the channel?</strong>
        <button class="reveal-btn" onclick="toggleAnswer('answer2')">Reveal Answer</button>
        <div class="answer" id="answer2">
          <p>
            The payment will <strong>fail</strong>. Lightning channels have a fixed capacity set when opened.
            If you have 100,000 sats on your side and try to send 150,000, there simply aren't enough funds.
          </p>
          <p style="margin-top: 0.5rem;">
            <strong>Solutions:</strong>
          </p>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
            <li>Receive payments to increase your outbound capacity</li>
            <li>Close the current channel and open a new one with more funds</li>
            <li>Use multiple channels and split the payment across them</li>
            <li>Route through other nodes that have sufficient capacity</li>
          </ul>
        </div>
      </div>

      <div class="question">
        <strong>Q3: How can Lightning be "instant" if Bitcoin blocks take 10 minutes?</strong>
        <button class="reveal-btn" onclick="toggleAnswer('answer3')">Reveal Answer</button>
        <div class="answer" id="answer3">
          <p>
            Lightning doesn't wait for block confirmations because it uses <strong>cryptographic commitments</strong>
            instead of blockchain settlement. When you send a Lightning payment:
          </p>
          <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
            <li>Both parties sign a new "commitment transaction" reflecting the updated balances</li>
            <li>These signatures are cryptographically binding and enforceable on-chain if needed</li>
            <li>The payment completes in milliseconds once signatures are exchanged</li>
          </ol>
          <p style="margin-top: 0.5rem;">
            The Bitcoin blockchain acts as a <strong>settlement layer</strong> and <strong>dispute resolution mechanism</strong>,
            but doesn't need to be consulted for every payment‚Äîonly if someone tries to cheat.
          </p>
        </div>
      </div>

      <div class="question">
        <strong>Q4: What are the tradeoffs of using Lightning instead of on-chain Bitcoin?</strong>
        <button class="reveal-btn" onclick="toggleAnswer('answer4')">Reveal Answer</button>
        <div class="answer" id="answer4">
          <p><strong>Benefits:</strong></p>
          <ul style="margin-left: 1.5rem;">
            <li>‚ö° Instant transactions (< 1 second vs 10-60 minutes)</li>
            <li>üí∞ Near-zero fees (< 1 sat vs $1-$50)</li>
            <li>üìà Unlimited scalability (millions of tx/s vs 7 tx/s)</li>
            <li>üîí Better privacy (only channel parties know vs public blockchain)</li>
            <li>üí∏ Micropayments possible (1 sat minimum vs 546 sat dust limit)</li>
          </ul>
          <p style="margin-top: 1rem;"><strong>Tradeoffs:</strong></p>
          <ul style="margin-left: 1.5rem;">
            <li>üì° Both parties must be online (or use Lightning Service Provider)</li>
            <li>üîß Requires channel setup and liquidity management</li>
            <li>üëÄ Must monitor channels to prevent fraud (or use watchtowers)</li>
            <li>üí∞ Limited by channel capacity (can't send more than you have)</li>
            <li>üõ£Ô∏è Payment routing can fail if no path with sufficient liquidity exists</li>
          </ul>
          <p style="margin-top: 1rem;">
            <strong>Rule of thumb:</strong> Use Lightning for frequent small payments (coffee, tips, streaming).
            Use on-chain for large payments, cold storage, and maximum security.
          </p>
        </div>
      </div>
    </div>

    <!-- How It Works -->
    <div class="section">
      <h2>üîß How Lightning Channels Work</h2>

      <h3 style="color: var(--lightning-yellow); margin-top: 1.5rem; margin-bottom: 1rem;">Step 1: Opening a Channel</h3>
      <p style="line-height: 1.8;">
        To open a Lightning channel, you create an on-chain Bitcoin transaction that locks funds into a 2-of-2
        multisig address. Both parties must sign to spend from this address. This is the <strong>only on-chain
        transaction</strong> required to enable unlimited off-chain payments.
      </p>

      <h3 style="color: var(--lightning-yellow); margin-top: 1.5rem; margin-bottom: 1rem;">Step 2: Making Payments</h3>
      <p style="line-height: 1.8;">
        Each payment updates the channel's balance distribution. Both parties sign a new "commitment transaction"
        that represents the current state. Old states are invalidated through penalty mechanisms‚Äîif someone tries
        to broadcast an old state, they lose all their funds.
      </p>

      <h3 style="color: var(--lightning-yellow); margin-top: 1.5rem; margin-bottom: 1rem;">Step 3: Closing the Channel</h3>
      <p style="line-height: 1.8;">
        When either party wants to close the channel, the final state is broadcast to the blockchain. After a
        timeout period (for fraud checking), both parties receive their final balance. This is the <strong>second
        and final on-chain transaction</strong>.
      </p>

      <div class="warning-box" style="margin-top: 1.5rem;">
        <strong>‚ö†Ô∏è Important:</strong> Lightning is <strong>not</strong> a separate cryptocurrency or token.
        It's real Bitcoin, just moving through payment channels instead of on-chain transactions. You can close
        your channel at any time and receive your Bitcoin on-chain.
      </div>
    </div>

    <!-- Next Steps -->
    <div class="section">
      <h2>üöÄ Ready to Use Lightning?</h2>
      <p style="line-height: 1.8; margin-bottom: 1rem;">
        To start using the Lightning Network for real:
      </p>
      <ol style="line-height: 2; margin-left: 1.5rem;">
        <li><strong>Download a Lightning wallet:</strong> Phoenix, Breez, Wallet of Satoshi, or Muun</li>
        <li><strong>Fund your wallet:</strong> Send some Bitcoin to open your first channel (start small!)</li>
        <li><strong>Make a payment:</strong> Try buying something or sending a tip</li>
        <li><strong>Receive payments:</strong> Share your Lightning invoice or LNURL</li>
      </ol>

      <div class="info-box" style="margin-top: 1.5rem;">
        <strong>üí° Pro Tip:</strong> Most modern Lightning wallets handle channel management automatically.
        You don't need to manually open/close channels‚Äîjust send and receive like a normal wallet!
      </div>
    </div>
  </div>

  <script>
    // Channel state
    let yourBalance = 500000;
    let aliceBalance = 500000;
    let totalSent = 0;
    let totalReceived = 0;
    let txCount = 0;
    let txHistory = [];

    // Initialize
    updateUI();

    function sendPayment() {
      const amount = parseInt(document.getElementById('payment-amount').value);

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount!');
        return;
      }

      if (amount > yourBalance) {
        alert(`Insufficient balance! You only have ${yourBalance.toLocaleString()} sats.`);
        return;
      }

      // Update balances
      yourBalance -= amount;
      aliceBalance += amount;
      totalSent += amount;
      txCount++;

      // Add to history
      txHistory.unshift({
        type: 'send',
        amount: amount,
        timestamp: new Date().toLocaleTimeString()
      });

      updateUI();
      showSuccess(`Sent ${amount.toLocaleString()} sats to Alice ‚ö°`);
    }

    function receivePayment() {
      const amount = parseInt(document.getElementById('payment-amount').value);

      if (isNaN(amount) || amount <= 0) {
        alert('Please enter a valid amount!');
        return;
      }

      if (amount > aliceBalance) {
        alert(`Alice doesn't have enough! She only has ${aliceBalance.toLocaleString()} sats.`);
        return;
      }

      // Update balances
      aliceBalance -= amount;
      yourBalance += amount;
      totalReceived += amount;
      txCount++;

      // Add to history
      txHistory.unshift({
        type: 'receive',
        amount: amount,
        timestamp: new Date().toLocaleTimeString()
      });

      updateUI();
      showSuccess(`Received ${amount.toLocaleString()} sats from Alice ‚ö°`);
    }

    function resetChannel() {
      yourBalance = 500000;
      aliceBalance = 500000;
      totalSent = 0;
      totalReceived = 0;
      txCount = 0;
      txHistory = [];
      updateUI();
      showSuccess('Channel reset! Starting fresh with 500,000 sats each.');
    }

    function updateUI() {
      // Update balances
      document.getElementById('your-balance').textContent = yourBalance.toLocaleString();
      document.getElementById('alice-balance').textContent = aliceBalance.toLocaleString();

      // Update channel bar gradient
      const yourPercentage = (yourBalance / 1000000) * 100;
      document.getElementById('channel-bar').style.background =
        `linear-gradient(to right, #4CAF50 ${yourPercentage}%, #f7931a ${yourPercentage}%)`;

      // Update stats
      document.getElementById('total-sent').textContent = totalSent.toLocaleString();
      document.getElementById('total-received').textContent = totalReceived.toLocaleString();
      document.getElementById('tx-count').textContent = txCount;
      document.getElementById('total-fees').textContent = txCount > 0 ? `~${txCount}` : '0';

      // Update transaction log
      const txLog = document.getElementById('tx-log');
      if (txHistory.length === 0) {
        txLog.innerHTML = '<div style="text-align: center; color: var(--text-dim);">No transactions yet. Send your first payment!</div>';
      } else {
        txLog.innerHTML = txHistory.slice(0, 10).map(tx => {
          const icon = tx.type === 'send' ? '‚Üí' : '‚Üê';
          const className = tx.type;
          return `
            <div class="tx-entry ${className}">
              <span>${icon} ${tx.type === 'send' ? 'Sent' : 'Received'} ${tx.amount.toLocaleString()} sats</span>
              <span>${tx.timestamp}</span>
            </div>
          `;
        }).join('');
      }

      // Update input max value
      document.getElementById('payment-amount').max = yourBalance;
    }

    function showSuccess(message) {
      // Simple alert for now - could be replaced with toast notification
      const existingToast = document.querySelector('.toast');
      if (existingToast) existingToast.remove();

      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      toast.style.cssText = `
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, #4CAF50, #8BC34A);
        color: white;
        padding: 1rem 2rem;
        border-radius: 8px;
        box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        font-weight: bold;
        z-index: 1000;
        animation: slideIn 0.3s ease;
      `;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    function toggleAnswer(id) {
      const answer = document.getElementById(id);
      answer.classList.toggle('revealed');
    }

    // Add animation styles
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
