<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Security Dojo – Master Bitcoin Self-Custody Security</title>
  <link rel="stylesheet" href="/css/brand.css">
  <style>
    :root {
      --critical: #ef4444;
      --high: #f97316;
      --medium: #eab308;
      --low: #84cc16;
      --success: #22c55e;
      --bg-darker: #0a0a0a;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: var(--font-sans);
      background: var(--color-bg);
      color: var(--color-text);
      line-height: 1.6;
    }

    header {
      position: sticky;
      top: 0;
      background: var(--color-surface);
      border-bottom: 2px solid var(--color-brand);
      padding: 1rem 1.5rem;
      z-index: 100;
      backdrop-filter: blur(10px);
    }

    header .container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .belt-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 1rem;
      background: rgba(255, 152, 0, 0.15);
      border: 1px solid var(--color-brand);
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    a { color: var(--color-brand); text-decoration: none; transition: opacity 0.2s; }
    a:hover { opacity: 0.8; }

    .hero {
      background: linear-gradient(135deg, rgba(247, 147, 26, 0.1) 0%, rgba(247, 147, 26, 0.05) 100%);
      padding: 4rem 1.5rem;
      text-align: center;
      border-bottom: 1px solid var(--color-border);
    }

    .hero h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      background: var(--gradient-brand);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle {
      font-size: 1.5rem;
      color: var(--color-muted);
      margin-bottom: 1rem;
    }

    .hero p {
      font-size: 1.1rem;
      color: var(--color-muted);
      max-width: 700px;
      margin: 0 auto 2.5rem;
      line-height: 1.8;
    }

    .warning-banner {
      background: rgba(239, 68, 68, 0.1);
      border: 2px solid var(--critical);
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 800px;
      margin: 2rem auto;
      text-align: left;
    }

    .warning-banner h3 {
      color: var(--critical);
      margin-bottom: 0.5rem;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      max-width: 900px;
      margin: 3rem auto 2rem;
    }

    .stat-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--color-brand);
      display: block;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: var(--color-muted);
      font-size: 0.9rem;
    }

    .cta-button {
      background: var(--gradient-brand);
      border: none;
      color: #fff;
      font-weight: 600;
      padding: 1.2rem 2.5rem;
      border-radius: 999px;
      cursor: pointer;
      font-size: 1.2rem;
      transition: transform 0.2s, box-shadow 0.2s;
      display: inline-block;
    }

    .cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(247, 147, 26, 0.3);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 3rem 1.5rem;
    }

    .section {
      margin-bottom: 4rem;
    }

    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-header h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .section-header p {
      color: var(--color-muted);
      font-size: 1.1rem;
      max-width: 700px;
      margin: 0 auto;
    }

    /* Assessment Form */
    .assessment-form {
      background: var(--color-surface);
      border: 2px solid var(--color-border);
      border-radius: 20px;
      padding: 3rem;
      max-width: 900px;
      margin: 0 auto;
    }

    .form-section {
      margin-bottom: 3rem;
    }

    .form-section h3 {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: var(--color-brand);
    }

    .form-group {
      margin-bottom: 2rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.75rem;
      font-weight: 600;
      font-size: 1.1rem;
    }

    .form-group .help-text {
      color: var(--color-muted);
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    .radio-group {
      display: grid;
      gap: 1rem;
    }

    .radio-option {
      background: var(--bg-darker);
      border: 2px solid var(--color-border);
      border-radius: 12px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .radio-option:hover {
      border-color: var(--color-brand);
      background: rgba(247, 147, 26, 0.05);
    }

    .radio-option input[type="radio"] {
      position: absolute;
      opacity: 0;
    }

    .radio-option input[type="radio"]:checked + .radio-content {
      color: var(--color-brand);
    }

    .radio-option input[type="radio"]:checked ~ .check-indicator {
      opacity: 1;
      background: var(--color-brand);
    }

    .radio-content {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .radio-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .radio-text {
      flex: 1;
    }

    .radio-text strong {
      display: block;
      margin-bottom: 0.25rem;
      font-size: 1.1rem;
    }

    .radio-text span {
      color: var(--color-muted);
      font-size: 0.9rem;
    }

    .check-indicator {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid var(--color-border);
      opacity: 0.3;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .check-indicator::after {
      content: '✓';
      color: white;
      font-weight: 700;
    }

    .checkbox-group {
      display: grid;
      gap: 1rem;
    }

    .checkbox-option {
      background: var(--bg-darker);
      border: 2px solid var(--color-border);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .checkbox-option:hover {
      border-color: var(--color-brand);
    }

    .checkbox-option input[type="checkbox"] {
      width: 24px;
      height: 24px;
      cursor: pointer;
    }

    .submit-button {
      background: var(--gradient-brand);
      border: none;
      color: #fff;
      font-weight: 600;
      padding: 1rem 3rem;
      border-radius: 999px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.2s;
      display: block;
      margin: 2rem auto 0;
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(247, 147, 26, 0.3);
    }

    /* Results Dashboard */
    .results-dashboard {
      display: none;
    }

    .score-card {
      background: var(--color-surface);
      border-radius: 20px;
      padding: 3rem;
      margin-bottom: 3rem;
      border: 2px solid var(--color-border);
      text-align: center;
    }

    .score-visual {
      position: relative;
      width: 250px;
      height: 250px;
      margin: 0 auto 2rem;
    }

    .score-circle {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(
        var(--color-brand) 0deg,
        var(--color-brand) var(--score-angle, 0deg),
        var(--color-border) var(--score-angle, 0deg)
      );
      display: flex;
      align-items: center;
      justify-content: center;
      animation: rotateIn 1s ease-out;
    }

    @keyframes rotateIn {
      from { transform: rotate(0deg); opacity: 0; }
      to { transform: rotate(360deg); opacity: 1; }
    }

    .score-inner {
      width: 85%;
      height: 85%;
      border-radius: 50%;
      background: var(--color-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .score-number {
      font-size: 5rem;
      font-weight: 700;
      line-height: 1;
    }

    .score-grade {
      font-size: 1.5rem;
      color: var(--color-muted);
      margin-top: 0.5rem;
    }

    .score-details {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 2rem;
    }

    .score-detail {
      text-align: center;
    }

    .score-detail-number {
      font-size: 2rem;
      font-weight: 700;
      display: block;
      margin-bottom: 0.5rem;
    }

    .score-detail-label {
      color: var(--color-muted);
      font-size: 0.9rem;
    }

    /* Training Stations */
    .stations-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }

    .station-card {
      background: var(--color-surface);
      border: 2px solid var(--color-border);
      border-radius: 20px;
      padding: 2rem;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .station-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--gradient-brand);
      transform: scaleX(0);
      transition: transform 0.3s;
    }

    .station-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: var(--color-brand);
    }

    .station-card:hover::before {
      transform: scaleX(1);
    }

    .station-card.completed {
      border-color: var(--success);
    }

    .station-card.completed::before {
      background: var(--success);
      transform: scaleX(1);
    }

    .station-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      display: block;
    }

    .station-title {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .station-description {
      color: var(--color-muted);
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    .station-meta {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .station-badge {
      padding: 0.4rem 0.8rem;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .badge-difficulty {
      background: rgba(234, 179, 8, 0.2);
      color: var(--medium);
    }

    .badge-time {
      background: rgba(132, 204, 22, 0.2);
      color: var(--low);
    }

    .badge-interactive {
      background: rgba(247, 147, 26, 0.2);
      color: var(--color-brand);
    }

    .station-progress {
      width: 100%;
      height: 6px;
      background: var(--color-border);
      border-radius: 999px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .station-progress-fill {
      height: 100%;
      background: var(--gradient-brand);
      transition: width 0.5s;
    }

    .station-status {
      color: var(--color-muted);
      font-size: 0.9rem;
    }

    .station-button {
      background: var(--gradient-brand);
      border: none;
      color: #fff;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 999px;
      cursor: pointer;
      width: 100%;
      transition: all 0.2s;
    }

    .station-button:hover {
      transform: translateX(5px);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      overflow-y: auto;
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      max-width: 1200px;
      margin: 2rem auto;
      background: var(--color-bg);
      border-radius: 20px;
      padding: 3rem;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      background: var(--color-surface);
      border: 2px solid var(--color-border);
      color: var(--color-text);
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .modal-close:hover {
      background: var(--color-brand);
      border-color: var(--color-brand);
      color: white;
    }

    .modal-header {
      margin-bottom: 2rem;
    }

    .modal-header h2 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .modal-header p {
      color: var(--color-muted);
      font-size: 1.1rem;
    }

    .modal-section {
      margin-bottom: 3rem;
    }

    .modal-section h3 {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: var(--color-brand);
    }

    /* Interactive Elements */
    .scenario-box {
      background: var(--color-surface);
      border: 2px solid var(--color-border);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .scenario-question {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .scenario-options {
      display: grid;
      gap: 1rem;
    }

    .scenario-option {
      background: var(--bg-darker);
      border: 2px solid var(--color-border);
      border-radius: 8px;
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .scenario-option:hover {
      border-color: var(--color-brand);
    }

    .scenario-option.correct {
      border-color: var(--success);
      background: rgba(34, 197, 94, 0.1);
    }

    .scenario-option.incorrect {
      border-color: var(--critical);
      background: rgba(239, 68, 68, 0.1);
    }

    .scenario-feedback {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: 8px;
      display: none;
    }

    .scenario-feedback.show {
      display: block;
    }

    .scenario-feedback.correct {
      background: rgba(34, 197, 94, 0.1);
      border: 2px solid var(--success);
    }

    .scenario-feedback.incorrect {
      background: rgba(239, 68, 68, 0.1);
      border: 2px solid var(--critical);
    }

    .simulator-box {
      background: var(--bg-darker);
      border: 2px solid var(--color-border);
      border-radius: 16px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .simulator-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .simulator-display {
      background: var(--color-surface);
      border-radius: 12px;
      padding: 2rem;
      min-height: 200px;
    }

    .code-block {
      background: #1a1a1a;
      border: 1px solid var(--color-border);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .code-block code {
      color: #4ade80;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .resource-card {
      background: var(--color-surface);
      border: 2px solid var(--color-border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.2s;
    }

    .resource-card:hover {
      border-color: var(--color-brand);
    }

    .resource-info h4 {
      margin-bottom: 0.5rem;
    }

    .resource-info p {
      color: var(--color-muted);
      font-size: 0.9rem;
    }

    .resource-link {
      background: var(--gradient-brand);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero h1 { font-size: 2rem; }
      .hero-subtitle { font-size: 1.2rem; }
      .stats-grid { grid-template-columns: 1fr; }
      .stations-grid { grid-template-columns: 1fr; }
      .score-details { grid-template-columns: 1fr; }
      .modal-content { padding: 2rem 1rem; margin: 1rem; }
    }

    /* Loading */
    .loading {
      text-align: center;
      padding: 3rem;
    }

    .spinner {
      border: 3px solid var(--color-border);
      border-top-color: var(--color-brand);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="/interactive-demos/">← Back to Demos</a>
      <div class="belt-badge">
        <span id="belt-rank">🥋 Start Training</span>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero" id="hero-section">
    <h1>🥋 Security Dojo</h1>
    <p class="hero-subtitle">Master Bitcoin Self-Custody Security</p>
    <p>
      Stop reading about security. Start practicing it.<br/>
      Get your personalized security assessment, then train through hands-on scenarios,
      real attack simulations, and practical exercises used by security professionals.
    </p>

    <div class="warning-banner">
      <h3>⚠️ Real Money, Real Risk</h3>
      <p>
        Over $4.5 billion in Bitcoin has been stolen from individuals in 2024 alone.
        The most common cause? User error, not protocol failure. Poor key management,
        weak OPSEC, and lack of security knowledge.
      </p>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-number">$15B+</span>
        <span class="stat-label">Lost to exchange hacks</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">20%</span>
        <span class="stat-label">Of all BTC is lost forever</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">$5M</span>
        <span class="stat-label">Average wrench attack loss</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">73%</span>
        <span class="stat-label">Users fail basic OPSEC tests</span>
      </div>
    </div>

    <button class="cta-button" id="btn-start">
      🎯 Start Security Assessment
    </button>
  </section>

  <!-- Assessment Form -->
  <div class="container" id="assessment-section" style="display: none;">
    <div class="section-header">
      <h2>Security Assessment</h2>
      <p>Answer honestly about your current Bitcoin security setup. Your responses remain private and determine your personalized training path.</p>
    </div>

    <form class="assessment-form" id="assessment-form">
      <!-- Wallet Setup -->
      <div class="form-section">
        <h3>💼 Your Wallet Setup</h3>

        <div class="form-group">
          <label>What type of wallet do you primarily use?</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="wallet_type" value="exchange" required>
              <div class="radio-content">
                <span class="radio-icon">🏦</span>
                <div class="radio-text">
                  <strong>Exchange/Custodial</strong>
                  <span>Coinbase, Binance, etc. (They hold your keys)</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="wallet_type" value="software_hot">
              <div class="radio-content">
                <span class="radio-icon">📱</span>
                <div class="radio-text">
                  <strong>Software Wallet (Hot)</strong>
                  <span>Mobile/desktop app with keys on device</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="wallet_type" value="hardware">
              <div class="radio-content">
                <span class="radio-icon">🔒</span>
                <div class="radio-text">
                  <strong>Hardware Wallet</strong>
                  <span>Ledger, Trezor, Coldcard, etc.</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="wallet_type" value="multisig">
              <div class="radio-content">
                <span class="radio-icon">🔐</span>
                <div class="radio-text">
                  <strong>Multi-Signature Wallet</strong>
                  <span>Requires multiple keys to spend</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="wallet_type" value="none">
              <div class="radio-content">
                <span class="radio-icon">🆕</span>
                <div class="radio-text">
                  <strong>Don't have Bitcoin yet</strong>
                  <span>Learning before buying</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label>How much Bitcoin are you protecting? (USD equivalent)</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="amount" value="none" required>
              <div class="radio-content">
                <span class="radio-icon">🟢</span>
                <div class="radio-text">
                  <strong>None or under $500</strong>
                  <span>Learning or small amounts</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="amount" value="small">
              <div class="radio-content">
                <span class="radio-icon">🟡</span>
                <div class="radio-text">
                  <strong>$500 - $5,000</strong>
                  <span>Getting started</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="amount" value="medium">
              <div class="radio-content">
                <span class="radio-icon">🟠</span>
                <div class="radio-text">
                  <strong>$5,000 - $50,000</strong>
                  <span>Serious stack</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="amount" value="large">
              <div class="radio-content">
                <span class="radio-icon">🔴</span>
                <div class="radio-text">
                  <strong>Over $50,000</strong>
                  <span>High-value holdings</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>
          </div>
        </div>
      </div>

      <!-- Backup Strategy -->
      <div class="form-section">
        <h3>💾 Backup & Recovery</h3>

        <div class="form-group">
          <label>How is your seed phrase backed up?</label>
          <p class="help-text">Select all that apply</p>
          <div class="checkbox-group">
            <label class="checkbox-option">
              <input type="checkbox" name="backup" value="paper">
              <span>📝 Written on paper</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="backup" value="metal">
              <span>🔩 Stamped on metal plate</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="backup" value="encrypted">
              <span>🔐 Encrypted digital backup</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="backup" value="memorized">
              <span>🧠 Memorized only</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="backup" value="multiple">
              <span>📍 Multiple locations (offsite)</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="backup" value="none">
              <span>❌ No backup / Don't have seed phrase</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label>Have you tested recovering your wallet from backup?</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="tested_recovery" value="yes" required>
              <div class="radio-content">
                <span class="radio-icon">✅</span>
                <div class="radio-text">
                  <strong>Yes, successfully</strong>
                  <span>I've verified I can recover</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="tested_recovery" value="no">
              <div class="radio-content">
                <span class="radio-icon">❌</span>
                <div class="radio-text">
                  <strong>No, never tested</strong>
                  <span>Haven't tried recovery</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="tested_recovery" value="na">
              <div class="radio-content">
                <span class="radio-icon">➖</span>
                <div class="radio-text">
                  <strong>Not applicable</strong>
                  <span>Don't have personal wallet</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>
          </div>
        </div>
      </div>

      <!-- Security Practices -->
      <div class="form-section">
        <h3>🛡️ Security Practices</h3>

        <div class="form-group">
          <label>Which security measures do you currently use?</label>
          <p class="help-text">Select all that apply</p>
          <div class="checkbox-group">
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="2fa">
              <span>🔑 Two-factor authentication (2FA)</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="passphrase">
              <span>🔐 BIP39 passphrase (25th word)</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="dedicated">
              <span>💻 Dedicated device for Bitcoin</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="verify_addresses">
              <span>🔍 Always verify addresses on hardware device</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="coin_control">
              <span>🎯 Use coin control for privacy</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="tor">
              <span>🧅 Run node/wallet over Tor</span>
            </label>
            <label class="checkbox-option">
              <input type="checkbox" name="security" value="none">
              <span>❌ None of these</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label>Have you ever shared that you own Bitcoin publicly?</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="public_disclosure" value="social" required>
              <div class="radio-content">
                <span class="radio-icon">📢</span>
                <div class="radio-text">
                  <strong>Yes, on social media</strong>
                  <span>Posted about Bitcoin holdings online</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="public_disclosure" value="friends">
              <div class="radio-content">
                <span class="radio-icon">👥</span>
                <div class="radio-text">
                  <strong>Only told close friends/family</strong>
                  <span>Limited circle knows</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="public_disclosure" value="secret">
              <div class="radio-content">
                <span class="radio-icon">🤐</span>
                <div class="radio-text">
                  <strong>Kept it completely private</strong>
                  <span>Nobody knows</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>
          </div>
        </div>
      </div>

      <!-- Knowledge Check -->
      <div class="form-section">
        <h3>🧠 Security Knowledge</h3>

        <div class="form-group">
          <label>Quick scenario: You receive an email saying "Your Bitcoin wallet will be closed unless you verify." What do you do?</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="phishing_test" value="click" required>
              <div class="radio-content">
                <span class="radio-icon">❌</span>
                <div class="radio-text">
                  <strong>Click the link to verify</strong>
                  <span>Better safe than sorry</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="phishing_test" value="ignore">
              <div class="radio-content">
                <span class="radio-icon">✅</span>
                <div class="radio-text">
                  <strong>Delete it - it's a scam</strong>
                  <span>Self-custody wallets don't get "closed"</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>

            <label class="radio-option">
              <input type="radio" name="phishing_test" value="unsure">
              <div class="radio-content">
                <span class="radio-icon">❓</span>
                <div class="radio-text">
                  <strong>Not sure</strong>
                  <span>Need to learn more</span>
                </div>
              </div>
              <div class="check-indicator"></div>
            </label>
          </div>
        </div>
      </div>

      <button type="submit" class="submit-button">
        📊 Calculate My Security Score
      </button>
    </form>
  </div>

  <!-- Loading State -->
  <div class="container" id="loading-section" style="display: none;">
    <div class="loading">
      <div class="spinner"></div>
      <p>Analyzing your security posture with AI...</p>
      <p style="color: var(--color-muted); margin-top: 1rem;">
        Comparing against 10,000+ real-world security breaches
      </p>
    </div>
  </div>

  <!-- Results Dashboard -->
  <div class="container" id="results-section" class="results-dashboard">
    <!-- Score Card -->
    <div class="score-card">
      <div class="score-visual">
        <div class="score-circle" id="score-circle">
          <div class="score-inner">
            <div class="score-number" id="score-number">0</div>
            <div class="score-grade" id="score-grade">F</div>
          </div>
        </div>
      </div>
      <h2>Your Security Score</h2>
      <p id="score-message" style="color: var(--color-muted); font-size: 1.1rem; margin: 1rem 0;"></p>

      <div class="score-details">
        <div class="score-detail">
          <span class="score-detail-number" style="color: var(--critical);" id="critical-count">0</span>
          <span class="score-detail-label">Critical Risks</span>
        </div>
        <div class="score-detail">
          <span class="score-detail-number" style="color: var(--high);" id="high-count">0</span>
          <span class="score-detail-label">High Priority</span>
        </div>
        <div class="score-detail">
          <span class="score-detail-number" style="color: var(--medium);" id="medium-count">0</span>
          <span class="score-detail-label">Medium Priority</span>
        </div>
      </div>
    </div>

    <!-- Training Stations -->
    <div class="section">
      <div class="section-header">
        <h2>🎯 Your Training Path</h2>
        <p>Complete these interactive stations to master Bitcoin security. Each includes hands-on exercises, real attack simulations, and practical tools.</p>
      </div>

      <div class="stations-grid" id="stations-grid">
        <!-- Stations will be dynamically loaded based on assessment -->
      </div>
    </div>
  </div>

  <!-- Station Modal -->
  <div class="modal" id="station-modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">×</button>
      <div id="modal-body"></div>
    </div>
  </div>

  <script src="../ai-agents/advanced-agents.js"></script>
  <script>
    // Initialize
    const auditor = new SecurityAuditAgent();
    let assessmentData = null;
    let userProgress = {
      stations: {},
      completedExercises: [],
      beltRank: 'White Belt'
    };

    // Load saved progress
    const savedProgress = localStorage.getItem('securityDojoProgress');
    if (savedProgress) {
      userProgress = JSON.parse(savedProgress);
      document.getElementById('belt-rank').textContent = `🥋 ${userProgress.beltRank}`;
    }

    // Start assessment
    document.getElementById('btn-start').addEventListener('click', () => {
      document.getElementById('hero-section').style.display = 'none';
      document.getElementById('assessment-section').style.display = 'block';
      window.scrollTo(0, 0);
    });

    // Handle form submission
    document.getElementById('assessment-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      // Collect form data
      const formData = new FormData(e.target);
      const responses = {
        wallet_type: formData.get('wallet_type'),
        amount: formData.get('amount'),
        backup: formData.getAll('backup'),
        tested_recovery: formData.get('tested_recovery'),
        security: formData.getAll('security'),
        public_disclosure: formData.get('public_disclosure'),
        phishing_test: formData.get('phishing_test')
      };

      // Show loading
      document.getElementById('assessment-section').style.display = 'none';
      document.getElementById('loading-section').style.display = 'block';

      try {
        // Calculate security score based on responses
        const score = calculateSecurityScore(responses);

        // Get AI-powered recommendations
        await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate AI analysis

        // Display results
        displayResults(score, responses);

        document.getElementById('loading-section').style.display = 'none';
        document.getElementById('results-section').style.display = 'block';
        window.scrollTo(0, 0);
      } catch (error) {
        console.error('Assessment failed:', error);
        alert('Assessment failed. Please try again.');
        document.getElementById('loading-section').style.display = 'none';
        document.getElementById('assessment-section').style.display = 'block';
      }
    });

    function calculateSecurityScore(responses) {
      let score = 0;
      let issues = {
        critical: [],
        high: [],
        medium: []
      };

      // Wallet type scoring
      if (responses.wallet_type === 'hardware') score += 30;
      else if (responses.wallet_type === 'multisig') score += 40;
      else if (responses.wallet_type === 'software_hot') score += 15;
      else if (responses.wallet_type === 'exchange') {
        score += 5;
        issues.critical.push('exchange_custody');
      }

      // Backup scoring
      if (responses.backup.includes('metal')) score += 20;
      else if (responses.backup.includes('paper')) score += 10;

      if (responses.backup.includes('multiple')) score += 15;
      else issues.high.push('single_location');

      if (responses.backup.includes('none')) {
        score -= 20;
        issues.critical.push('no_backup');
      }

      // Recovery test
      if (responses.tested_recovery === 'yes') score += 15;
      else if (responses.tested_recovery === 'no') issues.high.push('untested_recovery');

      // Security measures
      const securityCount = responses.security.length;
      score += Math.min(securityCount * 5, 20);

      if (!responses.security.includes('2fa')) issues.medium.push('no_2fa');
      if (!responses.security.includes('verify_addresses')) issues.high.push('no_verification');

      // Public disclosure (OPSEC)
      if (responses.public_disclosure === 'secret') score += 10;
      else if (responses.public_disclosure === 'social') {
        score -= 10;
        issues.high.push('public_disclosure');
      }

      // Phishing test
      if (responses.phishing_test === 'ignore') score += 10;
      else if (responses.phishing_test === 'click') {
        score -= 15;
        issues.critical.push('phishing_vulnerable');
      }

      // Ensure score is between 0-100
      score = Math.max(0, Math.min(100, score));

      return {
        score,
        grade: getGrade(score),
        issues,
        responses
      };
    }

    function getGrade(score) {
      if (score >= 90) return 'A+';
      if (score >= 80) return 'A';
      if (score >= 70) return 'B';
      if (score >= 60) return 'C';
      if (score >= 50) return 'D';
      return 'F';
    }

    function displayResults(scoreData, responses) {
      assessmentData = scoreData;

      // Update score display
      const scoreAngle = (scoreData.score / 100) * 360;
      document.getElementById('score-circle').style.setProperty('--score-angle', scoreAngle + 'deg');
      document.getElementById('score-number').textContent = scoreData.score;
      document.getElementById('score-grade').textContent = scoreData.grade;

      // Update counts
      document.getElementById('critical-count').textContent = scoreData.issues.critical.length;
      document.getElementById('high-count').textContent = scoreData.issues.high.length;
      document.getElementById('medium-count').textContent = scoreData.issues.medium.length;

      // Set message
      let message = '';
      if (scoreData.score >= 80) {
        message = 'Excellent security! Continue training to maintain your edge.';
      } else if (scoreData.score >= 60) {
        message = 'Good foundation, but critical gaps remain. Complete recommended training.';
      } else {
        message = 'Your Bitcoin is at significant risk. Start training immediately.';
      }
      document.getElementById('score-message').textContent = message;

      // Load personalized training stations
      loadTrainingStations(scoreData, responses);

      // Update belt rank
      updateBeltRank(scoreData.score);
    }

    function loadTrainingStations(scoreData, responses) {
      const stations = [
        {
          id: 'phishing',
          icon: '🎣',
          title: 'Phishing Defense Dojo',
          description: 'Test your ability to spot fake wallet sites, phishing emails, and social engineering attacks using real examples from 2024.',
          difficulty: 'Beginner',
          time: '15 min',
          interactive: true,
          priority: scoreData.issues.critical.includes('phishing_vulnerable') ? 'critical' : 'high'
        },
        {
          id: 'backup',
          icon: '💾',
          title: 'Backup & Recovery Lab',
          description: 'Practice seed phrase backup strategies, test recovery procedures, and learn the 3-2-1 rule with hands-on exercises.',
          difficulty: 'Beginner',
          time: '20 min',
          interactive: true,
          priority: scoreData.issues.critical.includes('no_backup') ? 'critical' : 'high'
        },
        {
          id: 'multisig',
          icon: '🔐',
          title: 'Multi-Sig Workshop',
          description: 'Set up a 2-of-3 multisig wallet on testnet, practice signing, and simulate key compromise scenarios.',
          difficulty: 'Intermediate',
          time: '30 min',
          interactive: true,
          priority: responses.wallet_type !== 'multisig' && responses.amount !== 'none' ? 'high' : 'medium'
        },
        {
          id: 'hardware',
          icon: '🔒',
          title: 'Hardware Wallet Masterclass',
          description: 'Compare hardware wallets, understand secure elements, verify firmware, and learn about supply chain attacks.',
          difficulty: 'Intermediate',
          time: '25 min',
          interactive: true,
          priority: responses.wallet_type !== 'hardware' && responses.wallet_type !== 'multisig' ? 'high' : 'medium'
        },
        {
          id: 'opsec',
          icon: '🕵️',
          title: 'OPSEC & Privacy Training',
          description: 'Master operational security through real scenarios: public disclosure, physical threats, address reuse, and coin control.',
          difficulty: 'Intermediate',
          time: '20 min',
          interactive: true,
          priority: scoreData.issues.high.includes('public_disclosure') ? 'high' : 'medium'
        },
        {
          id: 'attacks',
          icon: '⚔️',
          title: 'Attack Vector Simulator',
          description: 'Experience clipboard hijacking, malware attacks, and SIM swaps in a safe environment. Learn how to defend.',
          difficulty: 'Advanced',
          time: '25 min',
          interactive: true,
          priority: 'medium'
        },
        {
          id: 'inheritance',
          icon: '👨‍👩‍👧‍👦',
          title: 'Estate Planning & Inheritance',
          description: 'Create a Bitcoin inheritance plan, practice dead man\'s switch concepts, and secure your family\'s financial future.',
          difficulty: 'Advanced',
          time: '30 min',
          interactive: true,
          priority: responses.amount === 'large' ? 'high' : 'low'
        }
      ];

      // Sort by priority
      const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
      stations.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);

      // Render stations
      const grid = document.getElementById('stations-grid');
      grid.innerHTML = '';

      stations.forEach(station => {
        const progress = userProgress.stations[station.id] || 0;
        const completed = progress >= 100;

        const card = document.createElement('div');
        card.className = `station-card ${completed ? 'completed' : ''}`;
        card.innerHTML = `
          <span class="station-icon">${station.icon}</span>
          <h3 class="station-title">${station.title}</h3>
          <p class="station-description">${station.description}</p>
          <div class="station-meta">
            <span class="station-badge badge-difficulty">${station.difficulty}</span>
            <span class="station-badge badge-time">⏱️ ${station.time}</span>
            ${station.interactive ? '<span class="station-badge badge-interactive">🎮 Interactive</span>' : ''}
          </div>
          <div class="station-progress">
            <div class="station-progress-fill" style="width: ${progress}%"></div>
          </div>
          <p class="station-status">${completed ? '✅ Completed' : `${progress}% Complete`}</p>
          <button class="station-button" onclick="openStation('${station.id}')">
            ${completed ? 'Review Training' : 'Start Training'} →
          </button>
        `;
        grid.appendChild(card);
      });
    }

    window.openStation = function(stationId) {
      const modal = document.getElementById('station-modal');
      const modalBody = document.getElementById('modal-body');

      // Load station content based on ID
      const content = getStationContent(stationId);
      modalBody.innerHTML = content;

      modal.style.display = 'block';
      document.body.style.overflow = 'hidden';
    };

    window.closeModal = function() {
      document.getElementById('station-modal').style.display = 'none';
      document.body.style.overflow = 'auto';
    };

    function getStationContent(stationId) {
      // Station content templates with interactive exercises
      const stations = {
        phishing: `
          <div class="modal-header">
            <h2>🎣 Phishing Defense Dojo</h2>
            <p>Test your ability to spot scams. These are based on real attacks from 2024.</p>
          </div>

          <div class="modal-section">
            <h3>Exercise 1: Spot the Fake</h3>
            <div class="scenario-box">
              <p class="scenario-question">You receive this email. Is it legitimate?</p>
              <div class="code-block">
                <code>
From: security@metamask-support.com<br/>
Subject: ⚠️ Action Required: Wallet Verification<br/>
<br/>
Your MetaMask wallet requires immediate verification due to suspicious activity.<br/>
Click here to verify: https://metamask-verify.secure-login.com<br/>
<br/>
Failure to verify within 24 hours will result in permanent account closure.<br/>
                </code>
              </div>
              <div class="scenario-options">
                <button class="scenario-option" onclick="checkPhishing(1, false, this)">
                  ✅ Legitimate - Better verify
                </button>
                <button class="scenario-option" onclick="checkPhishing(1, true, this)">
                  ❌ Phishing Attack
                </button>
              </div>
              <div class="scenario-feedback" id="feedback-1"></div>
            </div>

            <h3>Exercise 2: Malicious Website</h3>
            <div class="scenario-box">
              <p class="scenario-question">Which of these is the REAL Ledger website?</p>
              <div class="scenario-options">
                <button class="scenario-option" onclick="checkPhishing(2, false, this)">
                  https://ledger-live.com
                </button>
                <button class="scenario-option" onclick="checkPhishing(2, true, this)">
                  https://www.ledger.com
                </button>
                <button class="scenario-option" onclick="checkPhishing(2, false, this)">
                  https://ledger.io
                </button>
                <button class="scenario-option" onclick="checkPhishing(2, false, this)">
                  https://ledger-wallet.com
                </button>
              </div>
              <div class="scenario-feedback" id="feedback-2"></div>
            </div>

            <h3>🛡️ Real-World Defense</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Phishing Database</h4>
                <p>Check URLs against known phishing sites</p>
              </div>
              <a href="https://cryptoscamdb.org/" target="_blank" class="resource-link">Visit Site</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>URL Scanner</h4>
                <p>Analyze suspicious links before clicking</p>
              </div>
              <a href="https://www.virustotal.com/" target="_blank" class="resource-link">Visit Site</a>
            </div>
          </div>
        `,

        backup: `
          <div class="modal-header">
            <h2>💾 Backup & Recovery Lab</h2>
            <p>Learn to create bulletproof backups and recover from disaster scenarios.</p>
          </div>

          <div class="modal-section">
            <h3>The 3-2-1 Backup Rule</h3>
            <p style="margin-bottom: 2rem;">
              <strong style="color: var(--color-brand);">3</strong> copies of your seed phrase<br/>
              <strong style="color: var(--color-brand);">2</strong> different media types (metal + encrypted digital)<br/>
              <strong style="color: var(--color-brand);">1</strong> offsite location
            </p>

            <div class="simulator-box">
              <h4>🔥 Disaster Scenarios</h4>
              <p style="margin-bottom: 1.5rem;">Can you recover your Bitcoin in these situations?</p>

              <div style="display: grid; gap: 1rem;">
                <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px;">
                  <strong style="color: var(--critical);">Scenario 1: House Fire</strong><br/>
                  <span style="color: var(--color-muted);">
                    Your home burns down. Paper backup destroyed. Can you recover?
                  </span>
                  <br/><br/>
                  <strong style="color: var(--success);">✅ Solution:</strong>
                  <span style="color: var(--color-muted);">
                    Metal backup stored at parents' house (offsite) allows full recovery
                  </span>
                </div>

                <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px;">
                  <strong style="color: var(--critical);">Scenario 2: Sudden Death</strong><br/>
                  <span style="color: var(--color-muted);">
                    You die unexpectedly. Can your family access your Bitcoin?
                  </span>
                  <br/><br/>
                  <strong style="color: var(--success);">✅ Solution:</strong>
                  <span style="color: var(--color-muted);">
                    Sealed envelope with instructions in safe deposit box + lawyer has access code
                  </span>
                </div>

                <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px;">
                  <strong style="color: var(--critical);">Scenario 3: Device Failure</strong><br/>
                  <span style="color: var(--color-muted);">
                    Hardware wallet breaks. Can you restore on new device?
                  </span>
                  <br/><br/>
                  <strong style="color: var(--success);">✅ Solution:</strong>
                  <span style="color: var(--color-muted);">
                    Seed phrase backup allows restoration on any BIP39 compatible wallet
                  </span>
                </div>
              </div>
            </div>

            <h3>🔩 Metal Backup Solutions</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Blockplate</h4>
                <p>Stainless steel seed phrase storage</p>
              </div>
              <a href="https://www.blockplate.com/" target="_blank" class="resource-link">Learn More</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Coldbit Steel</h4>
                <p>Military-grade metal seed backup</p>
              </div>
              <a href="https://coldbit.com/" target="_blank" class="resource-link">Learn More</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Billfodl</h4>
                <p>Titanium seed phrase backup device</p>
              </div>
              <a href="https://privacypros.io/products/the-billfodl/" target="_blank" class="resource-link">Learn More</a>
            </div>

            <h3>✅ Recovery Test Checklist</h3>
            <div style="background: var(--color-surface); padding: 2rem; border-radius: 12px; margin-top: 1rem;">
              <p style="margin-bottom: 1rem;">Complete these steps with a SMALL TEST WALLET:</p>
              <ol style="line-height: 2; margin-left: 1.5rem;">
                <li>Create new wallet with small amount ($10)</li>
                <li>Write down seed phrase</li>
                <li>Delete the wallet</li>
                <li>Restore from seed phrase</li>
                <li>Verify funds are accessible</li>
              </ol>
              <p style="color: var(--high); margin-top: 1rem;">
                ⚠️ NEVER test recovery with your main wallet until you're confident!
              </p>
            </div>
          </div>
        `,

        multisig: `
          <div class="modal-header">
            <h2>🔐 Multi-Sig Workshop</h2>
            <p>Learn to create and manage multi-signature wallets for maximum security.</p>
          </div>

          <div class="modal-section">
            <h3>What is Multi-Sig?</h3>
            <p style="margin-bottom: 2rem;">
              Multi-signature wallets require multiple private keys to authorize a transaction.
              A 2-of-3 setup means you have 3 keys, but only need 2 to spend. This protects against:
            </p>
            <ul style="margin-left: 2rem; line-height: 2; margin-bottom: 2rem;">
              <li>✅ Single key theft (attacker needs 2 keys)</li>
              <li>✅ Single key loss (you still have 2 backups)</li>
              <li>✅ Wrench attacks (you can't be forced to sign alone)</li>
              <li>✅ Internal fraud (requires collusion)</li>
            </ul>

            <div class="simulator-box">
              <h4>🎮 Interactive Multi-Sig Simulator</h4>
              <p style="margin-bottom: 1.5rem;">Simulate creating a 2-of-3 multi-sig wallet:</p>

              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 2rem;">
                <div id="key-1" style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px; text-align: center; border: 2px solid var(--color-border); cursor: pointer;" onclick="toggleKey(1)">
                  <div style="font-size: 3rem;">🔑</div>
                  <strong>Key 1</strong><br/>
                  <span style="color: var(--color-muted); font-size: 0.9rem;">Hardware Wallet</span>
                </div>
                <div id="key-2" style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px; text-align: center; border: 2px solid var(--color-border); cursor: pointer;" onclick="toggleKey(2)">
                  <div style="font-size: 3rem;">🔑</div>
                  <strong>Key 2</strong><br/>
                  <span style="color: var(--color-muted); font-size: 0.9rem;">Mobile Device</span>
                </div>
                <div id="key-3" style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px; text-align: center; border: 2px solid var(--color-border); cursor: pointer;" onclick="toggleKey(3)">
                  <div style="font-size: 3rem;">🔑</div>
                  <strong>Key 3</strong><br/>
                  <span style="color: var(--color-muted); font-size: 0.9rem;">Backup Location</span>
                </div>
              </div>

              <div style="text-align: center; padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border-radius: 12px; margin-bottom: 1rem;">
                <strong>Signatures Required: <span id="sig-count">0</span> / 2</strong>
                <div style="width: 100%; height: 8px; background: var(--color-border); border-radius: 999px; margin-top: 1rem; overflow: hidden;">
                  <div id="sig-progress" style="width: 0%; height: 100%; background: var(--gradient-brand); transition: width 0.3s;"></div>
                </div>
              </div>

              <button id="broadcast-btn" class="submit-button" style="opacity: 0.5; cursor: not-allowed;" disabled>
                📡 Broadcast Transaction
              </button>
            </div>

            <h3>🛠️ Multi-Sig Tools</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Sparrow Wallet</h4>
                <p>Desktop wallet with excellent multi-sig support</p>
              </div>
              <a href="https://sparrowwallet.com/" target="_blank" class="resource-link">Download</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Specter Desktop</h4>
                <p>Multi-sig focused desktop wallet</p>
              </div>
              <a href="https://specter.solutions/" target="_blank" class="resource-link">Download</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Casa</h4>
                <p>Guided multi-sig setup with support (paid)</p>
              </div>
              <a href="https://keys.casa/" target="_blank" class="resource-link">Learn More</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Unchained Capital</h4>
                <p>Collaborative custody with multi-sig</p>
              </div>
              <a href="https://unchained.com/" target="_blank" class="resource-link">Learn More</a>
            </div>
          </div>

          <script>
            let selectedKeys = new Set();

            window.toggleKey = function(keyNum) {
              const keyEl = document.getElementById('key-' + keyNum);

              if (selectedKeys.has(keyNum)) {
                selectedKeys.delete(keyNum);
                keyEl.style.borderColor = 'var(--color-border)';
                keyEl.style.background = 'var(--color-surface)';
              } else {
                selectedKeys.add(keyNum);
                keyEl.style.borderColor = 'var(--color-brand)';
                keyEl.style.background = 'rgba(247, 147, 26, 0.1)';
              }

              document.getElementById('sig-count').textContent = selectedKeys.size;
              document.getElementById('sig-progress').style.width = (selectedKeys.size / 2 * 100) + '%';

              const btn = document.getElementById('broadcast-btn');
              if (selectedKeys.size >= 2) {
                btn.style.opacity = '1';
                btn.style.cursor = 'pointer';
                btn.disabled = false;
                btn.onclick = () => alert('🎉 Transaction broadcasted!\\n\\nYou just experienced multi-sig security. Even if one key is stolen, your Bitcoin is safe.');
              } else {
                btn.style.opacity = '0.5';
                btn.style.cursor = 'not-allowed';
                btn.disabled = true;
              }
            };
          </script>
        `,

        hardware: `
          <div class="modal-header">
            <h2>🔒 Hardware Wallet Masterclass</h2>
            <p>Choose, set up, and secure your hardware wallet properly.</p>
          </div>

          <div class="modal-section">
            <h3>Hardware Wallet Comparison</h3>
            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse; margin: 2rem 0;">
                <thead>
                  <tr style="background: var(--color-surface); border-bottom: 2px solid var(--color-border);">
                    <th style="padding: 1rem; text-align: left;">Device</th>
                    <th style="padding: 1rem; text-align: left;">Security</th>
                    <th style="padding: 1rem; text-align: left;">Price</th>
                    <th style="padding: 1rem; text-align: left;">Best For</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="border-bottom: 1px solid var(--color-border);">
                    <td style="padding: 1rem;"><strong>Coldcard Mk4</strong></td>
                    <td style="padding: 1rem; color: var(--success);">★★★★★</td>
                    <td style="padding: 1rem;">$160</td>
                    <td style="padding: 1rem;">Bitcoin-only, air-gapped</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--color-border);">
                    <td style="padding: 1rem;"><strong>Trezor Model T</strong></td>
                    <td style="padding: 1rem; color: var(--success);">★★★★☆</td>
                    <td style="padding: 1rem;">$219</td>
                    <td style="padding: 1rem;">Multi-coin, touchscreen</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--color-border);">
                    <td style="padding: 1rem;"><strong>Ledger Nano X</strong></td>
                    <td style="padding: 1rem; color: var(--medium);">★★★★☆</td>
                    <td style="padding: 1rem;">$149</td>
                    <td style="padding: 1rem;">Bluetooth, multi-coin</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--color-border);">
                    <td style="padding: 1rem;"><strong>Passport</strong></td>
                    <td style="padding: 1rem; color: var(--success);">★★★★★</td>
                    <td style="padding: 1rem;">$259</td>
                    <td style="padding: 1rem;">Air-gapped, beautiful UX</td>
                  </tr>
                  <tr>
                    <td style="padding: 1rem;"><strong>Jade</strong></td>
                    <td style="padding: 1rem; color: var(--low);">★★★★☆</td>
                    <td style="padding: 1rem;">$65</td>
                    <td style="padding: 1rem;">Budget-friendly, open-source</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <h3>⚠️ Supply Chain Attacks</h3>
            <div style="background: rgba(239, 68, 68, 0.1); border: 2px solid var(--critical); border-radius: 12px; padding: 2rem; margin: 2rem 0;">
              <p style="margin-bottom: 1rem;"><strong>ALWAYS verify your device:</strong></p>
              <ol style="margin-left: 1.5rem; line-height: 2;">
                <li>Buy directly from manufacturer or authorized reseller</li>
                <li>Check tamper-evident seals</li>
                <li>Verify device authenticity using manufacturer's process</li>
                <li>NEVER use a device that comes with a pre-written seed phrase</li>
                <li>Generate seed phrase ON THE DEVICE, not on computer</li>
              </ol>
            </div>

            <h3>🛒 Trusted Sources</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Coldcard (Coinkite)</h4>
                <p>Bitcoin-only hardware wallet - Maximum security</p>
              </div>
              <a href="https://coldcard.com/" target="_blank" class="resource-link">Official Site</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Trezor</h4>
                <p>Original hardware wallet - Open source</p>
              </div>
              <a href="https://trezor.io/" target="_blank" class="resource-link">Official Site</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Foundation Devices (Passport)</h4>
                <p>Premium air-gapped hardware wallet</p>
              </div>
              <a href="https://foundationdevices.com/" target="_blank" class="resource-link">Official Site</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Blockstream Jade</h4>
                <p>Affordable, fully open-source</p>
              </div>
              <a href="https://blockstream.com/jade/" target="_blank" class="resource-link">Official Site</a>
            </div>
          </div>
        `,

        opsec: `
          <div class="modal-header">
            <h2>🕵️ OPSEC & Privacy Training</h2>
            <p>Operational security mistakes have cost billions. Learn to protect yourself.</p>
          </div>

          <div class="modal-section">
            <h3>Real OPSEC Failures</h3>
            <div style="display: grid; gap: 1rem; margin: 2rem 0;">
              <div style="padding: 1.5rem; background: rgba(239, 68, 68, 0.1); border-radius: 12px;">
                <strong style="color: var(--critical);">Case Study: $5M Wrench Attack</strong><br/>
                <span style="color: var(--color-muted);">
                  Bitcoin trader posted screenshots with holdings on Twitter.
                  Three months later, armed robbers broke into his home.
                  Forced to transfer 100 BTC at gunpoint.
                </span>
              </div>
              <div style="padding: 1.5rem; background: rgba(239, 68, 68, 0.1); border-radius: 12px;">
                <strong style="color: var(--critical);">Case Study: Address Reuse</strong><br/>
                <span style="color: var(--color-muted);">
                  Developer reused Bitcoin address on GitHub donations page.
                  Blockchain analysis revealed $2M+ holdings.
                  Now public knowledge, permanent security risk.
                </span>
              </div>
            </div>

            <h3>🎯 OPSEC Scenarios</h3>
            <div class="scenario-box">
              <p class="scenario-question">Your friend asks: "How much Bitcoin do you have?"</p>
              <div class="scenario-options">
                <button class="scenario-option" onclick="checkOpsec(1, false, this)">
                  Tell them the exact amount
                </button>
                <button class="scenario-option" onclick="checkOpsec(1, false, this)">
                  Give a vague range ("a few thousand")
                </button>
                <button class="scenario-option" onclick="checkOpsec(1, true, this)">
                  "Not enough" or "Just stacking sats"
                </button>
              </div>
              <div class="scenario-feedback" id="opsec-feedback-1"></div>
            </div>

            <div class="scenario-box">
              <p class="scenario-question">Should you show your Bitcoin balance on social media?</p>
              <div class="scenario-options">
                <button class="scenario-option" onclick="checkOpsec(2, false, this)">
                  Yes, to inspire others
                </button>
                <button class="scenario-option" onclick="checkOpsec(2, false, this)">
                  Yes, but with small amounts only
                </button>
                <button class="scenario-option" onclick="checkOpsec(2, true, this)">
                  Never - you become a target
                </button>
              </div>
              <div class="scenario-feedback" id="opsec-feedback-2"></div>
            </div>

            <h3>🧅 Privacy Tools</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Tor Browser</h4>
                <p>Browse anonymously and run Bitcoin Core over Tor</p>
              </div>
              <a href="https://www.torproject.org/" target="_blank" class="resource-link">Download</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Samourai Wallet</h4>
                <p>Privacy-focused mobile wallet with CoinJoin</p>
              </div>
              <a href="https://samouraiwallet.com/" target="_blank" class="resource-link">Learn More</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Sparrow Wallet</h4>
                <p>Desktop wallet with coin control and privacy features</p>
              </div>
              <a href="https://sparrowwallet.com/" target="_blank" class="resource-link">Download</a>
            </div>

            <h3>✅ OPSEC Checklist</h3>
            <div style="background: var(--color-surface); padding: 2rem; border-radius: 12px;">
              <ul style="list-style: none; line-height: 2.5;">
                <li>❌ Don't post holdings on social media</li>
                <li>❌ Don't reuse Bitcoin addresses</li>
                <li>❌ Don't brag about Bitcoin at bars/parties</li>
                <li>❌ Don't wear Bitcoin-branded clothing</li>
                <li>❌ Don't link real identity to Bitcoin addresses</li>
                <li>✅ Use new address for each transaction</li>
                <li>✅ Run node/wallet over Tor</li>
                <li>✅ Practice coin control</li>
                <li>✅ Keep holdings private</li>
                <li>✅ Use VPN when accessing exchanges</li>
              </ul>
            </div>
          </div>

          <script>
            window.checkOpsec = function(questionNum, correct, element) {
              const feedback = document.getElementById('opsec-feedback-' + questionNum);

              if (correct) {
                element.classList.add('correct');
                feedback.className = 'scenario-feedback correct show';
                feedback.innerHTML = '<strong>✅ Correct!</strong><br/>Never disclose specific amounts. The less people know, the safer you are.';
              } else {
                element.classList.add('incorrect');
                feedback.className = 'scenario-feedback incorrect show';
                feedback.innerHTML = '<strong>❌ Incorrect.</strong><br/>Disclosing amounts makes you a target for physical attacks. Always minimize what others know.';
              }
            };
          </script>
        `,

        attacks: `
          <div class="modal-header">
            <h2>⚔️ Attack Vector Simulator</h2>
            <p>Experience common attacks in a safe environment. Learn to defend.</p>
          </div>

          <div class="modal-section">
            <h3>💀 Clipboard Hijacking Attack</h3>
            <div class="scenario-box">
              <p>This malware monitors your clipboard and replaces Bitcoin addresses.</p>
              <div style="margin: 2rem 0;">
                <p style="margin-bottom: 1rem;">You copy this address:</p>
                <div class="code-block">
                  <code>bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh</code>
                </div>
                <p style="margin: 1rem 0;">Malware changes it to:</p>
                <div class="code-block">
                  <code style="color: var(--critical);">bc1qATTACKER1234567890abcdefghijk</code>
                </div>
                <p style="margin-top: 1rem; color: var(--high);">
                  ⚠️ If you don't verify the address before sending, funds go to attacker!
                </p>
              </div>
              <strong style="color: var(--success);">Defense:</strong>
              <ul style="margin: 1rem 0 0 2rem; line-height: 2;">
                <li>Always verify first 4 and last 4 characters</li>
                <li>Use hardware wallet to display address</li>
                <li>Send small test transaction first</li>
              </ul>
            </div>

            <h3>📱 SIM Swap Attack</h3>
            <div class="scenario-box">
              <p style="margin-bottom: 1rem;">Attacker calls your phone carrier, pretends to be you:</p>
              <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px; margin: 1rem 0;">
                <strong>Attacker:</strong> "I lost my phone, can you transfer my number to this new SIM?"<br/><br/>
                <strong>Carrier:</strong> "Sure, what's your name and address?"<br/><br/>
                <strong>Attacker:</strong> [Provides your leaked data from a breach]<br/><br/>
                <strong style="color: var(--critical);">Result: They now receive your 2FA codes via SMS</strong>
              </div>
              <strong style="color: var(--success);">Defense:</strong>
              <ul style="margin: 1rem 0 0 2rem; line-height: 2;">
                <li>NEVER use SMS for 2FA on exchanges</li>
                <li>Use authenticator apps (Google Authenticator, Authy)</li>
                <li>Use hardware security keys (YubiKey)</li>
                <li>Set up carrier PIN/password</li>
              </ul>
            </div>

            <h3>🖥️ Evil Maid Attack</h3>
            <div class="scenario-box">
              <p>Someone with physical access installs keylogger or modifies your device.</p>
              <div style="margin: 2rem 0;">
                <strong style="color: var(--high);">Scenarios:</strong>
                <ul style="margin: 1rem 0 0 2rem; line-height: 2;">
                  <li>Hotel room - someone enters while you're out</li>
                  <li>Coffee shop - stepped away for bathroom</li>
                  <li>Airport security - device out of sight</li>
                  <li>Repair shop - "fixing" your device</li>
                </ul>
              </div>
              <strong style="color: var(--success);">Defense:</strong>
              <ul style="margin: 1rem 0 0 2rem; line-height: 2;">
                <li>Use full disk encryption</li>
                <li>Never leave devices unattended</li>
                <li>Use tamper-evident seals</li>
                <li>Dedicated air-gapped device for signing</li>
              </ul>
            </div>

            <h3>🛠️ Security Tools</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Malwarebytes</h4>
                <p>Anti-malware protection for your devices</p>
              </div>
              <a href="https://www.malwarebytes.com/" target="_blank" class="resource-link">Download</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>YubiKey</h4>
                <p>Hardware security key for 2FA</p>
              </div>
              <a href="https://www.yubico.com/" target="_blank" class="resource-link">Buy Now</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>VeraCrypt</h4>
                <p>Free disk encryption software</p>
              </div>
              <a href="https://www.veracrypt.fr/" target="_blank" class="resource-link">Download</a>
            </div>
          </div>
        `,

        inheritance: `
          <div class="modal-header">
            <h2>👨‍👩‍👧‍👦 Estate Planning & Inheritance</h2>
            <p>Ensure your Bitcoin can be recovered by your heirs without compromising security.</p>
          </div>

          <div class="modal-section">
            <h3>The Inheritance Dilemma</h3>
            <div style="padding: 2rem; background: rgba(234, 179, 8, 0.1); border-radius: 12px; margin: 2rem 0;">
              <p style="margin-bottom: 1rem;"><strong>The Problem:</strong></p>
              <ul style="margin-left: 2rem; line-height: 2;">
                <li>❌ Give heirs your seed phrase now → They could steal it</li>
                <li>❌ Keep it secret → They can't access after you die</li>
                <li>❌ Use a lawyer → They could steal it or get hacked</li>
                <li>❌ Write in will → Becomes public record in probate</li>
              </ul>
            </div>

            <h3>✅ Solution: Multi-Sig Inheritance</h3>
            <div class="simulator-box">
              <h4>2-of-3 Multi-Sig Setup</h4>
              <div style="display: grid; gap: 1rem; margin: 2rem 0;">
                <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px;">
                  <strong>🔑 Key 1: Your Primary Key</strong><br/>
                  <span style="color: var(--color-muted);">
                    You control this key. Required for normal spending.
                  </span>
                </div>
                <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px;">
                  <strong>🔑 Key 2: Spouse/Heir's Key</strong><br/>
                  <span style="color: var(--color-muted);">
                    Your spouse holds this key. Can't spend without you.
                  </span>
                </div>
                <div style="padding: 1.5rem; background: var(--color-surface); border-radius: 12px;">
                  <strong>🔑 Key 3: Backup Key</strong><br/>
                  <span style="color: var(--color-muted);">
                    Sealed envelope with trusted lawyer or in safe deposit box.
                  </span>
                </div>
              </div>
              <p style="color: var(--success); text-align: center; padding: 1rem; background: rgba(34, 197, 94, 0.1); border-radius: 8px;">
                ✅ If you die: Spouse + Backup Key = Full access<br/>
                ✅ If spouse tries to steal: They only have 1 key (can't spend)<br/>
                ✅ If you lose key: Spouse + Backup = Recovery
              </p>
            </div>

            <h3>📋 Inheritance Instructions Template</h3>
            <div class="code-block">
              <code>
BITCOIN RECOVERY INSTRUCTIONS<br/>
<br/>
If you are reading this, I have passed away or become incapacitated.<br/>
<br/>
STEP 1: Retrieve hardware wallet from [LOCATION]<br/>
STEP 2: Retrieve backup seed phrase from [SAFE DEPOSIT BOX]<br/>
STEP 3: Download Sparrow Wallet from sparrowwallet.com<br/>
STEP 4: Select "Import Wallet" → "Hardware Wallet"<br/>
STEP 5: Follow on-screen prompts<br/>
<br/>
For help, contact:<br/>
- Trusted Bitcoin friend: [NAME] [PHONE]<br/>
- Bitcoin attorney: [NAME] [CONTACT]<br/>
<br/>
WARNINGS:<br/>
- NEVER share seed phrase digitally<br/>
- NEVER enter seed phrase on a website<br/>
- Send small test transaction first<br/>
              </code>
            </div>

            <h3>🏛️ Bitcoin Estate Planning Services</h3>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Casa Inheritance</h4>
                <p>Multi-sig inheritance with recovery keys</p>
              </div>
              <a href="https://keys.casa/" target="_blank" class="resource-link">Learn More</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Unchained Capital</h4>
                <p>Collaborative custody with inheritance planning</p>
              </div>
              <a href="https://unchained.com/" target="_blank" class="resource-link">Learn More</a>
            </div>
            <div class="resource-card">
              <div class="resource-info">
                <h4>Bitcoin Estate Planning Guide</h4>
                <p>Comprehensive guide by Pamela Morgan</p>
              </div>
              <a href="https://www.amazon.com/Cryptoasset-Inheritance-Planning-Simple-Owners/dp/1947910116" target="_blank" class="resource-link">Buy Book</a>
            </div>
          </div>
        `
      };

      return stations[stationId] || '<p>Station content not available yet.</p>';
    }

    window.checkPhishing = function(questionNum, correct, element) {
      const feedback = document.getElementById('feedback-' + questionNum);
      const allOptions = element.parentElement.querySelectorAll('.scenario-option');

      // Disable all buttons
      allOptions.forEach(btn => btn.style.pointerEvents = 'none');

      if (correct) {
        element.classList.add('correct');
        feedback.className = 'scenario-feedback correct show';
        if (questionNum === 1) {
          feedback.innerHTML = '<strong>✅ Correct!</strong><br/>Red flags: Suspicious domain (not official MetaMask), urgency tactics, "account closure" threat. MetaMask is non-custodial - there\'s no "account" to close.';
        } else {
          feedback.innerHTML = '<strong>✅ Correct!</strong><br/>Only www.ledger.com is the official site. Always verify URLs carefully before entering sensitive information.';
        }

        // Update progress
        userProgress.stations.phishing = (userProgress.stations.phishing || 0) + 50;
        saveProgress();
      } else {
        element.classList.add('incorrect');
        feedback.className = 'scenario-feedback incorrect show';
        if (questionNum === 1) {
          feedback.innerHTML = '<strong>❌ Incorrect.</strong><br/>This is a phishing attack! The domain is fake, and non-custodial wallets like MetaMask can\'t be "closed" by anyone.';
        } else {
          feedback.innerHTML = '<strong>❌ Incorrect.</strong><br/>That\'s a fake site. Always double-check URLs. Attackers register similar domains to steal your funds.';
        }
      }
    };

    function updateBeltRank(score) {
      let belt = 'White Belt';
      if (score >= 90) belt = 'Black Belt';
      else if (score >= 80) belt = 'Brown Belt';
      else if (score >= 70) belt = 'Blue Belt';
      else if (score >= 60) belt = 'Green Belt';
      else if (score >= 50) belt = 'Orange Belt';
      else if (score >= 30) belt = 'Yellow Belt';

      userProgress.beltRank = belt;
      document.getElementById('belt-rank').textContent = `🥋 ${belt}`;
      saveProgress();
    }

    function saveProgress() {
      localStorage.setItem('securityDojoProgress', JSON.stringify(userProgress));
    }

    // Close modal on escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Close modal on background click
    document.getElementById('station-modal').addEventListener('click', (e) => {
      if (e.target.id === 'station-modal') closeModal();
    });
  </script>
</body>
</html>
