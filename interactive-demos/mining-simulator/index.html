<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mining Simulator - Bitcoin Sovereign Academy</title>
    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --success-green: #4caf50;
            --danger-red: #f44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            color: var(--primary-orange);
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .back-btn {
            position: absolute;
            top: 2rem;
            left: 2rem;
            background: var(--primary-orange);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4);
        }

        .mining-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .panel {
            background: var(--secondary-dark);
            border: 1px solid rgba(247, 147, 26, 0.3);
            border-radius: 15px;
            padding: 2rem;
        }

        .panel h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .stat-label {
            color: var(--text-dim);
        }

        .stat-value {
            color: var(--primary-orange);
            font-weight: bold;
            font-size: 1.1rem;
        }

        .hashrate-slider {
            width: 100%;
            margin: 1rem 0;
        }

        .mining-controls {
            background: var(--primary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .control-group {
            margin-bottom: 2rem;
        }

        .control-group label {
            color: var(--primary-orange);
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
        }

        .start-mining-btn {
            background: var(--success-green);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-right: 1rem;
            transition: all 0.3s ease;
        }

        .start-mining-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(76, 175, 80, 0.4);
        }

        .stop-mining-btn {
            background: var(--danger-red);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mining-animation {
            text-align: center;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            margin: 2rem 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .mining-status {
            font-size: 1.5rem;
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .hash-animation {
            font-family: monospace;
            font-size: 1.2rem;
            color: var(--text-dim);
            animation: hashFlicker 0.5s infinite;
        }

        @keyframes hashFlicker {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .block-history {
            background: var(--secondary-dark);
            border: 1px solid rgba(247, 147, 26, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .block-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--success-green);
            border-radius: 0 8px 8px 0;
            margin-bottom: 1rem;
        }

        .difficulty-chart {
            height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }

        .chart-line {
            stroke: var(--primary-orange);
            stroke-width: 3;
            fill: none;
        }

        .educational-tip {
            background: rgba(33, 150, 243, 0.1);
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        @media (max-width: 768px) {
            .mining-dashboard {
                grid-template-columns: 1fr;
            }
            
            .back-btn {
                position: relative;
                top: auto;
                left: auto;
                margin-bottom: 2rem;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <a href="../../" class="back-btn">‚Üê Back to Academy</a>
    
    <div class="container">
        <div class="header">
            <h1>‚õèÔ∏è Bitcoin Mining Simulator</h1>
            <p>Experience Bitcoin mining, difficulty adjustments, and proof-of-work consensus</p>
        </div>

        <div class="mining-dashboard">
            <div class="panel">
                <h3>üè≠ Your Mining Operation</h3>
                
                <div class="stat-item">
                    <span class="stat-label">Hashrate:</span>
                    <span class="stat-value" id="currentHashrate">100 TH/s</span>
                </div>
                
                <div class="stat-item">
                    <span class="stat-label">Power Consumption:</span>
                    <span class="stat-value" id="powerConsumption">3.0 kW</span>
                </div>
                
                <div class="stat-item">
                    <span class="stat-label">Mining Efficiency:</span>
                    <span class="stat-value" id="efficiency">30 J/TH</span>
                </div>
                
                <div class="stat-item">
                    <span class="stat-label">Blocks Found:</span>
                    <span class="stat-value" id="blocksFound">0</span>
                </div>
                
                <div class="educational-tip">
                    üí° <strong>Hashrate</strong> is your mining power - how many hashes per second you can compute to find valid blocks.
                </div>
            </div>

            <div class="panel">
                <h3>üåê Network Statistics</h3>
                
                <div class="stat-item">
                    <span class="stat-label">Network Hashrate:</span>
                    <span class="stat-value" id="networkHashrate">400 EH/s</span>
                </div>
                
                <div class="stat-item">
                    <span class="stat-label">Current Difficulty:</span>
                    <span class="stat-value" id="currentDifficulty">50.0 T</span>
                </div>
                
                <div class="stat-item">
                    <span class="stat-label">Block Height:</span>
                    <span class="stat-value" id="blockHeight">820000</span>
                </div>
                
                <div class="stat-item">
                    <span class="stat-label">Time to Block:</span>
                    <span class="stat-value" id="timeToBlock">~10 min</span>
                </div>
                
                <div class="educational-tip">
                    üí° Bitcoin automatically adjusts <strong>difficulty</strong> every 2016 blocks to maintain ~10 minute block times.
                </div>
            </div>
        </div>

        <div class="mining-controls">
            <h3 style="color: var(--primary-orange); margin-bottom: 1.5rem;">‚öôÔ∏è Mining Controls</h3>
            
            <div class="control-group">
                <label>Your Hashrate: <span id="hashrateLabel">100 TH/s</span></label>
                <input type="range" class="hashrate-slider" min="1" max="1000" value="100" id="hashrateSlider">
                <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; color: var(--text-dim);">
                    <span>1 TH/s</span>
                    <span>500 TH/s</span>
                    <span>1000 TH/s</span>
                </div>
            </div>

            <button class="start-mining-btn" id="startBtn" onclick="startMining()">‚õèÔ∏è Start Mining</button>
            <button class="stop-mining-btn" id="stopBtn" onclick="stopMining()" disabled>‚èπÔ∏è Stop Mining</button>
        </div>

        <div class="mining-animation" id="miningAnimation">
            <div class="mining-status" id="miningStatus">Ready to mine Bitcoin blocks</div>
            <div class="hash-animation" id="hashDisplay">Click 'Start Mining' to begin</div>
        </div>

        <div class="difficulty-chart">
            <h4 style="color: var(--primary-orange); margin-bottom: 1rem;">üìà Difficulty Adjustment History</h4>
            <svg width="100%" height="150" id="difficultyChart">
                <polyline class="chart-line" id="chartLine" points=""></polyline>
            </svg>
        </div>

        <div class="block-history">
            <h3 style="color: var(--primary-orange); margin-bottom: 1.5rem;">üì¶ Recently Mined Blocks</h3>
            <div id="blockList">
                <p style="color: var(--text-dim); text-align: center;">No blocks mined yet. Start mining to see your blocks here!</p>
            </div>
        </div>
    </div>

    <script>
        let isMining = false;
        let miningInterval;
        let hashAnimationInterval;
        let currentHashrate = 100; // TH/s
        let blocksFound = 0;
        let networkHashrate = 400000; // TH/s (400 EH/s)
        let currentDifficulty = 50; // Simplified
        let blockHeight = 820000;
        let difficultyHistory = [45, 47, 50, 52, 50, 48, 50];

        function updateHashrateSlider() {
            const slider = document.getElementById('hashrateSlider');
            currentHashrate = parseInt(slider.value);
            document.getElementById('hashrateLabel').textContent = currentHashrate + ' TH/s';
            document.getElementById('currentHashrate').textContent = currentHashrate + ' TH/s';
            
            // Update power consumption (roughly 30J/TH)
            const power = (currentHashrate * 30 / 1000).toFixed(1);
            document.getElementById('powerConsumption').textContent = power + ' kW';
            
            updateMiningChances();
        }

        function updateMiningChances() {
            // Simplified probability calculation
            const yourShare = currentHashrate / networkHashrate;
            const expectedTime = 10 / yourShare; // minutes
            
            let timeDisplay;
            if (expectedTime < 60) {
                timeDisplay = `~${Math.round(expectedTime)} min`;
            } else if (expectedTime < 1440) {
                timeDisplay = `~${Math.round(expectedTime / 60)} hours`;
            } else {
                timeDisplay = `~${Math.round(expectedTime / 1440)} days`;
            }
            
            document.getElementById('timeToBlock').textContent = timeDisplay;
        }

        function generateRandomHash() {
            const chars = '0123456789abcdef';
            let hash = '';
            for (let i = 0; i < 64; i++) {
                hash += chars[Math.floor(Math.random() * chars.length)];
            }
            return hash;
        }

        function startMining() {
            if (isMining) return;
            
            isMining = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            
            document.getElementById('miningStatus').textContent = '‚õèÔ∏è Mining in progress...';
            
            // Hash animation
            hashAnimationInterval = setInterval(() => {
                document.getElementById('hashDisplay').textContent = generateRandomHash();
            }, 100);
            
            // Mining simulation
            miningInterval = setInterval(() => {
                // Simulate finding a block based on hashrate
                const findProbability = currentHashrate / networkHashrate * 0.01; // Simplified
                
                if (Math.random() < findProbability) {
                    findBlock();
                }
                
                // Simulate difficulty adjustment every few blocks
                if (Math.random() < 0.05) {
                    adjustDifficulty();
                }
            }, 2000); // Check every 2 seconds
        }

        function stopMining() {
            if (!isMining) return;
            
            isMining = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            
            clearInterval(miningInterval);
            clearInterval(hashAnimationInterval);
            
            document.getElementById('miningStatus').textContent = '‚èπÔ∏è Mining stopped';
            document.getElementById('hashDisplay').textContent = 'Mining paused';
        }

        function findBlock() {
            blocksFound++;
            blockHeight++;
            
            document.getElementById('blocksFound').textContent = blocksFound;
            document.getElementById('blockHeight').textContent = blockHeight;
            
            // Add block to history
            addBlockToHistory(blockHeight, generateRandomHash().substring(0, 16));
            
            // Show celebration
            document.getElementById('miningStatus').textContent = 'üéâ Block found!';
            setTimeout(() => {
                if (isMining) {
                    document.getElementById('miningStatus').textContent = '‚õèÔ∏è Mining in progress...';
                }
            }, 3000);
        }

        function addBlockToHistory(height, hash) {
            const blockList = document.getElementById('blockList');
            
            // Remove "no blocks" message
            if (blockList.innerHTML.includes('No blocks mined yet')) {
                blockList.innerHTML = '';
            }
            
            const blockItem = document.createElement('div');
            blockItem.className = 'block-item';
            blockItem.innerHTML = `
                <div>
                    <strong>Block #${height}</strong><br>
                    <small>Hash: ${hash}...</small>
                </div>
                <div>
                    <span style="color: var(--success-green);">‚úÖ FOUND</span><br>
                    <small>${new Date().toLocaleTimeString()}</small>
                </div>
            `;
            
            // Add to top of list
            blockList.insertBefore(blockItem, blockList.firstChild);
            
            // Keep only last 5 blocks
            while (blockList.children.length > 5) {
                blockList.removeChild(blockList.lastChild);
            }
        }

        function adjustDifficulty() {
            // Simulate difficulty adjustment
            const adjustment = (Math.random() - 0.5) * 0.2; // ¬±20% max
            currentDifficulty = Math.max(10, currentDifficulty * (1 + adjustment));
            
            document.getElementById('currentDifficulty').textContent = currentDifficulty.toFixed(1) + ' T';
            
            // Update chart
            difficultyHistory.push(currentDifficulty);
            if (difficultyHistory.length > 10) {
                difficultyHistory.shift();
            }
            updateDifficultyChart();
            
            // Update network hashrate (simplified relationship)
            networkHashrate = currentDifficulty * 8000; // Simplified
            document.getElementById('networkHashrate').textContent = (networkHashrate / 1000).toFixed(0) + ' EH/s';
            
            updateMiningChances();
        }

        function updateDifficultyChart() {
            const chart = document.getElementById('chartLine');
            const width = 800; // Approximate chart width
            const height = 120;
            
            let points = '';
            difficultyHistory.forEach((difficulty, index) => {
                const x = (index / (difficultyHistory.length - 1)) * width;
                const y = height - (difficulty / Math.max(...difficultyHistory)) * height;
                points += `${x},${y} `;
            });
            
            chart.setAttribute('points', points.trim());
        }

        // Initialize
        document.getElementById('hashrateSlider').addEventListener('input', updateHashrateSlider);
        updateHashrateSlider();
        updateDifficultyChart();
    </script>
</body>
</html>