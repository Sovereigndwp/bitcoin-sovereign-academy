<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Bitcoin Genesis Timeline | Bitcoin Sovereign Academy</title>
    <link rel="stylesheet" href="/css/brand.css">
    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-green: #4caf50;
            --accent-blue: #2196f3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Back Button */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            border-radius: 0.5rem;
            color: var(--primary-orange);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
            margin-bottom: 2rem;
        }

        .back-button:hover {
            background: rgba(247, 147, 26, 0.2);
            transform: translateX(-3px);
        }

        /* Inline Tooltips for Technical Terms */
        .term-tooltip {
            position: relative;
            border-bottom: 2px dotted var(--primary-orange);
            cursor: help;
            color: var(--primary-orange);
            font-weight: 600;
        }

        .term-tooltip:hover {
            color: #ffb347;
        }

        .term-tooltip::after {
            content: attr(data-definition);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            width: max-content;
            max-width: 300px;
            font-size: 0.9rem;
            font-weight: 400;
            line-height: 1.5;
            color: var(--text-light);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            white-space: normal;
        }

        .term-tooltip:hover::after {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-4px);
        }

        /* Mobile: tap to show tooltip */
        @media (max-width: 768px) {
            .term-tooltip::after {
                left: 0;
                right: 0;
                transform: none;
                width: auto;
                max-width: 280px;
                margin: 0 auto;
            }

            .term-tooltip:hover::after {
                transform: none;
            }
        }

        /* Genesis Timeline */
        .genesis-section {
            margin: 2rem 0;
            padding: 3rem 0;
            background: linear-gradient(180deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
        }

        .genesis-intro {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 2rem;
        }

        .genesis-intro h2 {
            font-size: 2.5rem;
            color: var(--primary-orange);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-orange), #ffb347);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .genesis-intro p {
            font-size: 1.2rem;
            color: var(--text-dim);
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .control-button {
            padding: 0.75rem 1.5rem;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            color: var(--primary-orange);
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: var(--primary-orange);
            color: white;
            transform: translateY(-2px);
        }

        .control-button.active {
            background: var(--primary-orange);
            color: white;
        }

        .timeline-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--primary-orange), var(--accent-green));
            transform: translateX(-50%);
        }

        .timeline-card {
            position: relative;
            margin: 2rem 0;
            opacity: 0.6;
            transform: scale(0.98);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .timeline-card:hover {
            opacity: 0.8;
            transform: scale(0.99);
        }

        .timeline-card.revealed {
            opacity: 1;
            transform: scale(1);
        }

        .timeline-card.revealed:hover {
            transform: scale(1.02);
        }

        .timeline-card.left {
            margin-right: 50%;
            padding-right: 3rem;
        }

        .timeline-card.right {
            margin-left: 50%;
            padding-left: 3rem;
        }

        .timeline-dot {
            position: absolute;
            top: 1.5rem;
            width: 20px;
            height: 20px;
            background: var(--primary-orange);
            border: 4px solid var(--primary-dark);
            border-radius: 50%;
            z-index: 10;
        }

        .timeline-card.left .timeline-dot {
            right: -10px;
        }

        .timeline-card.right .timeline-dot {
            left: -10px;
        }

        .timeline-card.revealed .timeline-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(247, 147, 26, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(247, 147, 26, 0);
            }
        }

        .card-content {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .timeline-card.revealed .card-content {
            border-color: var(--primary-orange);
            box-shadow: 0 5px 20px rgba(247, 147, 26, 0.2);
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .card-year {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 0.75rem;
        }

        .card-description {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .demo-button {
            padding: 0.6rem 1.2rem;
            background: linear-gradient(135deg, var(--primary-orange), #ffb347);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 0.5rem;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4);
        }

        .demo-output {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.5rem;
            border-left: 3px solid var(--accent-green);
            display: none;
            animation: slideDown 0.3s ease;
        }

        .demo-output.visible {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .demo-output code {
            color: var(--accent-green);
            font-family: 'Courier New', monospace;
        }

        .demo-output input,
        .demo-output select {
            width: 100%;
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            color: var(--text-light);
            font-family: inherit;
        }

        .demo-output button {
            padding: 0.5rem 1rem;
            background: var(--primary-orange);
            border: none;
            border-radius: 0.25rem;
            color: white;
            cursor: pointer;
            margin: 0.25rem;
        }

        .demo-output button:hover {
            background: #ff8c00;
        }

        .network-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .network-node {
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid var(--accent-blue);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .network-node:hover {
            background: rgba(33, 150, 243, 0.3);
            transform: scale(1.05);
        }

        .network-node.offline {
            opacity: 0.3;
            background: rgba(255, 0, 0, 0.2);
            border-color: #ff4444;
        }

        .connections-map {
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            display: none;
        }

        .connections-map.visible {
            display: block;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .connection-node {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .connection-node:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
            transform: scale(1.05);
        }

        .connection-node.active {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        /* ===== ACCESSIBILITY ENHANCEMENTS (WCAG 2.1 AA) ===== */

        /* Color Contrast - Change dim text from #999 to #b3b3b3 for 4.6:1 ratio */
        :root {
            --text-dim: #b3b3b3;
        }

        .subtitle, .card-description, small, p[style*="color: var(--text-dim)"] {
            color: #b3b3b3 !important;
        }

        /* Touch Targets - Minimum 44x44px */
        button, a, [role="button"], input[type="button"], input[type="submit"],
        .back-button, .control-button, .demo-button, .wallet-btn, .connection-node {
            min-height: 44px;
            min-width: 44px;
        }

        /* Focus Indicators */
        *:focus-visible {
            outline: 3px solid var(--primary-orange, #f7931a);
            outline-offset: 2px;
        }

        button:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible,
        .timeline-card:focus-visible, .connection-node:focus-visible {
            outline: 3px solid var(--primary-orange, #f7931a);
            outline-offset: 4px;
            box-shadow: 0 0 0 4px rgba(247, 147, 26, 0.2);
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Mobile Reflow */
        @media (max-width: 360px) {
            body {
                overflow-x: hidden;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .genesis-intro h2 {
                font-size: 2rem;
            }

            .timeline-line {
                left: 20px;
            }

            .timeline-card.left,
            .timeline-card.right {
                margin-left: 60px;
                margin-right: 0;
                padding-left: 0;
                padding-right: 0;
            }

            .timeline-card.left .timeline-dot,
            .timeline-card.right .timeline-dot {
                left: -40px;
                right: auto;
            }

            .network-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Spam demo grid mobile responsiveness */
        @media (max-width: 768px) {
            #spam-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Modal styles */
        .modal {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            backdrop-filter: blur(4px);
        }

        .modal.hidden {
            display: none;
        }

        .modalCard {
            width: min(720px, 92vw);
            max-height: 86vh;
            overflow: auto;
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 18px;
            padding: 2rem;
            position: relative;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .modalClose {
            float: right;
            background: transparent;
            color: var(--text-light);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .modalClose:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-orange);
            color: var(--primary-orange);
        }

        .demoWrap h2 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
            clear: both;
            padding-top: 1rem;
        }

        .demoWrap label {
            display: block;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .demoWrap textarea,
        .demoWrap input {
            width: 100%;
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
        }

        .demoWrap textarea:focus,
        .demoWrap input:focus {
            outline: none;
            border-color: var(--primary-orange);
        }

        .demoWrap button {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            border: none;
            border-radius: 0.5rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .demoWrap button:hover:not(:disabled) {
            background: #ff8c00;
            transform: translateY(-1px);
        }

        .demoWrap button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .demoWrap pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 0.75rem;
            border-radius: 0.5rem;
            border-left: 3px solid var(--primary-orange);
            overflow-x: auto;
            color: var(--accent-green);
            font-size: 0.85rem;
        }

        .demoWrap .status-valid {
            color: var(--accent-green);
            font-weight: 600;
        }

        .demoWrap .status-invalid {
            color: #ff4444;
            font-weight: 600;
        }
    </style>
    <link rel="stylesheet" href="/css/icons.css">
    <link rel="stylesheet" href="/css/interactive-demos.css">
</head>
<body>
    <script src="/js/config.js"></script>
    <script src="/js/demo-lock-subdomain.js"></script>
    <script src="/js/subdomain-access-control.js"></script>



    <div class="container">
        <!-- Back Button -->
        <a href="/paths/curious/stage-1/module-2-5.html" class="back-button">
            ‚Üê Back to Module 2.5
        </a>

        <!-- Genesis Timeline Section -->
        <section class="genesis-section">
            <div class="container">
                <div class="genesis-intro">
                    <h2>üåü The Bitcoin Genesis Timeline</h2>
                    <p>Every revolution stands on the shoulders of giants. Discover the technologies, visionaries, and pivotal moments that had to happen before Satoshi could write the whitepaper.</p>
                </div>

                <div class="timeline-controls">
                    <button class="control-button" onclick="revealAll()"><span data-icon="lightning"></span> Reveal All</button>
                    <button class="control-button" onclick="toggleComparison(event)"><span data-icon="refresh"></span> Compare: Without These</button>
                    <button class="control-button" onclick="toggleConnections()"><span data-icon="map"></span> Connections Map</button>
                </div>

                <div class="connections-map" id="connections-map">
                    <h3 style="color: var(--primary-orange); text-align: center; margin-bottom: 1rem;">How Six Pillars Became Bitcoin</h3>
                    <p style="text-align: center; color: var(--text-dim); margin-bottom: 1.5rem;">Click each technology to see how it connects to Bitcoin's design</p>
                    <div class="connections-grid">
                        <div class="connection-node" onclick="highlightConnection(event, 'crypto')"><span data-icon="lock"></span> <br><strong><span class="term-tooltip" data-definition="A lock and key system for digital ownership. You keep one key secret, share the other publicly.">Public-Key Crypto</span></strong><br>
                            <small style="color: var(--text-dim);">‚Üí Digital ownership</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection(event, 'network')"><span data-icon="network"></span> <br><strong><span class="term-tooltip" data-definition="Computers talking directly to each other, no middleman or central server needed.">P2P Networks</span></strong><br>
                            <small style="color: var(--text-dim);">‚Üí <span class="term-tooltip" data-definition="No single point of control. Power is spread across many participants.">Decentralization</span></small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection(event, 'timestamping')"><span data-icon="clock"></span> <br><strong><span class="term-tooltip" data-definition="Linking records together with timestamps so history can't be rewritten or backdated.">Timestamping</span></strong><br>
                            <small style="color: var(--text-dim);">‚Üí <span class="term-tooltip" data-definition="Cannot be changed or erased. Once recorded, it's permanent.">Immutability</span></small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection(event, 'merkle')">
                            üå≥<br><strong><span class="term-tooltip" data-definition="A clever way to bundle thousands of items into one compact proof. Like a tree where branches combine into a single root.">Merkle Trees</span></strong><br>
                            <small style="color: var(--text-dim);">‚Üí Efficient proofs</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection(event, 'pow')">
                            üíé<br><strong><span class="term-tooltip" data-definition="A rule that says you must burn real energy solving a math puzzle to participate. Makes spam expensive and secures networks.">Proof of Work</span></strong><br>
                            <small style="color: var(--text-dim);">‚Üí <span class="term-tooltip" data-definition="Unwanted junk messages sent in bulk. Proof of Work makes spam expensive.">Spam</span> prevention</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection(event, 'failed')">
                            üß©<br><strong>Failed Attempts</strong><br>
                            <small style="color: var(--text-dim);">‚Üí Learned mistakes</small>
                        </div>
                    </div>
                </div>

                <div class="timeline-container">
                    <div class="timeline-line"></div>

                    <!-- 1976: Public-Key Cryptography Concept -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1976">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon"><span data-icon="lock"></span> </span>
                            <div class="card-year">1976</div>
                            <div class="card-title">Public-Key Cryptography</div>
                            <div class="card-description">
                                Diffie & Hellman publish the idea of <span class="term-tooltip" data-definition="A lock and key system for digital ownership. You keep one key secret, share the other publicly.">public-key cryptography</span>. Two keys are linked by one-way math.
                                <strong>Encrypt with a public key</strong>, only the matching private key can decrypt. <strong>Sign with a private key</strong>, anyone can verify with the public key.
                                Result: you can share securely without first sharing a secret.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); openKeysDemo()">üîë Try the Keys Demo</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1977: Digital Signatures Become Practical -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="1977">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">‚úçÔ∏è</span>
                            <div class="card-year">1977</div>
                            <div class="card-title">RSA Makes It Real</div>
                            <div class="card-description">
                                Rivest, Shamir & Adleman publish RSA‚Äîa practical method for <strong>both encryption and digital signatures</strong>.
                                A signature <strong>proves who signed a message</strong>. It does not hide the message‚Äîit makes tampering obvious.
                                <strong>If one character changes, verification fails. That is the point.</strong>
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); openSignaturesDemo()">‚úçÔ∏è Try the Signatures Demo</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1983-1990s: Internet -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1990s">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon"><span data-icon="network"></span> </span>
                            <div class="card-year">1983-1990s</div>
                            <div class="card-title">The Internet Goes Global</div>
                            <div class="card-description">
                                ARPANET switches to <span class="term-tooltip" data-definition="The language computers use to talk to each other over the internet.">TCP/IP</span> on January 1, 1983, enabling global networking.
                                This infrastructure later made <span class="term-tooltip" data-definition="Computers talking directly to each other, no middleman or central server needed.">peer-to-peer</span> applications like Bitcoin possible.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoNetwork(this)">üï∏Ô∏è See Network Effect</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1983-1989: eCash / DigiCash -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="1989">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon"><span data-icon="money"></span> </span>
                            <div class="card-year">1983 ‚Üí 1989</div>
                            <div class="card-title">eCash Concept & DigiCash</div>
                            <div class="card-description">
                                David Chaum developed the eCash concept in the early 1980s, then founded DigiCash to commercialize it. The first <span class="term-tooltip" data-definition="Using math locks that can't be broken to secure digital money.">cryptographic</span> digital currency worked perfectly but required trust
                                in a central company - the missing piece Bitcoin would later solve.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoDigiCash(this)">üí≥ See DigiCash Model</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1991: Timestamping -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1991">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon"><span data-icon="clock"></span> </span>
                            <div class="card-year">1991</div>
                            <div class="card-title">Time-Stamping & Timechains</div>
                            <div class="card-description">
                                Stuart Haber & Scott Stornetta created the first "<span class="term-tooltip" data-definition="Linking records together with timestamps so history can't be rewritten or backdated.">timechain</span>" - linking documents together so no one
                                could backdate or alter them. This became Bitcoin's <span class="term-tooltip" data-definition="Another name for timechain. A chain of blocks, each containing records and linked to the previous one.">blockchain</span> foundation.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoMoneyAsHistory(this)">üìú Money as Recorded History</button>
                            <div class="demo-output"></div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoTimechain(this)" style="margin-top: 0.5rem;">‚õìÔ∏è Build a Chain</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1979/1992: Merkle Trees -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="1992">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">üå≥</span>
                            <div class="card-year">1979 ‚Üí 1992</div>
                            <div class="card-title">Merkle Trees Invented, Then Adopted</div>
                            <div class="card-description">
                                Ralph Merkle invented <span class="term-tooltip" data-definition="A clever way to bundle thousands of items into one compact proof. Like a tree where branches combine into a single root.">Merkle Trees</span> in 1979. In 1992, Haber, Stornetta & Bayer adopted them into their timestamping design. Now, multiple documents can be
                                linked into a single proof efficiently. This innovation later powers Bitcoin's block structure.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoMerkle(this)">üå≤ See 8 Transactions ‚Üí 1 Root</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1997: Hashcash -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1997">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">üíé</span>
                            <div class="card-year">1992 ‚Üí 1997</div>
                            <div class="card-title">Hashcash - Proof of Work</div>
                            <div class="card-description">
                                Building on academic work by Dwork & Naor (1992) about making spam costly, Adam Back invented Hashcash (1997) to fight email <span class="term-tooltip" data-definition="Unwanted junk messages sent in bulk. Hashcash made each email cost energy to send.">spam</span>. Users had to solve a small math problem before
                                sending emails, making spam expensive. Bitcoin uses this exact concept: <span class="term-tooltip" data-definition="A rule that says you must burn real energy solving a math puzzle to participate. Makes spam expensive and secures networks.">Proof of Work</span>.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoSpamPrevention(this)">üö´ See How PoW Stops Spam</button>
                            <div class="demo-output"></div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoHashcash(this)" style="margin-top: 0.5rem;">‚õèÔ∏è Try <span class="term-tooltip" data-definition="A unique fingerprint for data. Change one letter, the entire fingerprint changes completely.">Hash</span> <span class="term-tooltip" data-definition="Using energy to solve puzzles and earn new Bitcoin. Like a lottery where more work = more tickets.">Mining</span></button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1996-2005: Cypherpunks -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="2000s">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">üë•</span>
                            <div class="card-year">1996-2005</div>
                            <div class="card-title">Cypherpunks & Failed Prototypes</div>
                            <div class="card-description">
                                Privacy advocates created e-gold (1996), b-money (Wei Dai, 1998), Bit Gold (Nick Szabo, 2005), and RPOW (Hal Finney, 2004).
                                Each solved part of the puzzle, but none achieved full decentralization.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoCypherpunks(this)">üß© See the Pieces</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 2008: Whitepaper -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="2008">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">üìú</span>
                            <div class="card-year">October 31, 2008</div>
                            <div class="card-title">The Bitcoin White Paper</div>
                            <div class="card-description">
                                Satoshi Nakamoto publishes "Bitcoin: A <span class="term-tooltip" data-definition="Computers talking directly to each other, no middleman or central server needed.">Peer-to-Peer</span> Electronic Cash System" - elegantly combining
                                all previous innovations into one self-sustaining system.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoWhitepaper(this)">üìÑ Read Key Excerpt</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 2009: Genesis Block -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="2009">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">‚õèÔ∏è</span>
                            <div class="card-year">January 3, 2009</div>
                            <div class="card-title">Genesis Block</div>
                            <div class="card-description">
                                Satoshi mines the first Bitcoin block with a hidden message: "The Times 03/Jan/2009 Chancellor on brink
                                of second bailout for banks" - a protest encoded in history.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoGenesis(this)"><span data-icon="game"></span> Mine Genesis Block</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 2010: Pizza Day -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="2010">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">üçï</span>
                            <div class="card-year">May 22, 2010</div>
                            <div class="card-title">First Real Purchase</div>
                            <div class="card-description">
                                Laszlo Hanyecz bought two pizzas for 10,000 BTC - the first real-world Bitcoin transaction.
                                Today, that's worth hundreds of millions of dollars.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoPizza(this)">üçï Calculate Pizza Value</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Navigation -->
            <div style="text-align: center; margin: 3rem 0 2rem 0;">
                <a href="/paths/curious/stage-1/module-2-5.html" class="back-button" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 1rem 2rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); border-radius: 0.5rem; color: var(--primary-orange); text-decoration: none; font-weight: 600; transition: all 0.3s ease;">
                    ‚Üê Back to Module 2.5
                </a>
            </div>
        </section>
    </div>

    <script>
        // === Genesis Timeline Functions ===

        function revealCard(card) {
            console.log('Card clicked:', card.getAttribute('data-era'));
            card.classList.add('revealed');
        }

        function revealAll() {
            const cards = document.querySelectorAll('.timeline-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('revealed');
                }, index * 200);
            });
        }

        function toggleComparison(e) {
            const button = e.currentTarget;
            const showing = button.textContent.includes('Without');

            if (showing) {
                alert('üö´ Without These Technologies:\n\n' +
                      '‚ùå No Public-Key Crypto ‚Üí No digital signatures, no wallets\n' +
                      '‚ùå No P2P Networks ‚Üí Requires central server (single point of failure)\n' +
                      '‚ùå No Timestamping ‚Üí History can be rewritten\n' +
                      '‚ùå No Merkle Trees ‚Üí Inefficient, bloated proofs\n' +
                      '‚ùå No Proof of Work ‚Üí Easy spam, no consensus\n' +
                      '‚ùå No Failed Attempts ‚Üí We\'d repeat their mistakes\n\n' +
                      'üí° Bitcoin needed ALL of these to work!');
                button.textContent = '‚úÖ Compare: With These';
            } else {
                button.textContent = 'üîÑ Compare: Without These';
            }
        }

        function toggleConnections() {
            const map = document.getElementById('connections-map');
            map.classList.toggle('visible');
        }

        function highlightConnection(e, tech) {
            const connections = {
                crypto: 'Public-Key Cryptography enables Bitcoin\'s digital signatures and addresses. Without it, there\'s no way to prove ownership of coins!',
                network: 'P2P Networks allow Bitcoin to operate without any central server. Every node is equal, making censorship nearly impossible.',
                timestamping: 'Timestamping chains create immutable history. Bitcoin\'s blockchain uses this to prevent double-spending forever.',
                merkle: 'Merkle Trees let Bitcoin compress thousands of transactions into a single 32-byte hash, enabling lightweight wallets.',
                pow: 'Proof of Work makes attacking Bitcoin expensive. It costs real energy to mine blocks, securing the network economically.',
                failed: 'Failed attempts like DigiCash and e-gold taught us what NOT to do: never trust a single company with the money supply.'
            };

            alert('üí° Connection: ' + tech.toUpperCase() + '\n\n' + connections[tech]);

            // Highlight the node
            document.querySelectorAll('.connection-node').forEach(node => {
                node.classList.remove('active');
            });
            e.currentTarget.classList.add('active');
        }

        // === Demo Functions ===

        // SHA-256 helper function
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        let networkState = {
            nodes: ['Node 1', 'Node 2', 'Node 3', 'Node 4', 'Node 5', 'Node 6'],
            offline: []
        };

        function demoNetwork(button) {
            const output = button.nextElementSibling;
            networkState.offline = [];

            output.innerHTML = `
<strong><span data-icon="network"></span> Interactive P2P Network</strong>

<p style="color: var(--text-dim);">Click nodes to take them offline. Watch how the network survives!</p>

<div class="network-grid" id="network-grid">
    ${networkState.nodes.map((node, i) => `
        <div class="network-node" id="node-${i}" onclick="toggleNode(${i})">
            <div style="font-size: 2rem;">üñ•Ô∏è</div>
            <strong>${node}</strong>
            <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                <span style="color: var(--accent-green);">‚óè Online</span>
            </div>
        </div>
    `).join('')}
</div>

<div id="network-status" style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green);">
    <strong>Network Status:</strong> ${networkState.nodes.length}/6 nodes online<br>
    <strong>‚úÖ Network Active:</strong> Transactions flowing normally
</div>

<button onclick="resetNetwork()"><span data-icon="refresh"></span> Reset Network</button>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong><span data-icon="lightbulb"></span> The Power of P2P:</strong><br>
    ‚Ä¢ No central server to attack<br>
    ‚Ä¢ Nodes can go offline without affecting network<br>
    ‚Ä¢ Bitcoin has thousands of reachable nodes across the world<br>
    ‚Ä¢ Network stays alive as long as ONE node exists!
</div>
            `;
            output.classList.add('visible');
        }

        function toggleNode(index) {
            const node = document.getElementById(`node-${index}`);
            const status = document.getElementById('network-status');

            if (networkState.offline.includes(index)) {
                networkState.offline = networkState.offline.filter(n => n !== index);
                node.classList.remove('offline');
                node.innerHTML = `
                    <div style="font-size: 2rem;">üñ•Ô∏è</div>
                    <strong>${networkState.nodes[index]}</strong>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                        <span style="color: var(--accent-green);">‚óè Online</span>
                    </div>
                `;
            } else {
                networkState.offline.push(index);
                node.classList.add('offline');
                node.innerHTML = `
                    <div style="font-size: 2rem;">üíÄ</div>
                    <strong>${networkState.nodes[index]}</strong>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                        <span style="color: #ff4444;">‚óè Offline</span>
                    </div>
                `;
            }

            const online = networkState.nodes.length - networkState.offline.length;
            const networkAlive = online > 0;

            status.innerHTML = `
                <strong>Network Status:</strong> ${online}/6 nodes online<br>
                ${networkAlive
                    ? '<strong style="color: var(--accent-green);">‚úÖ Network Active:</strong> Transactions flowing normally'
                    : '<strong style="color: #ff4444;">‚ùå Network Down:</strong> All nodes offline'}
                ${online < 3 && online > 0 ? '<br><span style="color: #ffaa00;">‚ö†Ô∏è Warning: Low node count</span>' : ''}
            `;
            status.style.borderColor = networkAlive ? 'var(--accent-green)' : '#ff4444';
            status.style.background = networkAlive ? 'rgba(76, 175, 80, 0.1)' : 'rgba(255, 68, 68, 0.1)';
        }

        function resetNetwork() {
            networkState.offline = [];
            networkState.nodes.forEach((_, i) => {
                const node = document.getElementById(`node-${i}`);
                if (node) {
                    node.classList.remove('offline');
                    node.innerHTML = `
                        <div style="font-size: 2rem;">üñ•Ô∏è</div>
                        <strong>${networkState.nodes[i]}</strong>
                        <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                            <span style="color: var(--accent-green);">‚óè Online</span>
                        </div>
                    `;
                }
            });
            const status = document.getElementById('network-status');
            status.innerHTML = `
                <strong>Network Status:</strong> 6/6 nodes online<br>
                <strong>‚úÖ Network Active:</strong> Transactions flowing normally
            `;
            status.style.borderColor = 'var(--accent-green)';
            status.style.background = 'rgba(76, 175, 80, 0.1)';
        }

        function demoDigiCash(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>üí≥ eCash / DigiCash Model (1980s-1998)</strong>

<code>How It Worked:</code>
1. David Chaum developed eCash concept (early 1980s)
2. DigiCash Inc. commercialized it (1989)
3. Banks issued digital coins (cryptographically signed)
4. Users spent coins anonymously
5. Merchants verified with bank
6. Bank prevented double-spending

<code>The Problem:</code>
‚ùå Requires trusting DigiCash Inc.
‚ùå Company went bankrupt in 1998
‚ùå All coins became worthless

<strong><span data-icon="lightbulb"></span> Bitcoin's Fix: No company required!</strong>
            `;
            output.classList.add('visible');
        }

        let moneyStep = 0;

        function demoMoneyAsHistory(button) {
            const output = button.nextElementSibling;
            moneyStep = 0;

            output.innerHTML = `
<strong>üìú The Evolution of Money: From Possession to Proof</strong>

<p style="color: var(--text-dim); margin-bottom: 1rem;">Click through three types of money systems to see how "recorded history" changed everything:</p>

<div id="money-display" style="margin: 1.5rem 0; padding: 1.5rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--primary-orange); border-radius: 0.5rem; min-height: 200px;">
    <div style="text-align: center;">
        <div style="font-size: 3rem; margin: 1rem 0;">ü™ô</div>
        <h4 style="color: var(--primary-orange); margin: 0.5rem 0;">Physical Gold (3000 BC - Present)</h4>
        <p style="color: var(--text-dim); font-size: 0.9rem; margin: 1rem 0;">Possession = Ownership</p>

        <div style="background: rgba(247, 147, 26, 0.1); padding: 1rem; border-radius: 0.5rem; margin: 1rem 0; text-align: left;">
            <strong>How it works:</strong><br>
            ‚Ä¢ Bob physically holds 5 gold coins<br>
            ‚Ä¢ No ledger, no record, just possession<br>
            ‚Ä¢ Transfer = hand over the coins<br><br>

            <strong style="color: var(--accent-green);">‚úÖ Advantages:</strong><br>
            ‚Ä¢ Complete privacy<br>
            ‚Ä¢ No trust required<br>
            ‚Ä¢ Censorship-resistant<br><br>

            <strong style="color: #ff6b6b;">‚ùå Problems:</strong><br>
            ‚Ä¢ Can be stolen or lost<br>
            ‚Ä¢ Hard to verify authenticity<br>
            ‚Ä¢ Impossible to send long distances<br>
            ‚Ä¢ No record = no proof of past ownership
        </div>
    </div>
</div>

<button onclick="nextMoneyStep()" id="money-next-btn" style="width: 100%; padding: 0.75rem; background: var(--primary-orange); border: none; border-radius: 0.5rem; color: white; font-weight: 600; cursor: pointer; margin-top: 1rem;">
    Next: Bank Ledgers ‚Üí
</button>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
    <strong><span data-icon="lightbulb"></span> Key Insight:</strong><br>
    Money evolved from physical possession ‚Üí trusted records ‚Üí cryptographic proof. Bitcoin is the final step: money as immutable, timestamped history that anyone can verify.
</div>
            `;
            output.classList.add('visible');
        }

        function nextMoneyStep() {
            moneyStep++;
            const display = document.getElementById('money-display');
            const btn = document.getElementById('money-next-btn');

            if (moneyStep === 1) {
                // Bank Ledger step
                display.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 3rem; margin: 1rem 0;">üè¶</div>
                        <h4 style="color: var(--accent-blue); margin: 0.5rem 0;">Bank Ledger (1600s - Present)</h4>
                        <p style="color: var(--text-dim); font-size: 0.9rem; margin: 1rem 0;">Centralized Record = Ownership</p>

                        <div style="background: rgba(33, 150, 243, 0.1); padding: 1rem; border-radius: 0.5rem; margin: 1rem 0; text-align: left;">
                            <strong>How it works:</strong><br>
                            ‚Ä¢ Bank maintains a private ledger<br>
                            ‚Ä¢ "Bob's Account: $500" written in bank's database<br>
                            ‚Ä¢ Transfer = bank updates their ledger<br>
                            ‚Ä¢ Only bank can see and modify records<br><br>

                            <strong style="color: var(--accent-green);">‚úÖ Advantages:</strong><br>
                            ‚Ä¢ Easy to send digitally<br>
                            ‚Ä¢ Records provide proof of ownership<br>
                            ‚Ä¢ Insurance and regulations<br><br>

                            <strong style="color: #ff6b6b;">‚ùå Problems:</strong><br>
                            ‚Ä¢ Must trust the bank completely<br>
                            ‚Ä¢ Bank can freeze or confiscate<br>
                            ‚Ä¢ Records can be altered or erased<br>
                            ‚Ä¢ Single point of failure<br>
                            ‚Ä¢ No way to verify bank's claims
                        </div>
                    </div>
                `;
                btn.textContent = 'Next: Bitcoin Blockchain ‚Üí';

            } else if (moneyStep === 2) {
                // Bitcoin step
                display.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 3rem; margin: 1rem 0;">‚Çø</div>
                        <h4 style="color: var(--accent-green); margin: 0.5rem 0;">Bitcoin Blockchain (2009 - Present)</h4>
                        <p style="color: var(--text-dim); font-size: 0.9rem; margin: 1rem 0;">Immutable Public History = Ownership</p>

                        <div style="background: rgba(76, 175, 80, 0.1); padding: 1rem; border-radius: 0.5rem; margin: 1rem 0; text-align: left;">
                            <strong>How it works:</strong><br>
                            ‚Ä¢ Global public ledger, timestamped & chained<br>
                            ‚Ä¢ "Block 750123, 2023-01-15: Alice ‚Üí Bob, 0.5 BTC"<br>
                            ‚Ä¢ Transfer = broadcast to network, verified by thousands<br>
                            ‚Ä¢ Every transaction permanently recorded<br>
                            ‚Ä¢ Anyone can verify the entire history<br><br>

                            <strong style="color: var(--accent-green);">‚úÖ Advantages:</strong><br>
                            ‚Ä¢ No trust required (verify yourself)<br>
                            ‚Ä¢ Cannot be altered or erased (immutable)<br>
                            ‚Ä¢ No single point of failure<br>
                            ‚Ä¢ Censorship-resistant<br>
                            ‚Ä¢ Complete transparency<br>
                            ‚Ä¢ Timestamped proof of every transaction<br><br>

                            <strong style="color: #ffaa00;">‚ö†Ô∏è Trade-off:</strong><br>
                            ‚Ä¢ Less privacy (public ledger)<br>
                            ‚Ä¢ Can use privacy techniques to mitigate
                        </div>

                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(247, 147, 26, 0.2); border: 2px solid var(--primary-orange); border-radius: 0.5rem;">
                            <strong style="color: var(--primary-orange);">üí° The Breakthrough:</strong><br>
                            Bitcoin combines the best of both worlds: the trustlessness of physical gold + the convenience of digital ledgers + cryptographic proof that nobody can cheat. Money becomes <em>recorded history</em> that everyone can verify but nobody can change.
                        </div>
                    </div>
                `;
                btn.textContent = '‚Ü∫ Restart';

            } else {
                // Reset
                demoMoneyAsHistory(document.querySelector('[onclick*="demoMoneyAsHistory"]'));
            }
        }

        let timechainBlocks = [];

        async function demoTimechain(button) {
            const output = button.nextElementSibling;
            timechainBlocks = [];

            output.innerHTML = `
<strong>‚õìÔ∏è Interactive Timechain Builder</strong>

<p style="color: var(--text-dim);">Add documents to see how each block links to the previous one!</p>

<div style="margin: 1rem 0;">
    <input type="text" id="doc-input" placeholder="Enter document content..." value="Genesis Document" />
    <button onclick="addToTimechain()">‚ûï Add Block</button>
</div>

<div id="timechain-display" style="margin-top: 1rem;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong><span data-icon="lock"></span> Why This Works:</strong><br>
    ‚Ä¢ Each block contains the previous block's hash<br>
    ‚Ä¢ Changing any block breaks all subsequent blocks<br>
    ‚Ä¢ The entire chain validates itself!<br>
    ‚Ä¢ This is Bitcoin's blockchain foundation!
</div>
            `;
            output.classList.add('visible');
        }

        async function addToTimechain() {
            const input = document.getElementById('doc-input');
            const data = input.value || 'Document';
            const display = document.getElementById('timechain-display');

            const prevHash = timechainBlocks.length > 0
                ? timechainBlocks[timechainBlocks.length - 1].hash
                : '0000000000000000';

            const hash = await sha256(data + prevHash);
            timechainBlocks.push({ data, prevHash, hash });

            display.innerHTML = timechainBlocks.map((block, i) => `
                <div style="margin: 0.75rem 0; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); border-radius: 0.5rem;">
                    <strong>Block ${i + 1}:</strong> "${block.data}"<br>
                    <small style="color: var(--text-dim);">Previous Hash:</small> <code style="font-size: 0.7rem;">${block.prevHash.substring(0, 16)}...</code><br>
                    <small style="color: var(--text-dim);">This Hash:</small> <code style="font-size: 0.7rem;">${block.hash.substring(0, 16)}...</code>
                </div>
            `).join('');

            input.value = '';
        }

        function demoMerkle(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>üå≥ Merkle Tree Demo</strong>

<p style="color: var(--text-dim);">Watch how 8 transactions compress into 1 root hash:</p>

<div style="text-align: center; margin: 1.5rem 0;">
    <div style="margin: 1rem 0;">
        <strong style="color: var(--primary-orange);">8 Transactions (Bottom):</strong><br>
        <small style="font-size: 0.7rem; color: var(--text-dim);">TX1, TX2, TX3, TX4, TX5, TX6, TX7, TX8</small>
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">‚Üì</div>
    <div style="margin: 1rem 0;">
        <strong>4 Hashes (Pair & Hash):</strong><br>
        <small style="font-size: 0.7rem; color: var(--text-dim);">H(TX1+TX2), H(TX3+TX4), H(TX5+TX6), H(TX7+TX8)</small>
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">‚Üì</div>
    <div style="margin: 1rem 0;">
        <strong>2 Hashes:</strong><br>
        <small style="font-size: 0.7rem; color: var(--text-dim);">H(H12+H34), H(H56+H78)</small>
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">‚Üì</div>
    <div style="margin: 1rem 0; padding: 1rem; background: rgba(76, 175, 80, 0.2); border: 2px solid var(--accent-green); border-radius: 0.5rem;">
        <strong style="color: var(--accent-green);">1 Root Hash (Top):</strong><br>
        <code style="font-size: 0.8rem;">d3a0f1c1e2b3c4d5e6f7...</code>
    </div>
</div>

<div style="padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong><span data-icon="lightbulb"></span> Why This Matters:</strong><br>
    ‚Ä¢ Bitcoin blocks contain thousands of transactions<br>
    ‚Ä¢ Merkle root = single 32-byte hash proving ALL transactions<br>
    ‚Ä¢ You can verify a transaction without downloading entire block!<br>
    ‚Ä¢ This enables lightweight mobile wallets
</div>
            `;
            output.classList.add('visible');
        }

        let spamState = { without: 0, with: 0, withInProgress: false };

        function demoSpamPrevention(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>üö´ Spam Prevention: Before & After Proof of Work</strong>

<div id="spam-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin: 1.5rem 0;">
    <!-- WITHOUT Proof of Work -->
    <div style="background: rgba(255, 68, 68, 0.1); border: 2px solid #ff4444; border-radius: 0.5rem; padding: 1rem;">
        <h4 style="color: #ff4444; margin: 0 0 0.5rem 0;">‚ùå Without PoW</h4>
        <p style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 1rem;">No cost to send emails</p>

        <button onclick="sendSpamWithout()" style="width: 100%; padding: 0.75rem; background: #ff4444; border: none; border-radius: 0.25rem; color: white; font-weight: 600; cursor: pointer;">
            Send 100 Emails
        </button>

        <div id="without-output" style="margin-top: 1rem; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.25rem; min-height: 80px;">
            <div style="font-size: 0.9rem; color: var(--text-dim);">Click to send spam...</div>
        </div>
    </div>

    <!-- WITH Proof of Work -->
    <div style="background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 0.5rem; padding: 1rem;">
        <h4 style="color: var(--accent-green); margin: 0 0 0.5rem 0;">‚úÖ With PoW</h4>
        <p style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 1rem;">Must solve puzzle per email</p>

        <button onclick="sendSpamWith()" id="pow-button" style="width: 100%; padding: 0.75rem; background: var(--accent-green); border: none; border-radius: 0.25rem; color: white; font-weight: 600; cursor: pointer;">
            Send 100 Emails
        </button>

        <div id="with-output" style="margin-top: 1rem; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.25rem; min-height: 80px;">
            <div style="font-size: 0.9rem; color: var(--text-dim);">Click to send with PoW...</div>
        </div>
    </div>
</div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
    <strong><span data-icon="lightbulb"></span> The Economic Barrier:</strong><br>
    ‚Ä¢ Without PoW: Spammers send millions of emails for free<br>
    ‚Ä¢ With PoW: Each email costs time & electricity<br>
    ‚Ä¢ Legitimate users (1-10 emails/day) barely notice<br>
    ‚Ä¢ Spammers (millions/day) become economically impossible<br>
    ‚Ä¢ Bitcoin uses this to prevent spam transactions!
</div>
            `;
            output.classList.add('visible');
        }

        function sendSpamWithout() {
            const output = document.getElementById('without-output');
            spamState.without = 0;

            output.innerHTML = '<div style="color: #ff4444; font-weight: 600;">‚ö° Sending 100 emails instantly...</div>';

            setTimeout(() => {
                spamState.without = 100;
                output.innerHTML = `
                    <div style="color: #ff4444; font-weight: 600;">‚úÖ 100 emails sent!</div>
                    <div style="font-size: 0.85rem; margin-top: 0.5rem;">
                        ‚è±Ô∏è Time: <strong>0.01 seconds</strong><br>
                        üí∞ Cost: <strong>$0.00</strong><br>
                        üìß Rate: <strong>10,000 emails/second</strong>
                    </div>
                    <div style="margin-top: 0.75rem; padding: 0.5rem; background: rgba(255, 68, 68, 0.2); border-radius: 0.25rem; font-size: 0.8rem;">
                        ‚ö†Ô∏è Spammer could send 864 million emails per day!
                    </div>
                `;
            }, 100);
        }

        async function sendSpamWith() {
            const output = document.getElementById('with-output');
            const button = document.getElementById('pow-button');

            if (spamState.withInProgress) return;

            spamState.withInProgress = true;
            spamState.with = 0;
            button.disabled = true;
            button.style.opacity = '0.5';
            button.style.cursor = 'not-allowed';

            const startTime = Date.now();
            const totalEmails = 100;
            const timePerEmail = 80; // milliseconds per email (simulating PoW)

            output.innerHTML = '<div style="color: var(--accent-green); font-weight: 600;">‚õèÔ∏è Solving PoW puzzles...</div>';

            for (let i = 1; i <= totalEmails; i++) {
                await new Promise(resolve => setTimeout(resolve, timePerEmail));
                spamState.with = i;

                if (i % 10 === 0 || i === totalEmails) {
                    const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
                    output.innerHTML = `
                        <div style="color: var(--accent-green); font-weight: 600;">‚õèÔ∏è Working... ${i}/${totalEmails}</div>
                        <div style="font-size: 0.85rem; margin-top: 0.5rem;">
                            ‚è±Ô∏è Elapsed: <strong>${elapsed}s</strong><br>
                            üíª Computing hashes...<br>
                            üìä Progress: <strong>${i}%</strong>
                        </div>
                    `;
                }
            }

            const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);

            output.innerHTML = `
                <div style="color: var(--accent-green); font-weight: 600;">‚úÖ 100 emails sent!</div>
                <div style="font-size: 0.85rem; margin-top: 0.5rem;">
                    ‚è±Ô∏è Time: <strong>${totalTime} seconds</strong><br>
                    üí∞ Cost: <strong>~$0.002 electricity</strong><br>
                    üìß Rate: <strong>${(100 / totalTime).toFixed(1)} emails/second</strong>
                </div>
                <div style="margin-top: 0.75rem; padding: 0.5rem; background: rgba(76, 175, 80, 0.2); border-radius: 0.25rem; font-size: 0.8rem;">
                    ‚úÖ Spammer limited to ~${Math.floor((86400 / (totalTime / 100)))} emails/day<br>
                    (vs 864 million without PoW)
                </div>
            `;

            button.disabled = false;
            button.style.opacity = '1';
            button.style.cursor = 'pointer';
            spamState.withInProgress = false;
        }

        async function demoHashcash(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>‚õèÔ∏è Interactive Hashcash Mining</strong>

<p style="color: var(--text-dim);">Try to find a hash starting with "00" - this is Proof of Work!</p>

<div style="margin: 1rem 0;">
    <label>Message to Mine:</label>
    <input type="text" id="mine-input" value="Hello Bitcoin" />
    <button onclick="mineHash()">‚õèÔ∏è Start Mining</button>
</div>

<div id="mining-output" style="margin-top: 1rem; max-height: 200px; overflow-y: auto;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
    <strong><span data-icon="lightbulb"></span> How <span class="term-tooltip" data-definition="Using energy to solve puzzles and earn new Bitcoin. Like a lottery where more work = more tickets.">Mining</span> Works:</strong><br>
    ‚Ä¢ Computer tries random <span class="term-tooltip" data-definition="Number used once. The winning lottery ticket number found after trying millions of guesses.">nonces</span> (numbers)<br>
    ‚Ä¢ <span class="term-tooltip" data-definition="A unique fingerprint for data. Change one letter, the entire fingerprint changes completely.">Hashes</span> message + nonce repeatedly<br>
    ‚Ä¢ Keeps trying until hash meets difficulty (starts with zeros)<br>
    ‚Ä¢ Finding valid hash = proof you did the work!<br>
    ‚Ä¢ Bitcoin uses this exact concept but MUCH harder
</div>
            `;
            output.classList.add('visible');
        }

        async function mineHash() {
            const input = document.getElementById('mine-input').value;
            const output = document.getElementById('mining-output');
            let nonce = 0;
            let found = false;

            output.innerHTML = '<p>Mining... (looking for hash starting with "00")</p>';

            while (!found && nonce < 10000) {
                const data = input + nonce;
                const hash = await sha256(data);

                const attempt = `<div>Nonce ${nonce}: ${hash.substring(0, 16)}...</div>`;

                if (hash.startsWith('00')) {
                    output.innerHTML += `<div style="color: var(--accent-green); font-weight: bold;">‚úÖ FOUND! Nonce ${nonce}: ${hash.substring(0, 32)}...</div>`;
                    found = true;
                } else {
                    if (nonce % 100 === 0) {
                        output.innerHTML += `<div style="color: var(--text-dim);">Tried ${nonce} attempts...</div>`;
                    }
                }

                nonce++;
            }

            if (!found) {
                output.innerHTML += '<div style="color: #ff4444;">Stopped after 10000 attempts. Try again!</div>';
            }
        }

        function demoCypherpunks(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>üß© The Puzzle Pieces</strong>

<div style="margin: 1rem 0;">
    <strong style="color: #ff6b6b;">e-gold (Douglas Jackson, 1996):</strong><br>
    ‚úÖ Gold-backed digital currency<br>
    ‚úÖ Popular (millions of users)<br>
    ‚ùå Centralized company (shut down by government)<br><br>

    <strong style="color: var(--accent-blue);">b-money (Wei Dai, 1998):</strong><br>
    ‚úÖ Anonymous transactions<br>
    ‚úÖ Decentralized network concept<br>
    ‚ùå No solution for consensus<br><br>

    <strong style="color: var(--primary-orange);">RPOW (Hal Finney, 2004):</strong><br>
    ‚úÖ Reusable proof of work tokens<br>
    ‚úÖ Connected PoW to digital scarcity<br>
    ‚ùå Still required trusted server<br><br>

    <strong style="color: #9b59b6;">Bit Gold (Nick Szabo, 2005):</strong><br>
    ‚úÖ Proof of Work for scarcity<br>
    ‚úÖ Timestamped chain design<br>
    ‚ùå Complex token system
</div>

<div style="padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong><span data-icon="lightbulb"></span> Bitcoin's Breakthrough:</strong><br>
    Satoshi took the BEST parts of each system and solved the missing pieces. Bitcoin = b-money's decentralization + Bit Gold's proof of work + RPOW's reusability + no single point of failure!
</div>
            `;
            output.classList.add('visible');
        }

        function demoWhitepaper(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>üìÑ Bitcoin Whitepaper - Key Excerpt</strong>

<div style="margin: 1.5rem 0; padding: 1rem; background: rgba(0, 0, 0, 0.5); border-left: 3px solid var(--primary-orange); font-style: italic; line-height: 1.8;">
    "A purely peer-to-peer version of electronic cash would allow online payments to be sent directly from one party to another without going through a financial institution... We propose a solution to the double-spending problem using a peer-to-peer network. The network timestamps transactions by hashing them into an ongoing chain of hash-based proof-of-work..."
    <div style="text-align: right; margin-top: 0.5rem; font-style: normal; color: var(--text-dim);">‚Äî Satoshi Nakamoto, October 31, 2008</div>
</div>

<div style="padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
    <strong>üîë Key Innovation:</strong><br>
    Satoshi solved the "double-spending problem" without needing a trusted third party. Every previous attempt required trust in SOMEONE. Bitcoin needs trust in NO ONE - only math and code.
</div>
            `;
            output.classList.add('visible');
        }

        function demoGenesis(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>‚õèÔ∏è The Genesis Block</strong>

<div style="margin: 1.5rem 0; padding: 1rem; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary-orange); border-radius: 0.5rem; font-family: monospace; font-size: 0.85rem;">
    <strong>Block #0</strong><br>
    Timestamp: 2009-01-03 18:15:05<br>
    Previous Hash: 0000000000000000000000000000000000000000000000000000000000000000<br>
    <br>
    <strong style="color: var(--primary-orange);">Hidden Message:</strong><br>
    "The Times 03/Jan/2009 Chancellor on brink of second bailout for banks"<br>
    <br>
    <strong style="color: var(--accent-green);">Block Hash Found:</strong><br>
    <span style="color: var(--accent-green); word-break: break-all;">000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f</span><br>
    <br>
    <strong>Nonce Used:</strong> 0x7c2bac1d<br>
    Reward: 50 BTC (unspendable)
</div>

<div style="padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>üóûÔ∏è Why This Message?</strong><br>
    Satoshi embedded a newspaper headline about bank bailouts. It proves Bitcoin started on January 3, 2009, AND makes a political statement: Bitcoin is an alternative to the corrupt banking system that failed in 2008.
</div>

<div style="padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem; margin-top: 1rem;">
    <strong>üî¢ What's a <span class="term-tooltip" data-definition="Number used once. The winning lottery ticket number found after trying millions of guesses.">Nonce</span>?</strong><br>
    The "nonce" is the winning lottery ticket number Satoshi found after trying millions of guesses. When combined with the block data, it produces a <span class="term-tooltip" data-definition="A unique fingerprint for data. Change one letter, the entire fingerprint changes completely.">hash</span> starting with many zeros‚Äîproof that real computational work was done.
</div>
            `;
            output.classList.add('visible');
        }

        function demoPizza(button) {
            const output = button.nextElementSibling;
            const bitcoinPrice = 95000; // Approximate current BTC price
            const pizzaBTC = 10000;
            const currentValue = (pizzaBTC * bitcoinPrice).toLocaleString();

            output.innerHTML = `
<strong>üçï The $${(pizzaBTC * bitcoinPrice / 1000000).toFixed(0)} Million Pizza</strong>

<div style="margin: 1.5rem 0; text-align: center;">
    <div style="font-size: 4rem; margin: 1rem 0;">üçïüçï</div>
    <div style="font-size: 1.5rem; color: var(--primary-orange); margin: 1rem 0;">
        10,000 BTC = 2 Pizzas (2010)
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">‚Üì</div>
    <div style="font-size: 1.5rem; color: var(--accent-green); margin: 1rem 0;">
        10,000 BTC = $${currentValue} (Today)
    </div>
</div>

<div style="padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong>üéâ Why We Celebrate:</strong><br>
    May 22 is now "Bitcoin Pizza Day" - celebrating the first real-world Bitcoin transaction. Laszlo Hanyecz proved Bitcoin could be used as actual currency, not just a theoretical concept. Every revolution starts with one brave person willing to try!
</div>
            `;
            output.classList.add('visible');
        }

        // === Modal Control ===

        function openModal() {
            const modal = document.getElementById("demoModal");
            modal.classList.remove("hidden");
            modal.setAttribute("aria-hidden", "false");
        }

        function closeModal() {
            const modal = document.getElementById("demoModal");
            modal.classList.add("hidden");
            modal.setAttribute("aria-hidden", "true");
            document.getElementById("demoMount").innerHTML = "";
        }

        // Close modal on button click
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById("demoClose").addEventListener("click", closeModal);

            // Close modal on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') closeModal();
            });

            // Close modal on background click
            document.getElementById("demoModal").addEventListener("click", function(e) {
                if (e.target === this) closeModal();
            });
        });

        // === WebCrypto Signature Demo Functions ===

        async function generateEcdsaKeys() {
            return crypto.subtle.generateKey(
                { name: "ECDSA", namedCurve: "P-256" },
                true,
                ["sign", "verify"]
            );
        }

        function enc(str) {
            return new TextEncoder().encode(str);
        }

        function b64(buf) {
            const bytes = new Uint8Array(buf);
            let bin = "";
            for (const b of bytes) bin += String.fromCharCode(b);
            return btoa(bin);
        }

        async function exportPublicKeyJwk(publicKey) {
            return crypto.subtle.exportKey("jwk", publicKey);
        }

        async function signMessage(privateKey, message) {
            return crypto.subtle.sign(
                { name: "ECDSA", hash: "SHA-256" },
                privateKey,
                enc(message)
            );
        }

        async function verifySig(publicKey, message, signature) {
            return crypto.subtle.verify(
                { name: "ECDSA", hash: "SHA-256" },
                publicKey,
                signature,
                enc(message)
            );
        }

        function renderSignaturesDemo(mountEl) {
            mountEl.innerHTML = `
                <div class="demoWrap">
                    <h2>‚úçÔ∏è Digital Signatures Demo</h2>
                    <p>Write a message. Sign it. Verify it. Then change one character and watch it fail.</p>

                    <label>Message</label>
                    <textarea id="sigMsg" rows="3">I owe you 1 BTC</textarea>

                    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
                        <button id="sigGen">Generate Keys</button>
                        <button id="sigSign" disabled>Sign Message</button>
                        <button id="sigVerify" disabled>Verify Signature</button>
                    </div>

                    <div style="margin-top:14px;">
                        <div><strong>Status</strong></div>
                        <div id="sigStatus">Generate keys to start.</div>
                    </div>

                    <div style="margin-top:14px;">
                        <div><strong>Public Key (share this)</strong></div>
                        <pre id="sigPub" style="white-space:pre-wrap;">No key yet...</pre>
                    </div>

                    <div style="margin-top:14px;">
                        <div><strong>Signature</strong></div>
                        <pre id="sigOut" style="white-space:pre-wrap;">No signature yet...</pre>
                    </div>

                    <div style="margin-top:14px; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
                        <strong>üí° Key Insight:</strong><br>
                        ‚Ä¢ <strong>Verification is public.</strong> Anyone with the public key can verify.<br>
                        ‚Ä¢ <strong>Signing is private.</strong> Only the private key can sign.<br>
                        ‚Ä¢ If one character changes, verification fails. That is the point.<br>
                        ‚Ä¢ Bitcoin uses secp256k1 (different curve), same concept.
                    </div>
                </div>
            `;

            const msgEl = mountEl.querySelector("#sigMsg");
            const statusEl = mountEl.querySelector("#sigStatus");
            const pubEl = mountEl.querySelector("#sigPub");
            const sigEl = mountEl.querySelector("#sigOut");
            const genBtn = mountEl.querySelector("#sigGen");
            const signBtn = mountEl.querySelector("#sigSign");
            const verifyBtn = mountEl.querySelector("#sigVerify");

            let keys = null;
            let signature = null;
            let signedMessage = null;

            genBtn.addEventListener("click", async () => {
                statusEl.textContent = "‚öôÔ∏è Generating cryptographic keys...";
                keys = await generateEcdsaKeys();
                const jwk = await exportPublicKeyJwk(keys.publicKey);
                pubEl.textContent = `x: ${jwk.x}\ny: ${jwk.y}`;
                signature = null;
                sigEl.textContent = "No signature yet...";
                signBtn.disabled = false;
                verifyBtn.disabled = true;
                statusEl.innerHTML = '<span style="color: var(--accent-green);">‚úÖ Keys ready. Now sign the message.</span>';
            });

            signBtn.addEventListener("click", async () => {
                if (!keys) return;
                statusEl.textContent = "‚úçÔ∏è Signing with private key...";
                signedMessage = msgEl.value;
                signature = await signMessage(keys.privateKey, signedMessage);
                sigEl.textContent = b64(signature);
                verifyBtn.disabled = false;
                statusEl.innerHTML = '<span style="color: var(--accent-green);">‚úÖ Signed! Now verify. Try changing the message first to see it fail.</span>';
            });

            verifyBtn.addEventListener("click", async () => {
                if (!keys || !signature) return;
                statusEl.textContent = "üîç Verifying signature with public key...";
                const ok = await verifySig(keys.publicKey, msgEl.value, signature);

                if (ok) {
                    statusEl.innerHTML = '<span class="status-valid">‚úÖ VALID SIGNATURE</span><br>Message matches what was signed. Verification is public‚Äîanyone with the public key can verify this.';
                } else {
                    statusEl.innerHTML = '<span class="status-invalid">‚ùå INVALID SIGNATURE</span><br>Message was changed! This proves tampering. The signature no longer matches.';
                }
            });
        }

        function openSignaturesDemo() {
            openModal();
            renderSignaturesDemo(document.getElementById("demoMount"));
        }

        // === Keys Demo (Real WebCrypto - No Signatures) ===

        async function exportPrivateKeyJwk(privateKey) {
            return crypto.subtle.exportKey("jwk", privateKey);
        }

        function renderKeysDemo(mountEl) {
            mountEl.innerHTML = `
                <div class="demoWrap">
                    <h2>üîë Public-Key Cryptography Demo</h2>
                    <p>The breakthrough: Two mathematically linked keys. One private (secret), one public (shareable).</p>

                    <div style="margin: 1.5rem 0;">
                        <button id="generateKeysBtn" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                            üé≤ Generate New Key Pair
                        </button>
                    </div>

                    <div id="keysDisplay" style="display: none;">
                        <div style="margin: 1.5rem 0; padding: 1.5rem; background: rgba(255, 68, 68, 0.1); border: 2px solid #ff4444; border-radius: 0.5rem;">
                            <h3 style="color: #ff4444; margin: 0 0 1rem 0;">üîí Private Key (Keep Secret!)</h3>
                            <pre id="privateKeyDisplay" style="border-color: #ff4444; word-break: break-all; font-size: 0.85rem;"></pre>
                            <p style="font-size: 0.9rem; margin-top: 0.5rem;">‚ö†Ô∏è Never share this. Anyone with your private key controls your coins.</p>
                        </div>

                        <div style="margin: 1.5rem 0; padding: 1.5rem; background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 0.5rem;">
                            <h3 style="color: var(--accent-green); margin: 0 0 1rem 0;">üåç Public Key (Share Freely)</h3>
                            <pre id="publicKeyDisplay" style="border-color: var(--accent-green); word-break: break-all; font-size: 0.85rem;"></pre>
                            <p style="font-size: 0.9rem; margin-top: 0.5rem;">‚úÖ Share this with anyone. It's safe. Your Bitcoin address is derived from this.</p>
                        </div>

                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue);">
                            <strong>üîó Mathematical Link:</strong><br>
                            The public key (x, y coordinates) is mathematically derived from the private key (d value) using one-way math.
                            It's impossible to reverse: you cannot calculate d from x and y.
                        </div>
                    </div>

                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange);">
                        <strong>üí° The 1976 Breakthrough:</strong><br><br>
                        <strong>1. Two Mathematically Linked Keys</strong><br>
                        Public key is derived from the private key using one-way math. You can't reverse it.<br><br>

                        <strong>2. Two Revolutionary Uses</strong><br>
                        ‚Ä¢ <strong>Encryption:</strong> Encrypt with public key ‚Üí only private key can decrypt<br>
                        ‚Ä¢ <strong>Signatures:</strong> Sign with private key ‚Üí anyone can verify with public key<br><br>

                        <strong>3. Why This Changed Everything</strong><br>
                        Before 1976, you needed to share a secret to communicate securely. Now you don't.
                        This unlocked the internet, e-commerce, and Bitcoin.<br><br>

                        <small style="opacity: 0.8;">Note: This demo uses P-256. Bitcoin uses secp256k1. Concept is the same.</small>
                    </div>
                </div>
            `;

            // Add event listener for generate button
            const generateBtn = mountEl.querySelector('#generateKeysBtn');
            const keysDisplay = mountEl.querySelector('#keysDisplay');
            const privateKeyDisplay = mountEl.querySelector('#privateKeyDisplay');
            const publicKeyDisplay = mountEl.querySelector('#publicKeyDisplay');

            generateBtn.addEventListener('click', async () => {
                generateBtn.disabled = true;
                generateBtn.textContent = '‚öôÔ∏è Generating...';

                // Generate real ECDSA keys using WebCrypto
                const keys = await generateEcdsaKeys();
                const pub = await exportPublicKeyJwk(keys.publicKey);
                const priv = await exportPrivateKeyJwk(keys.privateKey);

                // Display keys in JWK format
                privateKeyDisplay.textContent = `d: ${priv.d}`;
                publicKeyDisplay.textContent = `x: ${pub.x}\ny: ${pub.y}`;

                // Show the keys display
                keysDisplay.style.display = 'block';

                // Update button
                generateBtn.disabled = false;
                generateBtn.innerHTML = 'üîÑ Generate Another Key Pair';
            });
        }

        function openKeysDemo() {
            openModal();
            renderKeysDemo(document.getElementById("demoMount"));
        }
    </script>

    <!-- Demo Modal -->
    <div id="demoModal" class="modal hidden" aria-hidden="true">
        <div class="modalCard">
            <button id="demoClose" class="modalClose" type="button">‚úï Close</button>
            <div id="demoMount"></div>
        </div>
    </div>

    <!-- Animated Icon Library -->
    <script src="/js/icon-library.js"></script>
    <script>
        // Inject icons after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            if (window.IconLibrary) {
                document.querySelectorAll('[data-icon]').forEach(function(element) {
                    var iconName = element.getAttribute('data-icon');
                    if (iconName) {
                        var iconHTML = IconLibrary.get(iconName, 20, true);
                        var span = document.createElement('span');
                        span.innerHTML = iconHTML;
                        span.className = 'icon-inline';
                        span.style.marginRight = '0.5rem';
                        span.style.display = 'inline-block';
                        span.style.verticalAlign = 'middle';
                        element.insertBefore(span, element.firstChild);
                    }
                });
            }
        });
    </script>
</body>
</html>
