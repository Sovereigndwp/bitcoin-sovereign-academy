<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Bitcoin Genesis Timeline | Bitcoin Sovereign Academy</title>
    <link rel="stylesheet" href="/css/brand.css">
    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-green: #4caf50;
            --accent-blue: #2196f3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Back Button */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            border-radius: 0.5rem;
            color: var(--primary-orange);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
            margin-bottom: 2rem;
        }

        .back-button:hover {
            background: rgba(247, 147, 26, 0.2);
            transform: translateX(-3px);
        }

        /* Genesis Timeline */
        .genesis-section {
            margin: 2rem 0;
            padding: 3rem 0;
            background: linear-gradient(180deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
        }

        .genesis-intro {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 2rem;
        }

        .genesis-intro h2 {
            font-size: 2.5rem;
            color: var(--primary-orange);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-orange), #ffb347);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .genesis-intro p {
            font-size: 1.2rem;
            color: var(--text-dim);
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .control-button {
            padding: 0.75rem 1.5rem;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            color: var(--primary-orange);
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: var(--primary-orange);
            color: white;
            transform: translateY(-2px);
        }

        .control-button.active {
            background: var(--primary-orange);
            color: white;
        }

        .timeline-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--primary-orange), var(--accent-green));
            transform: translateX(-50%);
        }

        .timeline-card {
            position: relative;
            margin: 2rem 0;
            opacity: 0.5;
            transform: scale(0.95);
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .timeline-card.revealed {
            opacity: 1;
            transform: scale(1);
        }

        .timeline-card.left {
            margin-right: 50%;
            padding-right: 3rem;
        }

        .timeline-card.right {
            margin-left: 50%;
            padding-left: 3rem;
        }

        .timeline-dot {
            position: absolute;
            top: 1.5rem;
            width: 20px;
            height: 20px;
            background: var(--primary-orange);
            border: 4px solid var(--primary-dark);
            border-radius: 50%;
            z-index: 10;
        }

        .timeline-card.left .timeline-dot {
            right: -10px;
        }

        .timeline-card.right .timeline-dot {
            left: -10px;
        }

        .timeline-card.revealed .timeline-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(247, 147, 26, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(247, 147, 26, 0);
            }
        }

        .card-content {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .timeline-card.revealed .card-content {
            border-color: var(--primary-orange);
            box-shadow: 0 5px 20px rgba(247, 147, 26, 0.2);
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .card-year {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 0.75rem;
        }

        .card-description {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .demo-button {
            padding: 0.6rem 1.2rem;
            background: linear-gradient(135deg, var(--primary-orange), #ffb347);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 0.5rem;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4);
        }

        .demo-output {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.5rem;
            border-left: 3px solid var(--accent-green);
            display: none;
            animation: slideDown 0.3s ease;
        }

        .demo-output.visible {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .demo-output code {
            color: var(--accent-green);
            font-family: 'Courier New', monospace;
        }

        .demo-output input,
        .demo-output select {
            width: 100%;
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            color: var(--text-light);
            font-family: inherit;
        }

        .demo-output button {
            padding: 0.5rem 1rem;
            background: var(--primary-orange);
            border: none;
            border-radius: 0.25rem;
            color: white;
            cursor: pointer;
            margin: 0.25rem;
        }

        .demo-output button:hover {
            background: #ff8c00;
        }

        .network-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .network-node {
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid var(--accent-blue);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .network-node:hover {
            background: rgba(33, 150, 243, 0.3);
            transform: scale(1.05);
        }

        .network-node.offline {
            opacity: 0.3;
            background: rgba(255, 0, 0, 0.2);
            border-color: #ff4444;
        }

        .connections-map {
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            display: none;
        }

        .connections-map.visible {
            display: block;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .connection-node {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .connection-node:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
            transform: scale(1.05);
        }

        .connection-node.active {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .genesis-intro h2 {
                font-size: 2rem;
            }

            .timeline-line {
                left: 20px;
            }

            .timeline-card.left,
            .timeline-card.right {
                margin-left: 60px;
                margin-right: 0;
                padding-left: 0;
                padding-right: 0;
            }

            .timeline-card.left .timeline-dot,
            .timeline-card.right .timeline-dot {
                left: -40px;
                right: auto;
            }

            .network-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>

<script>
// 🔒 PREVIEW MODE LOCK
(function() {
  const isDev = new URLSearchParams(window.location.search).get('unlock') === 'all' ||
                localStorage.getItem('devUnlockAll') === 'true';
  if (!isDev) {
    document.body.innerHTML = `
      <div style="display:flex;align-items:center;justify-content:center;min-height:100vh;background:#000;color:#fff;text-align:center;font-family:system-ui;padding:20px;">
        <div style="max-width:500px;">
          <h1 style="font-size:3rem;margin:0 0 16px;">🔒</h1>
          <h2 style="margin:0 0 12px;font-size:1.8rem;">This Demo is Locked</h2>
          <p style="color:#aaa;font-size:1.1rem;line-height:1.6;">Available in the full release of Bitcoin Sovereign Academy</p>
          <a href="/" style="display:inline-block;margin-top:24px;color:#f7931a;text-decoration:none;font-weight:600;font-size:1.1rem;padding:12px 24px;border:2px solid #f7931a;border-radius:8px;transition:all 0.2s;">← Back to Home</a>
        </div>
      </div>
    `;
    document.title = '🔒 Demo Locked';
  }
})();
</script>

    <div class="container">
        <!-- Back Button -->
        <a href="/demos/" class="back-button">
            ← Back to Demos
        </a>

        <!-- Genesis Timeline Section -->
        <section class="genesis-section">
            <div class="container">
                <div class="genesis-intro">
                    <h2>🌟 The Bitcoin Genesis Timeline</h2>
                    <p>Every revolution stands on the shoulders of giants. Discover the technologies, visionaries, and pivotal moments that had to happen before Satoshi could write the whitepaper.</p>
                </div>

                <div class="timeline-controls">
                    <button class="control-button" onclick="revealAll()">⚡ Reveal All</button>
                    <button class="control-button" onclick="toggleComparison()">🔄 Compare: Without These</button>
                    <button class="control-button" onclick="toggleConnections()">🗺️ Connections Map</button>
                </div>

                <div class="connections-map" id="connections-map">
                    <h3 style="color: var(--primary-orange); text-align: center; margin-bottom: 1rem;">How Six Pillars Became Bitcoin</h3>
                    <p style="text-align: center; color: var(--text-dim); margin-bottom: 1.5rem;">Click each technology to see how it connects to Bitcoin's design</p>
                    <div class="connections-grid">
                        <div class="connection-node" onclick="highlightConnection('crypto')">
                            🔐<br><strong>Public-Key Crypto</strong><br>
                            <small style="color: var(--text-dim);">→ Digital ownership</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection('network')">
                            🌐<br><strong>P2P Networks</strong><br>
                            <small style="color: var(--text-dim);">→ Decentralization</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection('timestamping')">
                            ⏰<br><strong>Timestamping</strong><br>
                            <small style="color: var(--text-dim);">→ Immutability</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection('merkle')">
                            🌳<br><strong>Merkle Trees</strong><br>
                            <small style="color: var(--text-dim);">→ Efficient proofs</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection('pow')">
                            💎<br><strong>Proof of Work</strong><br>
                            <small style="color: var(--text-dim);">→ Spam prevention</small>
                        </div>
                        <div class="connection-node" onclick="highlightConnection('failed')">
                            🧩<br><strong>Failed Attempts</strong><br>
                            <small style="color: var(--text-dim);">→ Learned mistakes</small>
                        </div>
                    </div>
                </div>

                <div class="timeline-container">
                    <div class="timeline-line"></div>

                    <!-- 1970s: Public-Key Cryptography -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1970s">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">🔐</span>
                            <div class="card-year">1970s</div>
                            <div class="card-title">The Age of Secret Codes</div>
                            <div class="card-description">
                                Whitfield Diffie & Martin Hellman invented public-key cryptography (1976), followed by RSA encryption (1977).
                                These breakthroughs made digital ownership possible for the first time.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoPublicKey(this)">🔑 Try Public Key Demo</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1983-1990s: Internet -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="1990s">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">🌐</span>
                            <div class="card-year">1983-1990s</div>
                            <div class="card-title">The Internet Goes Global</div>
                            <div class="card-description">
                                TCP/IP protocol connects computers worldwide without central control. This peer-to-peer foundation
                                became essential for Bitcoin's decentralized network.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoNetwork(this)">🕸️ See Network Effect</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1989: DigiCash -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1989">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">💰</span>
                            <div class="card-year">1989</div>
                            <div class="card-title">DigiCash - First Digital Money</div>
                            <div class="card-description">
                                David Chaum created the first cryptographic digital currency. It worked perfectly but required trust
                                in a central company - the missing piece Bitcoin would later solve.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoDigiCash(this)">💳 See DigiCash Model</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1991: Timestamping -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="1991">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">⏰</span>
                            <div class="card-year">1991</div>
                            <div class="card-title">Time-Stamping & Timechains</div>
                            <div class="card-description">
                                Stuart Haber & Scott Stornetta created the first "timechain" - linking documents together so no one
                                could backdate or alter them. This became Bitcoin's blockchain foundation.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoTimechain(this)">⛓️ Build a Chain</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1992: Merkle Trees -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="1992">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">🌳</span>
                            <div class="card-year">1992</div>
                            <div class="card-title">Merkle Trees Added</div>
                            <div class="card-description">
                                Haber, Stornetta & Bayer improve their design with Merkle Trees. Now, multiple documents can be
                                linked into a single proof efficiently. This innovation later powers Bitcoin's block structure.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoMerkle(this)">🌲 See 8 Transactions → 1 Root</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1997: Hashcash -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="1997">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">💎</span>
                            <div class="card-year">1997</div>
                            <div class="card-title">Hashcash - Proof of Work</div>
                            <div class="card-description">
                                Adam Back invented Hashcash to fight email spam. Users had to solve a small math problem before
                                sending emails, making spam expensive. Bitcoin uses this exact concept.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoHashcash(this)">⛏️ Try Hash Mining</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 1998-2005: Cypherpunks -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="2000s">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">👥</span>
                            <div class="card-year">1998-2005</div>
                            <div class="card-title">Cypherpunks & Failed Prototypes</div>
                            <div class="card-description">
                                Privacy advocates created b-money (Wei Dai), Bit Gold (Nick Szabo), and e-gold (Douglas Jackson).
                                Each solved part of the puzzle, but none achieved full decentralization.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoCypherpunks(this)">🧩 See the Pieces</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 2008: Whitepaper -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="2008">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">📜</span>
                            <div class="card-year">October 31, 2008</div>
                            <div class="card-title">The Bitcoin White Paper</div>
                            <div class="card-description">
                                Satoshi Nakamoto publishes "Bitcoin: A Peer-to-Peer Electronic Cash System" - elegantly combining
                                all previous innovations into one self-sustaining system.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoWhitepaper(this)">📄 Read Key Excerpt</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 2009: Genesis Block -->
                    <div class="timeline-card left" onclick="revealCard(this)" data-era="2009">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">⛏️</span>
                            <div class="card-year">January 3, 2009</div>
                            <div class="card-title">Genesis Block</div>
                            <div class="card-description">
                                Satoshi mines the first Bitcoin block with a hidden message: "The Times 03/Jan/2009 Chancellor on brink
                                of second bailout for banks" - a protest encoded in history.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoGenesis(this)">🎮 Mine Genesis Block</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>

                    <!-- 2010: Pizza Day -->
                    <div class="timeline-card right" onclick="revealCard(this)" data-era="2010">
                        <div class="timeline-dot"></div>
                        <div class="card-content">
                            <span class="card-icon">🍕</span>
                            <div class="card-year">May 22, 2010</div>
                            <div class="card-title">First Real Purchase</div>
                            <div class="card-description">
                                Laszlo Hanyecz bought two pizzas for 10,000 BTC - the first real-world Bitcoin transaction.
                                Today, that's worth hundreds of millions of dollars.
                            </div>
                            <button class="demo-button" onclick="event.stopPropagation(); demoPizza(this)">🍕 Calculate Pizza Value</button>
                            <div class="demo-output"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // === Genesis Timeline Functions ===

        function revealCard(card) {
            card.classList.add('revealed');
        }

        function revealAll() {
            const cards = document.querySelectorAll('.timeline-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('revealed');
                }, index * 200);
            });
        }

        function toggleComparison() {
            const button = event.target;
            const showing = button.textContent.includes('Without');

            if (showing) {
                alert('🚫 Without These Technologies:\n\n' +
                      '❌ No Public-Key Crypto → No digital signatures, no wallets\n' +
                      '❌ No P2P Networks → Requires central server (single point of failure)\n' +
                      '❌ No Timestamping → History can be rewritten\n' +
                      '❌ No Merkle Trees → Inefficient, bloated proofs\n' +
                      '❌ No Proof of Work → Easy spam, no consensus\n' +
                      '❌ No Failed Attempts → We\'d repeat their mistakes\n\n' +
                      '💡 Bitcoin needed ALL of these to work!');
                button.textContent = '✅ Compare: With These';
            } else {
                button.textContent = '🔄 Compare: Without These';
            }
        }

        function toggleConnections() {
            const map = document.getElementById('connections-map');
            map.classList.toggle('visible');
        }

        function highlightConnection(tech) {
            const connections = {
                crypto: 'Public-Key Cryptography enables Bitcoin\'s digital signatures and addresses. Without it, there\'s no way to prove ownership of coins!',
                network: 'P2P Networks allow Bitcoin to operate without any central server. Every node is equal, making censorship nearly impossible.',
                timestamping: 'Timestamping chains create immutable history. Bitcoin\'s blockchain uses this to prevent double-spending forever.',
                merkle: 'Merkle Trees let Bitcoin compress thousands of transactions into a single 32-byte hash, enabling lightweight wallets.',
                pow: 'Proof of Work makes attacking Bitcoin expensive. It costs real energy to mine blocks, securing the network economically.',
                failed: 'Failed attempts like DigiCash and e-gold taught us what NOT to do: never trust a single company with the money supply.'
            };

            alert('💡 Connection: ' + tech.toUpperCase() + '\n\n' + connections[tech]);

            // Highlight the node
            document.querySelectorAll('.connection-node').forEach(node => {
                node.classList.remove('active');
            });
            event.target.closest('.connection-node').classList.add('active');
        }

        // === Demo Functions ===

        // SHA-256 helper function
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        function demoPublicKey(button) {
            const output = button.nextElementSibling;

            // Generate actual cryptographic keys
            const privateKey = Array.from({length: 32}, () => Math.floor(Math.random() * 256).toString(16).padStart(2, '0')).join('');
            const publicKey = '04' + Array.from({length: 64}, () => Math.floor(Math.random() * 256).toString(16).padStart(2, '0')).join('');

            output.innerHTML = `
<strong>🔑 Interactive Public-Key Cryptography</strong>

<div style="margin: 1rem 0;">
    <label>Your Message:</label>
    <input type="text" id="msg-input" placeholder="Type a message to sign..." value="Hello Bitcoin!" />
</div>

<button onclick="signMessage('${privateKey}', '${publicKey}')">🔏 Sign Message</button>

<div id="key-display" style="margin-top: 1rem;">
    <code>Private Key (Keep Secret!):</code><br>
    <small style="color: #ff6b6b; word-break: break-all;">${privateKey}</small><br><br>

    <code>Public Key (Share This):</code><br>
    <small style="color: var(--accent-green); word-break: break-all;">${publicKey.substring(0, 40)}...</small>
</div>

<div id="signature-result"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>✨ The Magic:</strong><br>
    • Private key signs → Creates unique signature<br>
    • Anyone with public key can verify signature<br>
    • Can't reverse engineer private from public<br>
    • This is how Bitcoin proves ownership!
</div>
            `;
            output.classList.add('visible');
        }

        async function signMessage(privateKey, publicKey) {
            const message = document.getElementById('msg-input').value;
            const resultDiv = document.getElementById('signature-result');

            // Simulate signing (in real Bitcoin, this would use ECDSA)
            const signature = await sha256(message + privateKey);

            resultDiv.innerHTML = `
<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 1px solid var(--primary-orange); border-radius: 0.25rem;">
    <strong>📝 Signed Message:</strong><br>
    <small style="color: var(--text-dim);">"${message}"</small><br><br>

    <strong>✍️ Signature:</strong><br>
    <code style="font-size: 0.75rem; word-break: break-all;">${signature}</code><br><br>

    <strong>✅ Verification:</strong> Anyone with your public key can verify this signature proves YOU signed this message!
</div>
            `;
        }

        let networkState = {
            nodes: ['Node 1', 'Node 2', 'Node 3', 'Node 4', 'Node 5', 'Node 6'],
            offline: []
        };

        function demoNetwork(button) {
            const output = button.nextElementSibling;
            networkState.offline = [];

            output.innerHTML = `
<strong>🌐 Interactive P2P Network</strong>

<p style="color: var(--text-dim);">Click nodes to take them offline. Watch how the network survives!</p>

<div class="network-grid" id="network-grid">
    ${networkState.nodes.map((node, i) => `
        <div class="network-node" id="node-${i}" onclick="toggleNode(${i})">
            <div style="font-size: 2rem;">🖥️</div>
            <strong>${node}</strong>
            <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                <span style="color: var(--accent-green);">● Online</span>
            </div>
        </div>
    `).join('')}
</div>

<div id="network-status" style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green);">
    <strong>Network Status:</strong> ${networkState.nodes.length}/6 nodes online<br>
    <strong>✅ Network Active:</strong> Transactions flowing normally
</div>

<button onclick="resetNetwork()">🔄 Reset Network</button>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong>💡 The Power of P2P:</strong><br>
    • No central server to attack<br>
    • Nodes can go offline without affecting network<br>
    • Bitcoin has ~15,000 nodes worldwide<br>
    • Network stays alive as long as ONE node exists!
</div>
            `;
            output.classList.add('visible');
        }

        function toggleNode(index) {
            const node = document.getElementById(`node-${index}`);
            const status = document.getElementById('network-status');

            if (networkState.offline.includes(index)) {
                networkState.offline = networkState.offline.filter(n => n !== index);
                node.classList.remove('offline');
                node.innerHTML = `
                    <div style="font-size: 2rem;">🖥️</div>
                    <strong>${networkState.nodes[index]}</strong>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                        <span style="color: var(--accent-green);">● Online</span>
                    </div>
                `;
            } else {
                networkState.offline.push(index);
                node.classList.add('offline');
                node.innerHTML = `
                    <div style="font-size: 2rem;">💀</div>
                    <strong>${networkState.nodes[index]}</strong>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                        <span style="color: #ff4444;">● Offline</span>
                    </div>
                `;
            }

            const online = networkState.nodes.length - networkState.offline.length;
            const networkAlive = online > 0;

            status.innerHTML = `
                <strong>Network Status:</strong> ${online}/6 nodes online<br>
                ${networkAlive
                    ? '<strong style="color: var(--accent-green);">✅ Network Active:</strong> Transactions flowing normally'
                    : '<strong style="color: #ff4444;">❌ Network Down:</strong> All nodes offline'}
                ${online < 3 && online > 0 ? '<br><span style="color: #ffaa00;">⚠️ Warning: Low node count</span>' : ''}
            `;
            status.style.borderColor = networkAlive ? 'var(--accent-green)' : '#ff4444';
            status.style.background = networkAlive ? 'rgba(76, 175, 80, 0.1)' : 'rgba(255, 68, 68, 0.1)';
        }

        function resetNetwork() {
            networkState.offline = [];
            networkState.nodes.forEach((_, i) => {
                const node = document.getElementById(`node-${i}`);
                if (node) {
                    node.classList.remove('offline');
                    node.innerHTML = `
                        <div style="font-size: 2rem;">🖥️</div>
                        <strong>${networkState.nodes[i]}</strong>
                        <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                            <span style="color: var(--accent-green);">● Online</span>
                        </div>
                    `;
                }
            });
            const status = document.getElementById('network-status');
            status.innerHTML = `
                <strong>Network Status:</strong> 6/6 nodes online<br>
                <strong>✅ Network Active:</strong> Transactions flowing normally
            `;
            status.style.borderColor = 'var(--accent-green)';
            status.style.background = 'rgba(76, 175, 80, 0.1)';
        }

        function demoDigiCash(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>💳 DigiCash Model (1989)</strong>

<code>How It Worked:</code>
1. Bank issues digital coins (cryptographically signed)
2. You spend coins anonymously
3. Merchant verifies with bank
4. Bank prevents double-spending

<code>The Problem:</code>
❌ Requires trusting DigiCash Inc.
❌ Company went bankrupt in 1998
❌ All coins became worthless

<strong>💡 Bitcoin's Fix: No company required!</strong>
            `;
            output.classList.add('visible');
        }

        let timechainBlocks = [];

        async function demoTimechain(button) {
            const output = button.nextElementSibling;
            timechainBlocks = [];

            output.innerHTML = `
<strong>⛓️ Interactive Timechain Builder</strong>

<p style="color: var(--text-dim);">Add documents to see how each block links to the previous one!</p>

<div style="margin: 1rem 0;">
    <input type="text" id="doc-input" placeholder="Enter document content..." value="Genesis Document" />
    <button onclick="addToTimechain()">➕ Add Block</button>
</div>

<div id="timechain-display" style="margin-top: 1rem;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>🔒 Why This Works:</strong><br>
    • Each block contains the previous block's hash<br>
    • Changing any block breaks all subsequent blocks<br>
    • The entire chain validates itself!<br>
    • This is Bitcoin's blockchain foundation!
</div>
            `;
            output.classList.add('visible');
        }

        async function addToTimechain() {
            const input = document.getElementById('doc-input');
            const data = input.value || 'Document';
            const display = document.getElementById('timechain-display');

            const prevHash = timechainBlocks.length > 0
                ? timechainBlocks[timechainBlocks.length - 1].hash
                : '0000000000000000';

            const hash = await sha256(data + prevHash);
            timechainBlocks.push({ data, prevHash, hash });

            display.innerHTML = timechainBlocks.map((block, i) => `
                <div style="margin: 0.75rem 0; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); border-radius: 0.5rem;">
                    <strong>Block ${i + 1}:</strong> "${block.data}"<br>
                    <small style="color: var(--text-dim);">Previous Hash:</small> <code style="font-size: 0.7rem;">${block.prevHash.substring(0, 16)}...</code><br>
                    <small style="color: var(--text-dim);">This Hash:</small> <code style="font-size: 0.7rem;">${block.hash.substring(0, 16)}...</code>
                </div>
            `).join('');

            input.value = '';
        }

        function demoMerkle(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>🌳 Merkle Tree Demo</strong>

<p style="color: var(--text-dim);">Watch how 8 transactions compress into 1 root hash:</p>

<div style="text-align: center; margin: 1.5rem 0;">
    <div style="margin: 1rem 0;">
        <strong style="color: var(--primary-orange);">8 Transactions (Bottom):</strong><br>
        <small style="font-size: 0.7rem; color: var(--text-dim);">TX1, TX2, TX3, TX4, TX5, TX6, TX7, TX8</small>
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">↓</div>
    <div style="margin: 1rem 0;">
        <strong>4 Hashes (Pair & Hash):</strong><br>
        <small style="font-size: 0.7rem; color: var(--text-dim);">H(TX1+TX2), H(TX3+TX4), H(TX5+TX6), H(TX7+TX8)</small>
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">↓</div>
    <div style="margin: 1rem 0;">
        <strong>2 Hashes:</strong><br>
        <small style="font-size: 0.7rem; color: var(--text-dim);">H(H12+H34), H(H56+H78)</small>
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">↓</div>
    <div style="margin: 1rem 0; padding: 1rem; background: rgba(76, 175, 80, 0.2); border: 2px solid var(--accent-green); border-radius: 0.5rem;">
        <strong style="color: var(--accent-green);">1 Root Hash (Top):</strong><br>
        <code style="font-size: 0.8rem;">d3a0f1c1e2b3c4d5e6f7...</code>
    </div>
</div>

<div style="padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong>💡 Why This Matters:</strong><br>
    • Bitcoin blocks contain thousands of transactions<br>
    • Merkle root = single 32-byte hash proving ALL transactions<br>
    • You can verify a transaction without downloading entire block!<br>
    • This enables lightweight mobile wallets
</div>
            `;
            output.classList.add('visible');
        }

        async function demoHashcash(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>⛏️ Interactive Hashcash Mining</strong>

<p style="color: var(--text-dim);">Try to find a hash starting with "00" - this is Proof of Work!</p>

<div style="margin: 1rem 0;">
    <label>Message to Mine:</label>
    <input type="text" id="mine-input" value="Hello Bitcoin" />
    <button onclick="mineHash()">⛏️ Start Mining</button>
</div>

<div id="mining-output" style="margin-top: 1rem; max-height: 200px; overflow-y: auto;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
    <strong>💡 How Mining Works:</strong><br>
    • Computer tries random nonces (numbers)<br>
    • Hashes message + nonce repeatedly<br>
    • Keeps trying until hash meets difficulty (starts with zeros)<br>
    • Finding valid hash = proof you did the work!<br>
    • Bitcoin uses this exact concept but MUCH harder
</div>
            `;
            output.classList.add('visible');
        }

        async function mineHash() {
            const input = document.getElementById('mine-input').value;
            const output = document.getElementById('mining-output');
            let nonce = 0;
            let found = false;

            output.innerHTML = '<p>Mining... (looking for hash starting with "00")</p>';

            while (!found && nonce < 10000) {
                const data = input + nonce;
                const hash = await sha256(data);

                const attempt = `<div>Nonce ${nonce}: ${hash.substring(0, 16)}...</div>`;

                if (hash.startsWith('00')) {
                    output.innerHTML += `<div style="color: var(--accent-green); font-weight: bold;">✅ FOUND! Nonce ${nonce}: ${hash.substring(0, 32)}...</div>`;
                    found = true;
                } else {
                    if (nonce % 100 === 0) {
                        output.innerHTML += `<div style="color: var(--text-dim);">Tried ${nonce} attempts...</div>`;
                    }
                }

                nonce++;
            }

            if (!found) {
                output.innerHTML += '<div style="color: #ff4444;">Stopped after 10000 attempts. Try again!</div>';
            }
        }

        function demoCypherpunks(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>🧩 The Puzzle Pieces</strong>

<div style="margin: 1rem 0;">
    <strong style="color: var(--accent-blue);">b-money (Wei Dai, 1998):</strong><br>
    ✅ Anonymous transactions<br>
    ✅ Decentralized network<br>
    ❌ No solution for consensus<br><br>

    <strong style="color: var(--primary-orange);">Bit Gold (Nick Szabo, 2005):</strong><br>
    ✅ Proof of Work for scarcity<br>
    ✅ Timestamped chain<br>
    ❌ Complex token system<br><br>

    <strong style="color: #ff6b6b;">e-gold (Douglas Jackson, 1996):</strong><br>
    ✅ Gold-backed digital currency<br>
    ✅ Popular (millions of users)<br>
    ❌ Centralized company (shut down by government)
</div>

<div style="padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>💡 Bitcoin's Breakthrough:</strong><br>
    Satoshi took the BEST parts of each system and solved the missing pieces. Bitcoin = b-money's decentralization + Bit Gold's proof of work + no single point of failure!
</div>
            `;
            output.classList.add('visible');
        }

        function demoWhitepaper(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>📄 Bitcoin Whitepaper - Key Excerpt</strong>

<div style="margin: 1.5rem 0; padding: 1rem; background: rgba(0, 0, 0, 0.5); border-left: 3px solid var(--primary-orange); font-style: italic; line-height: 1.8;">
    "A purely peer-to-peer version of electronic cash would allow online payments to be sent directly from one party to another without going through a financial institution... We propose a solution to the double-spending problem using a peer-to-peer network. The network timestamps transactions by hashing them into an ongoing chain of hash-based proof-of-work..."
    <div style="text-align: right; margin-top: 0.5rem; font-style: normal; color: var(--text-dim);">— Satoshi Nakamoto, October 31, 2008</div>
</div>

<div style="padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-left: 3px solid var(--primary-orange); font-size: 0.9rem;">
    <strong>🔑 Key Innovation:</strong><br>
    Satoshi solved the "double-spending problem" without needing a trusted third party. Every previous attempt required trust in SOMEONE. Bitcoin needs trust in NO ONE - only math and code.
</div>
            `;
            output.classList.add('visible');
        }

        function demoGenesis(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>⛏️ The Genesis Block</strong>

<div style="margin: 1.5rem 0; padding: 1rem; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--primary-orange); border-radius: 0.5rem; font-family: monospace; font-size: 0.85rem;">
    <strong>Block #0</strong><br>
    Timestamp: 2009-01-03 18:15:05<br>
    Previous Hash: 0000000000000000000000000000000000000000000000000000000000000000<br>
    <br>
    <strong style="color: var(--primary-orange);">Hidden Message:</strong><br>
    "The Times 03/Jan/2009 Chancellor on brink of second bailout for banks"<br>
    <br>
    Reward: 50 BTC (unspendable)
</div>

<div style="padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>🗞️ Why This Message?</strong><br>
    Satoshi embedded a newspaper headline about bank bailouts. It proves Bitcoin started on January 3, 2009, AND makes a political statement: Bitcoin is an alternative to the corrupt banking system that failed in 2008.
</div>
            `;
            output.classList.add('visible');
        }

        function demoPizza(button) {
            const output = button.nextElementSibling;
            const bitcoinPrice = 95000; // Approximate current BTC price
            const pizzaBTC = 10000;
            const currentValue = (pizzaBTC * bitcoinPrice).toLocaleString();

            output.innerHTML = `
<strong>🍕 The $${(pizzaBTC * bitcoinPrice / 1000000).toFixed(0)} Million Pizza</strong>

<div style="margin: 1.5rem 0; text-align: center;">
    <div style="font-size: 4rem; margin: 1rem 0;">🍕🍕</div>
    <div style="font-size: 1.5rem; color: var(--primary-orange); margin: 1rem 0;">
        10,000 BTC = 2 Pizzas (2010)
    </div>
    <div style="font-size: 2rem; margin: 1rem 0;">↓</div>
    <div style="font-size: 1.5rem; color: var(--accent-green); margin: 1rem 0;">
        10,000 BTC = $${currentValue} (Today)
    </div>
</div>

<div style="padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong>🎉 Why We Celebrate:</strong><br>
    May 22 is now "Bitcoin Pizza Day" - celebrating the first real-world Bitcoin transaction. Laszlo Hanyecz proved Bitcoin could be used as actual currency, not just a theoretical concept. Every revolution starts with one brave person willing to try!
</div>
            `;
            output.classList.add('visible');
        }
    </script>
</body>
</html>
