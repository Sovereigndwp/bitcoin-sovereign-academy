<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your First 30-Day Money Plan | Bitcoin Sovereign Academy</title>
    <meta name="description" content="Build a personalized 30-day financial plan with optional Bitcoin integration. No theory‚Äîjust actionable steps.">
    <link rel="canonical" href="https://bitcoinsovereign.academy/interactive-demos/30-day-money-plan/">

    <!-- Open Graph -->
    <meta property="og:title" content="Your First 30-Day Money Plan">
    <meta property="og:description" content="Build a personalized 30-day financial plan. Answer 3 questions, see your numbers, choose one rule, and get your action plan.">
    <meta property="og:url" content="https://bitcoinsovereign.academy/interactive-demos/30-day-money-plan/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --accent-green: #4caf50;
            --accent-red: #f44336;
            --accent-blue: #2196f3;
            --accent-yellow: #ffc107;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-orange), var(--accent-yellow));
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-label {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-top: 0.5rem;
        }

        /* Screens */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero Section */
        .hero {
            text-align: center;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: clamp(2rem, 5vw, 2.5rem);
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-dim);
            max-width: 600px;
            margin: 0 auto;
        }

        .hero .tagline {
            font-size: 1.1rem;
            color: var(--text-light);
            font-weight: 600;
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(247, 147, 26, 0.1);
            border-left: 4px solid var(--primary-orange);
            border-radius: 0.5rem;
        }

        /* Question Cards */
        .question-card {
            background: var(--secondary-dark);
            border: 2px solid rgba(247, 147, 26, 0.2);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
        }

        .question-card h2 {
            color: var(--primary-orange);
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .question-card p {
            color: var(--text-dim);
            font-size: 1.05rem;
            margin-bottom: 2rem;
        }

        /* Radio Options */
        .options {
            display: grid;
            gap: 1rem;
        }

        .option {
            position: relative;
        }

        .option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .option label {
            display: block;
            padding: 1.25rem;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(247, 147, 26, 0.3);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05rem;
        }

        .option input[type="radio"]:checked + label {
            background: rgba(247, 147, 26, 0.2);
            border-color: var(--primary-orange);
            color: var(--primary-orange);
            font-weight: 600;
        }

        .option label:hover {
            transform: translateY(-2px);
            border-color: var(--primary-orange);
            box-shadow: 0 4px 12px rgba(247, 147, 26, 0.2);
        }

        /* Emoji Options */
        .emoji-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .emoji-option {
            position: relative;
        }

        .emoji-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .emoji-option label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1.5rem 1rem;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(247, 147, 26, 0.3);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emoji-option .emoji {
            font-size: 2.5rem;
        }

        .emoji-option .label-text {
            font-size: 0.9rem;
            text-align: center;
        }

        .emoji-option input[type="radio"]:checked + label {
            background: rgba(247, 147, 26, 0.2);
            border-color: var(--primary-orange);
            transform: scale(1.05);
        }

        .emoji-option label:hover {
            transform: translateY(-4px);
            border-color: var(--primary-orange);
        }

        /* Path Result */
        .path-result {
            background: linear-gradient(135deg, rgba(247, 147, 26, 0.15), rgba(247, 147, 26, 0.05));
            border: 3px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2.5rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .path-result .path-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .path-result .path-name {
            font-size: 2rem;
            color: var(--primary-orange);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .path-result .path-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }

        .path-result .path-description {
            font-size: 1.05rem;
            color: var(--text-dim);
            line-height: 1.8;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Reflection Box */
        .reflection-box {
            background: rgba(33, 150, 243, 0.1);
            border: 2px solid var(--accent-blue);
            border-left: 4px solid var(--accent-blue);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .reflection-box h3 {
            color: var(--accent-blue);
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .reflection-box textarea {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(33, 150, 243, 0.3);
            border-radius: 0.5rem;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .reflection-box textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        /* Buttons */
        .btn-container {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--primary-orange);
            color: white;
        }

        .btn-primary:hover {
            background: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(247, 147, 26, 0.4);
        }

        .btn-primary:disabled {
            background: rgba(247, 147, 26, 0.3);
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-light);
            border: 2px solid rgba(247, 147, 26, 0.3);
        }

        .btn-secondary:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
        }

        /* Info Box */
        .info-box {
            background: rgba(247, 147, 26, 0.1);
            border-left: 4px solid var(--primary-orange);
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
            font-size: 0.95rem;
            color: var(--text-dim);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem 0.5rem;
            }

            .question-card {
                padding: 1.5rem;
            }

            .emoji-options {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .btn-container {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                color: black;
            }
            .container {
                max-width: 100%;
                padding: 0;
            }
            .progress-container,
            .btn-container,
            .hero {
                display: none !important;
            }
            #planDocument {
                box-shadow: none !important;
                padding: 1rem !important;
            }
            .screen {
                display: none !important;
            }
            #screen19 {
                display: block !important;
            }
        }
    </style>
    <link rel="stylesheet" href="/css/interactive-demos.css">
<meta property="og:image" content="https://bitcoinsovereign.academy/assets/og-image.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "EducationalOrganization",
  "name": "Bitcoin Sovereign Academy",
  "description": "Master Bitcoin through interactive experiences, AI-powered learning, and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.",
  "url": "https://bitcoinsovereign.academy",
  "logo": "https://bitcoinsovereign.academy/assets/og-image.jpg",
  "sameAs": [
    "https://github.com/Sovereigndwp/bitcoin-sovereign-academy"
  ],
  "educationalLevel": "Beginner to Advanced",
  "teaches": [
    "Bitcoin Fundamentals",
    "Cryptocurrency Technology",
    "Financial Sovereignty",
    "Digital Asset Security"
  ],
  "audience": {
    "@type": "Audience",
    "audienceType": "Students interested in Bitcoin and cryptocurrency"
  }
}</script></head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <main id="main-content" class="container">
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-label" id="progressLabel">Part 1 of 5: Finding Your Starting Point</div>
        </div>

        <!-- Screen 0: Welcome -->
        <div class="screen active" id="screen0">
            <div class="hero">
                <h1>Your First 30-Day Money Plan</h1>
                <p>Not theory. Not lectures. Just a simple plan you can use this week.</p>
                <div class="tagline">
                    By the end of this session, you'll have <strong>one clear action</strong> for spending, saving, and debt or investing.
                </div>
            </div>

            <div class="question-card">
                <h2>What This Will (and Won't) Do</h2>
                <p style="margin-bottom: 1rem;">
                    <strong style="color: var(--accent-green);">‚úì What you'll get:</strong><br>
                    A tiny written money plan for the next 30 days that fits YOUR real numbers.
                </p>
                <p style="margin-bottom: 1rem;">
                    <strong style="color: var(--accent-red);">‚úó What this isn't:</strong><br>
                    This won't fix everything overnight. It won't judge your past choices. It won't tell you what you "should" have done.
                </p>
                <p>
                    <strong style="color: var(--primary-orange);">‚è± Time commitment:</strong><br>
                    60-90 minutes. You can pause and come back anytime.
                </p>
            </div>

            <div class="btn-container">
                <button class="btn btn-primary" onclick="nextScreen(1)">Let's Start ‚Üí</button>
            </div>
        </div>

        <!-- Screen 1: Emotion Check -->
        <div class="screen" id="screen1">
            <div class="question-card">
                <h2>Question 1: Money Emotion</h2>
                <p>When you think about money, what emotion shows up first?</p>

                <div class="emoji-options">
                    <div class="emoji-option">
                        <input type="radio" name="emotion" id="emotion-relief" value="relief">
                        <label for="emotion-relief">
                            <span class="emoji">üòå</span>
                            <span class="label-text">Relief</span>
                        </label>
                    </div>
                    <div class="emoji-option">
                        <input type="radio" name="emotion" id="emotion-stress" value="stress">
                        <label for="emotion-stress">
                            <span class="emoji">üò∞</span>
                            <span class="label-text">Stress</span>
                        </label>
                    </div>
                    <div class="emoji-option">
                        <input type="radio" name="emotion" id="emotion-guilt" value="guilt">
                        <label for="emotion-guilt">
                            <span class="emoji">üòî</span>
                            <span class="label-text">Guilt</span>
                        </label>
                    </div>
                    <div class="emoji-option">
                        <input type="radio" name="emotion" id="emotion-curious" value="curious">
                        <label for="emotion-curious">
                            <span class="emoji">ü§î</span>
                            <span class="label-text">Curiosity</span>
                        </label>
                    </div>
                    <div class="emoji-option">
                        <input type="radio" name="emotion" id="emotion-overwhelm" value="overwhelm">
                        <label for="emotion-overwhelm">
                            <span class="emoji">üòµ</span>
                            <span class="label-text">Overwhelm</span>
                        </label>
                    </div>
                </div>

                <div class="info-box">
                    üí≠ No right answer here. We're just finding your starting point.
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(0)">‚Üê Back</button>
                <button class="btn btn-primary" id="btn-emotion" onclick="nextScreen(2)" disabled="">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 2: Monthly Pattern -->
        <div class="screen" id="screen2">
            <div class="question-card">
                <h2>Question 2: Monthly Pattern</h2>
                <p>What happens in a typical month?</p>

                <div class="options">
                    <div class="option">
                        <input type="radio" name="pattern" id="pattern-runout" value="runout">
                        <label for="pattern-runout">I run out before the end</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="pattern" id="pattern-breakeven" value="breakeven">
                        <label for="pattern-breakeven">I break even</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="pattern" id="pattern-leftover" value="leftover">
                        <label for="pattern-leftover">I usually have some left</label>
                    </div>
                    <div class="option">
                        <input type="radio" name="pattern" id="pattern-varies" value="varies">
                        <label for="pattern-varies">I'm not sure‚Äîit varies wildly</label>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(1)">‚Üê Back</button>
                <button class="btn btn-primary" id="btn-pattern" onclick="nextScreen(3)" disabled="">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 3: Priority -->
        <div class="screen" id="screen3">
            <div class="question-card">
                <h2>Question 3: Most Urgent Priority</h2>
                <p>Which feels most urgent right now?</p>

                <div class="options">
                    <div class="option">
                        <input type="radio" name="priority" id="priority-chaos" value="chaos">
                        <label for="priority-chaos">
                            <strong>Stop the chaos</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">Unpredictable spending, no control</span>
                        </label>
                    </div>
                    <div class="option">
                        <input type="radio" name="priority" id="priority-debt" value="debt">
                        <label for="priority-debt">
                            <strong>Get out of debt</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">High-interest payments are stressing me out</span>
                        </label>
                    </div>
                    <div class="option">
                        <input type="radio" name="priority" id="priority-grow" value="grow">
                        <label for="priority-grow">
                            <strong>Start growing my money</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">Ready to invest and build for the future</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(2)">‚Üê Back</button>
                <button class="btn btn-primary" id="btn-priority" onclick="calculatePath()" disabled="">See My Path ‚Üí</button>
            </div>
        </div>

        <!-- Screen 4: Path Result -->
        <div class="screen" id="screen4">
            <div class="path-result" id="pathResult">
                <!-- Path result will be inserted here -->
            </div>

            <div class="reflection-box">
                <h3>ü§î Reflection Moment</h3>
                <p style="margin-bottom: 1rem; color: var(--text-dim);">
                    Looking at your result, does it feel honest?<br>
                    If you could rewrite one answer, which would it be and why?
                </p>
                <textarea id="reflectionText" placeholder="Type your thoughts here (optional)..."></textarea>
            </div>

            <div class="info-box">
                <strong>What happens next:</strong><br>
                We'll build your 30-day plan step by step. You'll see your real numbers, choose one simple budget rule, and create an action plan for spending, saving, and debt or investing.
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(3)">‚Üê Retake Assessment</button>
                <button class="btn btn-primary" onclick="nextScreen(5)">Build My Plan ‚Üí</button>
            </div>
        </div>

        <!-- Screen 5: Cash Flow Intro -->
        <div class="screen" id="screen5">
            <div class="question-card">
                <h2>Part 2: Your Cash Flow Snapshot</h2>
                <p>Before making a plan, you need to see where you actually are.</p>

                <div class="info-box" style="background: rgba(33, 150, 243, 0.1); border-color: var(--accent-blue);">
                    <strong>The Money Bus Question:</strong><br>
                    If your money were a bus, who's driving it right now?<br>
                    You? Your bills? Your impulses?
                </div>

                <p style="margin-top: 1.5rem;">
                    We'll help you see three things:
                </p>
                <ul style="margin-left: 1.5rem; margin-top: 1rem; color: var(--text-light);">
                    <li><strong>Income:</strong> What comes in each month</li>
                    <li><strong>Needs:</strong> Fixed costs you can't skip (rent, food, utilities)</li>
                    <li><strong>Wants:</strong> Flexible spending (fun, extras)</li>
                </ul>

                <p style="margin-top: 1.5rem; color: var(--text-dim); font-style: italic;">
                    Don't worry about perfection. Estimates are fine. You'll see patterns you didn't expect.
                </p>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(4)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextScreen(6)">Let's See My Numbers ‚Üí</button>
            </div>
        </div>

        <!-- Screen 6: Income Input -->
        <div class="screen" id="screen6">
            <div class="question-card">
                <h2>Step 1: Monthly Income</h2>
                <p>What's your monthly take-home pay? (After taxes, the amount that hits your account)</p>

                <div style="max-width: 400px; margin: 2rem auto;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-dim);">
                        Monthly income (net/take-home):
                    </label>
                    <div style="position: relative;">
                        <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.5rem; color: var(--text-dim);">$</span>
                        <input type="number" id="monthlyIncome" style="width: 100%; padding: 1rem 1rem 1rem 2.5rem; font-size: 1.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light);" placeholder="3000" min="0" step="10">
                    </div>
                </div>

                <div class="info-box">
                    üí° Include all sources: salary, side gigs, partner's income‚Äîanything that comes in regularly.
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(5)">‚Üê Back</button>
                <button class="btn btn-primary" id="btn-income" onclick="nextScreen(7)" disabled="">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 7: Needs Input -->
        <div class="screen" id="screen7">
            <div class="question-card">
                <h2>Step 2: Your Needs (Fixed Costs)</h2>
                <p>These are things you can't easily skip. The essentials.</p>

                <div id="needsContainer" style="max-width: 500px; margin: 2rem auto;">
                    <!-- Need items will be added here -->
                </div>

                <button class="btn btn-secondary" onclick="addNeedItem()" style="margin: 1rem auto; display: block;">
                    + Add Another Need
                </button>

                <div class="info-box">
                    Common needs: Rent/mortgage, utilities, groceries, minimum debt payments, insurance, transportation
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <strong style="color: var(--primary-orange); font-size: 1.3rem;">
                        Total Needs: $<span id="totalNeeds">0</span>
                    </strong>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(6)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextScreen(8)">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 8: Wants Input -->
        <div class="screen" id="screen8">
            <div class="question-card">
                <h2>Step 3: Your Wants (Flexible Spending)</h2>
                <p>The fun stuff, subscriptions, eating out, hobbies‚Äîthings that make life enjoyable but aren't survival-level.</p>

                <div id="wantsContainer" style="max-width: 500px; margin: 2rem auto;">
                    <!-- Want items will be added here -->
                </div>

                <button class="btn btn-secondary" onclick="addWantItem()" style="margin: 1rem auto; display: block;">
                    + Add Another Want
                </button>

                <div class="info-box">
                    Common wants: Dining out, streaming services, shopping, entertainment, coffee, hobbies
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <strong style="color: var(--accent-blue); font-size: 1.3rem;">
                        Total Wants: $<span id="totalWants">0</span>
                    </strong>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(7)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextScreen(9)">See My Snapshot ‚Üí</button>
            </div>
        </div>

        <!-- Screen 9: Cash Flow Visualization -->
        <div class="screen" id="screen9">
            <div class="question-card">
                <h2>Your Cash Flow Snapshot</h2>
                <p>Here's where your money goes each month.</p>

                <div style="margin: 2rem 0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; max-width: 600px; margin: 0 auto 2rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.5rem;">Income</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-green);">$<span id="displayIncome">0</span></div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.5rem;">Needs</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--primary-orange);">$<span id="displayNeeds">0</span></div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.5rem;">Wants</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-blue);">$<span id="displayWants">0</span></div>
                        </div>
                    </div>

                    <!-- Visual Bar Chart -->
                    <div style="max-width: 700px; margin: 0 auto;">
                        <div style="height: 60px; display: flex; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                            <div id="needsBar" style="background: var(--primary-orange); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; transition: all 0.5s ease;">
                                <span id="needsPercent">0%</span>
                            </div>
                            <div id="wantsBar" style="background: var(--accent-blue); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; transition: all 0.5s ease;">
                                <span id="wantsPercent">0%</span>
                            </div>
                            <div id="leftoverBar" style="background: var(--accent-green); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; transition: all 0.5s ease;">
                                <span id="leftoverPercent">0%</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-dim);">
                            <span>üü† Needs</span>
                            <span>üîµ Wants</span>
                            <span id="leftoverLabel">üü¢ Left Over</span>
                        </div>
                    </div>

                    <!-- Result Message -->
                    <div id="cashFlowMessage" style="margin-top: 2rem; padding: 1.5rem; border-radius: 0.75rem; text-align: center; font-size: 1.1rem;">
                        <!-- Message populated by JS -->
                    </div>
                </div>

                <div class="reflection-box">
                    <h3>üöå The Money Bus Questions</h3>
                    <div style="margin-bottom: 1rem;">
                        <p style="color: var(--text-dim); margin-bottom: 0.5rem;">If your money were a bus, who's driving it right now?</p>
                        <textarea id="busDriver" placeholder="You, your bills, your impulses...?" style="width: 100%; min-height: 60px; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <p style="color: var(--text-dim); margin-bottom: 0.5rem;">Which category surprised you most?</p>
                        <textarea id="surprised" placeholder="Type your answer..." style="width: 100%; min-height: 60px; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(8)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextScreen(10)">Next: Choose My Budget Rule ‚Üí</button>
            </div>
        </div>

        <!-- Screen 10: Pain Point Check -->
        <div class="screen" id="screen10">
            <div class="question-card">
                <h2>Part 3: Your One-Rule Budget</h2>
                <p>Time to turn your snapshot into action. But first, an honest question:</p>

                <div class="info-box" style="background: rgba(247, 147, 26, 0.1); border-color: var(--primary-orange); margin: 2rem 0;">
                    <strong>What's more painful for you?</strong>
                </div>

                <div class="options">
                    <div class="option">
                        <input type="radio" name="pain" id="pain-cutting" value="cutting">
                        <label for="pain-cutting">
                            <strong>Cutting spending now</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">I hate the idea of giving things up</span>
                        </label>
                    </div>
                    <div class="option">
                        <input type="radio" name="pain" id="pain-stress" value="stress">
                        <label for="pain-stress">
                            <strong>Living with money stress long-term</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">I'd rather make hard changes than stay anxious</span>
                        </label>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 2rem;">
                    üí≠ This isn't a trick question. It helps us suggest the right rule for YOU.
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(9)">‚Üê Back</button>
                <button class="btn btn-primary" id="btn-pain" onclick="nextScreen(11)" disabled="">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 11: Choose Budget Rule -->
        <div class="screen" id="screen11">
            <div class="question-card">
                <h2>Pick Your One Simple Rule</h2>
                <p>Choose ONE rule for the next 30 days. Just one.</p>

                <div class="options">
                    <div class="option">
                        <input type="radio" name="rule" id="rule-save-first" value="save-first">
                        <label for="rule-save-first">
                            <strong>üí∞ Save First</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">"I will save __% of every paycheck before spending"</span>
                        </label>
                    </div>
                    <div class="option">
                        <input type="radio" name="rule" id="rule-cap-spending" value="cap-spending">
                        <label for="rule-cap-spending">
                            <strong>üìä Spending Cap</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">"I will limit [category] to $____ per week/month"</span>
                        </label>
                    </div>
                    <div class="option">
                        <input type="radio" name="rule" id="rule-windfall" value="windfall">
                        <label for="rule-windfall">
                            <strong>üéÅ Windfall Rule</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">"Every unexpected dollar goes to [specific goal]"</span>
                        </label>
                    </div>
                    <div class="option">
                        <input type="radio" name="rule" id="rule-custom" value="custom">
                        <label for="rule-custom">
                            <strong>‚úçÔ∏è Custom Rule</strong><br>
                            <span style="font-size: 0.9rem; color: var(--text-dim);">Write your own rule that fits your life</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(10)">‚Üê Back</button>
                <button class="btn btn-primary" id="btn-rule" onclick="nextScreen(12)" disabled="">Build This Rule ‚Üí</button>
            </div>
        </div>

        <!-- Screen 12: Interactive Rule Builder -->
        <div class="screen" id="screen12">
            <div class="question-card">
                <h2 id="ruleBuilderTitle">Your Savings Rule</h2>

                <div id="ruleBuilder">
                    <!-- Content will be populated based on chosen rule -->
                </div>

                <!-- Forecast Display -->
                <div id="forecastDisplay" style="margin-top: 3rem; padding: 2rem; background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 1rem;">
                    <h3 style="color: var(--accent-green); margin-bottom: 1.5rem; text-align: center;">üìà Your 3-Month Forecast</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.5rem;">Month 1</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-green);">$<span id="month1">0</span></div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.5rem;">Month 2</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-green);">$<span id="month2">0</span></div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.5rem;">Month 3</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-green);">$<span id="month3">0</span></div>
                        </div>
                    </div>
                    <div style="text-align: center; font-size: 1.1rem; color: var(--text-light);">
                        <strong>Total saved in 3 months:</strong>
                        <span style="color: var(--accent-green); font-size: 1.5rem; font-weight: 700;">$<span id="totalSaved">0</span></span>
                    </div>
                </div>

                <!-- Socratic Reflection -->
                <div class="reflection-box" style="margin-top: 2rem;">
                    <h3>üí≠ Reflection Questions</h3>
                    <div style="margin-bottom: 1rem;">
                        <p style="color: var(--text-dim); margin-bottom: 0.5rem;">Which rule feels hard but possible?</p>
                        <textarea id="hardButPossible" placeholder="Type your thoughts..." style="width: 100%; min-height: 60px; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <p style="color: var(--text-dim); margin-bottom: 0.5rem;">What would make this easier to follow?</p>
                        <textarea id="makeEasier" placeholder="Type your thoughts..." style="width: 100%; min-height: 60px; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                    <div>
                        <p style="color: var(--text-dim); margin-bottom: 0.5rem;">Who could hold you gently accountable?</p>
                        <textarea id="accountability" placeholder="Partner, friend, family member, or 'just me'..." style="width: 100%; min-height: 60px; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                </div>

                <!-- Write Rule in Own Words -->
                <div style="margin-top: 2rem; padding: 2rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1rem;">‚úçÔ∏è Write Your Rule in Your Own Words</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1rem;">This will be Line 1 of your final 30-day plan.</p>
                    <textarea id="customRuleText" placeholder="Example: &quot;I will save 10% of every paycheck automatically on payday.&quot;" style="width: 100%; min-height: 80px; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 1rem; resize: vertical;"></textarea>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(11)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextScreen(13)">Next: Safety &amp; Debt ‚Üí</button>
            </div>
        </div>

        <!-- Screen 13: Part 4 Intro & Safety Buffer -->
        <div class="screen" id="screen13">
            <div class="hero">
                <h1>Part 4 of 5: Safety &amp; Debt Stack üõ°Ô∏è</h1>
                <p>Build a buffer so life's surprises don't derail your plan.</p>
            </div>

            <div class="question-card">
                <h2>üí∞ Your Emergency Buffer Target</h2>
                <p style="margin-bottom: 2rem; color: var(--text-dim);">
                    Imagine the worst: no income for 30 days. What's the <em>bare minimum</em> you'd need to survive?<br>
                    <span style="font-size: 0.9rem;">(Just needs‚Äîrent, food, utilities. Not wants.)</span>
                </p>

                <div style="max-width: 600px; margin: 0 auto;">
                    <label style="display: block; margin-bottom: 0.5rem; font-size: 1.1rem;">Bare-bones survival for 1 month:</label>
                    <div style="position: relative; margin-bottom: 2rem;">
                        <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.5rem; color: var(--primary-orange);">$</span>
                        <input type="number" id="barebonesInput" placeholder="e.g., 1500" min="0" step="50" style="width: 100%; padding: 1rem 1rem 1rem 2.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.5); border-radius: 0.5rem; color: var(--text-light); font-size: 1.5rem; font-weight: bold;">
                    </div>

                    <!-- Target Bar -->
                    <div id="targetBar" style="margin-bottom: 2rem; display: none;">
                        <div style="background: rgba(255,255,255,0.1); height: 40px; border-radius: 20px; overflow: hidden; position: relative;">
                            <div id="targetFill" style="background: linear-gradient(90deg, var(--primary-orange), var(--accent-yellow)); height: 100%; width: 0%; transition: width 0.5s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.9rem;"></div>
                            <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: var(--text-light); font-weight: bold;">
                                Target: $<span id="targetDisplay">0</span>
                            </div>
                        </div>
                    </div>

                    <label style="display: block; margin-bottom: 0.5rem; font-size: 1.1rem;">How much could you set aside in the next 30 days?</label>
                    <div style="position: relative;">
                        <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.5rem; color: var(--accent-green);">$</span>
                        <input type="number" id="thirtyDayInput" placeholder="e.g., 100" min="0" step="10" style="width: 100%; padding: 1rem 1rem 1rem 2.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(76, 175, 80, 0.5); border-radius: 0.5rem; color: var(--text-light); font-size: 1.5rem; font-weight: bold;">
                    </div>

                    <div id="progressMessage" style="margin-top: 1.5rem; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 0.5rem; text-align: center; display: none;">
                        <strong style="color: var(--accent-green); font-size: 1.2rem;">Nice start!</strong><br>
                        <span style="color: var(--text-dim);">That's <span id="progressPercent">0</span>% of your target in Month 1.</span><br>
                        <span style="color: var(--text-dim); font-size: 0.9rem;">At this rate, you'll hit your buffer in <span id="monthsToTarget">0</span> months.</span>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(12)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="saveSafetyBuffer()">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 14: Safety Reflection -->
        <div class="screen" id="screen14">
            <div class="question-card">
                <h2>üí≠ Quick Reflection: Safety &amp; Peace of Mind</h2>

                <div style="max-width: 600px; margin: 0 auto;">
                    <label style="display: block; margin-bottom: 0.5rem;">If you had even <em>half</em> a month of expenses saved, how would that change your stress level?</label>
                    <textarea id="bufferReliefInput" placeholder="Be honest. Would you sleep better? Make different choices?" style="width: 100%; min-height: 100px; padding: 1rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 1rem; resize: vertical; margin-bottom: 2rem;"></textarea>

                    <label style="display: block; margin-bottom: 0.5rem;">What's one place you could park this buffer so you're <em>not</em> tempted to touch it?</label>
                    <textarea id="safePlaceInput" placeholder="Examples: separate savings account, cash envelope, friend's safe, etc." style="width: 100%; min-height: 100px; padding: 1rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 1rem; resize: vertical;"></textarea>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(13)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="saveReflectionAndCheckDebt()">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 15: Debt Check -->
        <div class="screen" id="screen15">
            <div class="question-card">
                <h2>üí≥ Do you have high-interest debt?</h2>
                <p style="margin-bottom: 2rem; color: var(--text-dim);">
                    Credit cards, payday loans, buy-now-pay-later with fees‚Äîanything over 10% APR.
                </p>

                <div class="option-grid">
                    <label class="option-card">
                        <input type="radio" name="hasDebt" value="yes">
                        <div class="option-content">
                            <div class="option-icon">üòì</div>
                            <div class="option-text">
                                <strong>Yes, I have debt</strong>
                                <p>Let's build a payoff strategy</p>
                            </div>
                        </div>
                    </label>

                    <label class="option-card">
                        <input type="radio" name="hasDebt" value="no">
                        <div class="option-content">
                            <div class="option-icon">‚úÖ</div>
                            <div class="option-text">
                                <strong>No high-interest debt</strong>
                                <p>Great! We'll skip this section</p>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(14)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="checkDebtPath()">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 16: Debt Inventory -->
        <div class="screen" id="screen16">
            <div class="question-card">
                <h2>üìä List Your Debts</h2>
                <p style="margin-bottom: 2rem; color: var(--text-dim);">
                    Enter each debt. We'll color-code them and help you choose a payoff strategy.
                </p>

                <div id="debtContainer" style="max-width: 700px; margin: 0 auto;">
                    <!-- Debt items will be added here -->
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <button class="btn btn-secondary" onclick="addDebtItem()" style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem;">+</span> Add Another Debt
                    </button>
                </div>

                <div id="debtSummary" style="max-width: 600px; margin: 2rem auto; padding: 1.5rem; background: rgba(0,0,0,0.3); border-radius: 0.5rem; display: none;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Total Debt:</span>
                        <strong style="color: var(--accent-red); font-size: 1.3rem;">$<span id="totalDebt">0</span></strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Minimum Payments:</span>
                        <strong style="color: var(--accent-yellow);">$<span id="totalMinPayment">0</span>/month</strong>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(15)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="chooseDebtStrategy()">Continue ‚Üí</button>
            </div>
        </div>

        <!-- Screen 17: Debt Strategy & Simulator -->
        <div class="screen" id="screen17">
            <div class="question-card">
                <h2>üéØ Choose Your Payoff Strategy</h2>

                <div class="option-grid" style="margin-bottom: 2rem;">
                    <label class="option-card">
                        <input type="radio" name="debtStrategy" value="snowball">
                        <div class="option-content">
                            <div class="option-icon">‚õÑ</div>
                            <div class="option-text">
                                <strong>Snowball Method</strong>
                                <p>Pay smallest balance first (quick wins boost motivation)</p>
                            </div>
                        </div>
                    </label>

                    <label class="option-card">
                        <input type="radio" name="debtStrategy" value="avalanche">
                        <div class="option-content">
                            <div class="option-icon">üèîÔ∏è</div>
                            <div class="option-text">
                                <strong>Avalanche Method</strong>
                                <p>Pay highest rate first (saves most money long-term)</p>
                            </div>
                        </div>
                    </label>
                </div>

                <div id="strategySimulator" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 1rem;">üí° Your Payoff Simulation</h3>

                    <div style="max-width: 600px; margin: 0 auto; background: rgba(0,0,0,0.3); padding: 2rem; border-radius: 0.5rem;">
                        <p style="margin-bottom: 1.5rem; color: var(--text-dim);">
                            Focus: <strong id="focusDebtName" style="color: var(--primary-orange);">---</strong><br>
                            Balance: $<span id="focusDebtBalance">0</span> @ <span id="focusDebtRate">0</span>% APR
                        </p>

                        <label style="display: block; margin-bottom: 0.5rem;">How much <em>extra</em> can you put toward this debt each month?</label>
                        <div style="position: relative; margin-bottom: 2rem;">
                            <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.2rem; color: var(--accent-green);">$</span>
                            <input type="number" id="extraPayment" value="50" min="0" step="10" style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(76, 175, 80, 0.5); border-radius: 0.5rem; color: var(--text-light); font-size: 1.2rem;">
                        </div>

                        <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 0.5rem; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent-green); margin-bottom: 0.5rem;">
                                <span id="payoffMonths">12</span> months
                            </div>
                            <p style="color: var(--text-dim); margin-bottom: 1rem;">to pay off this debt</p>
                            <p style="font-size: 0.9rem; color: var(--text-dim);">
                                Total interest: $<span id="totalInterest">0</span><br>
                                vs. $<span id="minPayInterest">0</span> if you only paid minimums
                            </p>
                            <p style="margin-top: 1rem; color: var(--accent-green); font-weight: bold;">
                                You'll save $<span id="interestSaved">0</span> in interest! üéâ
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(16)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextScreen(18)">Continue to Final Plan ‚Üí</button>
            </div>
        </div>

        <!-- Screen 18: Final Reflection Question -->
        <div class="screen" id="screen18">
            <div class="question-card">
                <h2>üéØ One Last Question Before Your Plan</h2>
                <p style="margin-bottom: 2rem; color: var(--text-dim);">
                    You've done the hard work of facing your numbers, choosing a rule, and planning for safety.<br>
                    Now it's time to make this real.
                </p>

                <div style="max-width: 600px; margin: 0 auto;">
                    <label style="display: block; margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: bold;">
                        What's the <em>smallest</em> step you can take in the next 24 hours to start this plan?
                    </label>
                    <p style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 1rem;">
                        Not "someday." Not "when I have time." What will you <strong>actually do tomorrow</strong>?
                    </p>
                    <textarea id="firstStepInput" placeholder="Examples: Open a separate savings account. Text my accountability partner. Pack lunch instead of ordering out. Delete one subscription." style="width: 100%; min-height: 120px; padding: 1rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.5); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 1rem; resize: vertical;"></textarea>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn btn-secondary" onclick="previousScreen(17)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="generateFinalPlan()">Generate My Plan ‚Üí</button>
            </div>
        </div>

        <!-- Screen 19: Your 30-Day Money Plan -->
        <div class="screen" id="screen19">
            <div class="hero">
                <h1>Your 30-Day Money Plan üìã</h1>
                <p>Here's your personalized plan. Save it, print it, or share it with your accountability partner.</p>
            </div>

            <div id="planDocument" style="max-width: 800px; margin: 0 auto; background: white; color: #1a1a1a; padding: 3rem; border-radius: 1rem; box-shadow: 0 8px 24px rgba(0,0,0,0.3);">
                <!-- Plan content will be generated here -->
            </div>

            <div class="btn-container" style="margin-top: 2rem;">
                <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è Print Plan</button>
                <button class="btn btn-primary" onclick="downloadPlan()">‚¨áÔ∏è Download as Text</button>
                <button class="btn btn-primary" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    Ready to deepen your financial knowledge?
                </p>
                <a href="/paths/pragmatist/" class="btn btn-primary">Continue Your Learning Path ‚Üí</a>
            </div>
        </div>
    </div>

    <script>
        // State management
        const state = {
            emotion: null,
            pattern: null,
            priority: null,
            path: null,
            reflection: '',
            income: 0,
            needs: [],
            wants: [],
            busDriver: '',
            surprised: '',
            painPoint: null,
            budgetRule: null,
            ruleAmount: 0,
            hardButPossible: '',
            makeEasier: '',
            accountability: '',
            customRuleText: '',
            // Part 4: Safety & Debt
            barebonesAmount: 0,
            thirtyDaySavings: 0,
            bufferRelief: '',
            safePlace: '',
            hasDebt: null,
            debts: [],
            debtStrategy: null,
            // Part 5: Final Plan
            firstStep: ''
        };

        const pathData = {
            stabilize: {
                icon: 'üå±',
                name: 'STABILIZE PATH',
                subtitle: 'Focus: Cash flow control + first safety buffer',
                description: 'Right now, your priority is getting control of day-to-day spending and building your first small buffer. We\'ll help you see where your money goes, choose one simple spending rule, and start your emergency fund‚Äîeven if it\'s just $50 this month.'
            },
            paydown: {
                icon: 'üí≥',
                name: 'PAY DOWN PATH',
                subtitle: 'Focus: High-interest debt elimination',
                description: 'Debt stress is real, and high-interest debt is expensive. We\'ll help you list your debts, choose a payoff strategy (snowball or avalanche), and find extra dollars to accelerate one payment. You\'ll also build a tiny buffer so unexpected expenses don\'t create more debt.'
            },
            build: {
                icon: 'üìà',
                name: 'BUILD PATH',
                subtitle: 'Focus: Growing your money for the future',
                description: 'You\'ve got some stability‚Äînow it\'s time to make your money work for you. We\'ll help you automate savings, choose a simple investment strategy, and optionally explore Bitcoin as a long-term allocation. Your focus is building wealth, not just managing cash flow.'
            }
        };

        // Enable/disable continue buttons based on selection
        document.querySelectorAll('input[name="emotion"]').forEach(input => {
            input.addEventListener('change', () => {
                state.emotion = document.querySelector('input[name="emotion"]:checked').value;
                document.getElementById('btn-emotion').disabled = false;
            });
        });

        document.querySelectorAll('input[name="pattern"]').forEach(input => {
            input.addEventListener('change', () => {
                state.pattern = document.querySelector('input[name="pattern"]:checked').value;
                document.getElementById('btn-pattern').disabled = false;
            });
        });

        document.querySelectorAll('input[name="priority"]').forEach(input => {
            input.addEventListener('change', () => {
                state.priority = document.querySelector('input[name="priority"]:checked').value;
                document.getElementById('btn-priority').disabled = false;
            });
        });

        // Screen navigation
        function nextScreen(screenNum) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(`screen${screenNum}`).classList.add('active');

            // Update progress (19 screens total: 0-19)
            const progress = (screenNum / 19) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;

            const labels = [
                'Part 1 of 5: Finding Your Starting Point',     // Screen 0
                'Part 1 of 5: Finding Your Starting Point',     // Screen 1
                'Part 1 of 5: Finding Your Starting Point',     // Screen 2
                'Part 1 of 5: Finding Your Starting Point',     // Screen 3
                'Part 1 of 5: Your Path',                       // Screen 4
                'Part 2 of 5: Cash Flow Builder',               // Screen 5
                'Part 2 of 5: Cash Flow Builder',               // Screen 6
                'Part 2 of 5: Cash Flow Builder',               // Screen 7
                'Part 2 of 5: Cash Flow Builder',               // Screen 8
                'Part 2 of 5: Cash Flow Builder',               // Screen 9
                'Part 3 of 5: Your Budget Rule',                // Screen 10
                'Part 3 of 5: Your Budget Rule',                // Screen 11
                'Part 3 of 5: Your Budget Rule',                // Screen 12
                'Part 4 of 5: Safety & Debt Stack',             // Screen 13
                'Part 4 of 5: Safety & Debt Stack',             // Screen 14
                'Part 4 of 5: Safety & Debt Stack',             // Screen 15
                'Part 4 of 5: Safety & Debt Stack',             // Screen 16
                'Part 4 of 5: Safety & Debt Stack',             // Screen 17
                'Part 5 of 5: Your 30-Day Plan',                // Screen 18
                'Part 5 of 5: Your 30-Day Plan'                 // Screen 19
            ];
            document.getElementById('progressLabel').textContent = labels[screenNum] || 'Your Money Plan';

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function previousScreen(screenNum) {
            nextScreen(screenNum);
        }

        // Path calculation logic
        function calculatePath() {
            // Simple scoring algorithm
            let stabilizeScore = 0;
            let paydownScore = 0;
            let buildScore = 0;

            // Emotion scoring
            if (state.emotion === 'stress' || state.emotion === 'overwhelm') {
                stabilizeScore += 2;
                paydownScore += 1;
            } else if (state.emotion === 'guilt') {
                paydownScore += 2;
            } else if (state.emotion === 'curious') {
                buildScore += 2;
            } else if (state.emotion === 'relief') {
                buildScore += 1;
            }

            // Pattern scoring
            if (state.pattern === 'runout' || state.pattern === 'varies') {
                stabilizeScore += 3;
            } else if (state.pattern === 'breakeven') {
                stabilizeScore += 1;
                paydownScore += 1;
            } else if (state.pattern === 'leftover') {
                buildScore += 3;
            }

            // Priority scoring (highest weight)
            if (state.priority === 'chaos') {
                stabilizeScore += 5;
            } else if (state.priority === 'debt') {
                paydownScore += 5;
            } else if (state.priority === 'grow') {
                buildScore += 5;
            }

            // Determine path
            const scores = {
                stabilize: stabilizeScore,
                paydown: paydownScore,
                build: buildScore
            };

            state.path = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);

            // Display result
            displayPathResult();
            nextScreen(4);
        }

        function displayPathResult() {
            const path = pathData[state.path];
            const resultHTML = `
                <div class="path-icon">${path.icon}</div>
                <div class="path-name">${path.name}</div>
                <div class="path-subtitle">${path.subtitle}</div>
                <div class="path-description">${path.description}</div>
            `;
            document.getElementById('pathResult').innerHTML = resultHTML;
        }

        // Save reflection
        document.getElementById('reflectionText')?.addEventListener('input', (e) => {
            state.reflection = e.target.value;
        });

        // Initialize
        document.getElementById('progressFill').style.width = '0%';

        // ===== PART 2: CASH FLOW BUILDER =====

        // Income input handler
        document.getElementById('monthlyIncome')?.addEventListener('input', (e) => {
            const value = parseFloat(e.target.value) || 0;
            state.income = value;
            document.getElementById('btn-income').disabled = value <= 0;
        });

        // Dynamic needs/wants items
        let needItemCount = 0;
        let wantItemCount = 0;

        function addNeedItem() {
            needItemCount++;
            const container = document.getElementById('needsContainer');
            const itemDiv = document.createElement('div');
            itemDiv.className = 'expense-item';
            itemDiv.style.cssText = 'display: flex; gap: 0.5rem; margin-bottom: 1rem; align-items: center;';
            itemDiv.innerHTML = `
                <input type="text"
                       class="need-name"
                       placeholder="e.g., Rent"
                       style="flex: 1; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                <span style="color: var(--text-dim); font-size: 1.2rem;">$</span>
                <input type="number"
                       class="need-amount"
                       placeholder="0"
                       min="0"
                       step="10"
                       style="width: 120px; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                <button onclick="this.parentElement.remove(); updateTotals();"
                        style="padding: 0.5rem; background: var(--accent-red); color: white; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 1.2rem; min-width: 40px;">√ó</button>
            `;
            container.appendChild(itemDiv);

            // Add event listeners
            itemDiv.querySelector('.need-amount').addEventListener('input', updateTotals);
            itemDiv.querySelector('.need-name').addEventListener('input', () => {
                // Save to state when name changes
                updateTotals();
            });
        }

        function addWantItem() {
            wantItemCount++;
            const container = document.getElementById('wantsContainer');
            const itemDiv = document.createElement('div');
            itemDiv.className = 'expense-item';
            itemDiv.style.cssText = 'display: flex; gap: 0.5rem; margin-bottom: 1rem; align-items: center;';
            itemDiv.innerHTML = `
                <input type="text"
                       class="want-name"
                       placeholder="e.g., Netflix"
                       style="flex: 1; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                <span style="color: var(--text-dim); font-size: 1.2rem;">$</span>
                <input type="number"
                       class="want-amount"
                       placeholder="0"
                       min="0"
                       step="10"
                       style="width: 120px; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                <button onclick="this.parentElement.remove(); updateTotals();"
                        style="padding: 0.5rem; background: var(--accent-red); color: white; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 1.2rem; min-width: 40px;">√ó</button>
            `;
            container.appendChild(itemDiv);

            // Add event listeners
            itemDiv.querySelector('.want-amount').addEventListener('input', updateTotals);
            itemDiv.querySelector('.want-name').addEventListener('input', () => {
                updateTotals();
            });
        }

        function updateTotals() {
            // Calculate needs total
            const needAmounts = document.querySelectorAll('.need-amount');
            let needsTotal = 0;
            state.needs = [];
            needAmounts.forEach((input, index) => {
                const amount = parseFloat(input.value) || 0;
                needsTotal += amount;
                const name = input.parentElement.querySelector('.need-name').value || `Need ${index + 1}`;
                if (amount > 0 || name) {
                    state.needs.push({ name, amount });
                }
            });
            document.getElementById('totalNeeds').textContent = needsTotal.toLocaleString();

            // Calculate wants total
            const wantAmounts = document.querySelectorAll('.want-amount');
            let wantsTotal = 0;
            state.wants = [];
            wantAmounts.forEach((input, index) => {
                const amount = parseFloat(input.value) || 0;
                wantsTotal += amount;
                const name = input.parentElement.querySelector('.want-name').value || `Want ${index + 1}`;
                if (amount > 0 || name) {
                    state.wants.push({ name, amount });
                }
            });
            document.getElementById('totalWants').textContent = wantsTotal.toLocaleString();
        }

        // Initialize with at least one need and one want
        function initializeCashFlow() {
            if (document.getElementById('needsContainer').children.length === 0) {
                addNeedItem();
                addNeedItem();
                addNeedItem();
            }
            if (document.getElementById('wantsContainer').children.length === 0) {
                addWantItem();
                addWantItem();
            }
        }

        // Cash Flow Visualization
        function visualizeCashFlow() {
            const income = state.income;
            const needsTotal = state.needs.reduce((sum, item) => sum + item.amount, 0);
            const wantsTotal = state.wants.reduce((sum, item) => sum + item.amount, 0);
            const leftover = income - needsTotal - wantsTotal;

            // Update display numbers
            document.getElementById('displayIncome').textContent = income.toLocaleString();
            document.getElementById('displayNeeds').textContent = needsTotal.toLocaleString();
            document.getElementById('displayWants').textContent = wantsTotal.toLocaleString();

            // Calculate percentages
            const needsPercent = income > 0 ? (needsTotal / income) * 100 : 0;
            const wantsPercent = income > 0 ? (wantsTotal / income) * 100 : 0;
            const leftoverPercent = income > 0 ? (leftover / income) * 100 : 0;

            // Update bar chart
            const needsBar = document.getElementById('needsBar');
            const wantsBar = document.getElementById('wantsBar');
            const leftoverBar = document.getElementById('leftoverBar');

            if (leftover < 0) {
                // Overspending - show red
                needsBar.style.width = `${needsPercent}%`;
                wantsBar.style.width = `${wantsPercent}%`;
                leftoverBar.style.width = `${Math.abs(leftoverPercent)}%`;
                leftoverBar.style.background = 'var(--accent-red)';
                document.getElementById('leftoverLabel').innerHTML = 'üî¥ Shortfall';
            } else {
                needsBar.style.width = `${needsPercent}%`;
                wantsBar.style.width = `${wantsPercent}%`;
                leftoverBar.style.width = `${leftoverPercent}%`;
                leftoverBar.style.background = 'var(--accent-green)';
                document.getElementById('leftoverLabel').innerHTML = 'üü¢ Left Over';
            }

            document.getElementById('needsPercent').textContent = `${Math.round(needsPercent)}%`;
            document.getElementById('wantsPercent').textContent = `${Math.round(wantsPercent)}%`;
            document.getElementById('leftoverPercent').textContent = `${Math.round(Math.abs(leftoverPercent))}%`;

            // Show contextual message
            const messageDiv = document.getElementById('cashFlowMessage');
            if (leftover < 0) {
                messageDiv.style.background = 'rgba(244, 67, 54, 0.15)';
                messageDiv.style.border = '2px solid var(--accent-red)';
                messageDiv.innerHTML = `
                    <strong style="color: var(--accent-red);">‚ö†Ô∏è You're overspending by $${Math.abs(leftover).toLocaleString()}/month</strong><br>
                    <span style="color: var(--text-dim); font-size: 0.95rem;">This means either cutting wants or finding more income. We'll help you choose a strategy.</span>
                `;
            } else if (leftover === 0) {
                messageDiv.style.background = 'rgba(255, 193, 7, 0.15)';
                messageDiv.style.border = '2px solid var(--accent-yellow)';
                messageDiv.innerHTML = `
                    <strong style="color: var(--accent-yellow);">‚öñÔ∏è You're breaking even</strong><br>
                    <span style="color: var(--text-dim); font-size: 0.95rem;">No buffer means one surprise expense creates stress. Let's build a tiny cushion.</span>
                `;
            } else if (leftover > 0 && leftover < income * 0.1) {
                messageDiv.style.background = 'rgba(255, 193, 7, 0.15)';
                messageDiv.style.border = '2px solid var(--accent-yellow)';
                messageDiv.innerHTML = `
                    <strong style="color: var(--accent-yellow);">üü° Small buffer: $${leftover.toLocaleString()}/month</strong><br>
                    <span style="color: var(--text-dim); font-size: 0.95rem;">You're saving less than 10% of income. Let's see if we can grow this a bit.</span>
                `;
            } else {
                messageDiv.style.background = 'rgba(76, 175, 80, 0.15)';
                messageDiv.style.border = '2px solid var(--accent-green)';
                messageDiv.innerHTML = `
                    <strong style="color: var(--accent-green);">‚úÖ Nice! You have $${leftover.toLocaleString()}/month left over</strong><br>
                    <span style="color: var(--text-dim); font-size: 0.95rem;">That's ${Math.round(leftoverPercent)}% of your income. Now let's turn this into a plan that grows your wealth.</span>
                `;
            }
        }

        // Modified nextScreen to handle visualization
        const originalNextScreen = nextScreen;
        nextScreen = function(screenNum) {
            // Initialize cash flow inputs when entering screens 7-8
            if (screenNum === 7) {
                setTimeout(initializeCashFlow, 100);
            }
            // Visualize when entering screen 9
            if (screenNum === 9) {
                setTimeout(visualizeCashFlow, 100);
            }
            // Build rule interface when entering screen 12
            if (screenNum === 12) {
                setTimeout(buildRuleInterface, 100);
            }
            originalNextScreen(screenNum);
        };

        // ===== PART 3: BUDGET RULE BUILDER =====

        // Pain point and rule selection handlers
        document.querySelectorAll('input[name="pain"]').forEach(input => {
            input.addEventListener('change', () => {
                state.painPoint = document.querySelector('input[name="pain"]:checked').value;
                document.getElementById('btn-pain').disabled = false;
            });
        });

        document.querySelectorAll('input[name="rule"]').forEach(input => {
            input.addEventListener('change', () => {
                state.budgetRule = document.querySelector('input[name="rule"]:checked').value;
                document.getElementById('btn-rule').disabled = false;
            });
        });

        // Build interactive rule interface based on selection
        function buildRuleInterface() {
            const ruleType = state.budgetRule;
            const ruleBuilder = document.getElementById('ruleBuilder');
            const title = document.getElementById('ruleBuilderTitle');

            if (ruleType === 'save-first') {
                title.textContent = 'üí∞ Save First Rule';
                ruleBuilder.innerHTML = `
                    <p style="margin-bottom: 2rem; color: var(--text-dim);">
                        Decide what percentage of your paycheck you'll save <em>before</em> spending on anything else.
                    </p>
                    <div style="max-width: 600px; margin: 0 auto;">
                        <label style="display: block; margin-bottom: 1rem; text-align: center; font-size: 1.1rem;">
                            I will save <strong style="color: var(--primary-orange);"><span id="savePercent">10</span>%</strong> of every paycheck
                        </label>
                        <input type="range" id="saveSlider" min="1" max="50" value="10"
                               style="width: 100%; height: 8px; border-radius: 5px; background: rgba(247, 147, 26, 0.2); outline: none; -webkit-appearance: none;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                            <span>1%</span>
                            <span>25%</span>
                            <span>50%</span>
                        </div>
                        <div style="margin-top: 1.5rem; text-align: center; font-size: 1.1rem;">
                            Based on your income of <strong>$${state.income.toLocaleString()}</strong>, that's
                            <strong style="color: var(--accent-green); font-size: 1.3rem;">$<span id="saveDollars">0</span>/month</strong>
                        </div>
                    </div>
                `;

                // Add slider listener
                const slider = document.getElementById('saveSlider');
                slider.addEventListener('input', (e) => {
                    const percent = e.target.value;
                    document.getElementById('savePercent').textContent = percent;
                    const dollars = Math.round((state.income * percent) / 100);
                    document.getElementById('saveDollars').textContent = dollars.toLocaleString();
                    state.ruleAmount = dollars;
                    updateForecast(dollars);
                });
                // Trigger initial calculation
                slider.dispatchEvent(new Event('input'));

            } else if (ruleType === 'cap-spending') {
                title.textContent = 'üìä Spending Cap Rule';
                ruleBuilder.innerHTML = `
                    <p style="margin-bottom: 2rem; color: var(--text-dim);">
                        Pick one category where you overspend and set a hard limit.
                    </p>
                    <div style="max-width: 600px; margin: 0 auto;">
                        <label style="display: block; margin-bottom: 0.5rem;">Category to limit:</label>
                        <select id="capCategory" style="width: 100%; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; margin-bottom: 1.5rem;">
                            <option value="dining">Dining Out</option>
                            <option value="shopping">Shopping</option>
                            <option value="subscriptions">Subscriptions</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="coffee">Coffee/Drinks</option>
                            <option value="other">Other</option>
                        </select>

                        <label style="display: block; margin-bottom: 0.5rem;">Monthly cap:</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.2rem; color: var(--text-dim);">$</span>
                            <input type="number" id="capAmount" value="100" min="0" step="10"
                                   style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                        </div>

                        <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 0.5rem; text-align: center;">
                            If you currently spend $<span id="currentSpend">200</span>/month on this,<br>
                            you'll save <strong style="color: var(--accent-green);">$<span id="capSavings">100</span>/month</strong>
                        </div>
                    </div>
                `;

                document.getElementById('capAmount').addEventListener('input', (e) => {
                    const cap = parseFloat(e.target.value) || 0;
                    const current = 200; // Placeholder - could pull from wants
                    const savings = Math.max(0, current - cap);
                    document.getElementById('capSavings').textContent = savings.toLocaleString();
                    state.ruleAmount = savings;
                    updateForecast(savings);
                });
                document.getElementById('capAmount').dispatchEvent(new Event('input'));

            } else if (ruleType === 'windfall') {
                title.textContent = 'üéÅ Windfall Rule';
                ruleBuilder.innerHTML = `
                    <p style="margin-bottom: 2rem; color: var(--text-dim);">
                        Commit unexpected money (bonuses, gifts, tax refunds) to a specific goal.
                    </p>
                    <div style="max-width: 600px; margin: 0 auto;">
                        <label style="display: block; margin-bottom: 0.5rem;">Every unexpected dollar goes to:</label>
                        <select id="windfallGoal" style="width: 100%; padding: 0.75rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; margin-bottom: 1.5rem;">
                            <option value="emergency">Emergency fund</option>
                            <option value="debt">Pay down debt</option>
                            <option value="investment">Investment account</option>
                            <option value="bitcoin">Bitcoin savings</option>
                            <option value="goal">Specific goal (vacation, etc.)</option>
                        </select>

                        <label style="display: block; margin-bottom: 0.5rem;">Estimate windfalls this quarter:</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.2rem; color: var(--text-dim);">$</span>
                            <input type="number" id="windfallAmount" value="300" min="0" step="50"
                                   style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                        </div>

                        <div style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-dim);">
                            Examples: birthday money, tax refund, bonus, side gig, found money
                        </div>
                    </div>
                `;

                document.getElementById('windfallAmount').addEventListener('input', (e) => {
                    const amount = parseFloat(e.target.value) || 0;
                    state.ruleAmount = amount / 3; // Divide by 3 months
                    updateForecast(amount / 3);
                });
                document.getElementById('windfallAmount').dispatchEvent(new Event('input'));

            } else if (ruleType === 'custom') {
                title.textContent = '‚úçÔ∏è Your Custom Rule';
                ruleBuilder.innerHTML = `
                    <p style="margin-bottom: 2rem; color: var(--text-dim);">
                        Write a rule that fits your unique situation.
                    </p>
                    <div style="max-width: 600px; margin: 0 auto;">
                        <textarea id="customRule" placeholder="Example: I will pack lunch 4 days/week instead of eating out, saving ~$40/week."
                                  style="width: 100%; min-height: 100px; padding: 1rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-family: inherit; font-size: 1rem; resize: vertical;"></textarea>

                        <label style="display: block; margin-top: 1.5rem; margin-bottom: 0.5rem;">How much will this save per month?</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.2rem; color: var(--text-dim);">$</span>
                            <input type="number" id="customAmount" value="100" min="0" step="10"
                                   style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                        </div>
                    </div>
                `;

                document.getElementById('customAmount').addEventListener('input', (e) => {
                    const amount = parseFloat(e.target.value) || 0;
                    state.ruleAmount = amount;
                    updateForecast(amount);
                });
                document.getElementById('customAmount').dispatchEvent(new Event('input'));
            }
        }

        // Update 3-month forecast
        function updateForecast(monthlyAmount) {
            document.getElementById('month1').textContent = Math.round(monthlyAmount).toLocaleString();
            document.getElementById('month2').textContent = Math.round(monthlyAmount * 2).toLocaleString();
            document.getElementById('month3').textContent = Math.round(monthlyAmount * 3).toLocaleString();
            document.getElementById('totalSaved').textContent = Math.round(monthlyAmount * 3).toLocaleString();
        }

        // Save reflection inputs
        document.getElementById('hardButPossible')?.addEventListener('input', (e) => {
            state.hardButPossible = e.target.value;
        });
        document.getElementById('makeEasier')?.addEventListener('input', (e) => {
            state.makeEasier = e.target.value;
        });
        document.getElementById('accountability')?.addEventListener('input', (e) => {
            state.accountability = e.target.value;
        });
        document.getElementById('customRuleText')?.addEventListener('input', (e) => {
            state.customRuleText = e.target.value;
        });

        // ====== PART 4: SAFETY & DEBT FUNCTIONS ======

        // Safety buffer calculation
        function setupSafetyBuffer() {
            const barebonesInput = document.getElementById('barebonesInput');
            const thirtyDayInput = document.getElementById('thirtyDayInput');

            barebonesInput?.addEventListener('input', (e) => {
                const target = parseFloat(e.target.value) || 0;
                state.barebonesAmount = target;
                document.getElementById('targetDisplay').textContent = target.toLocaleString();
                document.getElementById('targetBar').style.display = target > 0 ? 'block' : 'none';
                updateSafetyProgress();
            });

            thirtyDayInput?.addEventListener('input', (e) => {
                const amount = parseFloat(e.target.value) || 0;
                state.thirtyDaySavings = amount;
                updateSafetyProgress();
            });
        }

        function updateSafetyProgress() {
            const target = state.barebonesAmount;
            const savings = state.thirtyDaySavings;

            if (target > 0 && savings > 0) {
                const percent = Math.min(100, (savings / target) * 100);
                const monthsToTarget = Math.ceil(target / savings);

                document.getElementById('targetFill').style.width = `${percent}%`;
                document.getElementById('progressPercent').textContent = Math.round(percent);
                document.getElementById('monthsToTarget').textContent = monthsToTarget;
                document.getElementById('progressMessage').style.display = 'block';
            } else {
                document.getElementById('progressMessage').style.display = 'none';
            }
        }

        function saveSafetyBuffer() {
            if (!state.barebonesAmount || !state.thirtyDaySavings) {
                alert('Please enter both amounts to continue.');
                return;
            }
            nextScreen(14);
        }

        function saveReflectionAndCheckDebt() {
            state.bufferRelief = document.getElementById('bufferReliefInput')?.value || '';
            state.safePlace = document.getElementById('safePlaceInput')?.value || '';
            nextScreen(15);
        }

        function checkDebtPath() {
            const hasDebt = document.querySelector('input[name="hasDebt"]:checked')?.value;
            if (!hasDebt) {
                alert('Please select an option.');
                return;
            }
            state.hasDebt = hasDebt === 'yes';

            if (state.hasDebt) {
                // Go to debt inventory
                nextScreen(16);
                setupDebtInventory();
            } else {
                // Skip to Part 5
                nextScreen(18);
            }
        }

        // Debt inventory management
        let debtItemCount = 0;

        function setupDebtInventory() {
            // Add first debt item automatically
            if (debtItemCount === 0) {
                addDebtItem();
            }
        }

        function addDebtItem() {
            debtItemCount++;
            const container = document.getElementById('debtContainer');
            const itemDiv = document.createElement('div');
            itemDiv.className = 'debt-item';
            itemDiv.style.cssText = 'background: rgba(0,0,0,0.3); padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; border: 2px solid rgba(255,255,255,0.1);';
            itemDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h4 style="margin: 0; color: var(--primary-orange);">Debt #${debtItemCount}</h4>
                    <button onclick="this.closest('.debt-item').remove(); updateDebtSummary();"
                            style="padding: 0.25rem 0.5rem; background: var(--accent-red); color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Remove</button>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem;">Debt Name</label>
                        <input type="text" class="debt-name" placeholder="e.g., Visa, Student Loan"
                               style="width: 100%; padding: 0.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light);">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem;">Balance</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 0.5rem; top: 50%; transform: translateY(-50%); color: var(--text-dim);">$</span>
                            <input type="number" class="debt-balance" placeholder="0" min="0" step="100"
                                   style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 1.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light);">
                        </div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem;">Interest Rate (%)</label>
                        <input type="number" class="debt-rate" placeholder="0" min="0" max="100" step="0.1"
                               style="width: 100%; padding: 0.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light);">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9rem;">Min Payment/Month</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 0.5rem; top: 50%; transform: translateY(-50%); color: var(--text-dim);">$</span>
                            <input type="number" class="debt-min-payment" placeholder="0" min="0" step="10"
                                   style="width: 100%; padding: 0.5rem 0.5rem 0.5rem 1.5rem; background: rgba(0,0,0,0.3); border: 2px solid rgba(247, 147, 26, 0.3); border-radius: 0.5rem; color: var(--text-light);">
                        </div>
                    </div>
                </div>
                <div class="debt-badge" style="margin-top: 1rem; padding: 0.5rem; border-radius: 0.25rem; text-align: center; font-weight: bold; display: none;">
                    <span class="badge-icon"></span> <span class="badge-text"></span>
                </div>
            `;
            container.appendChild(itemDiv);

            // Add event listeners for real-time updates
            itemDiv.querySelectorAll('input').forEach(input => {
                input.addEventListener('input', () => {
                    updateDebtBadge(itemDiv);
                    updateDebtSummary();
                });
            });
        }

        function updateDebtBadge(itemDiv) {
            const rate = parseFloat(itemDiv.querySelector('.debt-rate').value) || 0;
            const badge = itemDiv.querySelector('.debt-badge');
            const icon = itemDiv.querySelector('.badge-icon');
            const text = itemDiv.querySelector('.badge-text');

            if (rate === 0) {
                badge.style.display = 'none';
                return;
            }

            badge.style.display = 'block';

            if (rate >= 20) {
                badge.style.background = 'rgba(244, 67, 54, 0.2)';
                badge.style.border = '2px solid var(--accent-red)';
                icon.textContent = 'üî¥';
                text.textContent = 'HIGH PRIORITY - Pay this first!';
            } else if (rate >= 10) {
                badge.style.background = 'rgba(255, 193, 7, 0.2)';
                badge.style.border = '2px solid var(--accent-yellow)';
                icon.textContent = 'üü°';
                text.textContent = 'Medium priority';
            } else {
                badge.style.background = 'rgba(76, 175, 80, 0.2)';
                badge.style.border = '2px solid var(--accent-green)';
                icon.textContent = 'üü¢';
                text.textContent = 'Low rate - okay to pay slowly';
            }
        }

        function updateDebtSummary() {
            const debtItems = document.querySelectorAll('.debt-item');
            let totalDebt = 0;
            let totalMinPayment = 0;

            state.debts = [];

            debtItems.forEach(item => {
                const name = item.querySelector('.debt-name').value || 'Unnamed';
                const balance = parseFloat(item.querySelector('.debt-balance').value) || 0;
                const rate = parseFloat(item.querySelector('.debt-rate').value) || 0;
                const minPayment = parseFloat(item.querySelector('.debt-min-payment').value) || 0;

                if (balance > 0) {
                    totalDebt += balance;
                    totalMinPayment += minPayment;
                    state.debts.push({ name, balance, rate, minPayment });
                }
            });

            if (totalDebt > 0) {
                document.getElementById('totalDebt').textContent = totalDebt.toLocaleString();
                document.getElementById('totalMinPayment').textContent = totalMinPayment.toLocaleString();
                document.getElementById('debtSummary').style.display = 'block';
            } else {
                document.getElementById('debtSummary').style.display = 'none';
            }
        }

        function chooseDebtStrategy() {
            if (state.debts.length === 0) {
                alert('Please add at least one debt before continuing.');
                return;
            }
            nextScreen(17);
            setupDebtStrategy();
        }

        function setupDebtStrategy() {
            const strategyRadios = document.querySelectorAll('input[name="debtStrategy"]');
            strategyRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    state.debtStrategy = e.target.value;
                    showDebtSimulation();
                });
            });
        }

        function showDebtSimulation() {
            const strategy = state.debtStrategy;
            let focusDebt;

            if (strategy === 'snowball') {
                // Sort by balance (smallest first)
                focusDebt = state.debts.sort((a, b) => a.balance - b.balance)[0];
            } else if (strategy === 'avalanche') {
                // Sort by rate (highest first)
                focusDebt = state.debts.sort((a, b) => b.rate - a.rate)[0];
            }

            if (!focusDebt) return;

            // Update UI
            document.getElementById('focusDebtName').textContent = focusDebt.name;
            document.getElementById('focusDebtBalance').textContent = focusDebt.balance.toLocaleString();
            document.getElementById('focusDebtRate').textContent = focusDebt.rate.toFixed(1);
            document.getElementById('strategySimulator').style.display = 'block';

            // Setup extra payment listener
            const extraPaymentInput = document.getElementById('extraPayment');
            extraPaymentInput.addEventListener('input', () => {
                calculatePayoff(focusDebt);
            });

            // Initial calculation
            calculatePayoff(focusDebt);
        }

        function calculatePayoff(debt) {
            const balance = debt.balance;
            const rate = debt.rate / 100 / 12; // Monthly rate
            const minPayment = debt.minPayment;
            const extraPayment = parseFloat(document.getElementById('extraPayment').value) || 0;
            const totalPayment = minPayment + extraPayment;

            if (totalPayment <= balance * rate) {
                document.getElementById('payoffMonths').textContent = '‚àû';
                document.getElementById('totalInterest').textContent = '‚àû';
                document.getElementById('minPayInterest').textContent = '‚àû';
                document.getElementById('interestSaved').textContent = '0';
                return;
            }

            // Calculate months to payoff with extra payment
            let remainingBalance = balance;
            let months = 0;
            let totalInterestPaid = 0;

            while (remainingBalance > 0 && months < 600) { // Cap at 50 years
                const interestCharge = remainingBalance * rate;
                totalInterestPaid += interestCharge;
                const principalPayment = totalPayment - interestCharge;
                remainingBalance -= principalPayment;
                months++;
            }

            // Calculate interest if only paying minimum
            let minOnlyBalance = balance;
            let minOnlyMonths = 0;
            let minOnlyInterest = 0;

            while (minOnlyBalance > 0 && minOnlyMonths < 600) {
                const interestCharge = minOnlyBalance * rate;
                minOnlyInterest += interestCharge;
                const principalPayment = minPayment - interestCharge;
                minOnlyBalance -= principalPayment;
                minOnlyMonths++;
            }

            const saved = Math.max(0, minOnlyInterest - totalInterestPaid);

            // Update UI
            document.getElementById('payoffMonths').textContent = months;
            document.getElementById('totalInterest').textContent = Math.round(totalInterestPaid).toLocaleString();
            document.getElementById('minPayInterest').textContent = Math.round(minOnlyInterest).toLocaleString();
            document.getElementById('interestSaved').textContent = Math.round(saved).toLocaleString();
        }

        // Initialize Part 4 when screen 13 loads
        if (document.getElementById('screen13')) {
            setupSafetyBuffer();
        }

        // ====== PART 5: FINAL PLAN GENERATOR ======

        function generateFinalPlan() {
            // Capture first step
            state.firstStep = document.getElementById('firstStepInput')?.value || 'Take the first step';

            // Generate plan content
            const planDocument = document.getElementById('planDocument');
            const path = pathData[state.path];

            // Calculate cash flow summary
            const needsTotal = state.needs.reduce((sum, item) => sum + item.amount, 0);
            const wantsTotal = state.wants.reduce((sum, item) => sum + item.amount, 0);
            const leftover = state.income - needsTotal - wantsTotal;

            // Build plan HTML
            let planHTML = `
                <div style="text-align: center; margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 3px solid #f7931a;">
                    <h1 style="color: #f7931a; margin-bottom: 0.5rem;">My 30-Day Money Plan</h1>
                    <p style="color: #666; font-size: 1.1rem;">Created ${new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                </div>

                <!-- Path Section -->
                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(247, 147, 26, 0.05)); padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 2rem; border-left: 4px solid #f7931a;">
                    <h2 style="color: #f7931a; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        ${path.icon} ${path.name}
                    </h2>
                    <p style="color: #333; font-style: italic;">${path.description}</p>
                </div>

                <!-- Cash Flow Section -->
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #333; border-bottom: 2px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem;">üí∞ My Cash Flow Snapshot</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 0.5rem;">
                            <div style="font-size: 0.9rem; color: #666; margin-bottom: 0.25rem;">Monthly Income</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #4caf50;">$${state.income.toLocaleString()}</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(244, 67, 54, 0.1); border-radius: 0.5rem;">
                            <div style="font-size: 0.9rem; color: #666; margin-bottom: 0.25rem;">Total Needs</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #f44336;">$${needsTotal.toLocaleString()}</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 0.5rem;">
                            <div style="font-size: 0.9rem; color: #666; margin-bottom: 0.25rem;">Total Wants</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #ffc107;">$${wantsTotal.toLocaleString()}</div>
                        </div>
                    </div>
                    <div style="text-align: center; padding: 1rem; background: ${leftover >= 0 ? 'rgba(76, 175, 80, 0.1)' : 'rgba(244, 67, 54, 0.1)'}; border-radius: 0.5rem;">
                        <div style="font-size: 0.9rem; color: #666; margin-bottom: 0.25rem;">${leftover >= 0 ? 'Money Left Over' : 'Shortfall'}</div>
                        <div style="font-size: 2rem; font-weight: bold; color: ${leftover >= 0 ? '#4caf50' : '#f44336'};">$${Math.abs(leftover).toLocaleString()}</div>
                    </div>
                </div>

                <!-- Budget Rule Section -->
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #333; border-bottom: 2px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem;">üìä My Budget Rule</h3>
                    <div style="background: rgba(247, 147, 26, 0.1); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid #f7931a;">
            `;

            // Add rule details based on type
            if (state.budgetRule === 'save-first') {
                const percent = Math.round((state.ruleAmount / state.income) * 100);
                planHTML += `
                    <p style="font-size: 1.2rem; color: #333; margin-bottom: 1rem;">
                        <strong>üí∞ Save First Rule:</strong> I will save <strong style="color: #f7931a;">${percent}%</strong> of every paycheck before spending on anything else.
                    </p>
                    <p style="color: #666;">That's <strong>$${state.ruleAmount.toLocaleString()}/month</strong></p>
                `;
            } else if (state.budgetRule === 'cap-spending') {
                planHTML += `
                    <p style="font-size: 1.2rem; color: #333; margin-bottom: 1rem;">
                        <strong>üìä Spending Cap Rule:</strong> I will limit my spending to <strong style="color: #f7931a;">$${state.ruleAmount.toLocaleString()}/month</strong> in one category.
                    </p>
                `;
            } else if (state.budgetRule === 'windfall') {
                planHTML += `
                    <p style="font-size: 1.2rem; color: #333; margin-bottom: 1rem;">
                        <strong>üéÅ Windfall Rule:</strong> Every unexpected dollar goes straight to my goal.
                    </p>
                    <p style="color: #666;">Estimated savings: <strong>$${Math.round(state.ruleAmount).toLocaleString()}/month</strong></p>
                `;
            } else if (state.budgetRule === 'custom') {
                planHTML += `
                    <p style="font-size: 1.2rem; color: #333; margin-bottom: 1rem;">
                        <strong>‚úçÔ∏è My Custom Rule:</strong> ${state.customRuleText || 'Custom budget rule'}
                    </p>
                    <p style="color: #666;">Expected savings: <strong>$${state.ruleAmount.toLocaleString()}/month</strong></p>
                `;
            }

            planHTML += `
                        <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(247, 147, 26, 0.3);">
                            <strong style="color: #666;">3-Month Forecast:</strong><br>
                            Month 1: $${Math.round(state.ruleAmount).toLocaleString()} |
                            Month 2: $${Math.round(state.ruleAmount * 2).toLocaleString()} |
                            Month 3: $${Math.round(state.ruleAmount * 3).toLocaleString()}
                        </div>
                    </div>
                </div>

                <!-- Safety Buffer Section -->
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #333; border-bottom: 2px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem;">üõ°Ô∏è My Safety Buffer</h3>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid #4caf50;">
                        <p style="color: #333; margin-bottom: 0.5rem;"><strong>Bare-bones monthly expenses:</strong> $${state.barebonesAmount.toLocaleString()}</p>
                        <p style="color: #333; margin-bottom: 0.5rem;"><strong>Saving in next 30 days:</strong> $${state.thirtyDaySavings.toLocaleString()}</p>
                        <p style="color: #333; margin-bottom: 0.5rem;"><strong>Months to full buffer:</strong> ${Math.ceil(state.barebonesAmount / state.thirtyDaySavings)}</p>
                        ${state.safePlace ? `<p style="color: #666; margin-top: 1rem; font-style: italic;"><strong>Where I'll park it:</strong> ${state.safePlace}</p>` : ''}
                    </div>
                </div>
            `;

            // Debt Section (conditional)
            if (state.hasDebt && state.debts.length > 0) {
                const totalDebt = state.debts.reduce((sum, d) => sum + d.balance, 0);
                const totalMinPayment = state.debts.reduce((sum, d) => sum + d.minPayment, 0);

                planHTML += `
                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: #333; border-bottom: 2px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem;">üí≥ My Debt Payoff Strategy</h3>
                        <div style="background: rgba(244, 67, 54, 0.1); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid #f44336;">
                            <p style="color: #333; margin-bottom: 0.5rem;"><strong>Total Debt:</strong> $${totalDebt.toLocaleString()}</p>
                            <p style="color: #333; margin-bottom: 0.5rem;"><strong>Total Minimum Payments:</strong> $${totalMinPayment.toLocaleString()}/month</p>
                            <p style="color: #333; margin-bottom: 1rem;"><strong>Strategy:</strong> ${state.debtStrategy === 'snowball' ? '‚õÑ Snowball (smallest first)' : 'üèîÔ∏è Avalanche (highest rate first)'}</p>

                            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(244, 67, 54, 0.3);">
                                <strong style="color: #666;">My Debts:</strong>
                                <ul style="margin: 0.5rem 0 0 1.5rem; color: #333;">
                `;

                state.debts.forEach(debt => {
                    const priority = debt.rate >= 20 ? 'üî¥' : debt.rate >= 10 ? 'üü°' : 'üü¢';
                    planHTML += `<li>${priority} ${debt.name}: $${debt.balance.toLocaleString()} @ ${debt.rate.toFixed(1)}% APR</li>`;
                });

                planHTML += `
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            }

            // First Step Section
            planHTML += `
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #333; border-bottom: 2px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem;">üéØ My First Step (Next 24 Hours)</h3>
                    <div style="background: rgba(247, 147, 26, 0.1); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid #f7931a;">
                        <p style="font-size: 1.1rem; color: #333; font-weight: bold;">${state.firstStep}</p>
                    </div>
                </div>

                <!-- Reflection Section -->
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #333; border-bottom: 2px solid #ddd; padding-bottom: 0.5rem; margin-bottom: 1rem;">üí≠ My Reflections</h3>
            `;

            if (state.reflection) {
                planHTML += `<p style="color: #333; margin-bottom: 1rem;"><strong>Why this matters to me:</strong><br><em style="color: #666;">${state.reflection}</em></p>`;
            }
            if (state.bufferRelief) {
                planHTML += `<p style="color: #333; margin-bottom: 1rem;"><strong>How a safety buffer would change my stress:</strong><br><em style="color: #666;">${state.bufferRelief}</em></p>`;
            }
            if (state.accountability) {
                planHTML += `<p style="color: #333; margin-bottom: 1rem;"><strong>My accountability partner:</strong><br><em style="color: #666;">${state.accountability}</em></p>`;
            }

            planHTML += `
                </div>

                <!-- Footer -->
                <div style="text-align: center; padding-top: 2rem; border-top: 3px solid #f7931a; color: #999; font-size: 0.9rem;">
                    <p>Created with Bitcoin Sovereign Academy</p>
                    <p style="margin-top: 0.5rem;">Learn Bitcoin. Achieve Sovereignty.</p>
                    <p style="margin-top: 0.5rem;">bitcoinsovereign.academy</p>
                </div>
            `;

            planDocument.innerHTML = planHTML;
            nextScreen(19);
        }

        function downloadPlan() {
            const planText = generatePlainTextPlan();
            const blob = new Blob([planText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `my-30-day-money-plan-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const planText = generatePlainTextPlan();
            navigator.clipboard.writeText(planText).then(() => {
                alert('‚úÖ Plan copied to clipboard! You can now paste it into any app.');
            }).catch(() => {
                alert('‚ùå Could not copy to clipboard. Please use the Download button instead.');
            });
        }

        function generatePlainTextPlan() {
            const path = pathData[state.path];
            const needsTotal = state.needs.reduce((sum, item) => sum + item.amount, 0);
            const wantsTotal = state.wants.reduce((sum, item) => sum + item.amount, 0);
            const leftover = state.income - needsTotal - wantsTotal;
            const date = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

            let planText = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    MY 30-DAY MONEY PLAN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Created: ${date}

${path.icon} ${path.name.toUpperCase()}
${path.description}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üí∞ CASH FLOW SNAPSHOT
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Monthly Income:    $${state.income.toLocaleString()}
Total Needs:       $${needsTotal.toLocaleString()}
Total Wants:       $${wantsTotal.toLocaleString()}
${leftover >= 0 ? 'Money Left Over' : 'Shortfall'}:   $${Math.abs(leftover).toLocaleString()}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìä MY BUDGET RULE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
`;

            if (state.budgetRule === 'save-first') {
                const percent = Math.round((state.ruleAmount / state.income) * 100);
                planText += `Save First Rule: ${percent}% of every paycheck ($${state.ruleAmount.toLocaleString()}/month)\n`;
            } else if (state.budgetRule === 'cap-spending') {
                planText += `Spending Cap Rule: $${state.ruleAmount.toLocaleString()}/month limit\n`;
            } else if (state.budgetRule === 'windfall') {
                planText += `Windfall Rule: All unexpected money goes to my goal ($${Math.round(state.ruleAmount).toLocaleString()}/month estimated)\n`;
            } else if (state.budgetRule === 'custom') {
                planText += `Custom Rule: ${state.customRuleText}\nExpected savings: $${state.ruleAmount.toLocaleString()}/month\n`;
            }

            planText += `\n3-Month Forecast:\nMonth 1: $${Math.round(state.ruleAmount).toLocaleString()} | Month 2: $${Math.round(state.ruleAmount * 2).toLocaleString()} | Month 3: $${Math.round(state.ruleAmount * 3).toLocaleString()}\n`;

            planText += `
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üõ°Ô∏è MY SAFETY BUFFER
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Bare-bones monthly expenses: $${state.barebonesAmount.toLocaleString()}
Saving in next 30 days: $${state.thirtyDaySavings.toLocaleString()}
Months to full buffer: ${Math.ceil(state.barebonesAmount / state.thirtyDaySavings)}
`;

            if (state.safePlace) {
                planText += `Where I'll park it: ${state.safePlace}\n`;
            }

            if (state.hasDebt && state.debts.length > 0) {
                const totalDebt = state.debts.reduce((sum, d) => sum + d.balance, 0);
                const totalMinPayment = state.debts.reduce((sum, d) => sum + d.minPayment, 0);

                planText += `
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üí≥ MY DEBT PAYOFF STRATEGY
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Total Debt: $${totalDebt.toLocaleString()}
Total Minimum Payments: $${totalMinPayment.toLocaleString()}/month
Strategy: ${state.debtStrategy === 'snowball' ? 'Snowball (smallest first)' : 'Avalanche (highest rate first)'}

My Debts:
`;
                state.debts.forEach(debt => {
                    const priority = debt.rate >= 20 ? '[HIGH]' : debt.rate >= 10 ? '[MED]' : '[LOW]';
                    planText += `  ${priority} ${debt.name}: $${debt.balance.toLocaleString()} @ ${debt.rate.toFixed(1)}% APR\n`;
                });
            }

            planText += `
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üéØ MY FIRST STEP (NEXT 24 HOURS)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${state.firstStep}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üí≠ MY REFLECTIONS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
`;

            if (state.reflection) planText += `\nWhy this matters: ${state.reflection}\n`;
            if (state.bufferRelief) planText += `\nHow a buffer changes my stress: ${state.bufferRelief}\n`;
            if (state.accountability) planText += `\nAccountability partner: ${state.accountability}\n`;

            planText += `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Created with Bitcoin Sovereign Academy
Learn Bitcoin. Achieve Sovereignty.
bitcoinsovereign.academy
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`;

            return planText;
        }

        // Save first step input
        document.getElementById('firstStepInput')?.addEventListener('input', (e) => {
            state.firstStep = e.target.value;
        });
    </script>


</body></html>