<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Decision Explorer | Bitcoin Sovereign Academy</title>
    <meta name="description" content="Explore realistic financial decisions across life stages. Compare investments, understand trade-offs, and discover how time preference shapes wealth-building.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #0f0f0f;
            --secondary-dark: #1a1a1a;
            --text-light: #e0e0e0;
            --text-dim: #888888;
            --success-green: #4CAF50;
            --warning-yellow: #FFC107;
            --error-red: #ef4444;
            --accent-gold: #D4AF37;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-orange), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text-dim);
            max-width: 800px;
            margin: 0 auto 1.5rem;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border-color);
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            background: none;
            border: none;
            color: var(--text-dim);
            font-size: 1.1rem;
            font-weight: 600;
            padding: 1rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            position: relative;
            top: 2px;
        }

        .tab-btn:hover {
            color: var(--primary-orange);
        }

        .tab-btn.active {
            color: var(--primary-orange);
            border-bottom-color: var(--primary-orange);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Styles */
        .card {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            color: var(--primary-orange);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        /* Profile Selection */
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .profile-option {
            background: rgba(0, 0, 0, 0.3);
            border: 3px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .profile-option:hover {
            border-color: var(--primary-orange);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(247, 147, 26, 0.3);
        }

        .profile-option.selected {
            border-color: var(--success-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .profile-option h3 {
            color: var(--primary-orange);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .profile-option p {
            color: var(--text-dim);
            font-size: 0.95rem;
        }

        /* Scenario Styles */
        .scenario {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
        }

        .scenario-header {
            margin-bottom: 2rem;
        }

        .scenario-number {
            color: var(--primary-orange);
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .scenario h3 {
            font-size: 1.6rem;
            margin-bottom: 1rem;
        }

        .scenario-context {
            background: rgba(247, 147, 26, 0.1);
            border-left: 4px solid var(--primary-orange);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 0.5rem;
        }

        .scenario-context p {
            color: var(--text-light);
            line-height: 1.8;
        }

        /* Choice Options */
        .choices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .choice-card {
            background: var(--secondary-dark);
            border: 3px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .choice-card:hover {
            border-color: var(--primary-orange);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(247, 147, 26, 0.3);
        }

        .choice-card.selected {
            border-color: var(--success-green);
            background: rgba(76, 175, 80, 0.05);
        }

        .choice-label {
            font-size: 0.85rem;
            color: var(--text-dim);
            text-transform: uppercase;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .choice-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .choice-description {
            color: var(--text-light);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .choice-highlights {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .choice-highlight {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .choice-highlight .icon {
            font-size: 1.1rem;
        }

        /* Outcome Display */
        .outcome {
            display: none;
            background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(212, 175, 55, 0.05));
            border-left: 4px solid var(--primary-orange);
            padding: 2.5rem;
            border-radius: 0.5rem;
            margin-top: 2rem;
        }

        .outcome.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .outcome h4 {
            font-size: 1.5rem;
            color: var(--success-green);
            margin-bottom: 1.5rem;
        }

        .outcome-timeline {
            margin: 2rem 0;
        }

        .timeline-item {
            display: grid;
            grid-template-columns: 100px 1fr 150px;
            gap: 1.5rem;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            align-items: center;
        }

        .timeline-year {
            font-weight: 700;
            color: var(--primary-orange);
            font-size: 1.1rem;
        }

        .timeline-event {
            color: var(--text-light);
        }

        .timeline-value {
            text-align: right;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }

        .timeline-value.positive {
            color: var(--success-green);
        }

        .timeline-value.negative {
            color: var(--error-red);
        }

        .timeline-value.neutral {
            color: var(--warning-yellow);
        }

        /* Comparison Table */
        .comparison-table {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }

        .comparison-table h4 {
            color: var(--accent-gold);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 1rem;
            background: rgba(247, 147, 26, 0.1);
            color: var(--primary-orange);
            font-weight: 700;
            border-bottom: 2px solid var(--border-color);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-light);
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        /* Reflection Prompts */
        .reflection {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15), rgba(212, 175, 55, 0.05));
            border: 2px solid var(--accent-gold);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .reflection h4 {
            color: var(--accent-gold);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .reflection-question {
            color: var(--text-light);
            margin-bottom: 1rem;
            font-style: italic;
            line-height: 1.8;
        }

        /* Asset Comparison (Tab 2) */
        .asset-input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .input-field {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .input-field label {
            color: var(--text-light);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .input-field input,
        .input-field select {
            padding: 0.875rem 1rem;
            background: var(--primary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-light);
            font-size: 1rem;
            font-family: inherit;
        }

        .input-field input:focus,
        .input-field select:focus {
            outline: none;
            border-color: var(--primary-orange);
        }

        .asset-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .asset-result-card {
            background: var(--secondary-dark);
            border: 3px solid;
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .asset-result-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }

        .asset-result-card.stocks { border-color: #2196F3; }
        .asset-result-card.bonds { border-color: var(--warning-yellow); }
        .asset-result-card.real-estate { border-color: #9C27B0; }
        .asset-result-card.gold { border-color: var(--accent-gold); }
        .asset-result-card.bitcoin { border-color: var(--primary-orange); }
        .asset-result-card.cash { border-color: var(--error-red); }

        .asset-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .asset-name {
            font-size: 0.9rem;
            color: var(--text-dim);
            text-transform: uppercase;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .asset-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            font-family: 'Courier New', monospace;
        }

        .asset-return {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .asset-metrics {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
        }

        .asset-metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .asset-metric-label {
            color: var(--text-dim);
        }

        .asset-metric-value {
            color: var(--text-light);
            font-weight: 600;
        }

        /* Buttons */
        .btn {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #ff8c00;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(247, 147, 26, 0.4);
        }

        .btn:disabled {
            background: var(--text-dim);
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: rgba(247, 147, 26, 0.2);
            color: var(--primary-orange);
            border: 2px solid var(--primary-orange);
        }

        .btn-secondary:hover {
            background: rgba(247, 147, 26, 0.3);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        /* Risk Tolerance Indicator */
        .risk-indicator {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .risk-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .risk-dot.active.low {
            background: var(--success-green);
        }

        .risk-dot.active.medium {
            background: var(--warning-yellow);
        }

        .risk-dot.active.high {
            background: var(--error-red);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tab-nav {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
                text-align: center;
            }

            .choices-grid,
            .asset-results,
            .profile-grid {
                grid-template-columns: 1fr;
            }

            .timeline-item {
                grid-template-columns: 80px 1fr;
                gap: 1rem;
            }

            .timeline-value {
                grid-column: 2;
                text-align: left;
                margin-top: 0.5rem;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
    <link rel="stylesheet" href="/css/interactive-demos.css">
<link rel="canonical" href="https://bitcoinsovereign.academy/"><meta property="og:title" content="Bitcoin Sovereign Academy"><meta property="og:description" content="Master Bitcoin through interactive experiences, AI-powered learning, and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here."><meta property="og:image" content="https://bitcoinsovereign.academy/assets/og-image.jpg"><meta property="og:url" content="https://bitcoinsovereign.academy/"><meta property="og:type" content="website"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "EducationalOrganization",
  "name": "Bitcoin Sovereign Academy",
  "description": "Master Bitcoin through interactive experiences, AI-powered learning, and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.",
  "url": "https://bitcoinsovereign.academy",
  "logo": "https://bitcoinsovereign.academy/assets/og-image.jpg",
  "sameAs": [
    "https://github.com/Sovereigndwp/bitcoin-sovereign-academy"
  ],
  "educationalLevel": "Beginner to Advanced",
  "teaches": [
    "Bitcoin Fundamentals",
    "Cryptocurrency Technology",
    "Financial Sovereignty",
    "Digital Asset Security"
  ],
  "audience": {
    "@type": "Audience",
    "audienceType": "Students interested in Bitcoin and cryptocurrency"
  }
}</script></head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <main id="main-content" class="container">
        <!-- Header -->
        <div class="header">
            <h1>üí∞ Financial Decision Explorer</h1>
            <p>
                Explore realistic financial decisions across life stages. Compare multiple investments,
                understand trade-offs, and discover how time preference shapes long-term wealth.
            </p>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="journey">
                üéØ Your Financial Journey
            </button>
            <button class="tab-btn" data-tab="comparison">
                üìä Asset Comparison
            </button>
            <button class="tab-btn" data-tab="simulator">
                üé≤ Risk Simulator
            </button>
        </div>

        <!-- TAB 1: Your Financial Journey -->
        <div class="tab-content active" id="journey">
            <!-- Step 1: Profile Selection -->
            <div class="card" id="profile-selection">
                <h2>Tell Us About Yourself</h2>
                <p style="color: var(--text-dim); margin-bottom: 2rem;">
                    We'll personalize scenarios based on your life stage and financial situation.
                </p>

                <h3 style="color: var(--primary-orange); margin-bottom: 1rem;">What's your age range?</h3>
                <div class="profile-grid" id="age-selection">
                    <div class="profile-option" data-age="student" onclick="selectAge('student')">
                        <h3>üéì 18-25</h3>
                        <p>Student / Early Career</p>
                    </div>
                    <div class="profile-option" data-age="young-professional" onclick="selectAge('young-professional')">
                        <h3>üíº 26-35</h3>
                        <p>Young Professional</p>
                    </div>
                    <div class="profile-option" data-age="mid-career" onclick="selectAge('mid-career')">
                        <h3>üëî 36-50</h3>
                        <p>Mid-Career / Family</p>
                    </div>
                    <div class="profile-option" data-age="pre-retirement" onclick="selectAge('pre-retirement')">
                        <h3>üìà 51-65</h3>
                        <p>Pre-Retirement</p>
                    </div>
                </div>

                <div id="income-selection" style="display: none;">
                    <h3 style="color: var(--primary-orange); margin: 2rem 0 1rem;">What's your income level?</h3>
                    <div class="profile-grid">
                        <div class="profile-option" data-income="low" onclick="selectIncome('low')">
                            <h3>üíµ Entry Level</h3>
                            <p>&lt;$50k/year</p>
                        </div>
                        <div class="profile-option" data-income="medium" onclick="selectIncome('medium')">
                            <h3>üí∞ Mid Level</h3>
                            <p>$50k-$120k/year</p>
                        </div>
                        <div class="profile-option" data-income="high" onclick="selectIncome('high')">
                            <h3>üíé High Earner</h3>
                            <p>&gt;$120k/year</p>
                        </div>
                    </div>
                </div>

                <div id="risk-selection" style="display: none;">
                    <h3 style="color: var(--primary-orange); margin: 2rem 0 1rem;">What's your risk tolerance?</h3>
                    <div class="profile-grid">
                        <div class="profile-option" data-risk="conservative" onclick="selectRisk('conservative')">
                            <h3>üõ°Ô∏è Conservative</h3>
                            <p>Safety first, lower returns</p>
                            <div class="risk-indicator">
                                <div class="risk-dot active low"></div>
                                <div class="risk-dot"></div>
                                <div class="risk-dot"></div>
                            </div>
                        </div>
                        <div class="profile-option" data-risk="moderate" onclick="selectRisk('moderate')">
                            <h3>‚öñÔ∏è Moderate</h3>
                            <p>Balanced approach</p>
                            <div class="risk-indicator">
                                <div class="risk-dot active medium"></div>
                                <div class="risk-dot active medium"></div>
                                <div class="risk-dot"></div>
                            </div>
                        </div>
                        <div class="profile-option" data-risk="aggressive" onclick="selectRisk('aggressive')">
                            <h3>üöÄ Aggressive</h3>
                            <p>Higher risk, higher potential</p>
                            <div class="risk-indicator">
                                <div class="risk-dot active high"></div>
                                <div class="risk-dot active high"></div>
                                <div class="risk-dot active high"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="start-journey" style="display: none; text-align: center; margin-top: 3rem;">
                    <button class="btn" onclick="startJourney()">
                        üöÄ Start My Financial Journey
                    </button>
                </div>
            </div>

            <!-- Step 2: Scenarios -->
            <div id="scenarios-container" style="display: none;">
                <!-- Scenarios will be dynamically rendered here -->
            </div>

            <!-- Step 3: Journey Summary -->
            <div id="journey-summary" style="display: none;"></div>
        </div>

        <!-- TAB 2: Asset Comparison -->
        <div class="tab-content" id="comparison">
            <div class="card">
                <h2>üìä Compare Investment Returns</h2>
                <p style="color: var(--text-dim); margin-bottom: 2rem;">
                    See how different assets performed historically, including taxes, fees, and real purchasing power.
                </p>

                <div class="asset-input-group">
                    <div class="input-field">
                        <label>Investment Amount</label>
                        <input type="number" id="compare-amount" value="10000" min="100" step="100">
                    </div>
                    <div class="input-field">
                        <label>Start Year</label>
                        <select id="compare-start-year">
                            <option value="2000">2000</option>
                            <option value="2005">2005</option>
                            <option value="2010">2010</option>
                            <option value="2015" selected="">2015</option>
                            <option value="2020">2020</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label>End Year</label>
                        <select id="compare-end-year">
                            <option value="2024" selected="">2024 (Today)</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                            <option value="2021">2021</option>
                        </select>
                    </div>
                    <div class="input-field">
                        <label>Tax Bracket</label>
                        <select id="tax-bracket">
                            <option value="0">0% (Tax-advantaged account)</option>
                            <option value="15" selected="">15% (Long-term capital gains)</option>
                            <option value="20">20% (High income)</option>
                            <option value="37">37% (Short-term / Ordinary income)</option>
                        </select>
                    </div>
                </div>

                <button class="btn" onclick="compareAssets()">
                    üîç Compare Assets
                </button>

                <div id="asset-comparison-results" style="display: none;">
                    <div class="asset-results"></div>

                    <div class="comparison-table" id="comparison-details">
                        <!-- Detailed comparison table will go here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: Risk Simulator -->
        <div class="tab-content" id="simulator">
            <div class="card">
                <h2>üé≤ Life Event Simulator</h2>
                <p style="color: var(--text-dim); margin-bottom: 2rem;">
                    See how different portfolios handle real-world shocks: job loss, medical emergencies, market crashes.
                </p>

                <div class="asset-input-group">
                    <div class="input-field">
                        <label>Current Savings</label>
                        <input type="number" id="sim-savings" value="50000" min="1000" step="1000">
                    </div>
                    <div class="input-field">
                        <label>Monthly Expenses</label>
                        <input type="number" id="sim-expenses" value="4000" min="500" step="100">
                    </div>
                    <div class="input-field">
                        <label>Portfolio Allocation</label>
                        <select id="sim-allocation">
                            <option value="conservative">Conservative (20/70/10 stocks/bonds/cash)</option>
                            <option value="moderate" selected="">Moderate (60/30/10 stocks/bonds/cash)</option>
                            <option value="aggressive">Aggressive (80/15/5 stocks/bonds/cash)</option>
                            <option value="bitcoin-heavy">Bitcoin-Heavy (40/20/20/20 stocks/bonds/bitcoin/cash)</option>
                        </select>
                    </div>
                </div>

                <h3 style="color: var(--primary-orange); margin: 2rem 0 1rem;">Choose a Life Event</h3>
                <div class="choices-grid">
                    <div class="choice-card" onclick="simulateEvent('job-loss')">
                        <div class="choice-title">üò∞ Job Loss</div>
                        <div class="choice-description">6 months unemployed with reduced income</div>
                    </div>
                    <div class="choice-card" onclick="simulateEvent('medical')">
                        <div class="choice-title">üè• Medical Emergency</div>
                        <div class="choice-description">$15,000 unexpected medical cost</div>
                    </div>
                    <div class="choice-card" onclick="simulateEvent('market-crash')">
                        <div class="choice-title">üìâ Market Crash</div>
                        <div class="choice-description">2008-style 40% stock market drop</div>
                    </div>
                    <div class="choice-card" onclick="simulateEvent('opportunity')">
                        <div class="choice-title">üéØ Big Opportunity</div>
                        <div class="choice-description">Need $30k quickly for investment opportunity</div>
                    </div>
                </div>

                <div id="simulation-results" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // GLOBAL STATE
        // ========================================

        const userProfile = {
            age: null,
            income: null,
            risk: null
        };

        let currentScenarioIndex = 0;
        let scenarioChoices = [];

        // ========================================
        // HISTORICAL DATA
        // ========================================

        const assetData = {
            // Annual returns (simplified for demo - real implementation would use monthly data)
            2000: { stocks: -9.1, bonds: 11.6, realEstate: 3.5, gold: -5.5, bitcoin: null, inflation: 3.4 },
            2005: { stocks: 4.9, bonds: 2.4, realEstate: 12.4, gold: 18.2, bitcoin: null, inflation: 3.4 },
            2010: { stocks: 15.1, bonds: 6.5, realEstate: -2.5, gold: 29.5, bitcoin: null, inflation: 1.6 },
            2015: { stocks: 1.4, bonds: 0.5, realEstate: 5.8, gold: -10.4, bitcoin: 35.0, inflation: 0.1 },
            2020: { stocks: 18.4, bonds: 7.5, realEstate: 9.2, gold: 24.4, bitcoin: 301.0, inflation: 1.2 },
            2021: { stocks: 28.7, bonds: -2.3, realEstate: 16.9, gold: -3.5, bitcoin: 59.8, inflation: 4.7 },
            2022: { stocks: -18.1, bonds: -13.0, realEstate: -5.0, gold: -0.3, bitcoin: -64.3, inflation: 8.0 },
            2023: { stocks: 26.3, bonds: 5.5, realEstate: 6.5, gold: 13.1, bitcoin: 155.0, inflation: 4.1 },
            2024: { stocks: 23.3, bonds: 2.0, realEstate: 4.8, gold: 27.2, bitcoin: 120.0, inflation: 3.2 }
        };

        // ========================================
        // TAB NAVIGATION
        // ========================================

        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tab = btn.dataset.tab;

                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(tab).classList.add('active');
            });
        });

        // ========================================
        // PROFILE SELECTION
        // ========================================

        function selectAge(age) {
            userProfile.age = age;

            // Update UI
            document.querySelectorAll('#age-selection .profile-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector(`[data-age="${age}"]`).classList.add('selected');

            // Show next step
            document.getElementById('income-selection').style.display = 'block';
            document.getElementById('income-selection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function selectIncome(income) {
            userProfile.income = income;

            // Update UI
            document.querySelectorAll('#income-selection .profile-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector(`[data-income="${income}"]`).classList.add('selected');

            // Show next step
            document.getElementById('risk-selection').style.display = 'block';
            document.getElementById('risk-selection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function selectRisk(risk) {
            userProfile.risk = risk;

            // Update UI
            document.querySelectorAll('#risk-selection .profile-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector(`[data-risk="${risk}"]`).classList.add('selected');

            // Show start button
            document.getElementById('start-journey').style.display = 'block';
            document.getElementById('start-journey').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ========================================
        // SCENARIO DATABASE
        // ========================================

        function getScenarios(profile) {
            // This would be much larger in production
            const allScenarios = {
                'student': [
                    {
                        id: 1,
                        title: "$5,000 Windfall Decision",
                        context: "You're 21 and just received a $5,000 gift from your grandparents. You have $30,000 in student loans at 6% interest and no emergency fund. What do you do?",
                        choices: [
                            {
                                label: "High Time Preference",
                                title: "üéâ Experience Investment",
                                description: "Spend it on study abroad, conference tickets, or memorable experiences.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Networking & personal growth" },
                                    { icon: "‚ùå", text: "No financial return" },
                                    { icon: "‚öñÔ∏è", text: "Medium risk (opportunity cost)" }
                                ],
                                outcomes: {
                                    immediate: "Incredible experience, new connections",
                                    year5: "Difficult to quantify financially, but may have opened doors",
                                    year10: "Potential career benefits, but $5k would be worth $9,800 if invested",
                                    financialValue: 0,
                                    experientialValue: "High"
                                }
                            },
                            {
                                label: "Moderate Time Preference",
                                title: "üí≥ Pay Down Debt",
                                description: "Put all $5,000 toward your highest-interest student loans.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Guaranteed 6% return" },
                                    { icon: "‚úÖ", text: "Less stress" },
                                    { icon: "‚öñÔ∏è", text: "Low risk" }
                                ],
                                outcomes: {
                                    immediate: "Debt reduced from $30k to $25k",
                                    year5: "Saved $1,650 in interest",
                                    year10: "Saved $3,500 in interest, loan paid off 2 years earlier",
                                    financialValue: 3500,
                                    experientialValue: "Peace of mind"
                                }
                            },
                            {
                                label: "Low Time Preference",
                                title: "üè¶ Build Emergency Fund",
                                description: "Put it in a high-yield savings account as your safety net.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Financial security" },
                                    { icon: "‚úÖ", text: "Enables risk-taking" },
                                    { icon: "‚öñÔ∏è", text: "Low growth (4.5% APY)" }
                                ],
                                outcomes: {
                                    immediate: "6 months of expenses covered",
                                    year5: "$6,250 with 4.5% APY",
                                    year10: "$7,900 - prevented $3,000 in credit card debt during emergencies",
                                    financialValue: 7900,
                                    experientialValue: "Prevented debt spiral"
                                }
                            },
                            {
                                label: "Ultra-Low Time Preference",
                                title: "üìà Invest for Retirement",
                                description: "Open a Roth IRA and invest in index funds.",
                                highlights: [
                                    { icon: "‚úÖ", text: "40 years of compound growth" },
                                    { icon: "‚úÖ", text: "Tax-free withdrawals" },
                                    { icon: "‚ö†Ô∏è", text: "Locked until retirement" }
                                ],
                                outcomes: {
                                    immediate: "No immediate benefit",
                                    year5: "$7,800 (assuming 7% real return)",
                                    year10: "$12,200",
                                    year40: "$74,900 at retirement (age 61)",
                                    financialValue: 74900,
                                    experientialValue: "Time is your biggest asset"
                                }
                            }
                        ],
                        reflection: "What matters more to you right now: experiences that shape who you become, financial security, or long-term wealth? There's no single right answer - but there are trade-offs."
                    }
                ],
                'mid-career': [
                    {
                        id: 1,
                        title: "House vs Investment Decision",
                        context: "You're 42, earning $150k/year with $120k saved. Housing prices just jumped 15%. Your rent is $2,800/mo. Do you buy now or invest and wait?",
                        choices: [
                            {
                                label: "High Time Preference",
                                title: "üè† Buy House Now",
                                description: "Put $100k down (20%) on a $500k house. Mortgage payment: $2,650/mo.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Stop 'throwing money away' on rent" },
                                    { icon: "‚ö†Ô∏è", text: "Depletes savings" },
                                    { icon: "‚ö†Ô∏è", text: "Less geographic mobility" }
                                ],
                                outcomes: {
                                    immediate: "Home owner, $20k left in savings, $2,650/mo mortgage",
                                    year5: "House worth $580k (+16%), you have $180k equity, paid $50k in interest",
                                    year10: "House worth $670k (+34%), you have $330k equity. Paid $95k in interest + $30k maintenance. If you'd invested: $315k in diversified portfolio.",
                                    financialValue: 180000,
                                    opportunityCost: 135000
                                }
                            },
                            {
                                label: "Moderate Time Preference",
                                title: "‚öñÔ∏è Hybrid: Smaller House",
                                description: "$50k down on $350k condo, invest other $50k. Mortgage: $1,980/mo",
                                highlights: [
                                    { icon: "‚úÖ", text: "Build equity" },
                                    { icon: "‚úÖ", text: "Keep investments growing" },
                                    { icon: "‚öñÔ∏è", text: "Balanced approach" }
                                ],
                                outcomes: {
                                    immediate: "Condo owner + $50k invested, $1,980/mo mortgage",
                                    year5: "Condo worth $405k, $135k equity. Investments: $78k. Total: $213k",
                                    year10: "Condo worth $470k, $235k equity. Investments: $122k. Total: $357k",
                                    financialValue: 213000
                                }
                            },
                            {
                                label: "Low Time Preference",
                                title: "üìà Invest, Keep Renting",
                                description: "Invest all $100k in diversified portfolio (70/20/10 stocks/bonds/cash). Rent stays at $2,800/mo.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Maximum flexibility" },
                                    { icon: "‚úÖ", text: "Investment growth" },
                                    { icon: "‚ö†Ô∏è", text: "Rent increases over time" }
                                ],
                                outcomes: {
                                    immediate: "$120k invested, continue renting",
                                    year5: "Portfolio: $187k, paid $180k in rent. Net position: +$7k vs buying house, but more liquid",
                                    year10: "Portfolio: $315k, paid $420k in rent. Can now buy house cash in cheaper market or retire earlier. More flexibility than homeowners.",
                                    financialValue: 315000
                                }
                            },
                            {
                                label: "Ultra-Low + Strategic",
                                title: "‚è∞ Wait 2 Years, Save More",
                                description: "Aggressively save $3k/mo, invest everything. Reassess in 2 years.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Larger down payment" },
                                    { icon: "‚ö†Ô∏è", text: "Risk: Home prices increase" },
                                    { icon: "‚úÖ", text: "Benefit: Avoid PMI, lower rates" }
                                ],
                                outcomes: {
                                    immediate: "Continue renting, invest $120k + $3k/mo",
                                    year2: "$193k saved. If house prices up 8%: $540k house, but 35% down = no PMI",
                                    year5: "Bought house year 2. Now have $260k equity. Better position than buying immediately.",
                                    financialValue: 260000
                                }
                            }
                        ],
                        reflection: "Real estate isn't always the 'best investment.' Factor in: opportunity cost, liquidity, transaction costs (6% to sell), mobility, and lifestyle. There's no universal right answer."
                    }
                ],
                'pre-retirement': [
                    {
                        id: 1,
                        title: "Market Crash at Age 58",
                        context: "You're 58 with $1.2M saved for retirement at 65. Market just dropped 25%. Your portfolio is 60/40 stocks/bonds. Do you panic or hold steady?",
                        choices: [
                            {
                                label: "High Time Preference (Fear)",
                                title: "üò± Sell Everything, Go to Cash",
                                description: "Lock in 25% losses to 'protect what's left.' Wait for recovery signal.",
                                highlights: [
                                    { icon: "‚ùå", text: "Lock in losses" },
                                    { icon: "‚ùå", text: "Miss recovery" },
                                    { icon: "‚ö†Ô∏è", text: "Emotional decision" }
                                ],
                                outcomes: {
                                    immediate: "$900k in cash (locked in -$300k loss)",
                                    year2: "Market recovered +40%. You're still in cash: $900k. Others: $1.44M",
                                    year7: "Retired on $900k. Needed to cut spending 30%. Work 3 more years or reduce lifestyle.",
                                    financialValue: 900000,
                                    opportunityCost: 540000
                                }
                            },
                            {
                                label: "Moderate Time Preference",
                                title: "‚öñÔ∏è Shift Conservative",
                                description: "Rebalance to 40/60 stocks/bonds. Reduce risk but stay invested.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Reduce volatility" },
                                    { icon: "‚öñÔ∏è", text: "Still participate in recovery" },
                                    { icon: "‚ö†Ô∏è", text: "May need to work 1-2 more years" }
                                ],
                                outcomes: {
                                    immediate: "Rebalanced: $900k (40/60 allocation)",
                                    year2: "Portfolio recovered to $1.15M (slower than 60/40 but less volatile)",
                                    year7: "Retired on $1.52M. Comfortable retirement, just slightly delayed.",
                                    financialValue: 1150000
                                }
                            },
                            {
                                label: "Low Time Preference",
                                title: "üí™ Stay the Course",
                                description: "Stick with 60/40 allocation. Rebalance annually. Trust the plan.",
                                highlights: [
                                    { icon: "‚úÖ", text: "Historically recovers" },
                                    { icon: "‚úÖ", text: "No emotional decisions" },
                                    { icon: "‚ö†Ô∏è", text: "Must stomach volatility" }
                                ],
                                outcomes: {
                                    immediate: "Portfolio down to $900k. No changes made.",
                                    year2: "Portfolio recovered to $1.26M (18-month recovery like historical average)",
                                    year7: "Retired on schedule with $1.85M. No lifestyle compromise needed.",
                                    financialValue: 1260000
                                }
                            },
                            {
                                label: "Ultra-Low Time Preference",
                                title: "üéØ Buy the Dip",
                                description: "Add $50k emergency cash to stocks. Increase equity allocation to 70/30.",
                                highlights: [
                                    { icon: "‚ö†Ô∏è", text: "High risk" },
                                    { icon: "‚úÖ", text: "Potential for outsized gains" },
                                    { icon: "‚ùå", text: "Could backfire if job loss" }
                                ],
                                outcomes: {
                                    immediate: "$950k invested (70/30 stocks/bonds)",
                                    year2: "Portfolio: $1.48M. High-risk move paid off.",
                                    year7: "Retired early (age 63) with $2.1M. Extra $250k funded travel and giving.",
                                    financialValue: 1480000,
                                    volatility: "Extreme - only for those with pension or other income"
                                }
                            }
                        ],
                        reflection: "Sequence of returns risk is real near retirement. The best defense? Time-tested: don't panic sell, maintain proper asset allocation, have 2-3 years of expenses in cash/bonds."
                    }
                ],
                'young-professional': [
                    {
                        id: 1,
                        title: "$10,000 Bonus Allocation",
                        context: "You're 28, earning $75,000/year. You just received a $10,000 year-end bonus (after taxes). You have $8,000 in savings, no emergency fund worth mentioning, and rent a 1-bedroom apartment. What do you do?",
                        choices: [
                            {
                                label: "High Time Preference",
                                title: "üéä Lifestyle Upgrade",
                                description: "New furniture ($4k), vacation ($4k), new wardrobe ($2k)",
                                highlights: [
                                    { icon: "‚úÖ", text: "Immediate enjoyment" },
                                    { icon: "‚ùå", text: "$0 future value" },
                                    { icon: "‚ö†Ô∏è", text: "Still no emergency fund" }
                                ],
                                outcomes: {
                                    immediate: "Great experiences, nicer apartment",
                                    year5: "$0 remaining value (furniture depreciated)",
                                    year10: "$0 - but memories remain",
                                    year20: "Opportunity cost: $43,200 in lost investment growth",
                                    financialValue: 0,
                                    opportunityCost: 43200
                                }
                            },
                            {
                                label: "Moderate Time Preference",
                                title: "‚öñÔ∏è 50/50 Split",
                                description: "$5k emergency fund (HYSA), $5k diversified investment (60/30/10 stocks/bonds/cash)",
                                highlights: [
                                    { icon: "‚úÖ", text: "Financial security" },
                                    { icon: "‚úÖ", text: "Some growth potential" },
                                    { icon: "‚öñÔ∏è", text: "Balanced approach" }
                                ],
                                outcomes: {
                                    immediate: "Safety net + investment started",
                                    year5: "Emergency fund: $6,250 | Investments: $7,800",
                                    year10: "Emergency fund: $7,900 | Investments: $12,200 = $20,100 total",
                                    year20: "Could be worth $51,500 (emergency fund prevented $8k in debt during job loss)",
                                    financialValue: 20100,
                                    riskReduction: "High"
                                }
                            },
                            {
                                label: "Low Time Preference",
                                title: "üí∞ 80/20 Save/Spend",
                                description: "$2k for immediate wants, $8k invested in diversified portfolio",
                                highlights: [
                                    { icon: "‚úÖ", text: "Some immediate enjoyment" },
                                    { icon: "‚úÖ", text: "Serious wealth building" },
                                    { icon: "‚öñÔ∏è", text: "Delayed most gratification" }
                                ],
                                outcomes: {
                                    immediate: "Small splurge, mostly invested",
                                    year5: "$12,500 (real growth after inflation)",
                                    year10: "$19,500",
                                    year20: "$63,400",
                                    financialValue: 19500,
                                    compoundPower: "Demonstrated"
                                }
                            },
                            {
                                label: "Ultra-Low + High Risk",
                                title: "üöÄ Growth-Focused",
                                description: "$8k in index funds, $2k in Bitcoin",
                                highlights: [
                                    { icon: "‚ö†Ô∏è", text: "High volatility" },
                                    { icon: "‚úÖ", text: "Asymmetric upside" },
                                    { icon: "‚ùå", text: "Could lose Bitcoin portion" }
                                ],
                                outcomes: {
                                    immediate: "No immediate benefit",
                                    year5_best: "$31,000 (if Bitcoin 5x's, stocks 50% up)",
                                    year5_worst: "$10,800 (if Bitcoin -70%, stocks flat)",
                                    year10_best: "$92,000 (if Bitcoin continues growth)",
                                    year10_worst: "$14,200 (if Bitcoin goes to near-zero)",
                                    financialValue: 14200, // Conservative estimate
                                    volatility: "Extreme - can you stomach -50% drops?"
                                }
                            }
                        ],
                        reflection: "You're in your prime earning years. Every dollar you save now has 30+ years to compound. But life is also for living. What's the right balance for you?"
                    }
                ]
                // In production: 50+ scenarios across all profiles
            };

            return allScenarios[profile.age] || allScenarios['young-professional'];
        }

        // ========================================
        // START JOURNEY & RENDER SCENARIOS
        // ========================================

        function startJourney() {
            document.getElementById('profile-selection').style.display = 'none';
            document.getElementById('scenarios-container').style.display = 'block';

            currentScenarioIndex = 0;
            scenarioChoices = [];

            renderScenario(0);
        }

        function renderScenario(index) {
            const scenarios = getScenarios(userProfile);

            if (index >= scenarios.length) {
                showJourneySummary();
                return;
            }

            const scenario = scenarios[index];
            const container = document.getElementById('scenarios-container');

            let choicesHTML = scenario.choices.map((choice, idx) => `
                <div class="choice-card" onclick="selectChoice(${index}, ${idx})">
                    <div class="choice-label">${choice.label}</div>
                    <div class="choice-title">${choice.title}</div>
                    <div class="choice-description">${choice.description}</div>
                    <div class="choice-highlights">
                        ${choice.highlights.map(h => `
                            <div class="choice-highlight">
                                <span class="icon">${h.icon}</span>
                                <span>${h.text}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            container.innerHTML = `
                <div class="card scenario">
                    <div class="scenario-header">
                        <div class="scenario-number">Scenario ${index + 1} of ${scenarios.length}</div>
                        <h3>${scenario.title}</h3>
                    </div>

                    <div class="scenario-context">
                        <p>${scenario.context}</p>
                    </div>

                    <h4 style="color: var(--primary-orange); margin-bottom: 1.5rem;">What do you choose?</h4>
                    <div class="choices-grid">
                        ${choicesHTML}
                    </div>

                    <div class="outcome" id="outcome-${index}"></div>
                </div>
            `;

            container.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function selectChoice(scenarioIndex, choiceIndex) {
            const scenarios = getScenarios(userProfile);
            const scenario = scenarios[scenarioIndex];
            const choice = scenario.choices[choiceIndex];

            // Store choice
            scenarioChoices[scenarioIndex] = {
                choiceIndex,
                choice: choice
            };

            // Highlight selected choice
            const choiceCards = document.querySelectorAll(`#scenarios-container .choice-card`);
            choiceCards.forEach((card, idx) => {
                card.classList.remove('selected');
                if (idx === choiceIndex) {
                    card.classList.add('selected');
                }
            });

            // Show outcome
            const outcomeDiv = document.getElementById(`outcome-${scenarioIndex}`);
            outcomeDiv.innerHTML = generateOutcomeHTML(choice, scenario);
            outcomeDiv.classList.add('show');

            // Show next button
            setTimeout(() => {
                outcomeDiv.innerHTML += `
                    <div class="btn-group">
                        <button class="btn" onclick="nextScenario()">
                            ${scenarioIndex < scenarios.length - 1 ? 'Next Scenario ‚Üí' : 'See My Journey Summary ‚Üí'}
                        </button>
                    </div>
                `;
            }, 500);
        }

        function generateOutcomeHTML(choice, scenario) {
            const outcomes = choice.outcomes;

            let timelineHTML = '';
            if (outcomes.immediate) {
                timelineHTML += `
                    <div class="timeline-item">
                        <div class="timeline-year">Now</div>
                        <div class="timeline-event">${outcomes.immediate}</div>
                        <div class="timeline-value neutral">‚Äî</div>
                    </div>
                `;
            }
            if (outcomes.year5) {
                timelineHTML += `
                    <div class="timeline-item">
                        <div class="timeline-year">5 Years</div>
                        <div class="timeline-event">${outcomes.year5}</div>
                        <div class="timeline-value ${outcomes.financialValue > 0 ? 'positive' : 'neutral'}">
                            ${outcomes.year5_best ? 'Variable' : ''}
                        </div>
                    </div>
                `;
            }
            if (outcomes.year10) {
                timelineHTML += `
                    <div class="timeline-item">
                        <div class="timeline-year">10 Years</div>
                        <div class="timeline-event">${outcomes.year10}</div>
                        <div class="timeline-value ${outcomes.financialValue > 5000 ? 'positive' : 'neutral'}">
                            ${outcomes.financialValue > 0 ? '$' + outcomes.financialValue.toLocaleString() : '‚Äî'}
                        </div>
                    </div>
                `;
            }
            if (outcomes.year20) {
                timelineHTML += `
                    <div class="timeline-item">
                        <div class="timeline-year">20 Years</div>
                        <div class="timeline-event">${outcomes.year20}</div>
                        <div class="timeline-value positive">
                            ${typeof outcomes.financialValue === 'number' && outcomes.financialValue > 10000 ? '$' + (outcomes.financialValue * 2.5).toLocaleString() : '‚Äî'}
                        </div>
                    </div>
                `;
            }

            let reflectionHTML = '';
            if (scenario.reflection) {
                reflectionHTML = `
                    <div class="reflection">
                        <h4>üí≠ Reflect on This</h4>
                        <p class="reflection-question">${scenario.reflection}</p>
                    </div>
                `;
            }

            return `
                <h4>üìà What Happens Next</h4>
                <div class="outcome-timeline">
                    ${timelineHTML}
                </div>

                ${outcomes.opportunityCost ? `
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid var(--error-red); margin: 1.5rem 0;">
                        <strong style="color: var(--error-red);">‚ö†Ô∏è Opportunity Cost:</strong>
                        If you had chosen differently, this could have been worth <strong>$${outcomes.opportunityCost.toLocaleString()}</strong> more.
                    </div>
                ` : ''}

                ${outcomes.volatility === 'Extreme - can you stomach -50% drops?' ? `
                    <div style="background: rgba(255, 193, 7, 0.1); padding: 1.5rem; border-radius: 0.5rem; border-left: 4px solid var(--warning-yellow); margin: 1.5rem 0;">
                        <strong style="color: var(--warning-yellow);">‚ö†Ô∏è High Volatility Warning:</strong>
                        ${outcomes.volatility} This strategy has extreme ups and downs.
                        <br><br>
                        <strong>Best case (5yr):</strong> ${outcomes.year5_best || 'Unknown'}
                        <br>
                        <strong>Worst case (5yr):</strong> ${outcomes.year5_worst || 'Unknown'}
                    </div>
                ` : ''}

                ${reflectionHTML}
            `;
        }

        function nextScenario() {
            currentScenarioIndex++;
            renderScenario(currentScenarioIndex);
        }

        function showJourneySummary() {
            const scenarios = getScenarios(userProfile);
            const container = document.getElementById('scenarios-container');

            let totalLowTimePref = 0;
            let totalFinancialValue = 0;

            scenarioChoices.forEach((sc, idx) => {
                if (sc.choice.label === 'Low Time Preference' || sc.choice.label === 'Ultra-Low Time Preference') {
                    totalLowTimePref++;
                }
                if (sc.choice.outcomes.financialValue) {
                    totalFinancialValue += sc.choice.outcomes.financialValue;
                }
            });

            const lowTimePrefPercentage = (totalLowTimePref / scenarios.length) * 100;

            let assessment, color, message;
            if (lowTimePrefPercentage >= 75) {
                assessment = "üèÜ Ultra-Low Time Preference";
                color = "var(--success-green)";
                message = "You consistently choose long-term wealth over short-term gratification. This mindset compounds into generational wealth.";
            } else if (lowTimePrefPercentage >= 50) {
                assessment = "üí∞ Balanced Time Preference";
                color = "var(--primary-orange)";
                message = "You balance present enjoyment with future planning. This is realistic and sustainable for most people.";
            } else {
                assessment = "üéØ High Time Preference";
                color = "var(--warning-yellow)";
                message = "You favor immediate gratification. While life is for living, developing patience can unlock significant wealth.";
            }

            container.innerHTML = `
                <div class="card">
                    <h2>üéä Your Financial Journey Summary</h2>

                    <div style="text-align: center; padding: 3rem 2rem; background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(212, 175, 55, 0.05)); border-radius: 1rem; margin: 2rem 0;">
                        <h3 style="color: ${color}; font-size: 2.5rem; margin-bottom: 1rem;">${assessment}</h3>
                        <p style="font-size: 1.2rem; color: var(--text-light); max-width: 600px; margin: 0 auto;">
                            ${message}
                        </p>
                    </div>

                    <div class="comparison-table">
                        <h4>üìä Your Decisions</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Scenario</th>
                                    <th>Your Choice</th>
                                    <th>Time Preference</th>
                                    <th>10-Year Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${scenarioChoices.map((sc, idx) => `
                                    <tr>
                                        <td>${scenarios[idx].title}</td>
                                        <td>${sc.choice.title}</td>
                                        <td>
                                            <span style="color: ${
                                                sc.choice.label.includes('Ultra-Low') || sc.choice.label.includes('Low') ? 'var(--success-green)' :
                                                sc.choice.label.includes('Moderate') ? 'var(--warning-yellow)' :
                                                'var(--error-red)'
                                            }">
                                                ${sc.choice.label}
                                            </span>
                                        </td>
                                        <td>
                                            <strong>$${(sc.choice.outcomes.financialValue || 0).toLocaleString()}</strong>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>

                    <div class="reflection">
                        <h4>üéì Key Takeaways</h4>
                        <p class="reflection-question">
                            Time preference isn't about always choosing delayed gratification.
                            It's about understanding trade-offs and making intentional decisions aligned with your goals.
                        </p>
                        <p style="margin-top: 1rem; color: var(--text-dim);">
                            <strong>Remember:</strong> Life experiences matter too. The "best" financial decision isn't always the right life decision.
                            But knowing the opportunity cost helps you make informed choices.
                        </p>
                    </div>

                    <div class="btn-group">
                        <button class="btn" onclick="location.reload()">
                            üîÑ Start Over
                        </button>
                        <button class="btn btn-secondary" onclick="switchToAssetComparison()">
                            üìä Compare Historical Returns
                        </button>
                    </div>
                </div>
            `;

            container.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function switchToAssetComparison() {
            document.querySelector('[data-tab="comparison"]').click();
        }

        // ========================================
        // TAB 2: ASSET COMPARISON
        // ========================================

        function compareAssets() {
            const amount = parseFloat(document.getElementById('compare-amount').value);
            const startYear = parseInt(document.getElementById('compare-start-year').value);
            const endYear = parseInt(document.getElementById('compare-end-year').value);
            const taxRate = parseFloat(document.getElementById('tax-bracket').value) / 100;

            if (endYear <= startYear) {
                alert('End year must be after start year!');
                return;
            }

            const years = endYear - startYear;

            // Calculate returns for each asset
            const results = {
                stocks: calculateAssetReturn('stocks', amount, startYear, endYear, taxRate, 0.0003),
                bonds: calculateAssetReturn('bonds', amount, startYear, endYear, taxRate, 0.0003),
                realEstate: calculateAssetReturn('realEstate', amount, startYear, endYear, taxRate, 0.06), // 6% selling fee
                gold: calculateAssetReturn('gold', amount, startYear, endYear, taxRate, 0.01),
                bitcoin: calculateAssetReturn('bitcoin', amount, startYear, endYear, taxRate, 0.002),
                cash: { nominal: amount, afterTax: amount, afterFees: amount, realValue: calculateInflationAdjusted(amount, startYear, endYear), volatility: 0, maxDrawdown: 0 }
            };

            displayAssetResults(results, amount, years);
        }

        function calculateAssetReturn(asset, principal, startYear, endYear, taxRate, feeRate) {
            let value = principal;
            let maxValue = principal;
            let minValue = principal;
            let returns = [];

            for (let year = startYear; year <= endYear; year++) {
                const yearData = assetData[year];
                if (!yearData || yearData[asset] === null) {
                    continue; // Skip if data not available
                }

                const returnRate = yearData[asset] / 100;
                value *= (1 + returnRate);
                returns.push(returnRate);

                if (value > maxValue) maxValue = value;
                if (value < minValue) minValue = value;
            }

            const nominal = value;
            const gain = nominal - principal;
            const afterTax = principal + (gain * (1 - taxRate));
            const afterFees = afterTax * (1 - feeRate);
            const realValue = calculateInflationAdjusted(afterFees, startYear, endYear);

            const volatility = calculateVolatility(returns);
            const maxDrawdown = ((maxValue - minValue) / maxValue) * 100;

            return {
                nominal: nominal,
                afterTax: afterTax,
                afterFees: afterFees,
                realValue: realValue,
                volatility: volatility,
                maxDrawdown: maxDrawdown,
                percentReturn: ((afterFees - principal) / principal) * 100
            };
        }

        function calculateInflationAdjusted(value, startYear, endYear) {
            let inflationMultiplier = 1;
            for (let year = startYear; year <= endYear; year++) {
                if (assetData[year]) {
                    inflationMultiplier *= (1 + assetData[year].inflation / 100);
                }
            }
            return value / inflationMultiplier;
        }

        function calculateVolatility(returns) {
            if (returns.length === 0) return 0;
            const mean = returns.reduce((a, b) => a + b, 0) / returns.length;
            const variance = returns.reduce((sum, r) => sum + Math.pow(r - mean, 2), 0) / returns.length;
            return Math.sqrt(variance) * 100;
        }

        function displayAssetResults(results, principal, years) {
            const resultsContainer = document.querySelector('#comparison .asset-results');

            const assetConfigs = [
                { key: 'stocks', name: 'S&P 500', icon: 'üìà', class: 'stocks' },
                { key: 'bonds', name: '10-Year Bonds', icon: 'üèõÔ∏è', class: 'bonds' },
                { key: 'realEstate', name: 'Real Estate', icon: 'üè†', class: 'real-estate' },
                { key: 'gold', name: 'Gold', icon: 'ü•á', class: 'gold' },
                { key: 'bitcoin', name: 'Bitcoin', icon: '‚Çø', class: 'bitcoin' },
                { key: 'cash', name: 'Cash', icon: 'üíµ', class: 'cash' }
            ];

            resultsContainer.innerHTML = assetConfigs.map(config => {
                const result = results[config.key];
                const percentReturn = ((result.afterFees - principal) / principal) * 100;

                return `
                    <div class="asset-result-card ${config.class}">
                        <div class="asset-icon">${config.icon}</div>
                        <div class="asset-name">${config.name}</div>
                        <div class="asset-value" style="color: ${result.afterFees > principal ? 'var(--success-green)' : 'var(--error-red)'}">
                            $${result.afterFees.toLocaleString(undefined, { maximumFractionDigits: 0 })}
                        </div>
                        <div class="asset-return" style="color: ${percentReturn > 0 ? 'var(--success-green)' : 'var(--error-red)'}">
                            ${percentReturn > 0 ? '+' : ''}${percentReturn.toFixed(1)}%
                        </div>

                        <div class="asset-metrics">
                            <div class="asset-metric">
                                <span class="asset-metric-label">Real Value (inflation-adj):</span>
                                <span class="asset-metric-value">$${result.realValue.toLocaleString(undefined, { maximumFractionDigits: 0 })}</span>
                            </div>
                            <div class="asset-metric">
                                <span class="asset-metric-label">Volatility:</span>
                                <span class="asset-metric-value">${result.volatility.toFixed(1)}%</span>
                            </div>
                            <div class="asset-metric">
                                <span class="asset-metric-label">Max Drawdown:</span>
                                <span class="asset-metric-value" style="color: var(--error-red)">-${result.maxDrawdown.toFixed(1)}%</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Show detailed comparison
            document.getElementById('comparison-details').innerHTML = `
                <h4>üìä Detailed Comparison</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Asset</th>
                            <th>Nominal Value</th>
                            <th>After Taxes</th>
                            <th>After Fees</th>
                            <th>Real Value</th>
                            <th>Volatility</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${assetConfigs.map(config => {
                            const r = results[config.key];
                            return `
                                <tr>
                                    <td><strong>${config.name}</strong></td>
                                    <td>$${r.nominal.toLocaleString(undefined, { maximumFractionDigits: 0 })}</td>
                                    <td>$${r.afterTax.toLocaleString(undefined, { maximumFractionDigits: 0 })}</td>
                                    <td>$${r.afterFees.toLocaleString(undefined, { maximumFractionDigits: 0 })}</td>
                                    <td><strong>$${r.realValue.toLocaleString(undefined, { maximumFractionDigits: 0 })}</strong></td>
                                    <td>${r.volatility.toFixed(1)}%</td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>

                <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border-radius: 0.5rem; border-left: 4px solid var(--primary-orange);">
                    <h4 style="color: var(--primary-orange); margin-bottom: 1rem;">üí° Key Insights</h4>
                    <p style="color: var(--text-light); line-height: 1.8;">
                        <strong>Taxes matter:</strong> Long-term capital gains (15-20%) save significantly vs ordinary income (up to 37%).
                        <br><br>
                        <strong>Fees compound negatively:</strong> Real estate's 6% selling fee can erase years of gains.
                        <br><br>
                        <strong>Volatility = opportunity cost:</strong> Bitcoin's extreme swings mean you need nerves of steel - most people panic sell during crashes.
                        <br><br>
                        <strong>Diversification reduces risk:</strong> A 60/30/10 stocks/bonds/cash portfolio would have smoothed returns significantly.
                    </p>
                </div>
            `;

            document.getElementById('asset-comparison-results').style.display = 'block';
            document.getElementById('asset-comparison-results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ========================================
        // TAB 3: RISK SIMULATOR
        // ========================================

        function simulateEvent(eventType) {
            const savings = parseFloat(document.getElementById('sim-savings').value);
            const monthlyExpenses = parseFloat(document.getElementById('sim-expenses').value);
            const allocation = document.getElementById('sim-allocation').value;

            let result = {};

            switch(eventType) {
                case 'job-loss':
                    result = simulateJobLoss(savings, monthlyExpenses, allocation);
                    break;
                case 'medical':
                    result = simulateMedicalEmergency(savings, allocation);
                    break;
                case 'market-crash':
                    result = simulateMarketCrash(savings, allocation);
                    break;
                case 'opportunity':
                    result = simulateOpportunity(savings, allocation);
                    break;
            }

            displaySimulationResult(result);
        }

        function simulateJobLoss(savings, monthlyExpenses, allocation) {
            const monthsUnemployed = 6;
            const totalNeeded = monthlyExpenses * monthsUnemployed;

            let portfolioBreakdown = getPortfolioBreakdown(savings, allocation);
            let emergencyFund = portfolioBreakdown.cash;

            let outcome, severity, message;

            if (emergencyFund >= totalNeeded) {
                outcome = "‚úÖ Survived Without Selling Investments";
                severity = "success";
                message = `Your $${emergencyFund.toLocaleString()} emergency fund covered all $${totalNeeded.toLocaleString()} in expenses. Your investments continued growing during this period.`;
            } else if (emergencyFund + (portfolioBreakdown.bonds * 0.95) >= totalNeeded) {
                outcome = "‚ö†Ô∏è Had to Sell Bonds";
                severity = "warning";
                const bondsNeeded = totalNeeded - emergencyFund;
                message = `Emergency fund covered $${emergencyFund.toLocaleString()}. You sold $${bondsNeeded.toLocaleString()} in bonds (losing 5% to taxes/fees). Lost future growth but avoided debt.`;
            } else {
                outcome = "‚ùå Forced to Sell Stocks at Loss";
                severity = "danger";
                const stocksNeeded = totalNeeded - emergencyFund - portfolioBreakdown.bonds;
                message = `You ran out of cash and bonds. Forced to sell $${stocksNeeded.toLocaleString()} in stocks during market downturn, locking in 20% losses. Total damage: $${(stocksNeeded * 0.2).toLocaleString()} + lost future growth.`;
            }

            return {
                title: "üò∞ Job Loss Simulation",
                outcome,
                severity,
                message,
                breakdown: portfolioBreakdown,
                recommendation: emergencyFund < monthlyExpenses * 6 ? "Build a 6-month emergency fund in cash before aggressive investing." : "Well done! Your emergency fund provided crucial flexibility."
            };
        }

        function simulateMedicalEmergency(savings, allocation) {
            const emergencyCost = 15000;
            let portfolioBreakdown = getPortfolioBreakdown(savings, allocation);

            let outcome, severity, message;

            if (portfolioBreakdown.cash >= emergencyCost) {
                outcome = "‚úÖ Paid From Emergency Fund";
                severity = "success";
                message = "Covered entirely from cash reserves. No investment sales needed.";
            } else if (portfolioBreakdown.cash + portfolioBreakdown.bonds >= emergencyCost) {
                outcome = "‚ö†Ô∏è Sold Some Bonds";
                severity = "warning";
                message = `Used $${portfolioBreakdown.cash.toLocaleString()} cash + $${(emergencyCost - portfolioBreakdown.cash).toLocaleString()} in bonds. Paid $${((emergencyCost - portfolioBreakdown.cash) * 0.15).toLocaleString()} in taxes.`;
            } else {
                outcome = "‚ùå Took on Debt";
                severity = "danger";
                const debtNeeded = emergencyCost - portfolioBreakdown.cash - portfolioBreakdown.bonds;
                message = `Insufficient liquid assets. Took on $${debtNeeded.toLocaleString()} in medical debt at 18% APR. Will cost $${(debtNeeded * 1.4).toLocaleString()} to pay off over 2 years.`;
            }

            return {
                title: "üè• Medical Emergency Simulation",
                outcome,
                severity,
                message,
                breakdown: portfolioBreakdown,
                recommendation: "Consider HSA (Health Savings Account) for tax-advantaged medical savings."
            };
        }

        function simulateMarketCrash(savings, allocation) {
            let portfolioBreakdown = getPortfolioBreakdown(savings, allocation);

            const stocksLoss = portfolioBreakdown.stocks * 0.4; // 40% crash
            const bondsLoss = portfolioBreakdown.bonds * 0.1; // 10% bonds drop
            const bitcoinLoss = portfolioBreakdown.bitcoin ? portfolioBreakdown.bitcoin * 0.7 : 0; // 70% Bitcoin crash

            const totalLoss = stocksLoss + bondsLoss + bitcoinLoss;
            const newTotal = savings - totalLoss;
            const percentLoss = (totalLoss / savings) * 100;

            let outcome, severity, message;

            if (percentLoss < 20) {
                outcome = "‚úÖ Conservative Portfolio Held Strong";
                severity = "success";
                message = "Your conservative allocation limited losses to " + percentLoss.toFixed(1) + "%. Recovery will be faster.";
            } else if (percentLoss < 35) {
                outcome = "‚ö†Ô∏è Moderate Losses";
                severity = "warning";
                message = "Lost " + percentLoss.toFixed(1) + "% ($" + totalLoss.toLocaleString() + "). Historically recovers in 18-24 months if you hold.";
            } else {
                outcome = "‚ùå Severe Portfolio Damage";
                severity = "danger";
                message = "Lost " + percentLoss.toFixed(1) + "% ($" + totalLoss.toLocaleString() + "). Can you emotionally handle seeing this drop? Many panic sell here and lock in losses.";
            }

            return {
                title: "üìâ Market Crash Simulation (2008-Style)",
                outcome,
                severity,
                message,
                breakdown: {
                    before: savings,
                    after: newTotal,
                    loss: totalLoss
                },
                recommendation: percentLoss > 30 ? "Consider rebalancing to more conservative allocation if this would cause panic." : "This allocation matches your risk tolerance."
            };
        }

        function simulateOpportunity(savings, allocation) {
            const opportunityNeed = 30000;
            let portfolioBreakdown = getPortfolioBreakdown(savings, allocation);

            const liquidAssets = portfolioBreakdown.cash + portfolioBreakdown.bonds;

            let outcome, severity, message;

            if (liquidAssets >= opportunityNeed) {
                outcome = "‚úÖ Seized the Opportunity";
                severity = "success";
                message = `You have $${liquidAssets.toLocaleString()} in liquid assets. Can invest $30k without touching growth investments.`;
            } else if (savings >= opportunityNeed) {
                outcome = "‚ö†Ô∏è Had to Sell Investments";
                severity = "warning";
                const needToSell = opportunityNeed - liquidAssets;
                message = `Only $${liquidAssets.toLocaleString()} liquid. Must sell $${needToSell.toLocaleString()} in stocks, paying taxes and potentially selling at a loss. True cost: ~$${(needToSell * 1.15).toLocaleString()}.`;
            } else {
                outcome = "‚ùå Opportunity Missed";
                severity = "danger";
                message = `Insufficient assets. Your $${savings.toLocaleString()} portfolio can't free up $30k without liquidating everything. Opportunity missed.`;
            }

            return {
                title: "üéØ Investment Opportunity Simulation",
                outcome,
                severity,
                message,
                breakdown: portfolioBreakdown,
                recommendation: "Balance growth investing with liquidity for opportunities. Some cash is optionality."
            };
        }

        function getPortfolioBreakdown(total, allocation) {
            switch(allocation) {
                case 'conservative':
                    return {
                        stocks: total * 0.20,
                        bonds: total * 0.70,
                        cash: total * 0.10,
                        bitcoin: 0
                    };
                case 'moderate':
                    return {
                        stocks: total * 0.60,
                        bonds: total * 0.30,
                        cash: total * 0.10,
                        bitcoin: 0
                    };
                case 'aggressive':
                    return {
                        stocks: total * 0.80,
                        bonds: total * 0.15,
                        cash: total * 0.05,
                        bitcoin: 0
                    };
                case 'bitcoin-heavy':
                    return {
                        stocks: total * 0.40,
                        bonds: total * 0.20,
                        cash: total * 0.20,
                        bitcoin: total * 0.20
                    };
            }
        }

        function displaySimulationResult(result) {
            const container = document.getElementById('simulation-results');

            const severityColors = {
                success: 'var(--success-green)',
                warning: 'var(--warning-yellow)',
                danger: 'var(--error-red)'
            };

            container.innerHTML = `
                <div style="background: rgba(0, 0, 0, 0.3); padding: 2.5rem; border-radius: 1rem; margin-top: 2rem; border-left: 4px solid ${severityColors[result.severity]};">
                    <h3 style="color: ${severityColors[result.severity]}; margin-bottom: 1.5rem;">${result.title}</h3>
                    <h4 style="font-size: 1.8rem; margin-bottom: 1rem;">${result.outcome}</h4>
                    <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-light); margin-bottom: 2rem;">
                        ${result.message}
                    </p>

                    ${result.breakdown && result.breakdown.stocks !== undefined ? `
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 0.5rem; margin: 1.5rem 0;">
                            <h4 style="color: var(--primary-orange); margin-bottom: 1rem;">Portfolio Breakdown</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div>Stocks: $${result.breakdown.stocks.toLocaleString()}</div>
                                <div>Bonds: $${result.breakdown.bonds.toLocaleString()}</div>
                                <div>Cash: $${result.breakdown.cash.toLocaleString()}</div>
                                ${result.breakdown.bitcoin ? `<div>Bitcoin: $${result.breakdown.bitcoin.toLocaleString()}</div>` : ''}
                            </div>
                        </div>
                    ` : ''}

                    <div class="reflection">
                        <h4>üí° Recommendation</h4>
                        <p class="reflection-question">${result.recommendation}</p>
                    </div>
                </div>
            `;

            container.style.display = 'block';
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>


    <!-- Navigation Context (return-to-path functionality) -->
    <script src="/js/navigation-context.js"></script>
    <!-- Reflect: Socratic questions after activity -->
    <div style="max-width:900px;margin:2rem auto 0;padding:0 1.5rem 2.5rem">
        <div class="reflect-widget"
             data-topic="money"
             data-path="principled"
             data-title="Reflect: Do you value now or the future more?">
        </div>
    </div>
    <script src="/js/reflect-widget.js"></script>

<script src="/js/membership-gate.js"></script>

<!-- Analytics, Email Capture & Tip CTAs -->
<div class="container" style="margin: 2rem auto; max-width: 900px; padding: 0 1.5rem;">
    <div id="email-capture-page" data-email-capture="page-footer" data-title="üì¨ Stay Updated" data-subtitle="Get Bitcoin insights and new content announcements. No spam, ever."></div>
    <div id="tip-page" data-tip-cta="compact"></div>
</div>
<script src="/js/analytics.js"></script>
<script src="/js/email-capture.js"></script>
<script src="/js/tip-cta.js"></script>

</body></html>