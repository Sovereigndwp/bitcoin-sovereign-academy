<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Functionality Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; background: #1a1a1a; color: #e0e0e0; }
        .test-section { background: #2d2d2d; padding: 2rem; margin: 1rem 0; border-radius: 10px; }
        .test-result { padding: 0.5rem; margin: 0.5rem 0; border-radius: 5px; }
        .pass { background: #4caf50; color: white; }
        .fail { background: #f44336; color: white; }
        .info { background: #2196f3; color: white; }
        .test-button { background: #f7931a; color: white; padding: 1rem; border: none; border-radius: 5px; cursor: pointer; margin: 0.5rem; }
    </style>
</head>
<body>
    <h1>üîß Bitcoin Sovereign Academy - Functionality Test</h1>
    
    <div class="test-section">
        <h2>1. Wallet Workshop - Seed Generation Test</h2>
        <button class="test-button" onclick="testWalletWorkshopSeed()">Test Seed Generation</button>
        <div id="walletTestResult"></div>
    </div>

    <div class="test-section">
        <h2>2. Transaction Builder - UTXO Selection Test</h2>
        <button class="test-button" onclick="testTransactionBuilder()">Test Transaction Builder</button>
        <div id="transactionTestResult"></div>
    </div>

    <div class="test-section">
        <h2>3. Mining Simulator - Mining Controls Test</h2>
        <button class="test-button" onclick="testMiningSimulator()">Test Mining Simulator</button>
        <div id="miningTestResult"></div>
    </div>

    <div class="test-section">
        <h2>4. Consensus Game - Scenario Selection Test</h2>
        <button class="test-button" onclick="testConsensusGame()">Test Consensus Game</button>
        <div id="consensusTestResult"></div>
    </div>

    <div class="test-section">
        <h2>5. SOVEREIGN Journey Game - Game Initialization Test</h2>
        <button class="test-button" onclick="testSovereignGame()">Test SOVEREIGN Game</button>
        <div id="sovereignTestResult"></div>
    </div>

    <script>
        async function testWalletWorkshopSeed() {
            const resultDiv = document.getElementById('walletTestResult');
            resultDiv.innerHTML = '<div class="test-result info">Testing Wallet Workshop seed generation...</div>';
            
            try {
                // Load the wallet workshop page
                const response = await fetch('/interactive-demos/wallet-workshop/');
                const html = await response.text();
                
                // Check if generateSeedPhrase function exists
                const hasFunction = html.includes('function generateSeedPhrase()');
                const hasButton = html.includes('onclick="generateSeedPhrase()"');
                const hasBIP39Words = html.includes('const bip39Words = [');
                
                let results = [];
                
                if (hasFunction) {
                    results.push('<div class="test-result pass">‚úÖ generateSeedPhrase() function found</div>');
                } else {
                    results.push('<div class="test-result fail">‚ùå generateSeedPhrase() function NOT found</div>');
                }
                
                if (hasButton) {
                    results.push('<div class="test-result pass">‚úÖ Button with onclick handler found</div>');
                } else {
                    results.push('<div class="test-result fail">‚ùå Button onclick handler NOT found</div>');
                }
                
                if (hasBIP39Words) {
                    results.push('<div class="test-result pass">‚úÖ BIP39 word list found</div>');
                } else {
                    results.push('<div class="test-result fail">‚ùå BIP39 word list NOT found</div>');
                }
                
                // Check if seed words container exists
                const hasSeedContainer = html.includes('id="seedWords"');
                if (hasSeedContainer) {
                    results.push('<div class="test-result pass">‚úÖ Seed words container found</div>');
                } else {
                    results.push('<div class="test-result fail">‚ùå Seed words container NOT found</div>');
                }
                
                resultDiv.innerHTML = results.join('');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result fail">‚ùå Test failed: ${error.message}</div>`;
            }
        }

        async function testTransactionBuilder() {
            const resultDiv = document.getElementById('transactionTestResult');
            resultDiv.innerHTML = '<div class="test-result info">Testing Transaction Builder functionality...</div>';
            
            try {
                const response = await fetch('/interactive-demos/transaction-builder/');
                const html = await response.text();
                
                let results = [];
                
                // Check key functions
                const hasSelectUTXO = html.includes('function selectUTXO(');
                const hasBuildTransaction = html.includes('function buildTransaction()');
                const hasUpdatePreview = html.includes('function updateTransactionPreview()');
                const hasAddOutput = html.includes('function addOutput()');
                
                results.push(hasSelectUTXO ? 
                    '<div class="test-result pass">‚úÖ selectUTXO() function found</div>' : 
                    '<div class="test-result fail">‚ùå selectUTXO() function NOT found</div>');
                    
                results.push(hasBuildTransaction ? 
                    '<div class="test-result pass">‚úÖ buildTransaction() function found</div>' : 
                    '<div class="test-result fail">‚ùå buildTransaction() function NOT found</div>');
                    
                results.push(hasUpdatePreview ? 
                    '<div class="test-result pass">‚úÖ updateTransactionPreview() function found</div>' : 
                    '<div class="test-result fail">‚ùå updateTransactionPreview() function NOT found</div>');
                    
                results.push(hasAddOutput ? 
                    '<div class="test-result pass">‚úÖ addOutput() function found</div>' : 
                    '<div class="test-result fail">‚ùå addOutput() function NOT found</div>');
                
                resultDiv.innerHTML = results.join('');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result fail">‚ùå Test failed: ${error.message}</div>`;
            }
        }

        async function testMiningSimulator() {
            const resultDiv = document.getElementById('miningTestResult');
            resultDiv.innerHTML = '<div class="test-result info">Testing Mining Simulator functionality...</div>';
            
            try {
                const response = await fetch('/interactive-demos/mining-simulator/');
                const html = await response.text();
                
                let results = [];
                
                const hasStartMining = html.includes('function startMining()');
                const hasStopMining = html.includes('function stopMining()');
                const hasUpdateHashrate = html.includes('function updateHashrateSlider()');
                const hasFindBlock = html.includes('function findBlock()');
                
                results.push(hasStartMining ? 
                    '<div class="test-result pass">‚úÖ startMining() function found</div>' : 
                    '<div class="test-result fail">‚ùå startMining() function NOT found</div>');
                    
                results.push(hasStopMining ? 
                    '<div class="test-result pass">‚úÖ stopMining() function found</div>' : 
                    '<div class="test-result fail">‚ùå stopMining() function NOT found</div>');
                    
                results.push(hasUpdateHashrate ? 
                    '<div class="test-result pass">‚úÖ updateHashrateSlider() function found</div>' : 
                    '<div class="test-result fail">‚ùå updateHashrateSlider() function NOT found</div>');
                    
                results.push(hasFindBlock ? 
                    '<div class="test-result pass">‚úÖ findBlock() function found</div>' : 
                    '<div class="test-result fail">‚ùå findBlock() function NOT found</div>');
                
                resultDiv.innerHTML = results.join('');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result fail">‚ùå Test failed: ${error.message}</div>`;
            }
        }

        async function testConsensusGame() {
            const resultDiv = document.getElementById('consensusTestResult');
            resultDiv.innerHTML = '<div class="test-result info">Testing Consensus Game functionality...</div>';
            
            try {
                const response = await fetch('/interactive-demos/consensus-game/');
                const html = await response.text();
                
                let results = [];
                
                const hasSetScenario = html.includes('function setScenario(');
                const hasStartSimulation = html.includes('function startSimulation()');
                const hasUpdateNetwork = html.includes('function updateNetworkDisplay()');
                const hasResetNetwork = html.includes('function resetNetwork()');
                
                results.push(hasSetScenario ? 
                    '<div class="test-result pass">‚úÖ setScenario() function found</div>' : 
                    '<div class="test-result fail">‚ùå setScenario() function NOT found</div>');
                    
                results.push(hasStartSimulation ? 
                    '<div class="test-result pass">‚úÖ startSimulation() function found</div>' : 
                    '<div class="test-result fail">‚ùå startSimulation() function NOT found</div>');
                    
                results.push(hasUpdateNetwork ? 
                    '<div class="test-result pass">‚úÖ updateNetworkDisplay() function found</div>' : 
                    '<div class="test-result fail">‚ùå updateNetworkDisplay() function NOT found</div>');
                    
                results.push(hasResetNetwork ? 
                    '<div class="test-result pass">‚úÖ resetNetwork() function found</div>' : 
                    '<div class="test-result fail">‚ùå resetNetwork() function NOT found</div>');
                
                resultDiv.innerHTML = results.join('');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result fail">‚ùå Test failed: ${error.message}</div>`;
            }
        }

        async function testSovereignGame() {
            const resultDiv = document.getElementById('sovereignTestResult');
            resultDiv.innerHTML = '<div class="test-result info">Testing SOVEREIGN Game functionality...</div>';
            
            try {
                const response = await fetch('/interactive-demos/bitcoin-sovereign-game/');
                const html = await response.text();
                
                let results = [];
                
                const hasGameClass = html.includes('BitcoinSovereignGame') || html.includes('window.BitcoinSovereignGame');
                const hasGameScript = html.includes('bitcoin-sovereign-game.js');
                const hasPlayerInput = html.includes('playerNameInput');
                const hasStartButton = html.includes('startGameBtn');
                
                results.push(hasGameClass ? 
                    '<div class="test-result pass">‚úÖ BitcoinSovereignGame class found</div>' : 
                    '<div class="test-result fail">‚ùå BitcoinSovereignGame class NOT found</div>');
                    
                results.push(hasGameScript ? 
                    '<div class="test-result pass">‚úÖ Game script file reference found</div>' : 
                    '<div class="test-result fail">‚ùå Game script file reference NOT found</div>');
                    
                results.push(hasPlayerInput ? 
                    '<div class="test-result pass">‚úÖ Player name input found</div>' : 
                    '<div class="test-result fail">‚ùå Player name input NOT found</div>');
                    
                results.push(hasStartButton ? 
                    '<div class="test-result pass">‚úÖ Start game button found</div>' : 
                    '<div class="test-result fail">‚ùå Start game button NOT found</div>');
                
                resultDiv.innerHTML = results.join('');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result fail">‚ùå Test failed: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>