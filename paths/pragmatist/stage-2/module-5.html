<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Blockchain | The Pragmatist Path</title>

    <!-- Theme Styles -->
    <link rel="stylesheet" href="/css/pragmatist-theme.css">
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
</head>
<body>
    <!-- Module Header -->
    <div class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/paths/pragmatist/">‚Üê Back to Pragmatist Path</a> / Stage 2 / Module 5
            </div>
            <div class="module-title">
                <h1>üîó The Blockchain</h1>
                <div class="module-meta">
                    <span>‚è±Ô∏è 25 minutes</span>
                    <span>üìä Difficulty: Intermediate</span>
                    <span>üéØ 20 Knowledge Points</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Introduction -->
        <div class="content-section">
            <h2>What is the Blockchain?</h2>
            <p>The blockchain is Bitcoin's ledger - an unchangeable record of every Bitcoin transaction ever made. But it's more than just a database:</p>

            <div class="highlight-box">
                <p><strong>üîó Three Key Properties:</strong></p>
                <ul style="margin-left: 2rem; color: var(--text-light);">
                    <li><strong>Distributed:</strong> Thousands of copies exist worldwide</li>
                    <li><strong>Immutable:</strong> Past records cannot be changed</li>
                    <li><strong>Transparent:</strong> Everyone can verify every transaction</li>
                </ul>
            </div>

            <p>Think of it as a chain of blocks, where each block contains:</p>
            <ul style="margin-left: 2rem; color: var(--text-light);">
                <li>üì¶ A batch of transactions</li>
                <li>üîó A link to the previous block</li>
                <li>‚è∞ A timestamp</li>
                <li>üéØ Proof of Work (the mining hash)</li>
            </ul>
        </div>

        <!-- Visual Chain -->
        <div class="content-section">
            <h2>Visualizing the Chain</h2>
            <p>Here's how blocks link together to form an unbreakable chain:</p>

            <div style="margin: 2rem 0; overflow-x: auto;">
                <div style="display: flex; align-items: center; gap: 1rem; min-width: 800px;">
                    <!-- Block 1 -->
                    <div style="flex: 1; background: linear-gradient(135deg, rgba(255, 140, 0, 0.2), rgba(255, 215, 0, 0.2)); border: 3px solid var(--bright-orange); border-radius: 1rem; padding: 1.5rem; position: relative;">
                        <div style="position: absolute; top: -15px; left: 10px; background: var(--bright-orange); color: var(--black); padding: 0.25rem 0.75rem; border-radius: 0.5rem; font-weight: bold;">Block N-2</div>
                        <div style="margin-top: 1rem;">
                            <div style="font-size: 0.8rem; color: var(--text-gray); margin-bottom: 0.5rem;">Hash:</div>
                            <div style="font-family: monospace; font-size: 0.7rem; color: var(--status-green);">0000a1b2...</div>
                        </div>
                        <div style="margin-top: 0.5rem;">
                            <div style="font-size: 0.8rem; color: var(--text-gray);">Transactions: 2,847</div>
                        </div>
                    </div>

                    <!-- Arrow -->
                    <div style="font-size: 2rem; color: var(--bright-yellow);">‚Üí</div>

                    <!-- Block 2 -->
                    <div style="flex: 1; background: linear-gradient(135deg, rgba(255, 140, 0, 0.2), rgba(255, 215, 0, 0.2)); border: 3px solid var(--bright-yellow); border-radius: 1rem; padding: 1.5rem; position: relative;">
                        <div style="position: absolute; top: -15px; left: 10px; background: var(--bright-yellow); color: var(--black); padding: 0.25rem 0.75rem; border-radius: 0.5rem; font-weight: bold;">Block N-1</div>
                        <div style="margin-top: 1rem;">
                            <div style="font-size: 0.8rem; color: var(--text-gray); margin-bottom: 0.5rem;">Previous Hash:</div>
                            <div style="font-family: monospace; font-size: 0.7rem; color: var(--status-orange);">0000a1b2...</div>
                            <div style="font-size: 0.8rem; color: var(--text-gray); margin-top: 0.5rem; margin-bottom: 0.5rem;">Hash:</div>
                            <div style="font-family: monospace; font-size: 0.7rem; color: var(--status-green);">0000c3d4...</div>
                        </div>
                        <div style="margin-top: 0.5rem;">
                            <div style="font-size: 0.8rem; color: var(--text-gray);">Transactions: 3,124</div>
                        </div>
                    </div>

                    <!-- Arrow -->
                    <div style="font-size: 2rem; color: var(--bright-yellow);">‚Üí</div>

                    <!-- Block 3 (Latest) -->
                    <div style="flex: 1; background: linear-gradient(135deg, rgba(255, 140, 0, 0.3), rgba(255, 215, 0, 0.3)); border: 3px solid var(--status-green); border-radius: 1rem; padding: 1.5rem; position: relative; box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);">
                        <div style="position: absolute; top: -15px; left: 10px; background: var(--status-green); color: var(--black); padding: 0.25rem 0.75rem; border-radius: 0.5rem; font-weight: bold;">Block N (Latest)</div>
                        <div style="margin-top: 1rem;">
                            <div style="font-size: 0.8rem; color: var(--text-gray); margin-bottom: 0.5rem;">Previous Hash:</div>
                            <div style="font-family: monospace; font-size: 0.7rem; color: var(--status-orange);">0000c3d4...</div>
                            <div style="font-size: 0.8rem; color: var(--text-gray); margin-top: 0.5rem; margin-bottom: 0.5rem;">Hash:</div>
                            <div style="font-family: monospace; font-size: 0.7rem; color: var(--status-green);">0000e5f6...</div>
                        </div>
                        <div style="margin-top: 0.5rem;">
                            <div style="font-size: 0.8rem; color: var(--text-gray);">Transactions: 2,956</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="highlight-box success">
                <p><strong>üîó The Chain Effect:</strong> Each block references the hash of the previous block. Change one bit in an old block, and its hash changes. That breaks the link to the next block, invalidating the entire chain from that point forward.</p>
            </div>
        </div>

        <!-- Block Anatomy -->
        <div class="content-section">
            <h2>üì¶ Inside a Block</h2>
            <p>Every Bitcoin block contains specific data:</p>

            <div style="margin: 2rem 0; background: var(--medium-gray); border: 2px solid var(--bright-orange); border-radius: 1rem; padding: 2rem;">
                <h3 style="text-align: center; color: var(--bright-yellow); margin-bottom: 2rem;">Block Structure</h3>

                <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(255, 140, 0, 0.1); border-left: 4px solid var(--bright-orange); border-radius: 0.5rem;">
                    <strong style="color: var(--bright-orange); font-size: 1.1rem;">1. Block Header</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; color: var(--text-light);">
                        <li><strong>Version:</strong> Block version number</li>
                        <li><strong>Previous Block Hash:</strong> Links to parent block</li>
                        <li><strong>Merkle Root:</strong> Summary of all transactions</li>
                        <li><strong>Timestamp:</strong> When block was mined</li>
                        <li><strong>Difficulty Target:</strong> Mining difficulty</li>
                        <li><strong>Nonce:</strong> The "lucky number" miners found</li>
                    </ul>
                </div>

                <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(255, 215, 0, 0.1); border-left: 4px solid var(--bright-yellow); border-radius: 0.5rem;">
                    <strong style="color: var(--bright-yellow); font-size: 1.1rem;">2. Transaction List</strong>
                    <ul style="margin: 0.5rem 0 0 1.5rem; color: var(--text-light);">
                        <li><strong>Coinbase Transaction:</strong> Miner's reward (always first)</li>
                        <li><strong>User Transactions:</strong> 2,000-4,000 transactions</li>
                        <li><strong>Total Size:</strong> Up to 4MB per block</li>
                    </ul>
                </div>

                <div style="padding: 1rem; background: rgba(0, 255, 0, 0.1); border-left: 4px solid var(--status-green); border-radius: 0.5rem;">
                    <strong style="color: var(--status-green); font-size: 1.1rem;">3. Proof of Work</strong>
                    <p style="margin: 0.5rem 0 0; color: var(--text-light);">The block hash that starts with enough zeros to meet the difficulty target, proving computational work was done.</p>
                </div>
            </div>
        </div>

        <!-- Immutability -->
        <div class="content-section">
            <h2>üîí Why the Blockchain is Immutable</h2>
            <p>Changing historical blockchain data is practically impossible due to three factors:</p>

            <div style="margin: 2rem 0;">
                <div style="margin-bottom: 2rem; padding: 1.5rem; background: var(--medium-gray); border-radius: 0.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <span style="font-size: 2.5rem;">üîó</span>
                        <strong style="color: var(--bright-orange); font-size: 1.3rem;">1. Cryptographic Linking</strong>
                    </div>
                    <p style="color: var(--text-light);">Each block's hash depends on all its data AND the previous block's hash. Change anything ‚Üí hash changes ‚Üí chain breaks.</p>
                    <div class="highlight-box warning">
                        <p style="margin: 0;"><strong>To change 1 transaction:</strong> You'd need to re-mine that block AND every block after it (potentially hundreds of thousands of blocks).</p>
                    </div>
                </div>

                <div style="margin-bottom: 2rem; padding: 1.5rem; background: var(--medium-gray); border-radius: 0.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <span style="font-size: 2.5rem;">‚ö°</span>
                        <strong style="color: var(--bright-orange); font-size: 1.3rem;">2. Proof of Work</strong>
                    </div>
                    <p style="color: var(--text-light);">Each block requires massive computational work. Re-mining old blocks would cost millions in electricity and hardware.</p>
                    <div style="display: flex; justify-content: space-around; margin-top: 1rem; text-align: center;">
                        <div>
                            <div style="font-size: 1.5rem; color: var(--status-red);">$500,000+</div>
                            <div style="font-size: 0.9rem; color: var(--text-gray);">Cost per block</div>
                        </div>
                        <div>
                            <div style="font-size: 1.5rem; color: var(--status-red);">10 minutes</div>
                            <div style="font-size: 0.9rem; color: var(--text-gray);">Minimum time</div>
                        </div>
                    </div>
                </div>

                <div style="padding: 1.5rem; background: var(--medium-gray); border-radius: 0.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <span style="font-size: 2.5rem;">üåê</span>
                        <strong style="color: var(--bright-orange); font-size: 1.3rem;">3. Network Consensus</strong>
                    </div>
                    <p style="color: var(--text-light);">Even if you re-mined blocks, thousands of nodes around the world would reject your fake chain. The network follows the chain with the most accumulated Proof of Work.</p>
                    <div class="highlight-box danger">
                        <p style="margin: 0;"><strong>51% Attack:</strong> You'd need to control >51% of the network's hash rate to rewrite history - currently requiring hundreds of billions of dollars in hardware and electricity.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Network Distribution -->
        <div class="content-section">
            <h2>üåç Global Distribution</h2>
            <p>Bitcoin's blockchain is distributed across approximately 15,000+ full nodes worldwide:</p>

            <div style="margin: 2rem 0; background: var(--medium-gray); border-radius: 1rem; padding: 2rem;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                    <div style="text-align: center; padding: 1.5rem; background: rgba(0, 255, 0, 0.1); border: 2px solid var(--status-green); border-radius: 0.5rem;">
                        <div style="font-size: 2.5rem; color: var(--status-green);">üü¢</div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--status-green); margin: 0.5rem 0;">40%</div>
                        <div style="color: var(--text-gray);">United States</div>
                    </div>

                    <div style="text-align: center; padding: 1.5rem; background: rgba(255, 255, 0, 0.1); border: 2px solid var(--status-yellow); border-radius: 0.5rem;">
                        <div style="font-size: 2.5rem; color: var(--status-yellow);">üü°</div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--status-yellow); margin: 0.5rem 0;">20%</div>
                        <div style="color: var(--text-gray);">Germany</div>
                    </div>

                    <div style="text-align: center; padding: 1.5rem; background: rgba(255, 140, 0, 0.1); border: 2px solid var(--status-orange); border-radius: 0.5rem;">
                        <div style="font-size: 2.5rem; color: var(--status-orange);">üü†</div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--status-orange); margin: 0.5rem 0;">10%</div>
                        <div style="color: var(--text-gray);">France</div>
                    </div>

                    <div style="text-align: center; padding: 1.5rem; background: rgba(255, 0, 0, 0.1); border: 2px solid var(--status-red); border-radius: 0.5rem;">
                        <div style="font-size: 2.5rem; color: var(--status-red);">üî¥</div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--status-red); margin: 0.5rem 0;">30%</div>
                        <div style="color: var(--text-gray);">Rest of World</div>
                    </div>
                </div>
            </div>

            <div class="highlight-box success">
                <p><strong>üí™ Decentralization Strength:</strong> Bitcoin's blockchain exists on thousands of computers across 100+ countries. No single government, company, or group can shut it down or alter the records.</p>
            </div>
        </div>

        <!-- Benefits -->
        <div class="content-section">
            <h2>‚ú® Benefits of the Blockchain</h2>

            <div style="margin: 2rem 0;">
                <div style="margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="status-indicator green"></span>
                        <strong style="color: var(--status-green); font-size: 1.1rem;">Transparency</strong>
                    </div>
                    <p style="margin-left: 2rem; color: var(--text-light);">Anyone can audit the entire history. Every transaction ever made is publicly verifiable.</p>
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="status-indicator yellow"></span>
                        <strong style="color: var(--status-yellow); font-size: 1.1rem;">Censorship Resistance</strong>
                    </div>
                    <p style="margin-left: 2rem; color: var(--text-light);">No one can block your transactions or freeze your account.</p>
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="status-indicator orange"></span>
                        <strong style="color: var(--status-orange); font-size: 1.1rem;">Trustlessness</strong>
                    </div>
                    <p style="margin-left: 2rem; color: var(--text-light);">You don't need to trust anyone - you can verify everything yourself.</p>
                </div>

                <div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span class="status-indicator green"></span>
                        <strong style="color: var(--status-green); font-size: 1.1rem;">Permanence</strong>
                    </div>
                    <p style="margin-left: 2rem; color: var(--text-light);">History cannot be rewritten. Your transactions are permanent.</p>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <!-- Interactive Reflection Section -->
        <section class="content-section">
            <h2 style="text-align: center; color: var(--pragmatist-cyan); margin-bottom: 2rem;">üéØ Reflect & Engage</h2>

            <!-- Question 1: Blockchain immutability -->
            <div style="margin-bottom: 3rem;">
                <h3 style="color: var(--pragmatist-teal); margin-bottom: 1rem;">1. What makes Bitcoin's blockchain immutable?</h3>
                <div class="reflection-tabs" role="tablist">
                    <button class="reflection-tab active" role="tab" aria-selected="true" onclick="switchReflectionTab(1, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" onclick="switchReflectionTab(1, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q1-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem; color: var(--text-dim);">Select the correct answer:</p>
                    <select id="q1-quick-choice" class="choice-select" onchange="checkImmutability()">
                        <option value="">-- Choose one --</option>
                        <option value="developers">Bitcoin Core developers protect it</option>
                        <option value="crypto">Cryptographic linking, Proof of Work, and network consensus</option>
                        <option value="government">Government regulations</option>
                    </select>
                    <div id="q1-quick-feedback" class="feedback-box" style="display: none;"></div>
                </div>

                <div id="q1-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Explain the three mechanisms that make the blockchain immutable and how they work together:</p>
                    <textarea id="q1-deep-text" placeholder="Think about: cryptographic hashing, proof-of-work cost, distributed consensus..." style="width: 100%; min-height: 120px; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; resize: vertical;" oninput="checkImmutabilityDeep()"></textarea>
                    <div id="q1-deep-feedback" class="feedback-box" style="display: none;"></div>
                </div>
            </div>

            <!-- Question 2: Block linking -->
            <div style="margin-bottom: 3rem;">
                <h3 style="color: var(--pragmatist-teal); margin-bottom: 1rem;">2. What links each block to the previous one?</h3>
                <div class="reflection-tabs" role="tablist">
                    <button class="reflection-tab active" role="tab" aria-selected="true" onclick="switchReflectionTab(2, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" onclick="switchReflectionTab(2, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q2-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem; color: var(--text-dim);">Select the correct answer:</p>
                    <select id="q2-quick-choice" class="choice-select" onchange="checkLinking()">
                        <option value="">-- Choose one --</option>
                        <option value="number">The block number</option>
                        <option value="hash">The previous block's hash in the current block header</option>
                        <option value="timestamp">The timestamp</option>
                    </select>
                    <div id="q2-quick-feedback" class="feedback-box" style="display: none;"></div>
                </div>

                <div id="q2-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Explain why using the previous block's hash creates a tamper-evident chain. What happens if you try to change old data?</p>
                    <textarea id="q2-deep-text" placeholder="Consider: hash functions, chain reaction, cascade effect, detection..." style="width: 100%; min-height: 120px; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; resize: vertical;" oninput="checkLinkingDeep()"></textarea>
                    <div id="q2-deep-feedback" class="feedback-box" style="display: none;"></div>
                </div>
            </div>

            <!-- Question 3: Node distribution -->
            <div style="margin-bottom: 3rem;">
                <h3 style="color: var(--pragmatist-teal); margin-bottom: 1rem;">3. How many full nodes approximately maintain Bitcoin's blockchain?</h3>
                <div class="reflection-tabs" role="tablist">
                    <button class="reflection-tab active" role="tab" aria-selected="true" onclick="switchReflectionTab(3, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" onclick="switchReflectionTab(3, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q3-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem; color: var(--text-dim);">Choose the correct answer:</p>
                    <select id="q3-quick-choice" class="choice-select" onchange="checkNodes()">
                        <option value="">-- Choose one --</option>
                        <option value="few">10-50 nodes</option>
                        <option value="hundreds">100-500 nodes</option>
                        <option value="thousands">15,000+ nodes worldwide</option>
                    </select>
                    <div id="q3-quick-feedback" class="feedback-box" style="display: none;"></div>
                </div>

                <div id="q3-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Why does having 15,000+ independent nodes matter for Bitcoin's security and decentralization?</p>
                    <textarea id="q3-deep-text" placeholder="Think about: redundancy, censorship resistance, no single point of failure, verification..." style="width: 100%; min-height: 120px; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; resize: vertical;" oninput="checkNodesDeep()"></textarea>
                    <div id="q3-deep-feedback" class="feedback-box" style="display: none;"></div>
                </div>
            </div>
        </section>

        <!-- Complete Module Button -->
        <div style="text-align: center; margin: 3rem 0;">
            <button id="complete-btn" class="btn" disabled onclick="completeModule()">
                üîí Complete Quiz First
            </button>
            <p style="margin-top: 1rem; color: var(--text-dim);">Answer all quiz questions correctly to unlock</p>
        </div>
    </div>

    <!-- Interactive Reflection JavaScript -->
    <script>
        window.pragmatistProgress = {
            data: JSON.parse(localStorage.getItem('pragmatist-progress')) || {
                completedModules: [],
                knowledgeScore: 0,
                achievements: [],
                timeSpent: 0,
                startTime: Date.now()
            },
            save: function() {
                localStorage.setItem('pragmatist-progress', JSON.stringify(this.data));
            }
        };

        function switchReflectionTab(questionNum, level, event) {
            document.querySelectorAll(`#q${questionNum}-quick, #q${questionNum}-deep`).forEach(panel => {
                panel.classList.remove('active');
                panel.setAttribute('aria-hidden', 'true');
            });
            event.target.parentElement.querySelectorAll('.reflection-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });
            const panel = document.getElementById(`q${questionNum}-${level}`);
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');
            event.target.classList.add('active');
            event.target.setAttribute('aria-selected', 'true');
        }

        // Q1: Immutability
        function checkImmutability() {
            const choice = document.getElementById('q1-quick-choice').value;
            const feedbackDiv = document.getElementById('q1-quick-feedback');
            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }
            if (choice === 'crypto') {
                feedbackDiv.innerHTML = `<h5>‚úì Perfect!</h5><p>Three mechanisms work together:<br><br>1. <strong>Cryptographic linking:</strong> Each block contains the previous block's hash<br>2. <strong>Proof of Work:</strong> Massive energy cost to rewrite history<br>3. <strong>Network consensus:</strong> 15,000+ nodes validate and enforce rules<br><br>Change one block? You must redo all subsequent blocks AND convince majority of nodes. Practically impossible.</p>`;
                feedbackDiv.className = 'feedback-box positive';
                updateProgress('q1');
            } else if (choice === 'developers') {
                feedbackDiv.innerHTML = `<h5>‚ö†Ô∏è No Central Authority</h5><p>Bitcoin Core developers write code, but <strong>they cannot change the blockchain</strong>. Immutability comes from <strong>cryptographic linking + proof-of-work + distributed consensus</strong>, not human authority.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedbackDiv.innerHTML = `<h5>‚ö†Ô∏è Government-Independent</h5><p>Governments don't protect Bitcoin's blockchain. It's <strong>mathematically and cryptographically immutable</strong> through proof-of-work, hash linking, and global node consensus. No regulation needed.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }
            feedbackDiv.style.display = 'block';
            saveResponse('q1-quick', choice);
        }

        function checkImmutabilityDeep() {
            const text = document.getElementById('q1-deep-text').value.toLowerCase();
            const feedbackDiv = document.getElementById('q1-deep-feedback');
            if (text.length < 30) {
                feedbackDiv.style.display = 'none';
                return;
            }
            let score = 0;
            if (/(hash|cryptograph|link|chain)/.test(text)) score++;
            if (/(proof.?of.?work|pow|energy|cost|expensive)/.test(text)) score++;
            if (/(consensus|node|distributed|decentral)/.test(text)) score++;
            if (score >= 2) {
                feedbackDiv.innerHTML = `<h5>‚úì Comprehensive! (${score}/3)</h5><p><strong>Cryptographic linking</strong> (hash chain) + <strong>proof-of-work cost</strong> (energy barrier) + <strong>distributed consensus</strong> (15K+ nodes) = immutability. To alter history, you'd need to rewrite all blocks since the change AND control majority hash power. Economically irrational.</p>`;
                feedbackDiv.className = 'feedback-box positive';
                updateProgress('q1');
            } else {
                feedbackDiv.innerHTML = `<h5>üí° Add More Mechanisms</h5><p>Three layers: <strong>cryptographic hashing</strong> links blocks, <strong>proof-of-work</strong> makes rewrites expensive, <strong>node consensus</strong> rejects invalid changes. Together = immutable ledger.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }
            feedbackDiv.style.display = 'block';
            saveResponse('q1-deep', text);
        }

        // Q2: Block linking
        function checkLinking() {
            const choice = document.getElementById('q2-quick-choice').value;
            const feedbackDiv = document.getElementById('q2-quick-feedback');
            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }
            if (choice === 'hash') {
                feedbackDiv.innerHTML = `<h5>‚úì Exactly Right!</h5><p>Each block contains the <strong>previous block's hash in its header</strong>. This creates a cryptographic chain:<br><br>Change Block 100 ‚Üí Hash changes ‚Üí Block 101 is now invalid ‚Üí Must recalculate 101, 102, 103... ‚Üí Entire chain breaks<br><br>This is why it's called a "blockchain"‚Äîtamper-evident by design.</p>`;
                feedbackDiv.className = 'feedback-box positive';
                updateProgress('q2');
            } else if (choice === 'number') {
                feedbackDiv.innerHTML = `<h5>‚ö†Ô∏è Numbers Are Arbitrary</h5><p>Block numbers don't create security‚Äîthey're just labels. The link is the <strong>previous block's cryptographic hash</strong> embedded in each new block. Change old data? Hash changes. Chain breaks. Detection is instant.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedbackDiv.innerHTML = `<h5>‚ö†Ô∏è Timestamps Don't Link</h5><p>Timestamps show when a block was created, but don't link blocks together. The <strong>cryptographic hash</strong> of the previous block creates the unbreakable chain.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }
            feedbackDiv.style.display = 'block';
            saveResponse('q2-quick', choice);
        }

        function checkLinkingDeep() {
            const text = document.getElementById('q2-deep-text').value.toLowerCase();
            const feedbackDiv = document.getElementById('q2-deep-feedback');
            if (text.length < 30) {
                feedbackDiv.style.display = 'none';
                return;
            }
            let score = 0;
            if (/(hash|cryptograph)/.test(text)) score++;
            if (/(chain|cascade|domino|ripple|break)/.test(text)) score++;
            if (/(tamper|detect|evident|change)/.test(text)) score++;
            if (score >= 2) {
                feedbackDiv.innerHTML = `<h5>‚úì Clear Understanding! (${score}/3)</h5><p>Hash linking creates a <strong>tamper-evident chain</strong>. Change old data ‚Üí hash changes ‚Üí next block invalid ‚Üí cascade effect ‚Üí entire chain breaks ‚Üí <strong>instant detection</strong>.<br><br>You can't stealth-edit history‚Äîcryptography makes all changes visible.</p>`;
                feedbackDiv.className = 'feedback-box positive';
                updateProgress('q2');
            } else {
                feedbackDiv.innerHTML = `<h5>üí° Explain the Cascade</h5><p>Key mechanism: <strong>hash functions + chain reaction</strong>. Alter Block 100 ‚Üí its hash changes ‚Üí Block 101 contains wrong hash ‚Üí chain breaks ‚Üí <strong>tampering detected</strong>. This makes the blockchain tamper-evident.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }
            feedbackDiv.style.display = 'block';
            saveResponse('q2-deep', text);
        }

        // Q3: Nodes
        function checkNodes() {
            const choice = document.getElementById('q3-quick-choice').value;
            const feedbackDiv = document.getElementById('q3-quick-feedback');
            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }
            if (choice === 'thousands') {
                feedbackDiv.innerHTML = `<h5>‚úì Correct!</h5><p><strong>15,000+ full nodes</strong> operate independently worldwide. Each one:<br><br>‚Ä¢ Stores complete blockchain copy<br>‚Ä¢ Validates all transactions<br>‚Ä¢ Enforces consensus rules<br>‚Ä¢ Can reject invalid blocks<br><br>This massive redundancy makes Bitcoin virtually unstoppable.</p>`;
                feedbackDiv.className = 'feedback-box positive';
                updateProgress('q3');
            } else {
                feedbackDiv.innerHTML = `<h5>‚ö†Ô∏è Far More Distributed</h5><p>Bitcoin has <strong>15,000+ full nodes globally</strong>, not just dozens or hundreds. This massive distribution is what makes it censorship-resistant and fault-tolerant. No single entity can control the network.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }
            feedbackDiv.style.display = 'block';
            saveResponse('q3-quick', choice);
        }

        function checkNodesDeep() {
            const text = document.getElementById('q3-deep-text').value.toLowerCase();
            const feedbackDiv = document.getElementById('q3-deep-feedback');
            if (text.length < 30) {
                feedbackDiv.style.display = 'none';
                return;
            }
            let score = 0;
            if (/(redundan|backup|cop|replicate)/.test(text)) score++;
            if (/(censor|resist|unstoppable|shut)/.test(text)) score++;
            if (/(no single|decentral|distributed|independent)/.test(text)) score++;
            if (/(verif|valid|enforce)/.test(text)) score++;
            if (score >= 3) {
                feedbackDiv.innerHTML = `<h5>‚úì Systems Thinking! (${score}/4)</h5><p>15K+ nodes provide:<br><br><strong>Redundancy</strong> (many copies), <strong>censorship resistance</strong> (can't shut all down), <strong>no single point of failure</strong> (fully distributed), <strong>independent verification</strong> (each node validates).<br><br>This is why Bitcoin can't be banned‚Äîit's everywhere and nowhere.</p>`;
                feedbackDiv.className = 'feedback-box positive';
                updateProgress('q3');
            } else {
                feedbackDiv.innerHTML = `<h5>üí° Expand Benefits (${score}/4)</h5><p>Key advantages: <strong>massive redundancy</strong>, <strong>censorship resistance</strong>, <strong>no single point of failure</strong>, <strong>independent verification</strong>. 15K+ nodes mean Bitcoin is practically unstoppable.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }
            feedbackDiv.style.display = 'block';
            saveResponse('q3-deep', text);
        }

        const completedQuestions = new Set();
        function updateProgress(questionId) {
            completedQuestions.add(questionId);
            if (completedQuestions.size >= 3) {
                document.getElementById('complete-btn').disabled = false;
                document.getElementById('complete-btn').textContent = '‚úÖ Complete Module & Continue ‚Üí';
            }
        }

        function saveResponse(key, value) {
            localStorage.setItem(`pragmatist-m5-${key}`, value);
        }

        function loadResponses() {
            ['q1-quick', 'q1-deep', 'q2-quick', 'q2-deep', 'q3-quick', 'q3-deep'].forEach(key => {
                const value = localStorage.getItem(`pragmatist-m5-${key}`);
                if (value) {
                    const element = document.getElementById(`${key}-choice`) || document.getElementById(`${key}-text`);
                    if (element) element.value = value;
                }
            });
        }

        function completeModule() {
            if (!window.pragmatistProgress.data.completedModules.includes('2-2')) {
                window.pragmatistProgress.data.completedModules.push('2-2');
                window.pragmatistProgress.data.knowledgeScore += 20;

                if (!window.pragmatistProgress.data.achievements.includes('blockchain-expert')) {
                    window.pragmatistProgress.data.achievements.push('blockchain-expert');
                }

                window.pragmatistProgress.save();

                showAchievement('Blockchain Expert', 'Mastered the blockchain!', 'üîó');

                setTimeout(() => {
                    window.location.href = '/paths/pragmatist/stage-2/module-6.html';
                }, 2000);
            }
        }

        function showAchievement(title, description, icon) {
            const notification = document.createElement('div');
            notification.className = 'achievement-notification';
            notification.innerHTML = `
                <div class="achievement-icon">${icon}</div>
                <div class="achievement-title">${title}</div>
                <div style="color: var(--text-gray); font-size: 1.2rem;">${description}</div>
                <div style="margin-top: 1rem; color: var(--bright-orange); font-weight: bold;">+20 Knowledge Points</div>
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        document.addEventListener('DOMContentLoaded', loadResponses);
    </script>

    <!-- Add condensed CSS framework -->
    <style>
        .reflection-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid rgba(0, 188, 212, 0.2); padding-bottom: 0.5rem; }
        .reflection-tab { background: transparent; color: var(--text-dim); border: 2px solid rgba(0, 188, 212, 0.3); padding: 0.5rem 1.25rem; border-radius: 8px 8px 0 0; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: all 0.3s ease; }
        .reflection-tab.active { background: linear-gradient(135deg, rgba(0, 188, 212, 0.2), rgba(0, 172, 193, 0.1)); color: var(--pragmatist-cyan); border-color: var(--pragmatist-cyan); }
        .reflection-panel { display: none; padding: 1.5rem; background: rgba(26, 26, 26, 0.8); border-radius: 0 8px 8px 8px; border: 2px solid rgba(0, 188, 212, 0.2); }
        .reflection-panel.active { display: block; }
        .choice-select { width: 100%; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; cursor: pointer; }
        .feedback-box { margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.5rem; border: 2px solid; display: none; }
        .feedback-box.positive { background: rgba(76, 175, 80, 0.1); border-color: #4caf50; color: var(--text-light); }
        .feedback-box.hint { background: rgba(255, 152, 0, 0.1); border-color: #ff9800; color: var(--text-light); }
        @media (max-width: 768px) {
            .reflection-tabs { flex-direction: column; }
            .reflection-tab { border-radius: 0.5rem; }
            .reflection-panel { border-radius: 0.5rem; }
        }
    </style>

    </body>
</html>
