<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1.1: The Law of Conservation of Value | The Principled Path</title>
    <meta name="description" content="Understand that value, like energy, cannot be created from nothing. It must come from work.">

    <style>
        :root {
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-bronze: #8B6F47;
            --accent-bronze-light: #A0826D;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(139, 111, 71, 0.2);
            --accent-green: #4caf50;
            --accent-red: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(139, 111, 71, 0.1);
            border: 2px solid var(--accent-bronze);
            border-radius: 0.5rem;
            color: var(--accent-bronze);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .back-button:hover {
            background: rgba(139, 111, 71, 0.2);
            transform: translateX(-3px);
        }

        /* Module Header */
        .module-header {
            text-align: center;
            padding: 3rem 2rem;
            background: radial-gradient(circle at center, rgba(139, 111, 71, 0.15) 0%, transparent 70%);
            border-radius: 1.5rem;
            margin-bottom: 3rem;
        }

        .module-number {
            font-size: 1.2rem;
            color: var(--accent-bronze);
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .module-header h1 {
            font-size: 2.5rem;
            color: var(--accent-bronze);
            margin-bottom: 1rem;
        }

        .module-subtitle {
            font-size: 1.3rem;
            color: var(--text-dim);
            font-style: italic;
        }

        /* Content Sections */
        .content-section {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 2rem 0;
        }

        .content-section h2 {
            color: var(--accent-bronze);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .key-insight {
            background: rgba(139, 111, 71, 0.1);
            border-left: 4px solid var(--accent-bronze);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0.5rem;
        }

        .key-insight-title {
            color: var(--accent-bronze);
            font-weight: 700;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        /* Interactive Demo */
        .demo-section {
            background: var(--secondary-dark);
            border: 3px solid var(--accent-bronze);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-header h3 {
            color: var(--accent-bronze);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .demo-description {
            color: var(--text-dim);
            font-size: 1.05rem;
        }

        .demo-canvas {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .demo-column h4 {
            color: var(--accent-bronze);
            margin-bottom: 1rem;
        }

        .energy-meter {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .meter-label {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .meter-bar {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-bronze), var(--accent-bronze-light));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: 700;
        }

        .meter-fill.production {
            background: linear-gradient(90deg, #4caf50, #8bc34a);
        }

        .meter-fill.currency {
            background: linear-gradient(90deg, var(--accent-bronze), var(--accent-bronze-light));
        }

        .demo-controls {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .control-row {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .control-row label {
            flex: 1;
            color: var(--text-light);
            font-weight: 600;
        }

        .control-row input[type="range"] {
            flex: 2;
            height: 8px;
            border-radius: 4px;
            background: rgba(139, 111, 71, 0.2);
            outline: none;
        }

        .control-row input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-bronze);
            cursor: pointer;
        }

        .demo-button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze));
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 111, 71, 0.4);
        }

        .demo-button.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .demo-output {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            min-height: 100px;
        }

        .output-message {
            color: var(--text-light);
            font-size: 1.05rem;
            margin: 0.5rem 0;
        }

        .output-warning {
            color: var(--accent-bronze-light);
            font-weight: 600;
        }

        .output-danger {
            color: var(--accent-red);
            font-weight: 700;
        }

        .output-success {
            color: var(--accent-green);
            font-weight: 600;
        }

        /* Socratic Questions */
        .socratic-section {
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.1), rgba(139, 111, 71, 0.1));
            border: 2px solid var(--accent-bronze);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .socratic-section h3 {
            color: var(--accent-bronze);
            font-size: 1.6rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .question-card {
            background: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .question-number {
            color: var(--accent-bronze);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .reflection-area {
            width: 100%;
            min-height: 100px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .reflection-area:focus {
            outline: none;
            border-color: var(--accent-bronze);
        }

        /* Navigation Footer */
        .module-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border-radius: 1rem;
        }

        .nav-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze));
            color: white;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 111, 71, 0.4);
        }

        .nav-link.disabled {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            color: var(--text-dim);
            cursor: not-allowed;
            pointer-events: none;
        }

        .progress-indicator {
            text-align: center;
            color: var(--text-dim);
        }

        /* Interactive Reflection System */
        .reflection-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid rgba(139, 111, 71, 0.2); padding-bottom: 0.5rem; }
        .reflection-tab { background: transparent; color: var(--text-dim); border: 2px solid rgba(139, 111, 71, 0.3); padding: 0.5rem 1.25rem; border-radius: 8px 8px 0 0; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: all 0.3s ease; }
        .reflection-tab.active { background: linear-gradient(135deg, rgba(139, 111, 71, 0.2), rgba(139, 111, 71, 0.1)); color: var(--accent-bronze); border-color: var(--accent-bronze); }
        .reflection-panel { display: none; padding: 1.5rem; background: rgba(26, 26, 26, 0.8); border-radius: 0 8px 8px 8px; border: 2px solid rgba(139, 111, 71, 0.2); }
        .reflection-panel.active { display: block; }
        .choice-select { width: 100%; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; cursor: pointer; }
        .choice-select:focus { outline: none; border-color: var(--accent-bronze); }
        .feedback-btn { background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze)); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; margin-top: 1rem; transition: all 0.3s ease; }
        .feedback-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(139, 111, 71, 0.4); }
        .feedback-box { margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.5rem; border: 2px solid; display: none; }
        .feedback-box.positive { background: rgba(76, 175, 80, 0.1); border-color: #4caf50; color: var(--text-light); }
        .feedback-box.hint { background: rgba(255, 152, 0, 0.1); border-color: #8B6F47; color: var(--text-light); }
        .feedback-box h5 { margin-top: 0; margin-bottom: 0.5rem; color: inherit; }
        .checklist-reflection { display: flex; flex-direction: column; gap: 0.75rem; }
        .checkbox-label { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.5rem; cursor: pointer; transition: background 0.2s ease; }
        .checkbox-label:hover { background: rgba(0, 0, 0, 0.5); }
        .checkbox-label input[type="checkbox"] { width: 1.25rem; height: 1.25rem; cursor: pointer; }

        /* Drag and Drop Sorting */
        .sorting-container { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0; }
        .item-bank { background: rgba(0, 0, 0, 0.3); border: 2px dashed var(--border-color); border-radius: 0.75rem; padding: 1.5rem; min-height: 200px; }
        .item-bank h4 { color: var(--text-dim); font-size: 0.95rem; margin-bottom: 1rem; text-align: center; }
        .drop-zone { background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.75rem; padding: 1.5rem; min-height: 200px; }
        .drop-zone.winner { border-color: var(--accent-green); }
        .drop-zone.loser { border-color: var(--accent-red); }
        .drop-zone h4 { margin-bottom: 1rem; text-align: center; font-size: 1.1rem; }
        .drop-zone.winner h4 { color: var(--accent-green); }
        .drop-zone.loser h4 { color: var(--accent-red); }
        .drop-zone.drag-over { background: rgba(139, 111, 71, 0.2); border-style: solid; }
        .draggable-item { background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.5rem; padding: 1rem 1.25rem; margin: 0.5rem 0; cursor: move; transition: all 0.2s ease; user-select: none; }
        .draggable-item:hover { background: rgba(139, 111, 71, 0.1); border-color: var(--accent-bronze); transform: translateY(-2px); }
        .draggable-item.dragging { opacity: 0.5; transform: rotate(3deg); }
        .draggable-item strong { color: var(--accent-bronze); }
        .check-answer-btn { width: 100%; padding: 1rem; background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze)); color: white; border: none; border-radius: 0.5rem; font-weight: 700; font-size: 1.1rem; cursor: pointer; margin-top: 1.5rem; transition: all 0.3s ease; }
        .check-answer-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(139, 111, 71, 0.4); }
        .check-answer-btn:disabled { background: var(--secondary-dark); border: 2px solid var(--border-color); color: var(--text-dim); cursor: not-allowed; transform: none; }

        /* Responsive */
        @media (max-width: 768px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }

            .sorting-container {
                grid-template-columns: 1fr;
            }

            .module-header h1 {
                font-size: 2rem;
            }

            .module-nav {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="/paths/principled/stage-1/" class="back-button">
                ← Back to Stage 1
            </a>
        </div>

        <!-- Module Header -->
        <header class="module-header">
            <div class="module-number">Stage 1 • Module 1</div>
            <h1>The Law of Conservation of Value</h1>
            <p class="module-subtitle">You can't get something for nothing</p>
        </header>

        <!-- Introduction -->
        <section class="content-section">
            <h2>The Physics of Value</h2>
            <p>
                In physics, the First Law of Thermodynamics states that energy cannot be created or destroyed — only transformed. This isn't just a scientific curiosity; it's a fundamental constraint on reality itself. Every economy operates under the same law: real productive capacity requires work and energy input. It cannot be conjured from nothing.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">⚡ Core Principle</div>
                <p>
                    Money is a claim on human energy and productive output. When you create new money without new production,
                    you're diluting existing claims. The energy hasn't increased — you've just created more tickets to the same show.
                </p>
            </div>
        </section>

        <!-- The Problem -->
        <section class="content-section">
            <h2>The Inflation Illusion</h2>
            <p>
                Imagine a farmer who grows 100 bushels of wheat using solar energy, soil, and labor. That wheat represents stored energy — captured sunlight transformed into calories. Now imagine a government that prints 100 new currency units. Have they created new wheat? New energy? <strong>No.</strong> They've created claims on wheat that doesn't exist. When those claims enter the economy, they compete with existing money for the same limited production. Prices rise, and the purchasing power of every existing unit falls.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">🌾 You Can't Print Wheat</div>
                <p>
                    You can declare new currency into existence, but you can't declare new energy, food, or productive capacity. Nature doesn't accept IOUs.
                </p>
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="demo-section">
            <div class="demo-header">
                <h3>🎮 Interactive Lab: Energy-to-Value Converter</h3>
                <p class="demo-description">
                    See what happens when money creation is decoupled from productive work.
                    Adjust the sliders to add real production or print new money, and watch the system respond.
                </p>
            </div>

            <div class="demo-canvas">
                <div class="demo-grid">
                    <div class="demo-column">
                        <h4>Real Production</h4>
                        <div class="energy-meter">
                            <div class="meter-label">Energy Input (Sunlight/Labor)</div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="energyMeter" style="width: 50%;">50</div>
                            </div>
                        </div>
                        <div class="energy-meter">
                            <div class="meter-label">Production Output (Goods/Services)</div>
                            <div class="meter-bar">
                                <div class="meter-fill production" id="productionMeter" style="width: 50%;">50</div>
                            </div>
                        </div>
                    </div>

                    <div class="demo-column">
                        <h4>Currency Supply</h4>
                        <div class="energy-meter">
                            <div class="meter-label">Currency Units in Circulation</div>
                            <div class="meter-bar">
                                <div class="meter-fill currency" id="currencyMeter" style="width: 50%;">100</div>
                            </div>
                        </div>
                        <div class="energy-meter">
                            <div class="meter-label">Purchasing Power per Unit</div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="purchasingPowerMeter" style="width: 50%;">0.5</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="demo-controls">
                    <div class="control-row">
                        <label for="energySlider">⚡ Energy Input:</label>
                        <input type="range" id="energySlider" min="0" max="100" value="50">
                        <span id="energyValue">50</span>
                    </div>
                    <div class="control-row">
                        <label for="currencySlider">💵 Currency Supply:</label>
                        <input type="range" id="currencySlider" min="50" max="500" value="100">
                        <span id="currencyValue">100</span>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0;">
                    <button class="demo-button" onclick="addProduction()">
                        🌾 Add Real Production
                    </button>
                    <button class="demo-button danger" onclick="printMoney()">
                        🖨️ Print New Money
                    </button>
                </div>

                <div class="demo-output" id="demoOutput">
                    <div class="output-message">Adjust the sliders or click the buttons to see the effects...</div>
                </div>
            </div>

            <div class="key-insight">
                <div class="key-insight-title">💡 What You're Seeing</div>
                <p>
                    When you add energy/production, purchasing power increases — more goods chase the same money.
                    When you print money without adding production, purchasing power decreases — more money chases the same goods.
                    This is inflation: the inevitable result of violating conservation of value.
                </p>
            </div>
        </section>

        <!-- Bitcoin's Solution -->
        <section class="content-section">
            <h2>Bitcoin Restores the Conservation Law</h2>
            <p>
                Bitcoin's supply is capped at 21 million coins — not because Satoshi liked that number, but because scarcity requires a fixed supply. More importantly, creating new bitcoins requires energy. Mining is proof-of-work: you must expend real electricity to create new units. Unlike fiat currency, Bitcoin cannot be printed on a whim. The protocol enforces scarcity through mathematics and thermodynamics.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">₿ Bitcoin's Elegant Solution</div>
                <p>
                    Bitcoin reintroduces the energy requirement that fiat money abandoned. Digital scarcity is anchored in physical scarcity. The conservation law is restored.
                </p>
            </div>
        </section>

        <!-- The Distribution Problem: Who Gets New Money First? -->
        <section class="content-section">
            <h2>🎯 The Cantillon Effect: Who Benefits from Inflation?</h2>
            <p>
                When new money is created, it doesn't magically appear in everyone's wallet equally. It enters the economy at specific points — and this timing creates winners and losers. Those who receive the new money before prices rise gain purchasing power by buying houses, stocks, and goods at yesterday's prices. By the time the money reaches workers, savers, and retirees, prices have already adjusted upward.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">⏱️ First Spenders Win, Last Receivers Lose</div>
                <p>
                    This is the <strong>Cantillon Effect</strong>, named after 18th-century economist Richard Cantillon. Inflation isn't just a general price increase — it's a hidden wealth transfer from late receivers to early receivers of new money.
                </p>
            </div>

            <p><strong>Who receives new money first?</strong></p>
            <ul style="margin: 1rem 0 1rem 2rem; line-height: 1.8;">
                <li><strong>Governments</strong> — Can spend new currency before it enters circulation</li>
                <li><strong>Banks and financial institutions</strong> — Receive newly created credit first, can invest before prices rise</li>
                <li><strong>Debtors with existing loans</strong> — Repay old debts with devalued currency</li>
            </ul>

            <p><strong>Who receives it last (and loses)?</strong></p>
            <ul style="margin: 1rem 0 1rem 2rem; line-height: 1.8;">
                <li><strong>Savers</strong> — Their stored purchasing power erodes as currency supply expands</li>
                <li><strong>Workers</strong> — Wages lag behind rising prices; real income falls</li>
                <li><strong>Retirees on fixed incomes</strong> — Pension payments lose value year after year</li>
            </ul>
        </section>

        <!-- Socratic Questions -->
        <section class="socratic-section">
            <h3>💬 Reflect on What You've Learned</h3>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 2rem;">
                Test your understanding with interactive reflections. Get immediate feedback on your thinking.
            </p>

            <!-- Question 1: Winners & Losers (Drag-and-Drop Sorting) -->
            <div class="question-card">
                <div class="question-number">Question 1</div>
                <div class="question-text">
                    When new money is created without new production, who benefits and who loses?
                </div>
                <p style="font-size: 0.95rem; color: var(--text-dim); margin: 1rem 0;">
                    Drag each group into the correct box. Think about who receives new money first and who receives it last.
                </p>

                <!-- Item Bank (unsorted items start here) -->
                <div class="item-bank" id="itemBank">
                    <h4>📦 Drag to Sort ↓</h4>
                    <div class="draggable-item" draggable="true" data-group="government">
                        <strong>Government</strong>
                    </div>
                    <div class="draggable-item" draggable="true" data-group="banks">
                        <strong>Banks & Financial Institutions</strong>
                    </div>
                    <div class="draggable-item" draggable="true" data-group="debtors">
                        <strong>People with Existing Loans</strong>
                    </div>
                    <div class="draggable-item" draggable="true" data-group="savers">
                        <strong>Savers</strong>
                    </div>
                    <div class="draggable-item" draggable="true" data-group="workers">
                        <strong>Workers</strong>
                    </div>
                    <div class="draggable-item" draggable="true" data-group="retirees">
                        <strong>Retirees on Fixed Income</strong>
                    </div>
                </div>

                <!-- Drop Zones -->
                <div class="sorting-container">
                    <div class="drop-zone winner" id="winnersBox" data-category="winner">
                        <h4>✅ Benefits (Winners)</h4>
                    </div>
                    <div class="drop-zone loser" id="losersBox" data-category="loser">
                        <h4>❌ Loses (Victims)</h4>
                    </div>
                </div>

                <button class="check-answer-btn" onclick="checkSorting()">Check My Answer</button>
                <div id="inflation-feedback" class="feedback-box"></div>
            </div>

            <!-- Question 2: Wealth vs Currency (Quick/Deep) -->
            <div class="question-card">
                <div class="question-number">Question 2</div>
                <div class="question-text">
                    Can true wealth ever be printed? What's the difference between wealth and currency?
                </div>

                <div class="reflection-tabs" role="tablist" aria-label="Reflection depth options">
                    <button class="reflection-tab active" role="tab" aria-selected="true" aria-controls="q2-quick" onclick="switchReflectionTab(2, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" aria-controls="q2-deep" onclick="switchReflectionTab(2, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q2-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem;">What is wealth?</p>
                    <select class="choice-select" id="wealth-choice" onchange="checkWealth()">
                        <option value="">— Select One —</option>
                        <option value="currency">Currency (money itself)</option>
                        <option value="goods">Real goods and services (food, energy, skills)</option>
                        <option value="both">Both currency and goods equally</option>
                        <option value="perceived">Whatever people believe has value</option>
                    </select>
                    <div id="wealth-feedback" class="feedback-box"></div>
                </div>

                <div id="q2-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Reflect deeply: If you could print unlimited currency, would you be wealthy? Why or why not?</p>
                    <textarea class="reflection-area" id="wealth-deep" placeholder="Consider: Zimbabwe printed trillions of dollars and became poorer. Venezuela printed bolivars and faced starvation. The Weimar Republic printed marks and got hyperinflation. What does this tell you about the relationship between currency and wealth?" style="min-height: 120px;" oninput="saveDeepReflection(2, this.value)"></textarea>
                    <p style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        💡 Hint: Wealth is <strong>productive capacity</strong> (factories, farms, skills, energy). Currency is just a <strong>claim</strong> on that capacity. Printing claims doesn't create capacity.
                    </p>
                </div>
            </div>

            <!-- Question 3: Bitcoin's Energy Cost (Quick/Deep) -->
            <div class="question-card">
                <div class="question-number">Question 3</div>
                <div class="question-text">
                    Why does Bitcoin require energy to create new units? Is this a bug or a feature?
                </div>

                <div class="reflection-tabs" role="tablist" aria-label="Reflection depth options">
                    <button class="reflection-tab active" role="tab" aria-selected="true" aria-controls="q3-quick" onclick="switchReflectionTab(3, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" aria-controls="q3-deep" onclick="switchReflectionTab(3, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q3-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem;">Bitcoin's energy requirement is a:</p>
                    <select class="choice-select" id="energy-choice" onchange="checkEnergy()">
                        <option value="">— Select One —</option>
                        <option value="bug">Bug - Wasteful and should be eliminated</option>
                        <option value="feature">Feature - Anchors digital scarcity to physical reality</option>
                        <option value="necessary-evil">Necessary evil - We're stuck with it</option>
                        <option value="temporary">Temporary - Will be replaced by better tech</option>
                    </select>
                    <div id="energy-feedback" class="feedback-box"></div>
                </div>

                <div id="q3-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Explain why energy cost prevents the same inflation problem that fiat currency has:</p>
                    <textarea class="reflection-area" id="energy-deep" placeholder="Think about: What prevents someone from creating infinite bitcoins? How is this different from a central bank creating fiat? What role does thermodynamics play?" style="min-height: 120px;" oninput="saveDeepReflection(3, this.value)"></textarea>
                    <p style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        💡 Hint: Energy cannot be faked or counterfeited. Proof-of-work means every bitcoin costs <strong>real electricity</strong> to create. This reintroduces the conservation law that fiat abandoned.
                    </p>
                </div>
            </div>
        </section>

        <!-- Module Navigation -->
        <nav class="module-nav">
            <a href="/paths/principled/stage-1/" class="nav-link">
                ← Back to Stage 1
            </a>
            <div class="progress-indicator">
                Module 1 of 3 • Stage 1 of 5
            </div>
            <a href="/paths/principled/stage-1/module-2.html" class="nav-link">
                Next: Entropy & Corruption →
            </a>
        </nav>
    </div>

    <script>
        // Demo State
        let demoState = {
            energy: 50,
            production: 50,
            currency: 100,
            purchasingPower: 0.5
        };

        // Initialize demo
        function updateDemo() {
            const energy = parseInt(document.getElementById('energySlider').value);
            const currency = parseInt(document.getElementById('currencySlider').value);

            demoState.energy = energy;
            demoState.production = energy; // Production = Energy
            demoState.currency = currency;
            demoState.purchasingPower = demoState.production / demoState.currency;

            // Update displays
            document.getElementById('energyValue').textContent = energy;
            document.getElementById('currencyValue').textContent = currency;

            // Update meters
            document.getElementById('energyMeter').style.width = energy + '%';
            document.getElementById('energyMeter').textContent = energy;

            document.getElementById('productionMeter').style.width = energy + '%';
            document.getElementById('productionMeter').textContent = energy + ' units';

            document.getElementById('currencyMeter').style.width = Math.min(currency, 100) + '%';
            document.getElementById('currencyMeter').textContent = currency + ' units';

            document.getElementById('purchasingPowerMeter').style.width = Math.min(demoState.purchasingPower * 100, 100) + '%';
            document.getElementById('purchasingPowerMeter').textContent = demoState.purchasingPower.toFixed(2);

            analyzeEconomy();
        }

        function analyzeEconomy() {
            const output = document.getElementById('demoOutput');
            const ratio = demoState.production / demoState.currency;

            let message = '';
            let className = '';

            if (ratio > 0.7) {
                message = `<div class="output-success">✅ Healthy Economy</div>
                          <div class="output-message">Production: ${demoState.production} units | Currency: ${demoState.currency} units</div>
                          <div class="output-message">Purchasing power: ${ratio.toFixed(2)} goods per currency unit</div>
                          <div class="output-message">The economy is balanced. Currency is backed by real production.</div>`;
            } else if (ratio > 0.4) {
                message = `<div class="output-warning">⚠️ Moderate Inflation</div>
                          <div class="output-message">Production: ${demoState.production} units | Currency: ${demoState.currency} units</div>
                          <div class="output-message">Purchasing power: ${ratio.toFixed(2)} goods per currency unit</div>
                          <div class="output-message">Currency supply is growing faster than production. Prices are rising.</div>`;
            } else {
                message = `<div class="output-danger">🚨 Severe Currency Crisis</div>
                          <div class="output-message">Production: ${demoState.production} units | Currency: ${demoState.currency} units</div>
                          <div class="output-message">Purchasing power: ${ratio.toFixed(2)} goods per currency unit</div>
                          <div class="output-message">Massive currency oversupply! Each unit is nearly worthless. This is hyperinflation.</div>`;
            }

            output.innerHTML = message;
        }

        function addProduction() {
            const currentEnergy = parseInt(document.getElementById('energySlider').value);
            const newEnergy = Math.min(currentEnergy + 20, 100);
            document.getElementById('energySlider').value = newEnergy;
            updateDemo();
        }

        function printMoney() {
            const currentCurrency = parseInt(document.getElementById('currencySlider').value);
            const newCurrency = Math.min(currentCurrency + 100, 500);
            document.getElementById('currencySlider').value = newCurrency;
            updateDemo();
        }

        // Attach event listeners
        document.getElementById('energySlider').addEventListener('input', updateDemo);
        document.getElementById('currencySlider').addEventListener('input', updateDemo);

        // Interactive Reflection System
        const STORAGE_KEY = 'principled_stage1_module1_reflections';

        // Tab switching
        function switchReflectionTab(questionNum, level, event) {
            document.querySelectorAll(`#q${questionNum}-quick, #q${questionNum}-deep`).forEach(panel => {
                panel.classList.remove('active');
                panel.setAttribute('aria-hidden', 'true');
            });
            event.target.parentElement.querySelectorAll('.reflection-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });
            const panel = document.getElementById(`q${questionNum}-${level}`);
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');
            event.target.classList.add('active');
            event.target.setAttribute('aria-selected', 'true');
        }

        // Q1 - Drag and Drop Sorting Logic
        let draggedElement = null;

        // Correct answers mapping
        const correctAnswers = {
            'government': 'winner',
            'banks': 'winner',
            'debtors': 'winner',
            'savers': 'loser',
            'workers': 'loser',
            'retirees': 'loser'
        };

        const explanations = {
            'government': 'Government can spend new money before it circulates and prices rise — this is called seigniorage.',
            'banks': 'Banks receive newly created money first (the Cantillon Effect), allowing them to lend and invest before prices adjust.',
            'debtors': 'People with existing loans benefit because they repay fixed debts with devalued currency.',
            'savers': 'Savers lose because their stored purchasing power erodes as the currency supply expands.',
            'workers': 'Workers lose because wages lag behind rising prices — real income falls during inflation.',
            'retirees': 'Retirees on fixed incomes lose because pension payments buy less each year as prices rise.'
        };

        // Initialize drag and drop
        function initDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });

            // Also allow dropping back to item bank
            const itemBank = document.getElementById('itemBank');
            itemBank.addEventListener('dragover', handleDragOver);
            itemBank.addEventListener('drop', handleDrop);
        }

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
            return false;
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');

            if (draggedElement) {
                e.currentTarget.appendChild(draggedElement);
                saveSorting();
            }

            return false;
        }

        function checkSorting() {
            const winnersBox = document.getElementById('winnersBox');
            const losersBox = document.getElementById('losersBox');
            const feedbackDiv = document.getElementById('inflation-feedback');

            const winnersItems = Array.from(winnersBox.querySelectorAll('.draggable-item'));
            const losersItems = Array.from(losersBox.querySelectorAll('.draggable-item'));

            let correct = 0;
            let total = 6;
            let feedback = '<h5>📊 Your Results:</h5>';

            // Check winners
            winnersItems.forEach(item => {
                const group = item.dataset.group;
                if (correctAnswers[group] === 'winner') {
                    correct++;
                    feedback += `<p style="color: var(--accent-green);">✓ <strong>${item.textContent.trim()}</strong>: ${explanations[group]}</p>`;
                } else {
                    feedback += `<p style="color: var(--accent-red);">✗ <strong>${item.textContent.trim()}</strong> should be in "Loses" — ${explanations[group]}</p>`;
                }
            });

            // Check losers
            losersItems.forEach(item => {
                const group = item.dataset.group;
                if (correctAnswers[group] === 'loser') {
                    correct++;
                    feedback += `<p style="color: var(--accent-green);">✓ <strong>${item.textContent.trim()}</strong>: ${explanations[group]}</p>`;
                } else {
                    feedback += `<p style="color: var(--accent-red);">✗ <strong>${item.textContent.trim()}</strong> should be in "Benefits" — ${explanations[group]}</p>`;
                }
            });

            // Overall feedback
            if (correct === total) {
                feedback = `<h5>✓ Perfect! You Understand the Cantillon Effect</h5>` + feedback +
                    `<p style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color);"><em><strong>The key insight:</strong> Inflation is a hidden wealth transfer from late receivers (workers, savers, retirees) to early receivers (government, banks, debtors) of new money. This is why sound money matters — it prevents this systematic theft.</em></p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (correct >= 4) {
                feedback = `<h5>💡 Good Start — ${correct}/${total} Correct</h5>` + feedback;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedback = `<h5>⚠️ Review the Cantillon Effect — ${correct}/${total} Correct</h5>` + feedback +
                    `<p style="margin-top: 1rem;"><em>Hint: Who receives the new money <strong>first</strong> (before prices rise) benefits. Who receives it <strong>last</strong> (after prices rise) loses.</em></p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
        }

        function saveSorting() {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            const winnersBox = document.getElementById('winnersBox');
            const losersBox = document.getElementById('losersBox');

            reflections['q1-winners'] = Array.from(winnersBox.querySelectorAll('.draggable-item')).map(i => i.dataset.group);
            reflections['q1-losers'] = Array.from(losersBox.querySelectorAll('.draggable-item')).map(i => i.dataset.group);

            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Q2 - Wealth vs Currency
        function checkWealth() {
            const choice = document.getElementById('wealth-choice').value;
            const feedbackDiv = document.getElementById('wealth-feedback');

            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (choice === 'goods') {
                feedback = `<h5>✓ Correct!</h5><p><strong>Wealth is real productive capacity</strong> — food, energy, factories, skills, infrastructure, knowledge. Currency is just a <em>claim</em> on that capacity.<br><br>You can print infinite currency, but you can't print wheat, gasoline, or labor. Zimbabwe had trillions of dollars but no food. Venezuela has mountains of bolivars but no medicine. <strong>Currency ≠ Wealth.</strong><br><br>Bitcoin forces this distinction: you can't print bitcoins without expending real energy (wealth).</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (choice === 'currency') {
                feedback = `<h5>⚠️ Common Misconception</h5><p>Currency <em>represents</em> wealth, but it's not wealth itself. Imagine being stranded on an island with $1 million in cash but no food, water, or tools. Are you wealthy?<br><br>Wealth is <strong>productive capacity</strong>. Currency is just a <strong>claim ticket</strong> for that capacity. When you print more tickets without creating more capacity, each ticket is worth less. That's inflation.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'both') {
                feedback = `<h5>💡 Partially Correct</h5><p>Currency <em>can</em> be wealth if it's scarce and tradable (like gold or Bitcoin). But fiat currency that can be printed infinitely is <strong>not wealth</strong> — it's just claims on wealth.<br><br>True wealth is <strong>productive capacity</strong>: energy, food, skills, infrastructure. Currency is a tool to transfer wealth, not wealth itself.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'perceived') {
                feedback = `<h5>⚠️ Too Subjective</h5><p>While perception matters for <em>price</em>, it doesn't create <em>wealth</em>. If everyone believed sand was valuable, the price of sand would rise — but you still can't eat it, power a factory with it, or use it as energy.<br><br>Wealth is <strong>objective productive capacity</strong>. Currency is a subjective social agreement. When currency is printed, perception lags reality — that's how inflation robs people.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveReflection('q2-quick', choice);
        }

        // Q3 - Bitcoin's Energy Cost
        function checkEnergy() {
            const choice = document.getElementById('energy-choice').value;
            const feedbackDiv = document.getElementById('energy-feedback');

            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (choice === 'feature') {
                feedback = `<h5>✓ Correct — This Is the Key Insight!</h5><p><strong>Energy cost is Bitcoin's genius.</strong> By requiring proof-of-work, Bitcoin anchors digital scarcity to <em>physical</em> scarcity. You can't fake energy. You can't counterfeit thermodynamics.<br><br>Fiat currency fails because it <strong>decoupled money from energy</strong>. Bitcoin restores the link. Every bitcoin mined costs real electricity. This reintroduces the <strong>conservation of value</strong>.<br><br>Without energy cost, Bitcoin would be as inflatable as fiat. Energy isn't a bug — it's the entire point.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (choice === 'bug') {
                feedback = `<h5>⚠️ Common Misunderstanding</h5><p>This is the most common critique of Bitcoin, but it misses the point entirely. Energy cost is <strong>not waste</strong> — it's the mechanism that prevents inflation.<br><br>Without energy cost, anyone could create infinite bitcoins. The energy requirement makes Bitcoin <em>unforgeable</em>. You can print fiat money, but you can't print electricity.<br><br>Compare: Fiat uses guns and laws to enforce scarcity (and fails). Bitcoin uses thermodynamics. Which is more robust?</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'necessary-evil') {
                feedback = `<h5>💡 Closer, But Not Quite</h5><p>Energy cost isn't a compromise — it's a <strong>deliberate design choice</strong>. Bitcoin could have used other consensus mechanisms (proof-of-stake), but those don't anchor digital scarcity to physical reality.<br><br>Proof-of-work means: to create bitcoins, you must <em>expend energy that cannot be recovered</em>. This is <strong>unforgeable costliness</strong> — the same property that made gold valuable for 5,000 years.<br><br>It's not a necessary evil. It's the core innovation.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'temporary') {
                feedback = `<h5>⚠️ Misses the Point</h5><p>Proof-of-work isn't outdated technology waiting to be replaced. It's a <strong>fundamental design choice</strong>. Alternatives like proof-of-stake don't require energy, but they also don't anchor scarcity to physics — they rely on circular logic (stake to validate, validate to stake).<br><br>Bitcoin's energy cost is <em>permanent by design</em>. Removing it would make Bitcoin as inflatable as fiat. The energy isn't a bug to fix — it's the feature that prevents inflation.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveReflection('q3-quick', choice);
        }

        // Deep Reflection Auto-save
        function saveDeepReflection(questionNum, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[`q${questionNum}-deep`] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }


        // Save dropdown choices
        function saveReflection(key, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[key] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Load saved reflections
        function loadReflections() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const reflections = JSON.parse(saved);

                // Q1 - Restore sorted items
                if (reflections['q1-winners']) {
                    const winnersBox = document.getElementById('winnersBox');
                    reflections['q1-winners'].forEach(group => {
                        const item = document.querySelector(`[data-group="${group}"]`);
                        if (item) winnersBox.appendChild(item);
                    });
                }
                if (reflections['q1-losers']) {
                    const losersBox = document.getElementById('losersBox');
                    reflections['q1-losers'].forEach(group => {
                        const item = document.querySelector(`[data-group="${group}"]`);
                        if (item) losersBox.appendChild(item);
                    });
                }

                // Q2
                if (reflections['q2-quick']) document.getElementById('wealth-choice').value = reflections['q2-quick'];
                if (reflections['q2-deep']) document.getElementById('wealth-deep').value = reflections['q2-deep'];

                // Q3
                if (reflections['q3-quick']) document.getElementById('energy-choice').value = reflections['q3-quick'];
                if (reflections['q3-deep']) document.getElementById('energy-deep').value = reflections['q3-deep'];

                // Trigger feedback display if selections exist
                if (reflections['q2-quick']) checkWealth();
                if (reflections['q3-quick']) checkEnergy();
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            initDragAndDrop();
            loadReflections();
            updateDemo();

            // Mark module as visited
            let progress = JSON.parse(localStorage.getItem('principled_stage1_progress') || '[]');
            if (!progress.includes('module-1')) {
                progress.push('module-1');
                localStorage.setItem('principled_stage1_progress', JSON.stringify(progress));
            }
        });
    </script>
</body>
</html>
