<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principles 1-3: The Digital Dilemma | The Principled Path</title>
    <meta name="description" content="Understanding the double-spending problem, trust problem, and consensus challenge that Bitcoin solves.">
    <link rel="stylesheet" href="/curriculum/first-principles/styles.css">
</head>
<body>
    <div class="container">
        <header class="module-header">
            <div class="breadcrumb">
                <a href="/">Home</a> →
                <a href="/paths/principled/">The Principled Path</a> →
                <a href="/paths/principled/stage-1/">Stage 1</a> →
                <span>Module 2</span>
            </div>
            <h1>The Digital Dilemma</h1>
            <p class="module-subtitle">Principles 1-3: Double-Spending, Trust, and Consensus</p>
        </header>

        <!-- Principle 1: Double-Spending -->
        <section class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(1)">
                <span>Principle 1: The Double-Spending Problem</span>
                <span class="principle-icon" id="icon-1">▼</span>
            </div>
            <div class="principle-content active" id="content-1">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3>First Principles Question:</h3>
                        <p><strong>"How can we create digital money that can't be copied?"</strong></p>
                        <p>
                            This is the fundamental problem Bitcoin solves. Physical money can't be in two places at once,
                            but digital files can be copied infinitely. How do we prevent someone from spending the same
                            digital coin twice?
                        </p>
                    </div>

                    <div class="problem-box">
                        <h4>The Problem: Digital Copying</h4>
                        <p>
                            Unlike physical objects, digital information can be perfectly copied. If I send you a digital photo,
                            I still have the original. But if digital money worked this way, I could spend the same coin
                            with multiple people!
                        </p>

                        <div class="demo-container">
                            <h4>Interactive Demo: The Double-Spending Attack</h4>

                            <div class="transaction-flow">
                                <div class="person">Alice</div>
                                <div class="arrow">→</div>
                                <div class="coin" id="coin1">1 BTC</div>
                                <div class="arrow">→</div>
                                <div class="person">Bob</div>
                            </div>

                            <div class="transaction-flow">
                                <div class="person">Alice</div>
                                <div class="arrow">→</div>
                                <div class="coin" id="coin2" style="opacity: 0.5;">1 BTC?</div>
                                <div class="arrow">→</div>
                                <div class="person">Charlie</div>
                            </div>

                            <button type="button" class="btn" onclick="attemptDoubleSpend()">Try Double-Spending Attack</button>
                            <div id="double-spend-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>

                    <div class="solution-box">
                        <h4>The Insight: We Need a Global Ledger</h4>
                        <p>
                            The solution is to maintain a single, shared record (ledger) of who owns what.
                            Every transaction must be recorded, and everyone must agree on the current state.
                            This prevents double-spending because the ledger shows each coin can only be spent once.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Principle 2: Trust Problem -->
        <section class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(2)">
                <span>Principle 2: The Trust Problem</span>
                <span class="principle-icon" id="icon-2">▼</span>
            </div>
            <div class="principle-content" id="content-2">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3>First Principles Question:</h3>
                        <p><strong>"If we need someone to maintain the ledger, who can we trust to never cheat?"</strong></p>
                        <p>
                            Digital payments require a ledger showing who owns what. But this creates a massive problem:
                            whoever controls the ledger has immense power. They can freeze accounts, reverse transactions,
                            or create money for themselves. History shows us that this power is always abused eventually.
                        </p>
                    </div>

                    <div class="solution-box">
                        <h4>The Revolutionary Insight: Eliminate the Trusted Party</h4>
                        <p>
                            What if we didn't need to trust anyone at all? What if the ledger could be maintained
                            by thousands of independent computers, none of which you need to trust individually?
                            If they all have to agree before anything changes, then no single party can cheat you.
                        </p>
                        <p style="margin-top: 10px;">
                            <strong>This leads us to the next challenge:</strong> How do you get thousands of strangers
                            on the internet to agree on anything?
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Principle 3: Consensus Problem -->
        <section class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(3)">
                <span>Principle 3: The Consensus Problem</span>
                <span class="principle-icon" id="icon-3">▼</span>
            </div>
            <div class="principle-content" id="content-3">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3>First Principles Question:</h3>
                        <p><strong>"How can thousands of strangers on the internet agree on a single version of truth?"</strong></p>
                        <p>
                            We want many independent parties to maintain the ledger, but how do they coordinate?
                            What if they disagree? What if some are dishonest? How do we ensure they all
                            converge on the same version of the ledger?
                        </p>
                    </div>

                    <div class="problem-box">
                        <h4>The Problem: Byzantine Generals</h4>
                        <p>
                            This is known as the "Byzantine Generals Problem" - how do distributed parties
                            coordinate when some might be dishonest or unreliable? In a network, some nodes
                            might be malicious, offline, or simply mistaken.
                        </p>

                        <div class="demo-container">
                            <h4>Interactive Demo: Network Consensus</h4>

                            <div class="consensus-grid">
                                <div class="node honest" id="node1">
                                    <div>Node 1</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote1">?</span></div>
                                </div>
                                <div class="node honest" id="node2">
                                    <div>Node 2</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote2">?</span></div>
                                </div>
                                <div class="node honest" id="node3">
                                    <div>Node 3</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote3">?</span></div>
                                </div>
                                <div class="node dishonest" id="node4">
                                    <div>Node 4</div>
                                    <div>Status: Dishonest</div>
                                    <div>Vote: <span id="vote4">?</span></div>
                                </div>
                                <div class="node honest" id="node5">
                                    <div>Node 5</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote5">?</span></div>
                                </div>
                            </div>

                            <div style="margin: 20px 0;">
                                <p><strong>Scenario:</strong> Alice wants to send 1 BTC to Bob. Nodes must agree this transaction is valid.</p>
                                <button type="button" class="btn" onclick="simulateConsensus()">Simulate Consensus Vote</button>
                            </div>

                            <div id="consensus-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>

                    <div class="solution-box">
                        <h4>The Insight: Majority Rule with Proof</h4>
                        <p>
                            The solution is majority rule - but not just any majority. We need a way to prevent
                            someone from creating fake identities to outvote honest participants. Bitcoin solves
                            this with "Proof of Work" - you must prove you've done computational work to vote.
                        </p>
                    </div>

                    <button class="btn btn-success" onclick="completePrinciples()">I Understand These Core Problems</button>
                </div>
            </div>
        </section>

        <!-- Navigation -->
        <nav class="module-navigation">
            <a href="module-1.html" class="nav-btn nav-btn-secondary">← Back to Module 1</a>
            <a href="/paths/principled/stage-2/" class="nav-btn">Continue to Stage 2 →</a>
        </nav>
    </div>

    <script src="/curriculum/first-principles/interactions.js"></script>
    <script>
        function togglePrinciple(num) {
            const content = document.getElementById(`content-${num}`);
            const icon = document.getElementById(`icon-${num}`);
            content.classList.toggle('active');
            icon.textContent = content.classList.contains('active') ? '▲' : '▼';
        }

        function attemptDoubleSpend() {
            const result = document.getElementById('double-spend-result');
            const coin2 = document.getElementById('coin2');

            if (coin2) {
                coin2.style.opacity = '1';
                coin2.style.background = '#dc3545';
            }

            setTimeout(() => {
                if (result) {
                    result.innerHTML = `
                        <div class="problem-box">
                            <strong>Attack Failed!</strong><br>
                            Without a shared ledger, Bob and Charlie can't tell if Alice's coin is real or fake.
                            This is why we need a single source of truth that everyone can verify.
                        </div>
                    `;
                }
            }, 1000);
        }

        function simulateConsensus() {
            const votes = ['Accept', 'Accept', 'Accept', 'Reject', 'Accept'];
            const dishonest = [false, false, false, true, false];

            for (let i = 1; i <= 5; i++) {
                const voteElement = document.getElementById(`vote${i}`);
                if (dishonest[i-1]) {
                    voteElement.textContent = 'Reject';
                    voteElement.style.color = '#dc3545';
                } else {
                    voteElement.textContent = 'Accept';
                    voteElement.style.color = '#28a745';
                }
            }

            document.getElementById('consensus-result').innerHTML = `
                <div class="solution-box">
                    <strong>Result:</strong> Transaction ACCEPTED by majority (4/5 nodes)
                    <br><small>Note: Even with one dishonest node, honest majority wins!</small>
                </div>
            `;
        }

        function completePrinciples() {
            const progress = JSON.parse(localStorage.getItem('principled-progress') || '{}');
            if (!progress.completedModules) progress.completedModules = [];
            if (!progress.completedModules.includes('stage-1-module-2')) {
                progress.completedModules.push('stage-1-module-2');
            }
            progress.lastActivity = new Date().toISOString();
            localStorage.setItem('principled-progress', JSON.stringify(progress));

            alert('Excellent! You understand the fundamental problems. Ready for Stage 2?');
            window.location.href = '/paths/principled/stage-2/';
        }
    </script>
</body>
</html>
