<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1.2: Entropy and Corruption | The Principled Path</title>
    <meta name="description" content="Everything decays without constant energy input — including institutions, currencies, and trust.">

    <style>
        :root {
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-bronze: #8B6F47;
            --accent-bronze-light: #A0826D;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(139, 111, 71, 0.2);
            --accent-green: #4caf50;
            --accent-red: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(139, 111, 71, 0.1);
            border: 2px solid var(--accent-bronze);
            border-radius: 0.5rem;
            color: var(--accent-bronze);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .back-button:hover {
            background: rgba(139, 111, 71, 0.2);
            transform: translateX(-3px);
        }

        /* Module Header */
        .module-header {
            text-align: center;
            padding: 3rem 2rem;
            background: radial-gradient(circle at center, rgba(139, 111, 71, 0.15) 0%, transparent 70%);
            border-radius: 1.5rem;
            margin-bottom: 3rem;
        }

        .module-number {
            font-size: 1.2rem;
            color: var(--accent-bronze);
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .module-header h1 {
            font-size: 2.5rem;
            color: var(--accent-bronze);
            margin-bottom: 1rem;
        }

        .module-subtitle {
            font-size: 1.3rem;
            color: var(--text-dim);
            font-style: italic;
        }

        /* Content Sections */
        .content-section {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 2rem 0;
        }

        .content-section h2 {
            color: var(--accent-bronze);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .key-insight {
            background: rgba(139, 111, 71, 0.1);
            border-left: 4px solid var(--accent-bronze);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0.5rem;
        }

        .key-insight-title {
            color: var(--accent-bronze);
            font-weight: 700;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        /* Interactive Demo */
        .demo-section {
            background: var(--secondary-dark);
            border: 3px solid var(--accent-bronze);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-header h3 {
            color: var(--accent-bronze);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .demo-description {
            color: var(--text-dim);
            font-size: 1.05rem;
        }

        .demo-canvas {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .institution-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .institution-card {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .institution-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .institution-name {
            font-weight: 700;
            color: var(--accent-bronze);
            margin-bottom: 0.5rem;
        }

        .integrity-meter {
            margin: 1rem 0;
        }

        .integrity-label {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .integrity-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .integrity-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), #8bc34a);
            transition: all 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: #000;
        }

        .integrity-fill.degraded {
            background: linear-gradient(90deg, #ffaa00, #8B6F47);
        }

        .integrity-fill.corrupted {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }

        .timeline-display {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: center;
        }

        .timeline-year {
            font-size: 2rem;
            color: var(--accent-bronze);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .timeline-description {
            color: var(--text-dim);
            font-size: 1rem;
        }

        .demo-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .demo-button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze));
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 111, 71, 0.4);
        }

        .demo-button.secondary {
            background: rgba(139, 111, 71, 0.2);
            border: 2px solid var(--accent-bronze);
            color: var(--accent-bronze);
        }

        .demo-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .demo-output {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            min-height: 80px;
        }

        .output-message {
            color: var(--text-light);
            font-size: 1.05rem;
            margin: 0.5rem 0;
        }

        .output-warning {
            color: #ffaa00;
            font-weight: 600;
        }

        .output-danger {
            color: var(--accent-red);
            font-weight: 700;
        }

        /* Socratic Questions */
        .socratic-section {
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.1), rgba(139, 111, 71, 0.1));
            border: 2px solid var(--accent-bronze);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .socratic-section h3 {
            color: var(--accent-bronze);
            font-size: 1.6rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .question-card {
            background: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .question-number {
            color: var(--accent-bronze);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .reflection-area {
            width: 100%;
            min-height: 100px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .reflection-area:focus {
            outline: none;
            border-color: var(--accent-bronze);
        }

        /* Navigation Footer */
        .module-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border-radius: 1rem;
        }

        .nav-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze));
            color: white;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 111, 71, 0.4);
        }

        .progress-indicator {
            text-align: center;
            color: var(--text-dim);
        }

        /* Interactive Reflection System */
        .reflection-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid rgba(139, 111, 71, 0.2); padding-bottom: 0.5rem; }
        .reflection-tab { background: transparent; color: var(--text-dim); border: 2px solid rgba(139, 111, 71, 0.3); padding: 0.5rem 1.25rem; border-radius: 8px 8px 0 0; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: all 0.3s ease; }
        .reflection-tab.active { background: linear-gradient(135deg, rgba(139, 111, 71, 0.2), rgba(139, 111, 71, 0.1)); color: var(--accent-bronze); border-color: var(--accent-bronze); }
        .reflection-panel { display: none; padding: 1.5rem; background: rgba(26, 26, 26, 0.8); border-radius: 0 8px 8px 8px; border: 2px solid rgba(139, 111, 71, 0.2); }
        .reflection-panel.active { display: block; }
        .choice-select { width: 100%; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; cursor: pointer; }
        .choice-select:focus { outline: none; border-color: var(--accent-bronze); }
        .feedback-btn { background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze)); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; margin-top: 1rem; transition: all 0.3s ease; }
        .feedback-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(139, 111, 71, 0.4); }
        .feedback-box { margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.5rem; border: 2px solid; display: none; }
        .feedback-box.positive { background: rgba(76, 175, 80, 0.1); border-color: #4caf50; color: var(--text-light); }
        .feedback-box.hint { background: rgba(255, 152, 0, 0.1); border-color: #8B6F47; color: var(--text-light); }
        .feedback-box h5 { margin-top: 0; margin-bottom: 0.5rem; color: inherit; }
        .checklist-reflection { display: flex; flex-direction: column; gap: 0.75rem; }
        .checkbox-label { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.5rem; cursor: pointer; transition: background 0.2s ease; }
        .checkbox-label:hover { background: rgba(0, 0, 0, 0.5); }
        .checkbox-label input[type="checkbox"] { width: 1.25rem; height: 1.25rem; cursor: pointer; }

        /* Responsive */
        @media (max-width: 768px) {
            .institution-display {
                grid-template-columns: 1fr;
            }

            .demo-controls {
                grid-template-columns: 1fr;
            }

            .module-header h1 {
                font-size: 2rem;
            }

            .module-nav {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="/paths/principled/stage-1/" class="back-button">
                ← Back to Stage 1
            </a>
        </div>

        <!-- Module Header -->
        <header class="module-header">
            <div class="module-number">Stage 1 • Module 2</div>
            <h1>Entropy and Corruption</h1>
            <p class="module-subtitle">Everything decays without constant energy input</p>
        </header>

        <!-- Introduction -->
        <section class="content-section">
            <h2>The Second Law of Thermodynamics</h2>
            <p>
                The Second Law of Thermodynamics states that <strong>entropy always increases</strong> in closed systems.
                Order decays into disorder. Structures crumble. Organization dissolves into chaos.
            </p>
            <p>
                This isn't pessimism — it's physics. A sandcastle erodes. A car rusts. A building crumbles.
                Maintaining order requires <strong>constant energy input</strong>. Without it, decay is inevitable.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">🌪️ Core Principle</div>
                <p>
                    Institutions, like all systems, tend toward disorder. Corruption isn't a moral failure — it's the thermodynamic default.
                    Without constant vigilance and energy input (accountability, transparency, enforcement), institutions decay.
                </p>
            </div>
        </section>

        <!-- The Problem -->
        <section class="content-section">
            <h2>Institutional Decay is Inevitable</h2>
            <p>
                A central bank begins with a noble mission: stabilize prices, ensure full employment. But over time,
                without external accountability, incentives drift. Power concentrates. Rules bend. The institution serves itself.
            </p>
            <p>
                This happens everywhere: governments, corporations, universities, even charities. The pattern is universal:
            </p>
            <p>
                <strong>Year 0:</strong> Pure mission, strong principles, public trust.<br>
                <strong>Year 20:</strong> Internal politics emerge, rules stretch, minor compromises.<br>
                <strong>Year 50:</strong> Original mission forgotten, self-preservation dominates, corruption normalized.<br>
                <strong>Year 100:</strong> Complete capture by special interests. The institution exists to perpetuate itself.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">🏛️ The Iron Law of Institutions</div>
                <p>
                    People in institutions prioritize the institution's survival over its stated mission.
                    The longer an institution exists without external constraints, the more it serves insiders rather than outsiders.
                </p>
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="demo-section">
            <div class="demo-header">
                <h3>🎮 Interactive Lab: Institutional Decay Simulator</h3>
                <p class="demo-description">
                    Watch three institutions decay over time without accountability. See how entropy affects trust,
                    rules, and integrity as years pass.
                </p>
            </div>

            <div class="demo-canvas">
                <div class="timeline-display">
                    <div class="timeline-year" id="yearDisplay">Year 0</div>
                    <div class="timeline-description" id="eraDescription">Founding Era: Institutions newly established with strong principles</div>
                </div>

                <div class="institution-display">
                    <div class="institution-card">
                        <div class="institution-icon">🏦</div>
                        <div class="institution-name">Central Bank</div>
                        <div class="integrity-meter">
                            <div class="integrity-label">Integrity</div>
                            <div class="integrity-bar">
                                <div class="integrity-fill" id="bankIntegrity" style="width: 100%;">100%</div>
                            </div>
                        </div>
                    </div>

                    <div class="institution-card">
                        <div class="institution-icon">⚖️</div>
                        <div class="institution-name">Judiciary</div>
                        <div class="integrity-meter">
                            <div class="integrity-label">Integrity</div>
                            <div class="integrity-bar">
                                <div class="integrity-fill" id="judiciaryIntegrity" style="width: 100%;">100%</div>
                            </div>
                        </div>
                    </div>

                    <div class="institution-card">
                        <div class="institution-icon">📜</div>
                        <div class="institution-name">Legislature</div>
                        <div class="integrity-meter">
                            <div class="integrity-label">Integrity</div>
                            <div class="integrity-bar">
                                <div class="integrity-fill" id="legislatureIntegrity" style="width: 100%;">100%</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="demo-controls">
                    <button class="demo-button" onclick="advanceTime()">
                        ⏩ Advance 25 Years
                    </button>
                    <button class="demo-button secondary" onclick="resetSimulation()">
                        🔄 Reset Simulation
                    </button>
                    <button class="demo-button" onclick="applyAccountability()">
                        🔍 Apply External Accountability
                    </button>
                    <button class="demo-button secondary" onclick="autoplay()" id="autoplayBtn">
                        ▶️ Auto-Run Simulation
                    </button>
                </div>

                <div class="demo-output" id="demoOutput">
                    <div class="output-message">Click "Advance 25 Years" to see entropy in action...</div>
                </div>
            </div>

            <div class="key-insight">
                <div class="key-insight-title">💡 What You're Seeing</div>
                <p>
                    Without external accountability, institutions inevitably decay. Integrity drops as entropy increases.
                    Applying accountability (transparency, immutable rules, public verification) slows or reverses decay.
                    Bitcoin achieves permanent accountability through code — no human discretion required.
                </p>
            </div>
        </section>

        <!-- Bitcoin's Solution -->
        <section class="content-section">
            <h2>Bitcoin: Entropy-Resistant Money</h2>
            <p>
                Bitcoin doesn't fight entropy with human vigilance. It encodes resistance into the protocol itself.
                The rules are <strong>immutable</strong>. No central bank can inflate supply. No institution can override consensus.
            </p>
            <p>
                Every 10 minutes, thousands of nodes verify compliance. If you violate the rules, your transaction is rejected.
                There is no appeals process, no emergency powers, no "this time is different."
            </p>
            <p>
                The system maintains order not through energy-intensive human oversight, but through elegant incentive alignment
                and cryptographic proof. Entropy cannot corrupt what humans cannot change.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">₿ Bitcoin's Elegant Solution</div>
                <p>
                    Bitcoin replaces corruptible institutions with incorruptible code. The Second Law still applies,
                    but the system is designed so that maintaining integrity costs less energy than breaking it.
                    Proof-of-work makes honesty the thermodynamically efficient path.
                </p>
            </div>
        </section>

        <!-- Socratic Questions -->
        <section class="socratic-section">
            <h3>💬 Reflect on What You've Learned</h3>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 2rem;">
                Test your understanding with interactive reflections. Get immediate feedback on your thinking.
            </p>

            <!-- Question 1: Why Trust Institutions (Quick/Deep) -->
            <div class="question-card">
                <div class="question-number">Question 1</div>
                <div class="question-text">
                    If entropy guarantees that institutions decay over time, why do we keep trusting human-run institutions with our money?
                </div>

                <div class="reflection-tabs" role="tablist" aria-label="Reflection depth options">
                    <button class="reflection-tab active" role="tab" aria-selected="true" aria-controls="q1-quick" onclick="switchReflectionTab(1, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" aria-controls="q1-deep" onclick="switchReflectionTab(1, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q1-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem;">What's the main reason we continue using corruptible institutions?</p>
                    <select class="choice-select" id="trust-choice" onchange="checkTrust()">
                        <option value="">— Select One —</option>
                        <option value="inertia">Inertia and path dependence - We're stuck with legacy systems</option>
                        <option value="no-alternative">No credible alternatives existed until Bitcoin</option>
                        <option value="hope">Hope that we can fix institutions through regulation</option>
                        <option value="unaware">Most people don't understand entropy's inevitability</option>
                    </select>
                    <div id="trust-feedback" class="feedback-box"></div>
                </div>

                <div id="q1-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Design a truly entropy-resistant monetary system. What properties must it have?</p>
                    <textarea class="reflection-area" id="trust-deep" placeholder="Think about: How can you prevent human discretion? What makes rules unchangeable? How do you eliminate single points of failure? Consider the role of cryptography, decentralization, and algorithmic enforcement..." style="min-height: 120px;" oninput="saveDeepReflection(1, this.value)"></textarea>
                    <p style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        💡 Hint: Bitcoin's design: <strong>No human discretion</strong> (algorithmic rules), <strong>Decentralized verification</strong> (thousands of nodes), <strong>Transparent code</strong> (anyone can audit), <strong>Costly to change</strong> (consensus required).
                    </p>
                </div>
            </div>

            <!-- Question 2: Eliminating Corruption (Quick/Deep) -->
            <div class="question-card">
                <div class="question-number">Question 2</div>
                <div class="question-text">
                    Can corruption ever be permanently eliminated from human institutions? What role does discretion play?
                </div>

                <div class="reflection-tabs" role="tablist" aria-label="Reflection depth options">
                    <button class="reflection-tab active" role="tab" aria-selected="true" aria-controls="q2-quick" onclick="switchReflectionTab(2, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" aria-controls="q2-deep" onclick="switchReflectionTab(2, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q2-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem;">Can human institutions eliminate corruption permanently?</p>
                    <select class="choice-select" id="corruption-choice" onchange="checkCorruption()">
                        <option value="">— Select One —</option>
                        <option value="yes">Yes - With strong laws and oversight</option>
                        <option value="no">No - Human discretion always creates corruption risk</option>
                        <option value="code-only">Only by replacing discretion with algorithmic rules (code)</option>
                        <option value="minimize">No, but we can minimize it through transparency</option>
                    </select>
                    <div id="corruption-feedback" class="feedback-box"></div>
                </div>

                <div id="q2-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Explain why discretion (human judgment) is the source of corruption:</p>
                    <textarea class="reflection-area" id="corruption-deep" placeholder="Consider: Every instance of corruption requires someone with power to make an exception. Judges, politicians, central bankers all have discretion. What happens when rules are algorithmic and unchangeable?" style="min-height: 120px;" oninput="saveDeepReflection(2, this.value)"></textarea>
                    <p style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        💡 Hint: <strong>Discretion = Corruption surface area.</strong> Bitcoin eliminates discretion: No one can print extra bitcoins, freeze accounts, or change the rules. Code executes identically for everyone.
                    </p>
                </div>
            </div>

            <!-- Question 3: Bitcoin's Entropy Resistance (Checklist) -->
            <div class="question-card">
                <div class="question-number">Question 3</div>
                <div class="question-text">
                    How does Bitcoin's decentralized design resist entropy better than centralized institutions?
                </div>
                <p style="font-size: 0.95rem; color: var(--text-dim); margin: 1rem 0;">
                    Select all the features that help Bitcoin resist institutional decay:
                </p>

                <div class="checklist-reflection">
                    <label class="checkbox-label">
                        <input type="checkbox" id="entropy-nodes" onchange="updateEntropyFeedback()">
                        <span><strong>Thousands of independent nodes</strong> - No single point of failure</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="entropy-consensus" onchange="updateEntropyFeedback()">
                        <span><strong>Consensus rules</strong> - Changes require overwhelming agreement</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="entropy-transparent" onchange="updateEntropyFeedback()">
                        <span><strong>Transparent code</strong> - Anyone can audit and verify behavior</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="entropy-no-discretion" onchange="updateEntropyFeedback()">
                        <span><strong>No human discretion</strong> - Algorithms execute identically for everyone</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="entropy-pow" onchange="updateEntropyFeedback()">
                        <span><strong>Proof-of-work</strong> - Makes attacks thermodynamically expensive</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="entropy-immutable" onchange="updateEntropyFeedback()">
                        <span><strong>Immutable ledger</strong> - History cannot be rewritten</span>
                    </label>
                </div>
                <div id="entropy-feedback" class="feedback-box"></div>
            </div>
        </section>

        <!-- Module Navigation -->
        <nav class="module-nav">
            <a href="/paths/principled/stage-1/module-1.html" class="nav-link">
                ← Previous: Conservation of Value
            </a>
            <div class="progress-indicator">
                Module 2 of 3 • Stage 1 of 5
            </div>
            <a href="/paths/principled/stage-1/module-3.html" class="nav-link">
                Next: The Role of Rules →
            </a>
        </nav>
    </div>

    <script>
        // Simulation State
        let simState = {
            year: 0,
            bankIntegrity: 100,
            judiciaryIntegrity: 100,
            legislatureIntegrity: 100,
            accountabilityApplied: false,
            autoplayInterval: null
        };

        // Advance time by 25 years
        function advanceTime() {
            simState.year += 25;

            // Entropy decay rates (exponential)
            const decayFactor = simState.accountabilityApplied ? 0.5 : 1.0;

            simState.bankIntegrity = Math.max(0, simState.bankIntegrity - (8 * decayFactor));
            simState.judiciaryIntegrity = Math.max(0, simState.judiciaryIntegrity - (6 * decayFactor));
            simState.legislatureIntegrity = Math.max(0, simState.legislatureIntegrity - (10 * decayFactor));

            updateDisplay();
            analyzeState();
        }

        // Apply external accountability
        function applyAccountability() {
            if (simState.accountabilityApplied) {
                return;
            }

            simState.accountabilityApplied = true;

            // Restore some integrity
            simState.bankIntegrity = Math.min(100, simState.bankIntegrity + 20);
            simState.judiciaryIntegrity = Math.min(100, simState.judiciaryIntegrity + 20);
            simState.legislatureIntegrity = Math.min(100, simState.legislatureIntegrity + 20);

            updateDisplay();

            const output = document.getElementById('demoOutput');
            output.innerHTML = `
                <div class="output-message" style="color: var(--accent-green);">
                    ✅ External accountability mechanisms applied!
                </div>
                <div class="output-message">
                    Transparency requirements, public audits, and immutable rules now slow decay.
                    Notice how integrity stabilizes but still faces entropy pressure.
                </div>
            `;
        }

        // Reset simulation
        function resetSimulation() {
            simState = {
                year: 0,
                bankIntegrity: 100,
                judiciaryIntegrity: 100,
                legislatureIntegrity: 100,
                accountabilityApplied: false,
                autoplayInterval: null
            };

            if (simState.autoplayInterval) {
                clearInterval(simState.autoplayInterval);
                document.getElementById('autoplayBtn').textContent = '▶️ Auto-Run Simulation';
            }

            updateDisplay();
            document.getElementById('demoOutput').innerHTML = `
                <div class="output-message">Simulation reset. Click "Advance 25 Years" to see entropy in action...</div>
            `;
        }

        // Auto-run simulation
        function autoplay() {
            if (simState.autoplayInterval) {
                clearInterval(simState.autoplayInterval);
                simState.autoplayInterval = null;
                document.getElementById('autoplayBtn').textContent = '▶️ Auto-Run Simulation';
            } else {
                simState.autoplayInterval = setInterval(() => {
                    if (simState.year >= 200) {
                        clearInterval(simState.autoplayInterval);
                        simState.autoplayInterval = null;
                        document.getElementById('autoplayBtn').textContent = '▶️ Auto-Run Simulation';
                        return;
                    }
                    advanceTime();
                }, 1500);
                document.getElementById('autoplayBtn').textContent = '⏸️ Pause Simulation';
            }
        }

        // Update display
        function updateDisplay() {
            // Update year
            document.getElementById('yearDisplay').textContent = `Year ${simState.year}`;

            // Update era description
            let eraDesc = '';
            if (simState.year === 0) {
                eraDesc = 'Founding Era: Institutions newly established with strong principles';
            } else if (simState.year <= 50) {
                eraDesc = 'Early Period: Minor compromises, internal politics emerging';
            } else if (simState.year <= 100) {
                eraDesc = 'Mature Period: Mission drift accelerating, self-preservation dominates';
            } else if (simState.year <= 150) {
                eraDesc = 'Decline Period: Original purpose obscured, corruption normalized';
            } else {
                eraDesc = 'Capture Period: Institutions serve insiders exclusively';
            }
            document.getElementById('eraDescription').textContent = eraDesc;

            // Update integrity meters
            updateMeter('bankIntegrity', simState.bankIntegrity);
            updateMeter('judiciaryIntegrity', simState.judiciaryIntegrity);
            updateMeter('legislatureIntegrity', simState.legislatureIntegrity);
        }

        function updateMeter(id, value) {
            const meter = document.getElementById(id);
            meter.style.width = value + '%';
            meter.textContent = Math.round(value) + '%';

            // Update color based on integrity
            meter.className = 'integrity-fill';
            if (value < 40) {
                meter.classList.add('corrupted');
            } else if (value < 70) {
                meter.classList.add('degraded');
            }
        }

        function analyzeState() {
            const output = document.getElementById('demoOutput');
            const avgIntegrity = (simState.bankIntegrity + simState.judiciaryIntegrity + simState.legislatureIntegrity) / 3;

            let message = '';

            if (avgIntegrity > 80) {
                message = `
                    <div class="output-message" style="color: var(--accent-green);">
                        ✅ Institutions remain largely trustworthy
                    </div>
                    <div class="output-message">
                        Year ${simState.year}: Average integrity ${Math.round(avgIntegrity)}%.
                        Early signs of entropy, but core mission intact.
                    </div>
                `;
            } else if (avgIntegrity > 50) {
                message = `
                    <div class="output-warning">
                        ⚠️ Significant institutional decay detected
                    </div>
                    <div class="output-message">
                        Year ${simState.year}: Average integrity ${Math.round(avgIntegrity)}%.
                        Rules bending, special interests gaining influence, public trust eroding.
                    </div>
                `;
            } else if (avgIntegrity > 20) {
                message = `
                    <div class="output-danger">
                        🚨 Severe institutional corruption
                    </div>
                    <div class="output-message">
                        Year ${simState.year}: Average integrity ${Math.round(avgIntegrity)}%.
                        Institutions serve insiders, original mission abandoned, entropy winning.
                    </div>
                `;
            } else {
                message = `
                    <div class="output-danger">
                        💀 Complete institutional capture
                    </div>
                    <div class="output-message">
                        Year ${simState.year}: Average integrity ${Math.round(avgIntegrity)}%.
                        Total collapse. Institutions exist only to perpetuate themselves. Reform impossible.
                    </div>
                `;
            }

            output.innerHTML = message;
        }

        // Interactive Reflection System
        const STORAGE_KEY = 'principled_stage1_module2_reflections';

        // Tab switching
        function switchReflectionTab(questionNum, level, event) {
            document.querySelectorAll(`#q${questionNum}-quick, #q${questionNum}-deep`).forEach(panel => {
                panel.classList.remove('active');
                panel.setAttribute('aria-hidden', 'true');
            });
            event.target.parentElement.querySelectorAll('.reflection-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });
            const panel = document.getElementById(`q${questionNum}-${level}`);
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');
            event.target.classList.add('active');
            event.target.setAttribute('aria-selected', 'true');
        }

        // Q1 - Why Trust Institutions
        function checkTrust() {
            const choice = document.getElementById('trust-choice').value;
            const feedbackDiv = document.getElementById('trust-feedback');

            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (choice === 'no-alternative') {
                feedback = `<h5>✓ Correct!</h5><p><strong>Before Bitcoin, there was no credible alternative</strong> to centralized institutions. Gold was too cumbersome for digital payments. Barter doesn't scale. Fiat was the only option despite its inevitable decay.<br><br>Bitcoin is the first <em>trustless</em> alternative: No central authority, no human discretion, no single point of failure. It's not perfect, but it's the first entropy-resistant money humanity has ever had.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (choice === 'inertia') {
                feedback = `<h5>💡 Partially Correct</h5><p>Inertia plays a role, but it's not the full story. <strong>There genuinely were no alternatives</strong> until Bitcoin. Gold doesn't work digitally. Barter doesn't scale. Private currencies get shut down (e.g., Liberty Reserve, e-gold).<br><br>We weren't just "stuck" with institutions — we had <em>no other choice</em>. Bitcoin changed that by creating trustless, decentralized money for the first time.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'hope') {
                feedback = `<h5>⚠️ Optimistic But Naive</h5><p>Regulation cannot fix entropy. <strong>Discretion = Corruption.</strong> Regulators are human. They capture, decay, and serve special interests over time. Adding more oversight just adds more layers to corrupt.<br><br>Bitcoin's insight: Don't try to fix human institutions. <em>Replace discretion with code.</em> Algorithmic rules can't be bribed, lobbied, or corrupted.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'unaware') {
                feedback = `<h5>💡 True, But Not the Full Answer</h5><p>Most people <em>don't</em> understand entropy's inevitability. But even those who do had no alternative until Bitcoin. Awareness without options changes nothing.<br><br>Bitcoin is the first system that offers a real choice: <strong>Algorithmic enforcement</strong> vs. <strong>Human discretion</strong>. Code vs. corruption. Now we have an option.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveReflection('q1-quick', choice);
        }

        // Q2 - Eliminating Corruption
        function checkCorruption() {
            const choice = document.getElementById('corruption-choice').value;
            const feedbackDiv = document.getElementById('corruption-feedback');

            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (choice === 'code-only') {
                feedback = `<h5>✓ Exactly Right!</h5><p><strong>Corruption requires discretion.</strong> If no one has the power to make exceptions, corruption is impossible. Bitcoin's genius: <em>Replace human judgment with algorithmic rules.</em><br><br>No one can print extra bitcoins. No one can freeze your account. No one can change the rules mid-game. The code executes identically for everyone, forever. <strong>No discretion = No corruption.</strong></p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (choice === 'no') {
                feedback = `<h5>💡 Correct Diagnosis, But Incomplete</h5><p>You're right that human discretion creates corruption risk. But there <em>is</em> a solution: <strong>Remove the humans from the loop.</strong><br><br>Bitcoin doesn't rely on "better people" or "better laws." It uses <strong>cryptography and algorithms</strong> to eliminate discretion entirely. Code can't be bribed. Math can't be lobbied. Thermodynamics can't be corrupted.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'yes') {
                feedback = `<h5>⚠️ Too Optimistic</h5><p>Laws and oversight are <em>run by humans</em>. Humans with discretion. And <strong>discretion = corruption surface area.</strong> No matter how strong the laws, they require interpretation, enforcement, and exceptions.<br><br>Bitcoin's approach: Don't trust humans to be incorruptible. <em>Eliminate discretion with code.</em> Algorithmic rules execute identically for everyone, with zero exceptions.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'minimize') {
                feedback = `<h5>💡 Pragmatic, But Not Radical Enough</h5><p>Transparency helps, but it's not enough. <strong>Discretion is the problem.</strong> Even transparent discretion creates corruption (e.g., lobbying is legal bribery in full view).<br><br>Bitcoin eliminates discretion <em>entirely</em>: No one can print money, freeze accounts, or change rules. The system is transparent <em>and</em> unchangeable. That's the breakthrough.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveReflection('q2-quick', choice);
        }

        // Q3 - Entropy Resistance Checklist
        function updateEntropyFeedback() {
            const nodes = document.getElementById('entropy-nodes').checked;
            const consensus = document.getElementById('entropy-consensus').checked;
            const transparent = document.getElementById('entropy-transparent').checked;
            const noDiscretion = document.getElementById('entropy-no-discretion').checked;
            const pow = document.getElementById('entropy-pow').checked;
            const immutable = document.getElementById('entropy-immutable').checked;

            const count = [nodes, consensus, transparent, noDiscretion, pow, immutable].filter(Boolean).length;
            const feedbackDiv = document.getElementById('entropy-feedback');

            if (count === 0) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (count >= 5) {
                feedback = `<h5>✓ Comprehensive Understanding!</h5><p>You identified <strong>${count} of 6</strong> entropy-resistance features. Bitcoin's design systematically eliminates single points of failure:<br><br>`;
                if (nodes) feedback += `<strong>Thousands of nodes:</strong> No CEO, no board, no single server to corrupt<br>`;
                if (consensus) feedback += `<strong>Consensus rules:</strong> Changes require overwhelming agreement (prevents capture)<br>`;
                if (transparent) feedback += `<strong>Transparent code:</strong> Anyone can audit; no hidden mechanisms<br>`;
                if (noDiscretion) feedback += `<strong>No discretion:</strong> Code executes identically for everyone (no exceptions)<br>`;
                if (pow) feedback += `<strong>Proof-of-work:</strong> Attacks cost real energy (thermodynamic security)<br>`;
                if (immutable) feedback += `<strong>Immutable ledger:</strong> History can't be rewritten (prevents revisionism)<br>`;
                feedback += `<br><em>Together, these features make Bitcoin resistant to the institutional decay that corrupts centralized systems.</em></p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (count >= 3) {
                feedback = `<h5>💡 Good Start</h5><p>You identified <strong>${count}</strong> features. Bitcoin combines <em>all six</em> to create entropy resistance:<br><br>1. Decentralization (nodes)<br>2. Consensus (hard to change)<br>3. Transparency (open source)<br>4. No discretion (algorithmic)<br>5. Energy cost (proof-of-work)<br>6. Immutability (permanent history)<br><br>Each one addresses a different failure mode of centralized institutions.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedback = `<h5>💡 Partial Understanding</h5><p>You identified <strong>${count}</strong>, but Bitcoin's entropy resistance comes from <em>all six features working together</em>. Try selecting more to see how they complement each other.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveCheckboxes();
        }

        // Deep Reflection Auto-save
        function saveDeepReflection(questionNum, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[`q${questionNum}-deep`] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Save checkbox states
        function saveCheckboxes() {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections['entropy-nodes'] = document.getElementById('entropy-nodes').checked;
            reflections['entropy-consensus'] = document.getElementById('entropy-consensus').checked;
            reflections['entropy-transparent'] = document.getElementById('entropy-transparent').checked;
            reflections['entropy-no-discretion'] = document.getElementById('entropy-no-discretion').checked;
            reflections['entropy-pow'] = document.getElementById('entropy-pow').checked;
            reflections['entropy-immutable'] = document.getElementById('entropy-immutable').checked;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Save dropdown choices
        function saveReflection(key, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[key] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Load saved reflections
        function loadReflections() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const reflections = JSON.parse(saved);

                // Q1
                if (reflections['q1-quick']) document.getElementById('trust-choice').value = reflections['q1-quick'];
                if (reflections['q1-deep']) document.getElementById('trust-deep').value = reflections['q1-deep'];

                // Q2
                if (reflections['q2-quick']) document.getElementById('corruption-choice').value = reflections['q2-quick'];
                if (reflections['q2-deep']) document.getElementById('corruption-deep').value = reflections['q2-deep'];

                // Q3 checkboxes
                if (reflections['entropy-nodes']) document.getElementById('entropy-nodes').checked = true;
                if (reflections['entropy-consensus']) document.getElementById('entropy-consensus').checked = true;
                if (reflections['entropy-transparent']) document.getElementById('entropy-transparent').checked = true;
                if (reflections['entropy-no-discretion']) document.getElementById('entropy-no-discretion').checked = true;
                if (reflections['entropy-pow']) document.getElementById('entropy-pow').checked = true;
                if (reflections['entropy-immutable']) document.getElementById('entropy-immutable').checked = true;

                // Trigger feedback display if selections exist
                if (reflections['q1-quick']) checkTrust();
                if (reflections['q2-quick']) checkCorruption();
                updateEntropyFeedback();
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadReflections();

            // Mark module as visited
            let progress = JSON.parse(localStorage.getItem('principled_stage1_progress') || '[]');
            if (!progress.includes('module-2')) {
                progress.push('module-2');
                localStorage.setItem('principled_stage1_progress', JSON.stringify(progress));
            }
        });
    </script>
</body>
</html>
