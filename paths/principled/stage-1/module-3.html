<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1.3: The Role of Rules | The Principled Path</title>
    <meta name="description" content="Rules either constrain power or enable it. Without enforcement, rules become suggestions.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-gold: #DAA520;
            --accent-bronze: #8B6F47;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(218, 165, 32, 0.2);
            --accent-green: #4caf50;
            --accent-red: #ef4444;
            --accent-blue: #2196f3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(218, 165, 32, 0.1);
            border: 2px solid var(--accent-gold);
            border-radius: 0.5rem;
            color: var(--accent-gold);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .back-button:hover {
            background: rgba(218, 165, 32, 0.2);
            transform: translateX(-3px);
        }

        /* Module Header */
        .module-header {
            text-align: center;
            padding: 3rem 2rem;
            background: radial-gradient(circle at center, rgba(218, 165, 32, 0.15) 0%, transparent 70%);
            border-radius: 1.5rem;
            margin-bottom: 3rem;
        }

        .module-number {
            font-size: 1.2rem;
            color: var(--accent-gold);
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .module-header h1 {
            font-size: 2.5rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .module-subtitle {
            font-size: 1.3rem;
            color: var(--text-dim);
            font-style: italic;
        }

        /* Content Sections */
        .content-section {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 2rem 0;
        }

        .content-section h2 {
            color: var(--accent-gold);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .key-insight {
            background: rgba(218, 165, 32, 0.1);
            border-left: 4px solid var(--accent-gold);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0.5rem;
        }

        .key-insight-title {
            color: var(--accent-gold);
            font-weight: 700;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        /* Interactive Demo */
        .demo-section {
            background: var(--secondary-dark);
            border: 3px solid var(--accent-gold);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-header h3 {
            color: var(--accent-gold);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .demo-description {
            color: var(--text-dim);
            font-size: 1.05rem;
        }

        .demo-canvas {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .system-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .system-card {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
        }

        .system-card h4 {
            color: var(--accent-gold);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .system-card.code-based {
            border-color: var(--accent-green);
        }

        .system-card.discretion-based {
            border-color: var(--accent-red);
        }

        .rule-display {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .rule-text {
            color: var(--text-light);
            font-size: 1rem;
            margin-bottom: 1rem;
            font-family: 'Courier New', monospace;
        }

        .enforcement-meter {
            margin: 1rem 0;
        }

        .enforcement-label {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .enforcement-bar {
            width: 100%;
            height: 25px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .enforcement-fill {
            height: 100%;
            transition: all 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .enforcement-fill.code {
            background: linear-gradient(90deg, var(--accent-green), #8bc34a);
            color: #000;
        }

        .enforcement-fill.discretion {
            background: linear-gradient(90deg, #ffaa00, #ff9800);
            color: #000;
        }

        .enforcement-fill.failed {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
        }

        .violation-tracker {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .violation-count {
            font-size: 2rem;
            color: var(--accent-gold);
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .violation-label {
            text-align: center;
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .demo-controls {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .demo-button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-bronze));
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(218, 165, 32, 0.4);
        }

        .demo-button.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .demo-button.success {
            background: linear-gradient(135deg, var(--accent-green), #8bc34a);
        }

        .demo-button.secondary {
            background: rgba(218, 165, 32, 0.2);
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
        }

        .demo-output {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            min-height: 80px;
        }

        .output-message {
            color: var(--text-light);
            font-size: 1.05rem;
            margin: 0.5rem 0;
        }

        .output-success {
            color: var(--accent-green);
            font-weight: 600;
        }

        .output-danger {
            color: var(--accent-red);
            font-weight: 700;
        }

        /* Socratic Questions */
        .socratic-section {
            background: linear-gradient(135deg, rgba(218, 165, 32, 0.1), rgba(139, 111, 71, 0.1));
            border: 2px solid var(--accent-gold);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .socratic-section h3 {
            color: var(--accent-gold);
            font-size: 1.6rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .question-card {
            background: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .question-number {
            color: var(--accent-gold);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .reflection-area {
            width: 100%;
            min-height: 100px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .reflection-area:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        /* Navigation Footer */
        .module-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border-radius: 1rem;
        }

        .nav-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-bronze));
            color: white;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(218, 165, 32, 0.4);
        }

        .progress-indicator {
            text-align: center;
            color: var(--text-dim);
        }

        /* Interactive Reflection System */
        .reflection-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 2px solid rgba(218, 165, 32, 0.2); padding-bottom: 0.5rem; }
        .reflection-tab { background: transparent; color: var(--text-dim); border: 2px solid rgba(218, 165, 32, 0.3); padding: 0.5rem 1.25rem; border-radius: 8px 8px 0 0; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: all 0.3s ease; }
        .reflection-tab.active { background: linear-gradient(135deg, rgba(218, 165, 32, 0.2), rgba(139, 111, 71, 0.1)); color: var(--accent-gold); border-color: var(--accent-gold); }
        .reflection-panel { display: none; padding: 1.5rem; background: rgba(26, 26, 26, 0.8); border-radius: 0 8px 8px 8px; border: 2px solid rgba(218, 165, 32, 0.2); }
        .reflection-panel.active { display: block; }
        .choice-select { width: 100%; padding: 1rem; background: rgba(0, 0, 0, 0.3); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; cursor: pointer; }
        .choice-select:focus { outline: none; border-color: var(--accent-gold); }
        .feedback-btn { background: linear-gradient(135deg, var(--accent-gold), var(--accent-bronze)); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; margin-top: 1rem; transition: all 0.3s ease; }
        .feedback-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(218, 165, 32, 0.4); }
        .feedback-box { margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.5rem; border: 2px solid; display: none; }
        .feedback-box.positive { background: rgba(76, 175, 80, 0.1); border-color: #4caf50; color: var(--text-light); }
        .feedback-box.hint { background: rgba(255, 152, 0, 0.1); border-color: #ff9800; color: var(--text-light); }
        .feedback-box h5 { margin-top: 0; margin-bottom: 0.5rem; color: inherit; }
        .checklist-reflection { display: flex; flex-direction: column; gap: 0.75rem; }
        .checkbox-label { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.5rem; cursor: pointer; transition: background 0.2s ease; }
        .checkbox-label:hover { background: rgba(0, 0, 0, 0.5); }
        .checkbox-label input[type="checkbox"] { width: 1.25rem; height: 1.25rem; cursor: pointer; }

        /* Responsive */
        @media (max-width: 768px) {
            .system-comparison {
                grid-template-columns: 1fr;
            }

            .module-header h1 {
                font-size: 2rem;
            }

            .module-nav {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="/paths/principled/stage-1/" class="back-button">
                ‚Üê Back to Stage 1
            </a>
        </div>

        <!-- Module Header -->
        <header class="module-header">
            <div class="module-number">Stage 1 ‚Ä¢ Module 3</div>
            <h1>The Role of Rules</h1>
            <p class="module-subtitle">Rules either constrain power or enable it</p>
        </header>

        <!-- Introduction -->
        <section class="content-section">
            <h2>Rules as Constraints vs. Suggestions</h2>
            <p>
                A constitution is just words on paper. A law is just text in a book. A regulation is just ink on a page.
                <strong>Rules only matter if they're enforced.</strong>
            </p>
            <p>
                Throughout history, governments have written beautiful constitutions guaranteeing rights, limiting power,
                and protecting citizens. Yet those same governments routinely violate their own rules when convenient.
            </p>
            <p>
                Why? Because <strong>discretionary enforcement</strong> means rules are optional. If a human can choose whether
                to enforce a rule, then power ‚Äî not principle ‚Äî decides what happens.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">‚öñÔ∏è Core Principle</div>
                <p>
                    Rules without automatic enforcement are merely suggestions. The moment discretion enters the system,
                    rules bend to serve power. True constraints must be <strong>non-negotiable and self-executing</strong>.
                </p>
            </div>
        </section>

        <!-- The Problem -->
        <section class="content-section">
            <h2>Constitutional Drift: When Rules Become Suggestions</h2>
            <p>
                Consider the U.S. Constitution. It explicitly grants Congress the sole power to declare war (Article I, Section 8).
                Yet the U.S. has fought wars in Korea, Vietnam, Iraq, Afghanistan, and countless other conflicts without
                a formal declaration of war.
            </p>
            <p>
                The rule didn't change. The enforcement did. When those in power can reinterpret, suspend, or ignore rules,
                the rules cease to constrain.
            </p>
            <p>
                This pattern repeats everywhere:
            </p>
            <p>
                <strong>Money supply limits:</strong> Central banks ignore their own inflation targets.<br>
                <strong>Spending caps:</strong> Governments declare "emergencies" to bypass budget rules.<br>
                <strong>Term limits:</strong> Leaders amend constitutions to stay in power.<br>
                <strong>Privacy protections:</strong> Surveillance expands through "national security" exceptions.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">üìú The Discretion Trap</div>
                <p>
                    Any rule that includes phrases like "unless necessary," "in times of emergency," or "subject to review"
                    is not a rule ‚Äî it's a guideline that power will ignore whenever convenient. Discretion is the enemy of constraint.
                </p>
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="demo-section">
            <div class="demo-header">
                <h3>üéÆ Interactive Lab: Code vs. Discretion</h3>
                <p class="demo-description">
                    Compare how rules behave when enforced by code (Bitcoin) versus human discretion (fiat systems).
                    Attempt to violate the same rule in both systems.
                </p>
            </div>

            <div class="demo-canvas">
                <div class="rule-display">
                    <div class="rule-text">
                        <strong>RULE:</strong> Maximum supply = 21,000,000 units. No exceptions.
                    </div>
                </div>

                <div class="system-comparison">
                    <!-- Code-Enforced System (Bitcoin) -->
                    <div class="system-card code-based">
                        <h4>üîí Code-Enforced (Bitcoin)</h4>

                        <div class="enforcement-meter">
                            <div class="enforcement-label">Rule Enforcement Strength</div>
                            <div class="enforcement-bar">
                                <div class="enforcement-fill code" id="codeEnforcement" style="width: 100%;">100% - Automatic</div>
                            </div>
                        </div>

                        <div class="violation-tracker">
                            <div class="violation-count" id="codeViolations">0</div>
                            <div class="violation-label">Successful Violations</div>
                        </div>

                        <button class="demo-button danger" onclick="attemptCodeViolation()">
                            üö´ Attempt to Create Extra Bitcoin
                        </button>
                    </div>

                    <!-- Discretion-Based System (Fiat) -->
                    <div class="system-card discretion-based">
                        <h4>üë§ Human Discretion (Fiat)</h4>

                        <div class="enforcement-meter">
                            <div class="enforcement-label">Rule Enforcement Strength</div>
                            <div class="enforcement-bar">
                                <div class="enforcement-fill discretion" id="discretionEnforcement" style="width: 80%;">80% - Discretionary</div>
                            </div>
                        </div>

                        <div class="violation-tracker">
                            <div class="violation-count" id="discretionViolations">0</div>
                            <div class="violation-label">Successful Violations</div>
                        </div>

                        <button class="demo-button danger" onclick="attemptDiscretionViolation()">
                            üíµ Declare Emergency & Print Money
                        </button>
                    </div>
                </div>

                <div class="demo-controls">
                    <button class="demo-button secondary" onclick="resetDemo()">
                        üîÑ Reset Simulation
                    </button>
                </div>

                <div class="demo-output" id="demoOutput">
                    <div class="output-message">Click the buttons above to attempt rule violations in both systems...</div>
                </div>
            </div>

            <div class="key-insight">
                <div class="key-insight-title">üí° What You're Seeing</div>
                <p>
                    Code-enforced rules cannot be violated ‚Äî the system rejects invalid transactions automatically.
                    Discretion-based systems allow violations when authority figures declare "emergencies" or "special circumstances."
                    Bitcoin eliminates discretion entirely: the protocol enforces rules without human judgment.
                </p>
            </div>
        </section>

        <!-- Bitcoin's Solution -->
        <section class="content-section">
            <h2>Bitcoin: Rules Without Rulers</h2>
            <p>
                Bitcoin's 21 million coin limit isn't a guideline. It's not a target. It's not "subject to change in emergencies."
                It's <strong>enforced by mathematics</strong>.
            </p>
            <p>
                Every node on the network runs the same code. If you try to create extra bitcoins, your transaction is rejected.
                There is no appeals process, no committee to petition, no emergency override. The rule is absolute.
            </p>
            <p>
                This is the innovation: <strong>rules enforced by code rather than discretion</strong>. No human can bend Bitcoin's
                rules, because no human controls the consensus. The network validates everything against the protocol automatically.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">‚Çø Bitcoin's Elegant Solution</div>
                <p>
                    Bitcoin replaces "trust the authority to follow the rules" with "trust the math that enforces the rules."
                    Discretion is removed entirely. Rules become constraints rather than suggestions. This is how you build
                    a monetary system that cannot be corrupted: make corruption mathematically impossible.
                </p>
            </div>
        </section>

        <!-- Socratic Questions -->
        <section class="socratic-section">
            <h3>üí¨ Reflect on What You've Learned</h3>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 2rem;">
                Test your understanding with interactive reflections. Get immediate feedback on your thinking.
            </p>

            <!-- Question 1: Constitutional Violations (Quick/Deep) -->
            <div class="question-card">
                <div class="question-number">Question 1</div>
                <div class="question-text">
                    Why do governments write constitutions with strict limits on power, but then routinely violate those limits?
                </div>

                <div class="reflection-tabs" role="tablist" aria-label="Reflection depth options">
                    <button class="reflection-tab active" role="tab" aria-selected="true" aria-controls="q1-quick" onclick="switchReflectionTab(1, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" aria-controls="q1-deep" onclick="switchReflectionTab(1, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q1-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem;">What's the main reason constitutional limits fail?</p>
                    <select class="choice-select" id="constitution-choice" onchange="checkConstitution()">
                        <option value="">‚Äî Select One ‚Äî</option>
                        <option value="paper">Written rules are just paper - enforcement requires power</option>
                        <option value="emergency">Emergencies create exceptions that become permanent</option>
                        <option value="interpretation">Discretionary interpretation allows rule-bending</option>
                        <option value="all">All of the above</option>
                    </select>
                    <div id="constitution-feedback" class="feedback-box"></div>
                </div>

                <div id="q1-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">Explain the difference between written rules and enforced rules:</p>
                    <textarea class="reflection-area" id="constitution-deep" placeholder="Consider: The US Constitution forbids warrantless searches, yet they happen. It requires Congressional war declarations, yet wars are fought without them. What's the gap between text and reality? How does Bitcoin close this gap?" style="min-height: 120px;" oninput="saveDeepReflection(1, this.value)"></textarea>
                    <p style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        üí° Hint: <strong>Rules without enforcement = suggestions.</strong> Bitcoin enforces rules through code, not judges. You can't violate the 21M limit because the network will reject your transaction‚Äîno interpretation needed.
                    </p>
                </div>
            </div>

            <!-- Question 2: Discretionary Enforcement (Quick/Deep) -->
            <div class="question-card">
                <div class="question-number">Question 2</div>
                <div class="question-text">
                    Can a rule that includes discretionary enforcement ever truly constrain power?
                </div>

                <div class="reflection-tabs" role="tablist" aria-label="Reflection depth options">
                    <button class="reflection-tab active" role="tab" aria-selected="true" aria-controls="q2-quick" onclick="switchReflectionTab(2, 'quick', event)">Quick (1 min)</button>
                    <button class="reflection-tab" role="tab" aria-selected="false" aria-controls="q2-deep" onclick="switchReflectionTab(2, 'deep', event)">Deep Dive (5 min)</button>
                </div>

                <div id="q2-quick" class="reflection-panel active" role="tabpanel" aria-hidden="false">
                    <p style="margin-bottom: 1rem;">Does discretionary enforcement constrain power?</p>
                    <select class="choice-select" id="discretion-choice" onchange="checkDiscretion()">
                        <option value="">‚Äî Select One ‚Äî</option>
                        <option value="yes">Yes - Rules still matter even with interpretation</option>
                        <option value="no">No - Whoever has discretion has the real power</option>
                        <option value="depends">Depends on accountability mechanisms</option>
                        <option value="temporary">Yes temporarily, but emergencies erode limits</option>
                    </select>
                    <div id="discretion-feedback" class="feedback-box"></div>
                </div>

                <div id="q2-deep" class="reflection-panel" role="tabpanel" aria-hidden="true">
                    <p style="margin-bottom: 1rem;">What happens when "emergency" becomes the permanent state?</p>
                    <textarea class="reflection-area" id="discretion-deep" placeholder="Think about: The USA PATRIOT Act (2001) was 'temporary' but still active. COVID restrictions became precedent. War on Terror has no end date. How do temporary exceptions become permanent expansion of power?" style="min-height: 120px;" oninput="saveDeepReflection(2, this.value)"></textarea>
                    <p style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        üí° Hint: <strong>Emergency discretion never expires.</strong> Bitcoin has no emergency override. No "special circumstances." The 21M limit applies in prosperity and crisis alike.
                    </p>
                </div>
            </div>

            <!-- Question 3: Changing Bitcoin's Rules (Checklist) -->
            <div class="question-card">
                <div class="question-number">Question 3</div>
                <div class="question-text">
                    What would it take to change Bitcoin's rules (like the 21M limit)?
                </div>
                <p style="font-size: 0.95rem; color: var(--text-dim); margin: 1rem 0;">
                    Select all the requirements for changing Bitcoin's consensus rules:
                </p>

                <div class="checklist-reflection">
                    <label class="checkbox-label">
                        <input type="checkbox" id="change-majority" onchange="updateChangeRules()">
                        <span><strong>Overwhelming consensus</strong> - Thousands of independent node operators must agree</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="change-code" onchange="updateChangeRules()">
                        <span><strong>Code change</strong> - Software update must be written and reviewed</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="change-miners" onchange="updateChangeRules()">
                        <span><strong>Miner adoption</strong> - Miners must run the new software</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="change-users" onchange="updateChangeRules()">
                        <span><strong>Economic majority</strong> - Exchanges, businesses, users must accept the change</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="change-voluntary" onchange="updateChangeRules()">
                        <span><strong>Voluntary upgrade</strong> - No one can be forced; dissenters can fork</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="change-ceo" onchange="updateChangeRules()">
                        <span><strong>CEO approval</strong> - Bitcoin's CEO must sign off</span>
                    </label>
                </div>
                <div id="change-rules-feedback" class="feedback-box"></div>
            </div>
        </section>

        <!-- Module Navigation -->
        <nav class="module-nav">
            <a href="/paths/principled/stage-1/module-2.html" class="nav-link">
                ‚Üê Previous: Entropy & Corruption
            </a>
            <div class="progress-indicator">
                Module 3 of 3 ‚Ä¢ Stage 1 of 5
            </div>
            <a href="/paths/principled/stage-2/" class="nav-link">
                Next: Stage 2 ‚Üí
            </a>
        </nav>
    </div>

    <script>
        // Demo State
        let demoState = {
            codeViolations: 0,
            discretionViolations: 0,
            discretionEnforcement: 80
        };

        // Attempt violation in code-enforced system
        function attemptCodeViolation() {
            const output = document.getElementById('demoOutput');

            output.innerHTML = `
                <div class="output-danger">
                    üö´ VIOLATION REJECTED
                </div>
                <div class="output-message">
                    <strong>Transaction Invalid:</strong> Attempting to create 1,000,000 BTC beyond the 21M limit.
                </div>
                <div class="output-message">
                    <strong>Result:</strong> All nodes rejected the transaction immediately. The blockchain did not update.
                    No human reviewed this decision. The code enforced the rule automatically.
                </div>
                <div class="output-message" style="color: var(--accent-green); margin-top: 1rem;">
                    ‚úÖ Rule remains intact. Code-based enforcement: 100%
                </div>
            `;

            // Code violations always stay at 0
            document.getElementById('codeViolations').textContent = demoState.codeViolations;
        }

        // Attempt violation in discretion-based system
        function attemptDiscretionViolation() {
            const output = document.getElementById('demoOutput');
            demoState.discretionViolations++;

            // Each violation weakens enforcement
            demoState.discretionEnforcement = Math.max(0, demoState.discretionEnforcement - 15);
            updateDiscretionMeter();

            const emergencyReasons = [
                'Global Financial Crisis',
                'Pandemic Response',
                'National Security Emergency',
                'Economic Stimulus Required',
                'Temporary Extraordinary Measures'
            ];

            const reason = emergencyReasons[Math.min(demoState.discretionViolations - 1, emergencyReasons.length - 1)];

            output.innerHTML = `
                <div class="output-danger">
                    ‚ö†Ô∏è EMERGENCY DECLARED
                </div>
                <div class="output-message">
                    <strong>Reason:</strong> "${reason}"
                </div>
                <div class="output-message">
                    Central authority invoked emergency powers. Rule temporarily suspended.
                    Created 1,000,000 new currency units. Supply limit increased.
                </div>
                <div class="output-message" style="color: var(--accent-red); margin-top: 1rem;">
                    üö® Violation Successful. Total violations: ${demoState.discretionViolations}
                </div>
                <div class="output-message" style="color: var(--text-dim); font-size: 0.95rem;">
                    Rule enforcement strength degraded to ${demoState.discretionEnforcement}%.
                    Each violation makes future violations easier.
                </div>
            `;

            document.getElementById('discretionViolations').textContent = demoState.discretionViolations;
        }

        function updateDiscretionMeter() {
            const meter = document.getElementById('discretionEnforcement');
            meter.style.width = demoState.discretionEnforcement + '%';

            if (demoState.discretionEnforcement < 30) {
                meter.className = 'enforcement-fill failed';
                meter.textContent = `${demoState.discretionEnforcement}% - Failed`;
            } else if (demoState.discretionEnforcement < 60) {
                meter.className = 'enforcement-fill failed';
                meter.textContent = `${demoState.discretionEnforcement}% - Weak`;
            } else {
                meter.className = 'enforcement-fill discretion';
                meter.textContent = `${demoState.discretionEnforcement}% - Discretionary`;
            }
        }

        function resetDemo() {
            demoState = {
                codeViolations: 0,
                discretionViolations: 0,
                discretionEnforcement: 80
            };

            document.getElementById('codeViolations').textContent = '0';
            document.getElementById('discretionViolations').textContent = '0';

            updateDiscretionMeter();

            document.getElementById('demoOutput').innerHTML = `
                <div class="output-message">Simulation reset. Click the buttons above to attempt rule violations in both systems...</div>
            `;
        }

        // Interactive Reflection System
        const STORAGE_KEY = 'principled_stage1_module3_reflections';

        // Tab switching
        function switchReflectionTab(questionNum, level, event) {
            document.querySelectorAll(`#q${questionNum}-quick, #q${questionNum}-deep`).forEach(panel => {
                panel.classList.remove('active');
                panel.setAttribute('aria-hidden', 'true');
            });
            event.target.parentElement.querySelectorAll('.reflection-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });
            const panel = document.getElementById(`#q${questionNum}-${level}`);
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');
            event.target.classList.add('active');
            event.target.setAttribute('aria-selected', 'true');
        }

        // Q1 - Constitutional Violations
        function checkConstitution() {
            const choice = document.getElementById('constitution-choice').value;
            const feedbackDiv = document.getElementById('constitution-feedback');

            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (choice === 'all') {
                feedback = `<h5>‚úì Correct - All Three Reasons!</h5><p>Constitutional limits fail because:<br><br><strong>1. Paper vs. power:</strong> Written rules need enforcement. Who enforces the enforcers?<br><strong>2. Emergency exceptions:</strong> Crises justify "temporary" violations that never expire<br><strong>3. Discretionary interpretation:</strong> Judges decide what rules "really mean"<br><br><em>Bitcoin solves this:</em> Code enforcement (no interpreters), no emergency override, mathematically absolute limits.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (choice === 'interpretation') {
                feedback = `<h5>üí° Partially Correct</h5><p>Discretionary interpretation is a major problem. But it's not the only one. <strong>Emergency powers</strong> and <strong>enforcement gaps</strong> also undermine constitutional limits.<br><br>Bitcoin eliminates all three: No interpretation (code is unambiguous), no emergencies (rules apply always), no enforcement gap (network validates automatically).</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'paper') {
                feedback = `<h5>üí° True, But Incomplete</h5><p>Yes, written rules need enforcement. But <em>who enforces the limits on enforcers?</em> That's the fundamental problem.<br><br>Bitcoin's solution: <strong>Self-enforcing rules.</strong> The protocol validates itself. Thousands of independent nodes enforce the same rules. No central enforcer to corrupt.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'emergency') {
                feedback = `<h5>üí° True, But Not the Full Story</h5><p>Emergencies do create exceptions that become permanent. But even without emergencies, <strong>discretion allows rule-bending</strong> and <strong>enforcement depends on power</strong>.<br><br>Bitcoin has no emergency mode. The 21M limit applies in war, pandemic, financial crisis‚Äîalways.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveReflection('q1-quick', choice);
        }

        // Q2 - Discretionary Enforcement
        function checkDiscretion() {
            const choice = document.getElementById('discretion-choice').value;
            const feedbackDiv = document.getElementById('discretion-feedback');

            if (!choice) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (choice === 'no') {
                feedback = `<h5>‚úì Exactly Right!</h5><p><strong>Whoever has discretion has the real power.</strong> Rules are meaningless if someone can decide when they apply. The "rule of law" becomes the "rule of whoever interprets the law."<br><br>Bitcoin eliminates discretion entirely. The 21M limit isn't <em>enforced</em> by anyone‚Äîit's <strong>automatic</strong>. No one can make exceptions, declare emergencies, or reinterpret the code. Math doesn't negotiate.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (choice === 'temporary') {
                feedback = `<h5>üí° Close - You See the Pattern</h5><p>You're right that emergencies erode limits over time. But even <em>before</em> emergencies, discretion creates loopholes. The power to interpret is the power to subvert.<br><br>Bitcoin's insight: <strong>Remove discretion completely.</strong> No interpretation. No exceptions. No emergency powers. The protocol is absolute.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'yes') {
                feedback = `<h5>‚ö†Ô∏è Too Optimistic</h5><p>Rules <em>written on paper</em> don't constrain power. <strong>Enforcement does.</strong> If the enforcer has discretion, they control the outcome. That's why constitutions fail despite good intentions.<br><br>Bitcoin: No discretion = No loopholes. Code executes identically for everyone.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (choice === 'depends') {
                feedback = `<h5>üí° Pragmatic, But Misses the Core Issue</h5><p>Accountability mechanisms <em>also require enforcement</em>. You're just adding layers of discretion. Who watches the watchers?<br><br>Bitcoin cuts through this: <strong>No watchers needed.</strong> The network self-validates through cryptographic consensus. Trust is replaced by math.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveReflection('q2-quick', choice);
        }

        // Q3 - Changing Bitcoin's Rules Checklist
        function updateChangeRules() {
            const majority = document.getElementById('change-majority').checked;
            const code = document.getElementById('change-code').checked;
            const miners = document.getElementById('change-miners').checked;
            const users = document.getElementById('change-users').checked;
            const voluntary = document.getElementById('change-voluntary').checked;
            const ceo = document.getElementById('change-ceo').checked;

            const feedbackDiv = document.getElementById('change-rules-feedback');

            // CEO is a trick question - Bitcoin has no CEO
            if (ceo) {
                feedbackDiv.innerHTML = `<h5>‚ö†Ô∏è Bitcoin Has No CEO!</h5><p>This was a trick question. <strong>Bitcoin has no CEO, no board, no company.</strong> It's decentralized‚Äîthousands of independent node operators enforce the rules. No single person or entity can change the protocol.<br><br>This is the point: <em>No rulers, only rules.</em> Try again without selecting the CEO option.</p>`;
                feedbackDiv.className = 'feedback-box hint';
                feedbackDiv.style.display = 'block';
                return;
            }

            const correct = [majority, code, miners, users, voluntary].filter(Boolean).length;

            if (correct === 0) {
                feedbackDiv.style.display = 'none';
                return;
            }

            let feedback = '';
            if (correct === 5) {
                feedback = `<h5>‚úì Perfect Understanding!</h5><p>You identified all 5 requirements for changing Bitcoin's consensus rules:<br><br><strong>1. Overwhelming consensus:</strong> Thousands of independent nodes must agree<br><strong>2. Code change:</strong> Open-source software must be written and reviewed<br><strong>3. Miner adoption:</strong> Miners must run the new software<br><strong>4. Economic majority:</strong> Exchanges/businesses/users must accept the change<br><strong>5. Voluntary upgrade:</strong> No one can be forced; dissenters can fork<br><br><em>This is why Bitcoin's 21M limit has never changed‚Äîit's practically impossible to get unanimous agreement to inflate the supply.</em></p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (correct >= 3) {
                feedback = `<h5>üí° Good Start</h5><p>You identified <strong>${correct} of 5</strong> requirements. Changing Bitcoin requires <em>all five</em>:<br><br>1. Overwhelming consensus (nodes)<br>2. Code change (open source)<br>3. Miner adoption<br>4. Economic majority (users/exchanges)<br>5. Voluntary upgrade (no coercion)<br><br>This extreme difficulty is a <strong>feature, not a bug</strong>. It makes Bitcoin's rules essentially unchangeable.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedback = `<h5>üí° Partial Understanding</h5><p>You identified <strong>${correct}</strong>, but changing Bitcoin requires <em>five simultaneous agreements</em>. This makes the 21M limit essentially permanent‚Äîexactly as designed.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
            saveCheckboxes();
        }

        // Deep Reflection Auto-save
        function saveDeepReflection(questionNum, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[`q${questionNum}-deep`] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Save checkbox states
        function saveCheckboxes() {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections['change-majority'] = document.getElementById('change-majority').checked;
            reflections['change-code'] = document.getElementById('change-code').checked;
            reflections['change-miners'] = document.getElementById('change-miners').checked;
            reflections['change-users'] = document.getElementById('change-users').checked;
            reflections['change-voluntary'] = document.getElementById('change-voluntary').checked;
            reflections['change-ceo'] = document.getElementById('change-ceo').checked;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Save dropdown choices
        function saveReflection(key, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[key] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        // Load saved reflections
        function loadReflections() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const reflections = JSON.parse(saved);

                // Q1
                if (reflections['q1-quick']) document.getElementById('constitution-choice').value = reflections['q1-quick'];
                if (reflections['q1-deep']) document.getElementById('constitution-deep').value = reflections['q1-deep'];

                // Q2
                if (reflections['q2-quick']) document.getElementById('discretion-choice').value = reflections['q2-quick'];
                if (reflections['q2-deep']) document.getElementById('discretion-deep').value = reflections['q2-deep'];

                // Q3 checkboxes
                if (reflections['change-majority']) document.getElementById('change-majority').checked = true;
                if (reflections['change-code']) document.getElementById('change-code').checked = true;
                if (reflections['change-miners']) document.getElementById('change-miners').checked = true;
                if (reflections['change-users']) document.getElementById('change-users').checked = true;
                if (reflections['change-voluntary']) document.getElementById('change-voluntary').checked = true;
                if (reflections['change-ceo']) document.getElementById('change-ceo').checked = true;

                // Trigger feedback display if selections exist
                if (reflections['q1-quick']) checkConstitution();
                if (reflections['q2-quick']) checkDiscretion();
                updateChangeRules();
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadReflections();

            // Mark module as visited
            let progress = JSON.parse(localStorage.getItem('principled_stage1_progress') || '[]');
            if (!progress.includes('module-3')) {
                progress.push('module-3');
                localStorage.setItem('principled_stage1_progress', JSON.stringify(progress));
            }
        });
    </script>
</body>
</html>
