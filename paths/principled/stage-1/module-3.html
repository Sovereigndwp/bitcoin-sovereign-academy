<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1.3: The Role of Rules | The Principled Path</title>
    <meta name="description" content="Rules either constrain power or enable it. Without enforcement, rules become suggestions.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-gold: #DAA520;
            --accent-bronze: #8B6F47;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(218, 165, 32, 0.2);
            --accent-green: #4caf50;
            --accent-red: #ef4444;
            --accent-blue: #2196f3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(218, 165, 32, 0.1);
            border: 2px solid var(--accent-gold);
            border-radius: 0.5rem;
            color: var(--accent-gold);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .back-button:hover {
            background: rgba(218, 165, 32, 0.2);
            transform: translateX(-3px);
        }

        /* Module Header */
        .module-header {
            text-align: center;
            padding: 3rem 2rem;
            background: radial-gradient(circle at center, rgba(218, 165, 32, 0.15) 0%, transparent 70%);
            border-radius: 1.5rem;
            margin-bottom: 3rem;
        }

        .module-number {
            font-size: 1.2rem;
            color: var(--accent-gold);
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .module-header h1 {
            font-size: 2.5rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .module-subtitle {
            font-size: 1.3rem;
            color: var(--text-dim);
            font-style: italic;
        }

        /* Content Sections */
        .content-section {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 2rem 0;
        }

        .content-section h2 {
            color: var(--accent-gold);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .content-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .key-insight {
            background: rgba(218, 165, 32, 0.1);
            border-left: 4px solid var(--accent-gold);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0.5rem;
        }

        .key-insight-title {
            color: var(--accent-gold);
            font-weight: 700;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        /* Interactive Demo */
        .demo-section {
            background: var(--secondary-dark);
            border: 3px solid var(--accent-gold);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-header h3 {
            color: var(--accent-gold);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .demo-description {
            color: var(--text-dim);
            font-size: 1.05rem;
        }

        .demo-canvas {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .system-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .system-card {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
        }

        .system-card h4 {
            color: var(--accent-gold);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .system-card.code-based {
            border-color: var(--accent-green);
        }

        .system-card.discretion-based {
            border-color: var(--accent-red);
        }

        .rule-display {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .rule-text {
            color: var(--text-light);
            font-size: 1rem;
            margin-bottom: 1rem;
            font-family: 'Courier New', monospace;
        }

        .enforcement-meter {
            margin: 1rem 0;
        }

        .enforcement-label {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .enforcement-bar {
            width: 100%;
            height: 25px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .enforcement-fill {
            height: 100%;
            transition: all 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .enforcement-fill.code {
            background: linear-gradient(90deg, var(--accent-green), #8bc34a);
            color: #000;
        }

        .enforcement-fill.discretion {
            background: linear-gradient(90deg, #ffaa00, #ff9800);
            color: #000;
        }

        .enforcement-fill.failed {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
        }

        .violation-tracker {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .violation-count {
            font-size: 2rem;
            color: var(--accent-gold);
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .violation-label {
            text-align: center;
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .demo-controls {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .demo-button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-bronze));
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(218, 165, 32, 0.4);
        }

        .demo-button.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .demo-button.success {
            background: linear-gradient(135deg, var(--accent-green), #8bc34a);
        }

        .demo-button.secondary {
            background: rgba(218, 165, 32, 0.2);
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
        }

        .demo-output {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            min-height: 80px;
        }

        .output-message {
            color: var(--text-light);
            font-size: 1.05rem;
            margin: 0.5rem 0;
        }

        .output-success {
            color: var(--accent-green);
            font-weight: 600;
        }

        .output-danger {
            color: var(--accent-red);
            font-weight: 700;
        }

        /* Socratic Questions */
        .socratic-section {
            background: linear-gradient(135deg, rgba(218, 165, 32, 0.1), rgba(139, 111, 71, 0.1));
            border: 2px solid var(--accent-gold);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 3rem 0;
        }

        .socratic-section h3 {
            color: var(--accent-gold);
            font-size: 1.6rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .question-card {
            background: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .question-number {
            color: var(--accent-gold);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .reflection-area {
            width: 100%;
            min-height: 100px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
        }

        .reflection-area:focus {
            outline: none;
            border-color: var(--accent-gold);
        }

        /* Navigation Footer */
        .module-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border-radius: 1rem;
        }

        .nav-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-bronze));
            color: white;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(218, 165, 32, 0.4);
        }

        .progress-indicator {
            text-align: center;
            color: var(--text-dim);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .system-comparison {
                grid-template-columns: 1fr;
            }

            .module-header h1 {
                font-size: 2rem;
            }

            .module-nav {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <div class="nav-buttons">
            <a href="/paths/principled/stage-1/" class="back-button">
                ← Back to Stage 1
            </a>
        </div>

        <!-- Module Header -->
        <header class="module-header">
            <div class="module-number">Stage 1 • Module 3</div>
            <h1>The Role of Rules</h1>
            <p class="module-subtitle">Rules either constrain power or enable it</p>
        </header>

        <!-- Introduction -->
        <section class="content-section">
            <h2>Rules as Constraints vs. Suggestions</h2>
            <p>
                A constitution is just words on paper. A law is just text in a book. A regulation is just ink on a page.
                <strong>Rules only matter if they're enforced.</strong>
            </p>
            <p>
                Throughout history, governments have written beautiful constitutions guaranteeing rights, limiting power,
                and protecting citizens. Yet those same governments routinely violate their own rules when convenient.
            </p>
            <p>
                Why? Because <strong>discretionary enforcement</strong> means rules are optional. If a human can choose whether
                to enforce a rule, then power — not principle — decides what happens.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">⚖️ Core Principle</div>
                <p>
                    Rules without automatic enforcement are merely suggestions. The moment discretion enters the system,
                    rules bend to serve power. True constraints must be <strong>non-negotiable and self-executing</strong>.
                </p>
            </div>
        </section>

        <!-- The Problem -->
        <section class="content-section">
            <h2>Constitutional Drift: When Rules Become Suggestions</h2>
            <p>
                Consider the U.S. Constitution. It explicitly grants Congress the sole power to declare war (Article I, Section 8).
                Yet the U.S. has fought wars in Korea, Vietnam, Iraq, Afghanistan, and countless other conflicts without
                a formal declaration of war.
            </p>
            <p>
                The rule didn't change. The enforcement did. When those in power can reinterpret, suspend, or ignore rules,
                the rules cease to constrain.
            </p>
            <p>
                This pattern repeats everywhere:
            </p>
            <p>
                <strong>Money supply limits:</strong> Central banks ignore their own inflation targets.<br>
                <strong>Spending caps:</strong> Governments declare "emergencies" to bypass budget rules.<br>
                <strong>Term limits:</strong> Leaders amend constitutions to stay in power.<br>
                <strong>Privacy protections:</strong> Surveillance expands through "national security" exceptions.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">📜 The Discretion Trap</div>
                <p>
                    Any rule that includes phrases like "unless necessary," "in times of emergency," or "subject to review"
                    is not a rule — it's a guideline that power will ignore whenever convenient. Discretion is the enemy of constraint.
                </p>
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="demo-section">
            <div class="demo-header">
                <h3>🎮 Interactive Lab: Code vs. Discretion</h3>
                <p class="demo-description">
                    Compare how rules behave when enforced by code (Bitcoin) versus human discretion (fiat systems).
                    Attempt to violate the same rule in both systems.
                </p>
            </div>

            <div class="demo-canvas">
                <div class="rule-display">
                    <div class="rule-text">
                        <strong>RULE:</strong> Maximum supply = 21,000,000 units. No exceptions.
                    </div>
                </div>

                <div class="system-comparison">
                    <!-- Code-Enforced System (Bitcoin) -->
                    <div class="system-card code-based">
                        <h4>🔒 Code-Enforced (Bitcoin)</h4>

                        <div class="enforcement-meter">
                            <div class="enforcement-label">Rule Enforcement Strength</div>
                            <div class="enforcement-bar">
                                <div class="enforcement-fill code" id="codeEnforcement" style="width: 100%;">100% - Automatic</div>
                            </div>
                        </div>

                        <div class="violation-tracker">
                            <div class="violation-count" id="codeViolations">0</div>
                            <div class="violation-label">Successful Violations</div>
                        </div>

                        <button class="demo-button danger" onclick="attemptCodeViolation()">
                            🚫 Attempt to Create Extra Bitcoin
                        </button>
                    </div>

                    <!-- Discretion-Based System (Fiat) -->
                    <div class="system-card discretion-based">
                        <h4>👤 Human Discretion (Fiat)</h4>

                        <div class="enforcement-meter">
                            <div class="enforcement-label">Rule Enforcement Strength</div>
                            <div class="enforcement-bar">
                                <div class="enforcement-fill discretion" id="discretionEnforcement" style="width: 80%;">80% - Discretionary</div>
                            </div>
                        </div>

                        <div class="violation-tracker">
                            <div class="violation-count" id="discretionViolations">0</div>
                            <div class="violation-label">Successful Violations</div>
                        </div>

                        <button class="demo-button danger" onclick="attemptDiscretionViolation()">
                            💵 Declare Emergency & Print Money
                        </button>
                    </div>
                </div>

                <div class="demo-controls">
                    <button class="demo-button secondary" onclick="resetDemo()">
                        🔄 Reset Simulation
                    </button>
                </div>

                <div class="demo-output" id="demoOutput">
                    <div class="output-message">Click the buttons above to attempt rule violations in both systems...</div>
                </div>
            </div>

            <div class="key-insight">
                <div class="key-insight-title">💡 What You're Seeing</div>
                <p>
                    Code-enforced rules cannot be violated — the system rejects invalid transactions automatically.
                    Discretion-based systems allow violations when authority figures declare "emergencies" or "special circumstances."
                    Bitcoin eliminates discretion entirely: the protocol enforces rules without human judgment.
                </p>
            </div>
        </section>

        <!-- Bitcoin's Solution -->
        <section class="content-section">
            <h2>Bitcoin: Rules Without Rulers</h2>
            <p>
                Bitcoin's 21 million coin limit isn't a guideline. It's not a target. It's not "subject to change in emergencies."
                It's <strong>enforced by mathematics</strong>.
            </p>
            <p>
                Every node on the network runs the same code. If you try to create extra bitcoins, your transaction is rejected.
                There is no appeals process, no committee to petition, no emergency override. The rule is absolute.
            </p>
            <p>
                This is the innovation: <strong>rules enforced by code rather than discretion</strong>. No human can bend Bitcoin's
                rules, because no human controls the consensus. The network validates everything against the protocol automatically.
            </p>

            <div class="key-insight">
                <div class="key-insight-title">₿ Bitcoin's Elegant Solution</div>
                <p>
                    Bitcoin replaces "trust the authority to follow the rules" with "trust the math that enforces the rules."
                    Discretion is removed entirely. Rules become constraints rather than suggestions. This is how you build
                    a monetary system that cannot be corrupted: make corruption mathematically impossible.
                </p>
            </div>
        </section>

        <!-- Socratic Questions -->
        <section class="socratic-section">
            <h3>💬 Reflect on What You've Learned</h3>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 2rem;">
                Take a moment to think deeply about these questions. Your answers will be saved locally.
            </p>

            <div class="question-card">
                <div class="question-number">Question 1</div>
                <div class="question-text">
                    Why do governments write constitutions with strict limits on power, but then routinely violate those limits?
                    What does this reveal about the relationship between written rules and actual enforcement?
                </div>
                <textarea class="reflection-area" id="question1" placeholder="Type your thoughts here..."></textarea>
            </div>

            <div class="question-card">
                <div class="question-number">Question 2</div>
                <div class="question-text">
                    Can a rule that includes discretionary enforcement ever truly constrain power? Why or why not?
                    What happens when "emergency" becomes permanent?
                </div>
                <textarea class="reflection-area" id="question2" placeholder="Type your thoughts here..."></textarea>
            </div>

            <div class="question-card">
                <div class="question-number">Question 3</div>
                <div class="question-text">
                    Bitcoin's rules are enforced by thousands of independent nodes running identical code.
                    How does this design make discretion impossible? What would it take to change Bitcoin's rules?
                </div>
                <textarea class="reflection-area" id="question3" placeholder="Type your thoughts here..."></textarea>
            </div>

            <button class="demo-button" onclick="saveReflections()" style="margin-top: 1.5rem; width: 100%;">
                💾 Save My Reflections
            </button>
        </section>

        <!-- Module Navigation -->
        <nav class="module-nav">
            <a href="/paths/principled/stage-1/module-2.html" class="nav-link">
                ← Previous: Entropy & Corruption
            </a>
            <div class="progress-indicator">
                Module 3 of 3 • Stage 1 of 5
            </div>
            <a href="/paths/principled/stage-2/" class="nav-link">
                Next: Stage 2 →
            </a>
        </nav>
    </div>

    <script>
        // Demo State
        let demoState = {
            codeViolations: 0,
            discretionViolations: 0,
            discretionEnforcement: 80
        };

        // Attempt violation in code-enforced system
        function attemptCodeViolation() {
            const output = document.getElementById('demoOutput');

            output.innerHTML = `
                <div class="output-danger">
                    🚫 VIOLATION REJECTED
                </div>
                <div class="output-message">
                    <strong>Transaction Invalid:</strong> Attempting to create 1,000,000 BTC beyond the 21M limit.
                </div>
                <div class="output-message">
                    <strong>Result:</strong> All nodes rejected the transaction immediately. The blockchain did not update.
                    No human reviewed this decision. The code enforced the rule automatically.
                </div>
                <div class="output-message" style="color: var(--accent-green); margin-top: 1rem;">
                    ✅ Rule remains intact. Code-based enforcement: 100%
                </div>
            `;

            // Code violations always stay at 0
            document.getElementById('codeViolations').textContent = demoState.codeViolations;
        }

        // Attempt violation in discretion-based system
        function attemptDiscretionViolation() {
            const output = document.getElementById('demoOutput');
            demoState.discretionViolations++;

            // Each violation weakens enforcement
            demoState.discretionEnforcement = Math.max(0, demoState.discretionEnforcement - 15);
            updateDiscretionMeter();

            const emergencyReasons = [
                'Global Financial Crisis',
                'Pandemic Response',
                'National Security Emergency',
                'Economic Stimulus Required',
                'Temporary Extraordinary Measures'
            ];

            const reason = emergencyReasons[Math.min(demoState.discretionViolations - 1, emergencyReasons.length - 1)];

            output.innerHTML = `
                <div class="output-danger">
                    ⚠️ EMERGENCY DECLARED
                </div>
                <div class="output-message">
                    <strong>Reason:</strong> "${reason}"
                </div>
                <div class="output-message">
                    Central authority invoked emergency powers. Rule temporarily suspended.
                    Created 1,000,000 new currency units. Supply limit increased.
                </div>
                <div class="output-message" style="color: var(--accent-red); margin-top: 1rem;">
                    🚨 Violation Successful. Total violations: ${demoState.discretionViolations}
                </div>
                <div class="output-message" style="color: var(--text-dim); font-size: 0.95rem;">
                    Rule enforcement strength degraded to ${demoState.discretionEnforcement}%.
                    Each violation makes future violations easier.
                </div>
            `;

            document.getElementById('discretionViolations').textContent = demoState.discretionViolations;
        }

        function updateDiscretionMeter() {
            const meter = document.getElementById('discretionEnforcement');
            meter.style.width = demoState.discretionEnforcement + '%';

            if (demoState.discretionEnforcement < 30) {
                meter.className = 'enforcement-fill failed';
                meter.textContent = `${demoState.discretionEnforcement}% - Failed`;
            } else if (demoState.discretionEnforcement < 60) {
                meter.className = 'enforcement-fill failed';
                meter.textContent = `${demoState.discretionEnforcement}% - Weak`;
            } else {
                meter.className = 'enforcement-fill discretion';
                meter.textContent = `${demoState.discretionEnforcement}% - Discretionary`;
            }
        }

        function resetDemo() {
            demoState = {
                codeViolations: 0,
                discretionViolations: 0,
                discretionEnforcement: 80
            };

            document.getElementById('codeViolations').textContent = '0';
            document.getElementById('discretionViolations').textContent = '0';

            updateDiscretionMeter();

            document.getElementById('demoOutput').innerHTML = `
                <div class="output-message">Simulation reset. Click the buttons above to attempt rule violations in both systems...</div>
            `;
        }

        // Save reflections
        function saveReflections() {
            const reflections = {
                module: 'stage1-module3',
                timestamp: new Date().toISOString(),
                q1: document.getElementById('question1').value,
                q2: document.getElementById('question2').value,
                q3: document.getElementById('question3').value
            };

            localStorage.setItem('principled_stage1_module3_reflections', JSON.stringify(reflections));

            // Mark module as completed
            let progress = JSON.parse(localStorage.getItem('principled_stage1_progress') || '[]');
            if (!progress.includes('module-3')) {
                progress.push('module-3');
                localStorage.setItem('principled_stage1_progress', JSON.stringify(progress));
            }

            alert('✅ Your reflections have been saved!\n\n🎉 Stage 1 Complete! You can now continue to Stage 2.');
        }

        // Load saved reflections
        window.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('principled_stage1_module3_reflections');
            if (saved) {
                const reflections = JSON.parse(saved);
                document.getElementById('question1').value = reflections.q1 || '';
                document.getElementById('question2').value = reflections.q2 || '';
                document.getElementById('question3').value = reflections.q3 || '';
            }
        });
    </script>
</body>
</html>
