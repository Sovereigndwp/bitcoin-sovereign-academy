<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin as a Living Organism | Stage 4 Module 3 | Principled Path</title>
    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-bronze: #8B6F47;
            --accent-bronze-light: #A0826D;
            --text-light: #e0e0e0;
            --text-dim: #999;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 900px; margin: 0 auto; }
        .back-btn {
            display: inline-block;
            background: var(--primary-orange);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }
        .back-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4); }
        .module-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.2), rgba(139, 111, 71, 0.05));
            border-radius: 12px;
            border: 2px solid var(--accent-bronze);
        }
        .module-icon { font-size: 4rem; margin-bottom: 1rem; }
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        .module-subtitle { font-size: 1.2rem; color: var(--text-dim); max-width: 700px; margin: 0 auto; }
        .content-section {
            background: var(--secondary-dark);
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(139, 111, 71, 0.2);
        }
        .content-section h2 {
            color: var(--accent-bronze);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }
        .content-section h3 {
            color: var(--accent-bronze-light);
            font-size: 1.3rem;
            margin: 2rem 0 1rem;
        }
        .content-section p {
            color: var(--text-dim);
            margin-bottom: 1rem;
            line-height: 1.8;
        }
        .content-section ul {
            list-style: none;
            padding-left: 0;
        }
        .content-section li {
            padding: 0.75rem 0 0.75rem 2rem;
            position: relative;
            color: var(--text-light);
            line-height: 1.8;
        }
        .content-section li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--accent-bronze);
            font-weight: bold;
        }
        .highlight-box {
            background: rgba(139, 111, 71, 0.1);
            border-left: 4px solid var(--accent-bronze);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
        }
        .highlight-box strong {
            color: var(--accent-bronze);
            display: block;
            margin-bottom: 0.5rem;
        }
        .organism-traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .trait-card {
            background: rgba(139, 111, 71, 0.1);
            border: 2px solid rgba(139, 111, 71, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        .trait-card:hover {
            border-color: var(--accent-bronze);
            transform: translateY(-4px);
        }
        .trait-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .trait-title {
            color: var(--accent-bronze);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        .trait-description {
            color: var(--text-dim);
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .demo-container {
            background: var(--primary-dark);
            border: 2px solid rgba(139, 111, 71, 0.3);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        .demo-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        .demo-tab {
            background: var(--secondary-dark);
            color: var(--text-dim);
            border: 2px solid rgba(139, 111, 71, 0.2);
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .demo-tab:hover {
            border-color: var(--accent-bronze);
            color: var(--text-light);
        }
        .demo-tab.active {
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            color: var(--primary-dark);
            border-color: var(--accent-bronze);
        }
        .demo-panel {
            display: none;
        }
        .demo-panel.active {
            display: block;
        }
        .ecosystem-viz {
            background: var(--secondary-dark);
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
        }
        .organism-layer {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(139, 111, 71, 0.05);
            border-left: 4px solid var(--accent-bronze);
            border-radius: 6px;
        }
        .layer-title {
            color: var(--accent-bronze);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .layer-components {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        .component-chip {
            background: var(--primary-dark);
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            font-size: 0.85rem;
            color: var(--text-light);
            border: 1px solid rgba(139, 111, 71, 0.3);
        }
        button {
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 111, 71, 0.4);
        }
        .health-meter {
            margin: 2rem 0;
        }
        .health-bar {
            height: 30px;
            background: var(--secondary-dark);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-bronze), var(--accent-bronze-light));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 600;
        }
        .reflection-section {
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.1), rgba(139, 111, 71, 0.05));
            border: 2px solid rgba(139, 111, 71, 0.3);
            border-radius: 12px;
            padding: 2.5rem;
            margin: 3rem 0;
        }
        .reflection-section h2 {
            color: var(--accent-bronze);
            margin-bottom: 2rem;
            text-align: center;
        }
        .question-box {
            background: var(--secondary-dark);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 2px solid rgba(139, 111, 71, 0.2);
        }
        .question-box h3 {
            color: var(--accent-bronze-light);
            margin-bottom: 1rem;
        }
        textarea {
            width: 100%;
            min-height: 120px;
            background: var(--primary-dark);
            border: 2px solid rgba(139, 111, 71, 0.3);
            color: var(--text-light);
            padding: 1rem;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
        }
        textarea:focus {
            outline: none;
            border-color: var(--accent-bronze);
        }
        .next-module {
            text-align: center;
            margin-top: 3rem;
        }
        .next-module a {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze-light));
            color: white;
            padding: 1.25rem 2.5rem;
            border-radius: 2rem;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        .next-module a:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 111, 71, 0.5);
        }
        @media (max-width: 768px) {
            .module-header h1 { font-size: 2rem; }
            .organism-traits { grid-template-columns: 1fr; }
            .demo-tabs { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/paths/principled/stage-4/" class="back-btn">← Back to Stage 4</a>

        <div class="module-header">
            <div class="module-icon">🌱</div>
            <h1>Bitcoin as a Living Organism</h1>
            <p class="module-subtitle">
                Bitcoin isn't just software—it's an emergent, self-regulating system that adapts,
                heals, and evolves without central control.
            </p>
        </div>

        <!-- Introduction -->
        <div class="content-section">
            <h2>Why Bitcoin Behaves Like Life</h2>
            <p>
                Bitcoin exhibits properties we normally associate with living organisms:
                it responds to its environment, self-regulates, adapts to threats, and grows stronger over time.
            </p>
            <p>
                This isn't a metaphor—it's emergence. When you combine physics (proof-of-work),
                game theory (incentives), and distributed consensus, you get a system that behaves
                like a living entity without anyone designing it to do so.
            </p>

            <div class="highlight-box">
                <strong>Emergence Defined:</strong>
                Complex behaviors and patterns that arise from simple rules interacting at scale.
                No central planner creates these behaviors—they emerge spontaneously from the system's design.
            </div>

            <p>
                Let's explore the characteristics that make Bitcoin a living system:
            </p>
        </div>

        <!-- Organism Traits -->
        <div class="content-section">
            <h2>Traits of a Living System</h2>
            <p>
                Biologists define life by certain characteristics. Bitcoin exhibits nearly all of them:
            </p>

            <div class="organism-traits">
                <div class="trait-card">
                    <div class="trait-icon">🔄</div>
                    <div class="trait-title">Homeostasis (Self-Regulation)</div>
                    <div class="trait-description">
                        Difficulty adjustment maintains ~10 minute blocks regardless of total hashpower.
                        The system automatically balances itself.
                    </div>
                </div>

                <div class="trait-card">
                    <div class="trait-icon">🛡️</div>
                    <div class="trait-title">Response to Stimuli</div>
                    <div class="trait-description">
                        When attacked, honest miners coordinate to reject invalid blocks.
                        The network "fights off" threats automatically.
                    </div>
                </div>

                <div class="trait-card">
                    <div class="trait-icon">📈</div>
                    <div class="trait-title">Growth & Development</div>
                    <div class="trait-description">
                        Network hashrate, user adoption, and value have grown exponentially.
                        Bitcoin "matures" over time.
                    </div>
                </div>

                <div class="trait-card">
                    <div class="trait-icon">⚡</div>
                    <div class="trait-title">Metabolism (Energy Processing)</div>
                    <div class="trait-description">
                        Bitcoin consumes electrical energy and converts it into security.
                        Energy flows through the system continuously.
                    </div>
                </div>

                <div class="trait-card">
                    <div class="trait-icon">🧬</div>
                    <div class="trait-title">Reproduction & Evolution</div>
                    <div class="trait-description">
                        Bitcoin's code can be forked (reproduced). Successful forks survive,
                        failed ones die. Natural selection at work.
                    </div>
                </div>

                <div class="trait-card">
                    <div class="trait-icon">🌍</div>
                    <div class="trait-title">Adaptation</div>
                    <div class="trait-description">
                        Miners move to cheaper energy sources. Developers improve efficiency.
                        Users adapt behaviors. The ecosystem evolves.
                    </div>
                </div>
            </div>
        </div>

        <!-- Self-Regulation -->
        <div class="content-section">
            <h2>Homeostasis: Bitcoin's Self-Regulation</h2>
            <p>
                Living organisms maintain stable internal conditions despite external changes.
                Bitcoin does the same through its difficulty adjustment mechanism.
            </p>

            <h3>The Difficulty Adjustment Algorithm</h3>
            <p>
                Every 2016 blocks (~2 weeks), Bitcoin measures how fast blocks were mined and adjusts difficulty:
            </p>
            <ul>
                <li><strong>If blocks came too fast:</strong> Increase difficulty (make mining harder)</li>
                <li><strong>If blocks came too slow:</strong> Decrease difficulty (make mining easier)</li>
                <li><strong>Target:</strong> Maintain average 10-minute block time</li>
            </ul>

            <p>
                This creates a negative feedback loop—the system automatically corrects deviations from equilibrium.
            </p>

            <div class="highlight-box">
                <strong>Why This Matters:</strong>
                No matter how much mining power joins or leaves the network, Bitcoin maintains its heartbeat.
                If China banned mining tomorrow and 50% of hashrate disappeared, blocks would slow down briefly,
                then difficulty would adjust and the network would continue normally.
            </div>

            <h3>Other Self-Regulating Mechanisms</h3>
            <ul>
                <li><strong>Mempool pressure:</strong> When demand for block space increases, fees rise automatically</li>
                <li><strong>Hash rate migration:</strong> Miners naturally move to cheapest energy sources</li>
                <li><strong>Node count:</strong> More valuable network → more people run nodes → stronger validation</li>
                <li><strong>Market price:</strong> Supply and demand reach equilibrium without central planning</li>
            </ul>
        </div>

        <!-- Interactive Demos -->
        <div class="content-section">
            <h2>Interactive Simulations</h2>
            <p>
                Experience Bitcoin's living properties through these demonstrations.
            </p>

            <div class="demo-container">
                <div class="demo-tabs">
                    <button class="demo-tab active" onclick="switchTab('homeostasis')">Homeostasis Simulator</button>
                    <button class="demo-tab" onclick="switchTab('immune')">Immune Response</button>
                    <button class="demo-tab" onclick="switchTab('ecosystem')">Ecosystem Layers</button>
                </div>

                <!-- Homeostasis Simulator -->
                <div id="homeostasis-panel" class="demo-panel active">
                    <h3 style="color: var(--accent-bronze-light); margin-bottom: 1rem;">Difficulty Adjustment Simulation</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Watch how Bitcoin automatically maintains equilibrium when hashrate changes.
                    </p>

                    <div style="background: var(--secondary-dark); padding: 2rem; border-radius: 8px;">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="color: var(--text-light); font-size: 1.2rem; margin-bottom: 0.5rem;">
                                Current Block Time: <span id="blockTime" style="color: var(--accent-bronze); font-weight: 600;">10.0 min</span>
                            </div>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                Target: 10 minutes | Difficulty: <span id="difficulty" style="color: var(--accent-bronze); font-weight: 600;">1.00x</span>
                            </div>
                        </div>

                        <div class="health-meter">
                            <div style="color: var(--text-dim); margin-bottom: 0.5rem;">Network Hashrate</div>
                            <div class="health-bar">
                                <div id="hashrateBar" class="health-fill" style="width: 50%;">100 EH/s</div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; justify-content: center; margin: 2rem 0; flex-wrap: wrap;">
                            <button onclick="adjustHashrate(2)">+100% Hashrate (e.g., new miners join)</button>
                            <button onclick="adjustHashrate(0.5)" style="background: linear-gradient(45deg, #e74c3c, #c0392b);">
                                -50% Hashrate (e.g., China ban)
                            </button>
                            <button onclick="runDifficultyAdjustment()">⏱️ Run Difficulty Adjustment</button>
                            <button onclick="resetHomeostasis()">Reset</button>
                        </div>

                        <div id="homeostasisLog" style="margin-top: 1.5rem; padding: 1rem; background: var(--primary-dark); border-radius: 6px; color: var(--text-dim); font-size: 0.9rem; max-height: 200px; overflow-y: auto;"></div>
                    </div>
                </div>

                <!-- Immune Response -->
                <div id="immune-panel" class="demo-panel">
                    <h3 style="color: var(--accent-bronze-light); margin-bottom: 1rem;">Network Immune Response</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        See how Bitcoin "heals" itself when attacked, like an immune system fighting infection.
                    </p>

                    <div style="background: var(--secondary-dark); padding: 2rem; border-radius: 8px;">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="color: var(--text-light); font-size: 1.2rem; margin-bottom: 0.5rem;">
                                Network Health: <span id="networkHealth" style="color: #2ecc71; font-weight: 600;">100%</span>
                            </div>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                Honest Nodes: <span id="honestNodes" style="color: var(--accent-bronze); font-weight: 600;">95%</span>
                            </div>
                        </div>

                        <div class="health-meter">
                            <div style="color: var(--text-dim); margin-bottom: 0.5rem;">System Integrity</div>
                            <div class="health-bar">
                                <div id="integrityBar" class="health-fill" style="width: 100%;">100%</div>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
                            <button onclick="introduceAttack('spam')">Introduce Spam Attack</button>
                            <button onclick="introduceAttack('invalid')">Broadcast Invalid Blocks</button>
                            <button onclick="introduceAttack('sybil')">Sybil Attack (Fake Nodes)</button>
                            <button onclick="healNetwork()">⚕️ Observe Self-Healing</button>
                        </div>

                        <div id="immuneLog" style="margin-top: 1.5rem; padding: 1rem; background: var(--primary-dark); border-radius: 6px; color: var(--text-dim); font-size: 0.9rem; max-height: 200px; overflow-y: auto;"></div>
                    </div>
                </div>

                <!-- Ecosystem Layers -->
                <div id="ecosystem-panel" class="demo-panel">
                    <h3 style="color: var(--accent-bronze-light); margin-bottom: 1rem;">Bitcoin's Layered Ecosystem</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Like biological ecosystems, Bitcoin has interdependent layers that support each other.
                    </p>

                    <div class="ecosystem-viz">
                        <div class="organism-layer">
                            <div class="layer-title">🔬 Protocol Layer (DNA)</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem; margin-top: 0.5rem;">
                                The core rules that define Bitcoin. Extremely hard to change, providing stability.
                            </div>
                            <div class="layer-components">
                                <span class="component-chip">21M Supply Cap</span>
                                <span class="component-chip">Proof-of-Work</span>
                                <span class="component-chip">10-Min Blocks</span>
                                <span class="component-chip">Difficulty Adjustment</span>
                            </div>
                        </div>

                        <div class="organism-layer">
                            <div class="layer-title">⚙️ Network Layer (Organs)</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem; margin-top: 0.5rem;">
                                The infrastructure that keeps Bitcoin running. Miners, nodes, and mempool.
                            </div>
                            <div class="layer-components">
                                <span class="component-chip">~15,000 Full Nodes</span>
                                <span class="component-chip">Mining Pools</span>
                                <span class="component-chip">Mempool</span>
                                <span class="component-chip">Blockchain State</span>
                            </div>
                        </div>

                        <div class="organism-layer">
                            <div class="layer-title">💼 Application Layer (Behaviors)</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem; margin-top: 0.5rem;">
                                Tools and services built on top. Wallets, exchanges, Lightning Network.
                            </div>
                            <div class="layer-components">
                                <span class="component-chip">Wallets</span>
                                <span class="component-chip">Exchanges</span>
                                <span class="component-chip">Lightning Network</span>
                                <span class="component-chip">Payment Processors</span>
                            </div>
                        </div>

                        <div class="organism-layer">
                            <div class="layer-title">🌍 Social Layer (Ecosystem)</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem; margin-top: 0.5rem;">
                                The community of users, developers, educators, and businesses.
                            </div>
                            <div class="layer-components">
                                <span class="component-chip">Developers</span>
                                <span class="component-chip">Merchants</span>
                                <span class="component-chip">Educators</span>
                                <span class="component-chip">Holders</span>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(139, 111, 71, 0.1); border-radius: 8px; border-left: 4px solid var(--accent-bronze);">
                        <div style="color: var(--accent-bronze); font-weight: 600; margin-bottom: 0.5rem;">🔗 Interdependence</div>
                        <div style="color: var(--text-dim); font-size: 0.9rem; line-height: 1.6;">
                            Each layer depends on the others. The protocol provides rules, the network executes them,
                            applications make Bitcoin useful, and the social layer gives it value. Remove any layer and the system weakens.
                            This is how complex life works—specialized parts cooperating toward survival.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evolution & Adaptation -->
        <div class="content-section">
            <h2>Evolution Through Forking</h2>
            <p>
                Bitcoin evolves like biological species—through variation, selection, and reproduction.
            </p>

            <h3>How Bitcoin "Reproduces"</h3>
            <p>
                Anyone can fork Bitcoin's code and create a new cryptocurrency. This is like biological reproduction:
            </p>
            <ul>
                <li><strong>Variation:</strong> Each fork changes some rules (block size, mining algorithm, etc.)</li>
                <li><strong>Competition:</strong> Forks compete for users, miners, and market value</li>
                <li><strong>Selection:</strong> Successful forks survive and grow, failed forks die</li>
                <li><strong>Adaptation:</strong> Survivors prove they solved real problems better than competitors</li>
            </ul>

            <h3>Examples of Natural Selection</h3>
            <ul>
                <li><strong>Bitcoin Cash (2017):</strong> Tried 8MB blocks. Lost 95% of value vs BTC. Market selected against it.</li>
                <li><strong>Bitcoin SV (2018):</strong> Tried 128MB blocks. Even less successful. Evolution in action.</li>
                <li><strong>Litecoin (2011):</strong> Found a niche (faster blocks, different algorithm). Survived by differentiating.</li>
                <li><strong>Original Bitcoin:</strong> Remained dominant because its conservative approach preserved key properties.</li>
            </ul>

            <div class="highlight-box">
                <strong>Survival of the Fittest:</strong>
                Bitcoin's refusal to change quickly isn't a bug—it's a feature. Like DNA mutations,
                most changes are harmful. Bitcoin's conservatism is why it survives while thousands
                of altcoins have died.
            </div>
        </div>

        <!-- Emergent Properties -->
        <div class="content-section">
            <h2>Properties That Emerge Spontaneously</h2>
            <p>
                Bitcoin's most important characteristics weren't explicitly programmed—they emerged
                from simple rules interacting at scale:
            </p>

            <h3>1. Decentralization</h3>
            <p>
                No one designed Bitcoin to be decentralized. It emerged because:
            </p>
            <ul>
                <li>Mining is profitable anywhere with cheap electricity</li>
                <li>Running a node is voluntary but incentivized (verify don't trust)</li>
                <li>No single entity can change the rules without consensus</li>
            </ul>

            <h3>2. Censorship Resistance</h3>
            <p>
                Bitcoin can't be shut down because:
            </p>
            <ul>
                <li>Miners are geographically distributed across 100+ countries</li>
                <li>Nodes are run by volunteers worldwide</li>
                <li>Code is open-source and replicated globally</li>
                <li>Economic incentives keep participants honest</li>
            </ul>

            <h3>3. Antifragility</h3>
            <p>
                Bitcoin gets stronger from attacks:
            </p>
            <ul>
                <li>Government bans → Miners relocate, decentralization increases</li>
                <li>Price crashes → Weak hands sell, strong holders accumulate</li>
                <li>Technical attacks → Developers patch vulnerabilities, system hardens</li>
                <li>Competing forks → Market tests ideas, best solutions win</li>
            </ul>

            <div class="highlight-box">
                <strong>Antifragility Defined:</strong>
                Systems that gain from disorder and stress. Bitcoin doesn't just resist attacks—
                it evolves stronger defenses in response to them. Each survived crisis makes the next one less threatening.
            </div>
        </div>

        <!-- Nobody in Charge -->
        <div class="content-section">
            <h2>No Brain, No Central Control</h2>
            <p>
                Perhaps Bitcoin's most remarkable property: it functions perfectly without anyone in charge.
            </p>

            <h3>Distributed Intelligence</h3>
            <p>
                Bitcoin exhibits intelligent behavior without a central brain:
            </p>
            <ul>
                <li><strong>Problem:</strong> Too many transactions, blocks too small</li>
                <li><strong>Response:</strong> Fees rise automatically, users adopt batching, Lightning Network develops</li>
                <li><strong>Result:</strong> System adapts without central planning</li>
            </ul>

            <p>
                This is how ant colonies, bee hives, and immune systems work—simple agents following
                simple rules create complex, adaptive behavior.
            </p>

            <h3>Why This Is Revolutionary</h3>
            <p>
                Every other monetary system in history required trusted authorities:
            </p>
            <ul>
                <li>Gold: Requires assayers to verify purity</li>
                <li>Fiat currency: Requires central banks and governments</li>
                <li>Bank accounts: Require banks and regulators</li>
                <li>Cryptocurrency exchanges: Require trusted custodians</li>
            </ul>

            <p>
                Bitcoin is the first system that coordinates millions of participants worldwide
                without anyone in charge. This is genuinely new in human history.
            </p>
        </div>

        <!-- Socratic Reflection -->
        <div class="reflection-section">
            <h2>💭 Reflect on What You've Learned</h2>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 2rem;">
                Think deeply about emergence, life, and decentralized systems.
                Your reflections are saved automatically.
            </p>

            <div class="question-box">
                <h3>Question 1: Emergence vs. Design</h3>
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    Bitcoin's decentralization and censorship resistance weren't explicitly programmed—they emerged
                    from simple rules. Can you think of other examples where complex behaviors emerge from simple rules?
                    Why is emergence more robust than top-down design?
                </p>
                <textarea id="question1" placeholder="Type your reflection here..."></textarea>
            </div>

            <div class="question-box">
                <h3>Question 2: Living vs. Mechanical</h3>
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    We described Bitcoin as "living" because it self-regulates, adapts, and responds to its environment.
                    But it's still just code running on computers. What's the boundary between "alive" and "mechanical"?
                    Does Bitcoin challenge our definition of life?
                </p>
                <textarea id="question2" placeholder="Type your reflection here..."></textarea>
            </div>

            <div class="question-box">
                <h3>Question 3: Centralized vs. Distributed Intelligence</h3>
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    Human organizations (companies, governments) use centralized intelligence—a CEO or leader makes decisions.
                    Bitcoin uses distributed intelligence—no one is in charge, yet it makes "decisions" collectively.
                    What are the advantages and disadvantages of each approach? When is decentralization superior?
                </p>
                <textarea id="question3" placeholder="Type your reflection here..."></textarea>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="next-module">
            <h2 style="color: var(--accent-bronze); margin-bottom: 1rem;">Stage 4 Complete!</h2>
            <p style="color: var(--text-dim); margin-bottom: 2rem;">
                You've learned how Bitcoin emerges as a living system from physics, game theory, and incentives.
                Next, explore Bitcoin's impact beyond money—on energy, verification, and human coordination.
            </p>
            <a href="/paths/principled/stage-5/">
                Continue to Stage 5: Beyond Money →
            </a>
        </div>
    </div>

    <script>
        // ===== Homeostasis Simulator =====
        let hashrate = 100; // EH/s
        let difficulty = 1.0;
        let blockTime = 10.0; // minutes

        function adjustHashrate(multiplier) {
            hashrate *= multiplier;
            blockTime = 10 / multiplier;

            document.getElementById('hashrateBar').style.width = Math.min(hashrate, 200) + '%';
            document.getElementById('hashrateBar').textContent = Math.round(hashrate) + ' EH/s';
            document.getElementById('blockTime').textContent = blockTime.toFixed(1) + ' min';

            if (multiplier > 1) {
                logHomeostasis(`⚡ Hashrate doubled! New miners joined. Block time dropped to ${blockTime.toFixed(1)} minutes.`);
                logHomeostasis(`⚠️ Network is producing blocks too quickly. Adjustment needed in ~2 weeks.`);
            } else {
                logHomeostasis(`📉 Hashrate halved! Miners left network. Block time increased to ${blockTime.toFixed(1)} minutes.`);
                logHomeostasis(`⚠️ Network is producing blocks too slowly. Adjustment needed in ~2 weeks.`);
            }
        }

        function runDifficultyAdjustment() {
            const targetTime = 10.0;
            const adjustmentFactor = blockTime / targetTime;

            difficulty *= adjustmentFactor;
            blockTime = targetTime;

            document.getElementById('difficulty').textContent = difficulty.toFixed(2) + 'x';
            document.getElementById('blockTime').textContent = blockTime.toFixed(1) + ' min';

            logHomeostasis(`🔧 Difficulty adjustment executed!`);
            logHomeostasis(`📊 New difficulty: ${difficulty.toFixed(2)}x (${adjustmentFactor > 1 ? 'decreased' : 'increased'})`);
            logHomeostasis(`✅ Block time restored to 10.0 minutes. Homeostasis achieved!`);
            logHomeostasis(`🌱 Network self-regulated without any central authority.`);
        }

        function resetHomeostasis() {
            hashrate = 100;
            difficulty = 1.0;
            blockTime = 10.0;

            document.getElementById('hashrateBar').style.width = '50%';
            document.getElementById('hashrateBar').textContent = '100 EH/s';
            document.getElementById('blockTime').textContent = '10.0 min';
            document.getElementById('difficulty').textContent = '1.00x';
            document.getElementById('homeostasisLog').innerHTML = '';

            logHomeostasis('🔄 System reset to baseline state');
        }

        function logHomeostasis(message) {
            const log = document.getElementById('homeostasisLog');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML = `<div>${timestamp}: ${message}</div>` + log.innerHTML;
        }

        // ===== Immune Response Simulator =====
        let networkHealth = 100;
        let honestNodePercent = 95;

        function introduceAttack(type) {
            const attacks = {
                spam: {
                    name: 'Spam Attack',
                    healthDrop: 15,
                    description: 'Flooding mempool with low-fee transactions'
                },
                invalid: {
                    name: 'Invalid Block Attack',
                    healthDrop: 20,
                    description: 'Broadcasting blocks with invalid transactions'
                },
                sybil: {
                    name: 'Sybil Attack',
                    healthDrop: 10,
                    description: 'Creating thousands of fake nodes'
                }
            };

            const attack = attacks[type];
            networkHealth = Math.max(networkHealth - attack.healthDrop, 0);
            honestNodePercent = Math.max(honestNodePercent - 5, 60);

            updateImmuneDisplay();

            logImmune(`⚠️ ${attack.name} detected: ${attack.description}`);
            logImmune(`📉 Network health dropped to ${networkHealth}%`);
            logImmune(`🛡️ Immune response activating...`);

            setTimeout(() => {
                if (type === 'spam') {
                    logImmune(`✓ Fee market activated: High-fee transactions prioritized, spam filtered out`);
                } else if (type === 'invalid') {
                    logImmune(`✓ Nodes rejected invalid blocks: Consensus rules enforced automatically`);
                } else if (type === 'sybil') {
                    logImmune(`✓ Real nodes identified fake nodes: Connection limits protect network`);
                }
                logImmune(`💪 Attack neutralized. Network demonstrated resilience.`);
            }, 2000);
        }

        function healNetwork() {
            logImmune(`⚕️ Initiating self-healing process...`);

            const healInterval = setInterval(() => {
                if (networkHealth >= 100 && honestNodePercent >= 95) {
                    clearInterval(healInterval);
                    logImmune(`✅ Network fully recovered to 100% health`);
                    logImmune(`🌱 Bitcoin demonstrated antifragility: stronger after stress`);
                    return;
                }

                networkHealth = Math.min(networkHealth + 5, 100);
                honestNodePercent = Math.min(honestNodePercent + 2, 95);
                updateImmuneDisplay();
            }, 500);
        }

        function updateImmuneDisplay() {
            document.getElementById('networkHealth').textContent = networkHealth + '%';
            document.getElementById('networkHealth').style.color = networkHealth > 70 ? '#2ecc71' : '#e74c3c';
            document.getElementById('honestNodes').textContent = honestNodePercent + '%';
            document.getElementById('integrityBar').style.width = networkHealth + '%';
            document.getElementById('integrityBar').textContent = networkHealth + '%';
        }

        function logImmune(message) {
            const log = document.getElementById('immuneLog');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML = `<div>${timestamp}: ${message}</div>` + log.innerHTML;
        }

        // ===== Tab Switching =====
        function switchTab(tab) {
            document.querySelectorAll('.demo-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.demo-panel').forEach(p => p.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(`${tab}-panel`).classList.add('active');
        }

        // ===== Reflection Questions with localStorage =====
        const STORAGE_KEY = 'principled-stage4-module3-reflections';

        function saveReflection(questionNum, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[`question${questionNum}`] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        function loadReflections() {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            for (let i = 1; i <= 3; i++) {
                const textarea = document.getElementById(`question${i}`);
                if (textarea && reflections[`question${i}`]) {
                    textarea.value = reflections[`question${i}`];
                }
            }
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            loadReflections();
            resetHomeostasis();
            updateImmuneDisplay();

            // Auto-save reflections
            ['question1', 'question2', 'question3'].forEach((id, index) => {
                const textarea = document.getElementById(id);
                if (textarea) {
                    textarea.addEventListener('input', (e) => {
                        saveReflection(index + 1, e.target.value);
                    });
                }
            });
        });
    </script>
</body>
</html>
