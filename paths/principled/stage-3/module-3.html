<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Cost of Truth | Stage 3 Module 3 | Principled Path</title>
    <style>
        :root {
            --accent-bronze: #8B6F47;
            --accent-bronze-light: #A0826D;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --text-light: #e0e0e0;
            --text-dim: #b3b3b3;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 900px; margin: 0 auto; }
        .back-btn {
            display: inline-block;
            background: var(--accent-bronze);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }
        .back-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4); }
        .module-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.2), rgba(139, 111, 71, 0.05));
            border-radius: 12px;
            border: 2px solid var(--accent-bronze);
        }
        .module-icon { font-size: 4rem; margin-bottom: 1rem; }
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        .module-subtitle { font-size: 1.2rem; color: var(--text-dim); max-width: 700px; margin: 0 auto; }
        .content-section {
            background: var(--secondary-dark);
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(139, 111, 71, 0.2);
        }
        .content-section h2 {
            color: var(--accent-bronze);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }
        .content-section h3 {
            color: var(--accent-bronze-light);
            font-size: 1.3rem;
            margin: 2rem 0 1rem;
        }
        .content-section p {
            color: var(--text-dim);
            margin-bottom: 1rem;
            line-height: 1.8;
        }
        .content-section ul {
            list-style: none;
            padding-left: 0;
        }
        .content-section li {
            padding: 0.75rem 0 0.75rem 2rem;
            position: relative;
            color: var(--text-light);
            line-height: 1.8;
        }
        .content-section li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--accent-bronze);
            font-weight: bold;
        }
        .highlight-box {
            background: rgba(139, 111, 71, 0.1);
            border-left: 4px solid var(--accent-bronze);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
        }
        .highlight-box strong {
            color: var(--accent-bronze);
            display: block;
            margin-bottom: 0.5rem;
        }
        .demo-container {
            background: var(--primary-dark);
            border: 2px solid rgba(139, 111, 71, 0.3);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        .demo-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        .demo-tab {
            background: var(--secondary-dark);
            color: var(--text-dim);
            border: 2px solid rgba(139, 111, 71, 0.2);
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .demo-tab:hover {
            border-color: var(--accent-bronze);
            color: var(--text-light);
        }
        .demo-tab.active {
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            color: var(--primary-dark);
            border-color: var(--accent-bronze);
        }
        .demo-panel {
            display: none;
        }
        .demo-panel.active {
            display: block;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .comparison-card {
            background: var(--secondary-dark);
            border: 2px solid rgba(139, 111, 71, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        .comparison-card:hover {
            border-color: var(--accent-bronze);
            transform: translateY(-4px);
        }
        .comparison-title {
            color: var(--accent-bronze);
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        .comparison-property {
            display: flex;
            justify-content: space-between;
            margin: 0.5rem 0;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(139, 111, 71, 0.1);
        }
        .comparison-property:last-child {
            border-bottom: none;
        }
        .property-label {
            color: var(--text-dim);
            font-size: 0.9rem;
        }
        .property-value {
            color: var(--text-light);
            font-weight: 600;
        }
        .energy-meter {
            position: relative;
            height: 30px;
            background: var(--secondary-dark);
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem 0;
        }
        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-bronze), var(--accent-bronze-light));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }
        button {
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 111, 71, 0.4);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        input[type="range"] {
            width: 100%;
            margin: 1rem 0;
        }
        .cost-calculator {
            background: var(--secondary-dark);
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
        }
        .calculator-row {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--primary-dark);
            border-radius: 6px;
        }
        .reflection-section {
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.1), rgba(139, 111, 71, 0.05));
            border: 2px solid rgba(139, 111, 71, 0.3);
            border-radius: 12px;
            padding: 2.5rem;
            margin: 3rem 0;
        }
        .reflection-section h2 {
            color: var(--accent-bronze);
            margin-bottom: 2rem;
            text-align: center;
        }
        .question-box {
            background: var(--secondary-dark);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border: 2px solid rgba(139, 111, 71, 0.2);
        }
        .question-box h3 {
            color: var(--accent-bronze-light);
            margin-bottom: 1rem;
        }
        textarea {
            width: 100%;
            min-height: 120px;
            background: var(--primary-dark);
            border: 2px solid rgba(139, 111, 71, 0.3);
            color: var(--text-light);
            padding: 1rem;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
        }
        textarea:focus {
            outline: none;
            border-color: var(--accent-bronze);
        }
        .next-module {
            text-align: center;
            margin-top: 3rem;
        }
        .next-module a {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-bronze), var(--accent-bronze-light));
            color: white;
            padding: 1.25rem 2.5rem;
            border-radius: 2rem;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        .next-module a:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 111, 71, 0.5);
        }
        /* Interactive Reflection Styles */
        .reflection-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid rgba(139, 111, 71, 0.2);
            padding-bottom: 0.5rem;
        }
        .reflection-tab {
            background: transparent;
            color: var(--text-dim);
            border: 2px solid rgba(139, 111, 71, 0.3);
            padding: 0.5rem 1.25rem;
            border-radius: 8px 8px 0 0;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .reflection-tab:hover {
            color: var(--accent-bronze);
            border-color: var(--accent-bronze);
            transform: translateY(-2px);
        }
        .reflection-tab.active {
            background: linear-gradient(135deg, rgba(139, 111, 71, 0.2), rgba(139, 111, 71, 0.1));
            color: var(--accent-bronze);
            border-color: var(--accent-bronze);
            border-bottom-color: transparent;
        }
        .reflection-panel {
            display: none;
            padding: 1.5rem;
            background: var(--primary-dark);
            border-radius: 0 8px 8px 8px;
            border: 2px solid rgba(139, 111, 71, 0.2);
        }
        .reflection-panel.active {
            display: block;
        }
        .choice-select {
            width: 100%;
            background: var(--secondary-dark);
            border: 2px solid rgba(139, 111, 71, 0.3);
            color: var(--text-light);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
        }
        .choice-select:focus {
            outline: none;
            border-color: var(--accent-bronze);
        }
        .feedback-btn {
            background: linear-gradient(45deg, #8B6F47, #A0826D);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }
        .feedback-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 111, 71, 0.4);
        }
        .feedback-box {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .feedback-box.positive {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4caf50;
        }
        .feedback-box.positive h5 {
            color: #4caf50;
            margin-bottom: 0.5rem;
        }
        .feedback-box.hint {
            background: rgba(255, 152, 0, 0.1);
            border-color: #8B6F47;
        }
        .feedback-box.hint h5 {
            color: #8B6F47;
            margin-bottom: 0.5rem;
        }
        .feedback-box.neutral {
            background: rgba(139, 111, 71, 0.1);
            border-color: var(--accent-bronze);
        }
        .feedback-box.neutral h5 {
            color: var(--accent-bronze);
            margin-bottom: 0.5rem;
        }
        .checklist-reflection {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--primary-dark);
            border: 2px solid rgba(139, 111, 71, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .checkbox-label:hover {
            border-color: var(--accent-bronze);
        }
        .checkbox-label input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .save-indicator {
            color: var(--text-dim);
            font-size: 0.85rem;
            text-align: right;
            margin-top: 0.5rem;
            opacity: 0.7;
        }
        
        /* ===== ACCESSIBILITY ENHANCEMENTS (WCAG 2.1 AA) ===== */

        /* WCAG 2.5.5: Touch Target Size */
        button, a, [role="button"], .nav-btn, .nav-link, .back-button, .demo-button, .feedback-btn, .check-answer-btn {
            min-height: 44px;
            min-width: 44px;
        }

        p a, li a {
            min-height: auto;
            min-width: auto;
            padding: 0.25rem 0;
        }

        /* WCAG 2.4.7: Focus Visible */
        *:focus-visible {
            outline: 3px solid var(--accent-bronze, #8B6F47);
            outline-offset: 2px;
        }

        button:focus-visible, a:focus-visible, [role="button"]:focus-visible {
            outline: 3px solid var(--accent-bronze, #8B6F47);
            outline-offset: 4px;
            box-shadow: 0 0 0 4px rgba(139, 111, 71, 0.2);
        }

        /* WCAG 2.3.3: Animation from Interactions */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* WCAG 1.4.10: Reflow */
        @media (max-width: 360px) {
            body {
                overflow-x: hidden;
            }

            .container {
                padding: 0 1rem;
            }
        }


        @media (max-width: 768px) {
            .module-header h1 { font-size: 2rem; }
            .comparison-grid { grid-template-columns: 1fr; }
            .demo-tabs { flex-direction: column; }
        }
        @media (max-width: 480px) {
            .reflection-tabs {
                flex-direction: column;
                gap: 0.25rem;
            }
            .reflection-tab {
                width: 100%;
                text-align: center;
                border-radius: 6px;
            }
        }
    </style>
    <script src="/js/config.js"></script>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
    <script src="/js/module-progress.js"></script>
    <link rel="stylesheet" href="/css/icons.css">
<meta name="description" content="Learn about module 3 at Bitcoin Sovereign Academy. Interactive Bitcoin education with hands-on exercises and expert guidance."><link rel="canonical" href="https://bitcoinsovereign.academy/module-3.html"><meta property="og:title" content="Module 3 - Bitcoin Sovereign Academy"><meta property="og:description" content="Learn about module 3 at Bitcoin Sovereign Academy. Interactive Bitcoin education with hands-on exercises and expert guidance."><meta property="og:image" content="https://bitcoinsovereign.academy/assets/og-image.jpg"><meta property="og:url" content="https://bitcoinsovereign.academy/module-3.html"><meta property="og:type" content="website"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "EducationalOrganization",
  "name": "Bitcoin Sovereign Academy",
  "description": "Master Bitcoin through interactive experiences, AI-powered learning, and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.",
  "url": "https://bitcoinsovereign.academy",
  "logo": "https://bitcoinsovereign.academy/assets/og-image.jpg",
  "sameAs": [
    "https://github.com/Sovereigndwp/bitcoin-sovereign-academy"
  ],
  "educationalLevel": "Beginner to Advanced",
  "teaches": [
    "Bitcoin Fundamentals",
    "Cryptocurrency Technology",
    "Financial Sovereignty",
    "Digital Asset Security"
  ],
  "audience": {
    "@type": "Audience",
    "audienceType": "Students interested in Bitcoin and cryptocurrency"
  }
}</script></head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <main id="main-content" class="container">
        <a href="/paths/principled/stage-3/" class="back-btn">‚Üê Back to Stage 3</a>

        <div class="module-header">
            <div class="module-icon"><span data-icon="lightning"></span> </div>
            <h1>The Cost of Truth</h1>
            <p class="module-subtitle">
                Truth requires energy, and that's exactly what makes it valuable.
                Discover why proof-of-work anchors digital records in physical reality.
            </p>
        </div>

        <!-- The Thermodynamic Foundation -->
        <section class="content-section">
            <h2>The Thermodynamic Foundation</h2>
            <p>
                Remember Stage 1, Module 1? You learned that value requires energy. You can't create something from nothing. This isn't economics. It's physics.
            </p>
            <p>
                Bitcoin is the first money system to enforce this law digitally. Creating new bitcoins requires real energy expenditure. Not metaphorically. Literally. Proof-of-work ties digital scarcity to physical scarcity.
            </p>
            <p>
                This module reveals why energy cost isn't a bug. It's the feature that makes Bitcoin resistant to every attack vector you studied in Stages 1-2.
            </p>
        </section>

        <!-- Introduction -->
        <div class="content-section">
            <h2>Why Does Truth Cost Energy?</h2>
            <p>
                In the physical world, creating something real requires energy. You can't build a house,
                grow food, or manufacture goods without expending energy. This is a fundamental law of physics.
            </p>
            <p>
                But in the digital world, copying is free. Files can be duplicated infinitely at zero cost.
                This creates a problem: <strong>How do you make digital records costly to corrupt?</strong>
            </p>

            <div class="highlight-box">
                <strong>The Breakthrough:</strong>
                Bitcoin solves this by tying digital records to physical energy expenditure.
                Through proof-of-work, altering Bitcoin's history would require re-spending the energy
                used to create it, making lies expensive and truth cheap to verify.
            </div>

            <p>
                This isn't a bug; it's the feature that makes Bitcoin's ledger immutable.
                Energy expenditure creates a bridge between the digital realm and physical reality.
            </p>
        </div>

        <!-- Free vs. Costly Information -->
        <div class="content-section">
            <h2>Free Information vs. Costly Truth</h2>
            <p>
                There's a critical difference between information that's free to create and truth that's costly to forge.
            </p>

            <div class="comparison-grid">
                <div class="comparison-card">
                    <div class="comparison-title">üó£Ô∏è Free Information</div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to create</span>
                        <span class="property-value">$0</span>
                    </div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to copy</span>
                        <span class="property-value">$0</span>
                    </div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to verify</span>
                        <span class="property-value">Hard</span>
                    </div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to forge</span>
                        <span class="property-value">$0</span>
                    </div>
                    <p style="color: var(--text-dim); margin-top: 1rem; font-size: 0.9rem;">
                        Examples: Social media posts, fake news, spam emails
                    </p>
                </div>

                <div class="comparison-card">
                    <div class="comparison-title"><span data-icon="lightning"></span> Costly Truth (Bitcoin)</div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to create</span>
                        <span class="property-value">Energy + Time</span>
                    </div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to copy</span>
                        <span class="property-value">$0</span>
                    </div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to verify</span>
                        <span class="property-value">Easy</span>
                    </div>
                    <div class="comparison-property">
                        <span class="property-label">Cost to forge</span>
                        <span class="property-value">Impossible*</span>
                    </div>
                    <p style="color: var(--text-dim); margin-top: 1rem; font-size: 0.9rem;">
                        *Would require re-expending all energy used to secure the chain
                    </p>
                </div>
            </div>

            <h3>The Asymmetry That Matters</h3>
            <p>
                Bitcoin's genius is this asymmetry:
            </p>
            <ul>
                <li><strong>Creating a valid block:</strong> Requires massive energy expenditure</li>
                <li><strong>Verifying a block:</strong> Requires trivial computation</li>
                <li><strong>Altering history:</strong> Requires re-doing all the work that came after</li>
            </ul>

            <p>
                This makes honesty cheap to verify and dishonesty expensive to attempt.
            </p>
        </div>

        <!-- Proof-of-Work Explained -->
        <div class="content-section">
            <h2>How Proof-of-Work Creates Cost</h2>
            <p>
                Proof-of-work is a mechanism that requires miners to solve computational puzzles
                before adding new blocks to the blockchain. This solves the coordination problem from Stage 2 and enforces the physics from Stage 1. Here's how:
            </p>

            <h3>1. Energy as an Unforgeable Costliness</h3>
            <p>
                Remember Stage 1's lesson: value cannot be created from nothing. Energy expenditure is proof of work done. Energy can't be faked. You either spent electricity running mining hardware, or you didn't.
                This creates an objective, physical anchor for digital records, making Bitcoin's scarcity as real as gold's.
            </p>

            <h3>2. Cumulative Difficulty</h3>
            <p>
                Each new block added to Bitcoin requires more energy. The deeper a transaction is buried
                in the blockchain, the more energy you'd need to expend to alter it. After 6 blocks,
                rewriting history becomes economically irrational.
            </p>

            <h3>3. Time as a One-Way Function</h3>
            <p>
                Proof-of-work introduces time into the digital realm. You can't skip ahead; you must
                actually wait and compute. This prevents instant rewrites of history.
            </p>

            <div class="highlight-box">
                <strong>Thought Experiment:</strong>
                Imagine someone wants to alter a Bitcoin transaction from 1 hour ago (6 blocks deep).
                They would need to:
                <ul style="margin-top: 0.5rem;">
                    <li>Re-mine those 6 blocks faster than the honest network mines 1 new block</li>
                    <li>Control more than 51% of global mining power</li>
                    <li>Spend millions in electricity</li>
                </ul>
                And even if they succeeded, the network would likely reject their chain, making the attack pointless.
            </div>
        </div>

        <!-- Interactive Demos -->
        <div class="content-section">
            <h2>Interactive Demonstrations</h2>
            <p>
                Experience the cost of truth through these simulations.
            </p>

            <div class="demo-container">
                <div class="demo-tabs">
                    <button class="demo-tab active" onclick="switchTab('energy')">Energy Cost Calculator</button>
                    <button class="demo-tab" onclick="switchTab('attack')">Attack Cost Simulator</button>
                    <button class="demo-tab" onclick="switchTab('time')">Time-Lock Visualization</button>
                </div>

                <!-- Energy Cost Calculator -->
                <div id="energy-panel" class="demo-panel active">
                    <h3 style="color: var(--accent-bronze-light); margin-bottom: 1rem;">Energy Cost Calculator</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        See how much energy it takes to secure Bitcoin blocks at different difficulty levels.
                    </p>

                    <div class="cost-calculator">
                        <div style="margin-bottom: 1.5rem;">
                            <label style="color: var(--accent-bronze); font-weight: 600; display: block; margin-bottom: 0.5rem;">
                                Number of Blocks to Mine: <span id="blockCount">1</span>
                            </label>
                            <input type="range" id="blockSlider" min="1" max="10" value="1" oninput="updateEnergyCost()">
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Estimated Energy (kWh)</span>
                            <span id="energyKwh" style="color: var(--accent-bronze); font-weight: 600;">~1,500</span>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Electricity Cost ($0.10/kWh)</span>
                            <span id="energyCost" style="color: var(--accent-bronze); font-weight: 600;">~$150</span>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Equivalent to powering a home for</span>
                            <span id="homeDays" style="color: var(--accent-bronze); font-weight: 600;">~50 days</span>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">CO‚ÇÇ Emissions (if coal-powered)</span>
                            <span id="co2Amount" style="color: var(--accent-bronze); font-weight: 600;">~1,200 kg</span>
                        </div>

                        <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(139, 111, 71, 0.1); border-radius: 6px;">
                            <div style="color: var(--accent-bronze); font-weight: 600; margin-bottom: 0.5rem;"><span data-icon="lightbulb"></span> Context</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem; line-height: 1.6;">
                                Bitcoin miners increasingly use renewable energy sources (hydro, solar, wind) and
                                capture otherwise-wasted energy (flared gas, excess grid capacity). The energy
                                expenditure is the security mechanism; it makes rewriting history prohibitively expensive.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attack Cost Simulator -->
                <div id="attack-panel" class="demo-panel">
                    <h3 style="color: var(--accent-bronze-light); margin-bottom: 1rem;">51% Attack Cost Simulator</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Calculate the cost of attempting to rewrite Bitcoin's history.
                    </p>

                    <div class="cost-calculator">
                        <div style="margin-bottom: 1.5rem;">
                            <label style="color: var(--accent-bronze); font-weight: 600; display: block; margin-bottom: 0.5rem;">
                                Blocks to Rewrite: <span id="attackDepth">6</span>
                            </label>
                            <input type="range" id="attackSlider" min="1" max="144" value="6" oninput="updateAttackCost()">
                            <div style="color: var(--text-dim); font-size: 0.85rem; margin-top: 0.5rem;">
                                (144 blocks = ~1 day of history)
                            </div>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Hashpower Needed</span>
                            <span id="hashpower" style="color: #e74c3c; font-weight: 600;">&gt;51% of network</span>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Hardware Cost (ASIC miners)</span>
                            <span id="hardwareCost" style="color: #e74c3c; font-weight: 600;">~$15 billion</span>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Electricity Cost to Rewrite</span>
                            <span id="attackElectricity" style="color: #e74c3c; font-weight: 600;">~$900,000</span>
                        </div>

                        <div class="calculator-row">
                            <span style="color: var(--text-dim);">Total Attack Cost</span>
                            <span id="totalAttackCost" style="color: #e74c3c; font-weight: 600; font-size: 1.2rem;">~$15,000,900,000</span>
                        </div>

                        <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(231, 76, 60, 0.1); border-radius: 6px; border-left: 4px solid #e74c3c;">
                            <div style="color: #e74c3c; font-weight: 600; margin-bottom: 0.5rem;">‚ö†Ô∏è Attack Outcome</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem; line-height: 1.6;">
                                Even if the attack succeeded, the Bitcoin price would crash due to lost confidence,
                                making the attacker's coins worthless. The attacker would destroy billions in value
                                while gaining nothing. This is why Bitcoin has never been successfully attacked.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Time-Lock Visualization -->
                <div id="time-panel" class="demo-panel">
                    <h3 style="color: var(--accent-bronze-light); margin-bottom: 1rem;">Time-Lock Visualization</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Watch how transactions become progressively harder to alter as they get buried deeper in the chain.
                    </p>

                    <div style="background: var(--secondary-dark); padding: 2rem; border-radius: 8px;">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="color: var(--text-light); font-size: 1.2rem; margin-bottom: 0.5rem;">
                                Your Transaction: <span style="color: var(--accent-bronze); font-weight: 600;">0.1 BTC to Alice</span>
                            </div>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                Confirmations: <span id="confirmations" style="color: var(--accent-bronze); font-weight: 600;">0</span> / 6 recommended
                            </div>
                        </div>

                        <div style="margin: 2rem 0;">
                            <div style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.5rem;">
                                Security Level
                            </div>
                            <div class="energy-meter">
                                <div id="securityFill" class="energy-fill" style="width: 0%;">0%</div>
                            </div>
                        </div>

                        <div id="blockList" style="margin: 2rem 0;"></div>

                        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                            <button onclick="addConfirmation()">Mine Next Block (~10 min)</button>
                            <button onclick="resetConfirmations()">Reset</button>
                        </div>

                        <div id="statusMessage" style="margin-top: 1.5rem; padding: 1rem; background: rgba(139, 111, 71, 0.1); border-radius: 6px; text-align: center;">
                            <div style="color: var(--accent-bronze); font-weight: 600; margin-bottom: 0.5rem;">‚è≥ Waiting for first confirmation...</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                Transaction is in the mempool, waiting to be included in a block.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Why Energy Isn't Waste -->
        <div class="content-section">
            <h2>Why This Energy Isn't "Wasted"</h2>
            <p>
                Critics often say Bitcoin "wastes" energy. But this misunderstands what Bitcoin's energy does and what problems it solves.
            </p>

            <h3>Energy Secures $1+ Trillion in Value</h3>
            <p>
                Bitcoin's energy expenditure directly corresponds to its security level. The more energy
                spent mining, the more expensive it becomes to attack the network. This energy secures
                hundreds of billions of dollars worth of digital assets.
            </p>

            <h3>Enables Uncensorable Money</h3>
            <p>
                The energy cost makes Bitcoin resistant to government shutdown or corporate control.
                You can't simply "turn off" a system that's distributed across thousands of independent
                miners worldwide. Remember Stage 2's lesson about discretionary power? Bitcoin's energy expenditure
                removes that discretion; no one controls who can participate.
            </p>

            <h3>Uses Otherwise-Wasted Energy</h3>
            <p>
                Bitcoin miners seek the cheapest energy, which often means:
            </p>
            <ul>
                <li>Capturing flared gas that would otherwise burn into the atmosphere</li>
                <li>Using excess renewable energy that can't be stored or transmitted</li>
                <li>Monetizing stranded energy resources too remote for other uses</li>
                <li>Balancing electrical grids by consuming surplus during low-demand periods</li>
            </ul>

            <div class="highlight-box">
                <strong>Reframing the Question:</strong>
                Instead of asking "Is Bitcoin's energy use wasteful?", ask:
                "What is the appropriate energy cost for securing a global, uncensorable, immutable ledger
                that enables financial sovereignty for billions of people?"
            </div>
        </div>

        <!-- The Physics of Immutability -->
        <div class="content-section">
            <h2>The Physics of Immutability</h2>
            <p>
                Bitcoin's immutability comes from a fundamental law of physics you learned in Stage 1: <strong>energy cannot be created or destroyed</strong>. Entropy always increases. Work done cannot be undone.
            </p>

            <p>
                When miners expend energy to create a block:
            </p>
            <ul>
                <li>That energy is permanently gone, converted to heat (entropy)</li>
                <li>The computational work cannot be "undone"</li>
                <li>To change the block, you must re-expend that energy</li>
                <li>Each subsequent block makes previous blocks exponentially harder to change</li>
            </ul>

            <p>
                This is why Bitcoin's ledger gets progressively more immutable over time. The energy
                expenditure creates a one-way time-lock that anchors digital records in physical reality. Remember Stage 1's lesson about entropy? Bitcoin harnesses it; each block adds irreversible thermodynamic cost.
            </p>

            <div class="highlight-box">
                <strong>The Elegant Truth:</strong>
                Bitcoin doesn't waste energy; it transforms energy into security, immutability, and truth.
                The energy becomes the unforgeable cost of altering history. This is the solution to every problem from Stages 1-2: physics enforces the rules, game theory aligns the incentives, and cryptography proves the ownership.
            </div>
        </div>

        <!-- Interactive Reflection -->
        <div class="reflection-section">
            <h2>ü§î Test Your Understanding</h2>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 2rem;">
                Answer at your own depth: quick thoughts or deep analysis. Get instant feedback.
            </p>

            <!-- Q1: Digital vs Physical Bridge -->
            <div class="question-box">
                <h3>Question 1: Digital vs. Physical Bridge</h3>
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    How does Bitcoin bridge the digital and physical worlds?
                </p>

                <div class="reflection-tabs">
                    <button class="reflection-tab active" onclick="switchReflectionTab(1, 'quick', event)" role="tab"><span data-icon="lightning"></span> Quick</button>
                    <button class="reflection-tab" onclick="switchReflectionTab(1, 'deep', event)" role="tab"><span data-icon="target"></span> Deep</button>
                </div>

                <div id="q1-quick" class="reflection-panel active">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-dim);">
                        What makes Bitcoin's ledger unforgeable?
                    </label>
                    <select id="question1-choice" class="choice-select">
                        <option value="">Select...</option>
                        <option value="speed">Fast transaction processing</option>
                        <option value="blockchain">Blockchain data structure</option>
                        <option value="energy">Energy expenditure (proof-of-work)</option>
                        <option value="crypto">Cryptographic algorithms</option>
                    </select>
                    <button class="feedback-btn" onclick="checkReflection(1, 'quick')">Check Answer</button>
                    <div id="feedback1-quick" class="feedback-box" style="display: none;"></div>
                </div>

                <div id="q1-deep" class="reflection-panel">
                    <textarea id="question1-deep" placeholder="Explain: Why can't digital bits alone secure money? How does energy anchor Bitcoin to physical reality? Reference thermodynamics if you explored Stage 4.1." style="min-height: 150px;"></textarea>
                    <button class="feedback-btn" onclick="checkReflection(1, 'deep')">Get Feedback</button>
                    <div id="feedback1-deep" class="feedback-box" style="display: none;"></div>
                </div>
                <div class="save-indicator">‚úì Auto-saved locally</div>
            </div>

            <!-- Q2: Energy Comparison -->
            <div class="question-box">
                <h3>Question 2: Energy "Waste" vs. Security Cost</h3>
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    Is Bitcoin's energy use fundamentally different from traditional money security?
                </p>

                <div class="checklist-reflection">
                    <p style="color: var(--text-dim); font-size: 0.95rem; margin-bottom: 1rem;">Which statements are TRUE?</p>
                    <label class="checkbox-label">
                        <input type="checkbox" id="energy-distributed" onchange="updateEnergyFeedback()">
                        Bitcoin's security is distributed globally, not centralized in vaults
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="energy-ongoing" onchange="updateEnergyFeedback()">
                        Bitcoin requires ongoing energy (miners must keep working)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="energy-efficient" onchange="updateEnergyFeedback()">
                        Bitcoin uses less total energy than the global banking system
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="energy-waste" onchange="updateEnergyFeedback()">
                        All of Bitcoin's energy is "wasted" with no benefit
                    </label>
                </div>
                <div id="feedback2" class="feedback-box" style="display: none; margin-top: 1rem;"></div>

                <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid rgba(139, 111, 71, 0.2);">
                    <h4 style="color: var(--accent-bronze); margin-bottom: 1rem;"><span data-icon="target"></span> Deep Analysis (Optional)</h4>
                    <textarea id="question2-deep" placeholder="Compare: How does Bitcoin's ongoing energy cost differ from the upfront + ongoing costs of traditional systems (vaults, guards, agencies, compliance)?" style="min-height: 120px;"></textarea>
                </div>
                <div class="save-indicator">‚úì Auto-saved locally</div>
            </div>

            <!-- Q3: Cost of Truth Beyond Bitcoin -->
            <div class="question-box">
                <h3>Question 3: Costly Signals Beyond Bitcoin</h3>
                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                    "If truth were free to create, lies would be indistinguishable from facts."
                    Where else does this principle apply?
                </p>

                <div class="checklist-reflection">
                    <p style="color: var(--text-dim); font-size: 0.95rem; margin-bottom: 1rem;">Select domains where costly-to-create signals ensure quality:</p>
                    <label class="checkbox-label">
                        <input type="checkbox" id="domain-journalism" onchange="updateDomainFeedback()">
                        Investigative journalism (time + resources = credibility)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="domain-science" onchange="updateDomainFeedback()">
                        Academic research (peer review + replication = truth)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="domain-credentials" onchange="updateDomainFeedback()">
                        Professional credentials (education = skill signal)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="domain-social" onchange="updateDomainFeedback()">
                        Social media likes (zero cost = perfect trust signal)
                    </label>
                </div>
                <div id="feedback3" class="feedback-box" style="display: none; margin-top: 1rem;"></div>
                <div class="save-indicator">‚úì Auto-saved locally</div>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="next-module">
            <h2 style="color: var(--accent-bronze); margin-bottom: 1rem;">Stage 3 Complete!</h2>
            <p style="color: var(--text-dim); margin-bottom: 2rem;">
                You've learned how Bitcoin's technical building blocks create an immutable ledger.
                Next, explore how these pieces come together as an emergent system.
            </p>
            <a href="/paths/principled/stage-4/">
                Continue to Stage 4: Bitcoin as an Emergent System ‚Üí
            </a>
        </div>
    </div>

    <script>
        // ===== Energy Cost Calculator =====
        function updateEnergyCost() {
            const blocks = parseInt(document.getElementById('blockSlider').value);
            document.getElementById('blockCount').textContent = blocks;

            // Approximate values (real values vary based on network hashrate)
            const kwhPerBlock = 1500;
            const electricityRate = 0.10; // $0.10 per kWh
            const homeKwhPerDay = 30;
            const co2PerKwh = 0.8; // kg CO2 per kWh for coal

            const totalKwh = kwhPerBlock * blocks;
            const totalCost = totalKwh * electricityRate;
            const homeDays = Math.round(totalKwh / homeKwhPerDay);
            const co2 = Math.round(totalKwh * co2PerKwh);

            document.getElementById('energyKwh').textContent = `~${totalKwh.toLocaleString()}`;
            document.getElementById('energyCost').textContent = `~$${Math.round(totalCost).toLocaleString()}`;
            document.getElementById('homeDays').textContent = `~${homeDays} days`;
            document.getElementById('co2Amount').textContent = `~${co2.toLocaleString()} kg`;
        }

        // ===== Attack Cost Simulator =====
        function updateAttackCost() {
            const blocks = parseInt(document.getElementById('attackSlider').value);
            document.getElementById('attackDepth').textContent = blocks;

            // Simplified calculations
            const hardwareCostBillion = 15;
            const electricityPerBlock = 150000; // $150k per block
            const totalElectricity = electricityPerBlock * blocks;
            const totalCost = (hardwareCostBillion * 1e9) + totalElectricity;

            document.getElementById('hardwareCost').textContent = `~$${hardwareCostBillion} billion`;
            document.getElementById('attackElectricity').textContent = `~$${(totalElectricity / 1000).toFixed(0)}k`;
            document.getElementById('totalAttackCost').textContent = `~$${(totalCost / 1e9).toFixed(2)} billion`;
        }

        // ===== Time-Lock Visualization =====
        let confirmationCount = 0;
        const maxConfirmations = 6;

        function addConfirmation() {
            if (confirmationCount >= maxConfirmations) return;

            confirmationCount++;
            updateTimeLock();
        }

        function resetConfirmations() {
            confirmationCount = 0;
            updateTimeLock();
        }

        function updateTimeLock() {
            document.getElementById('confirmations').textContent = confirmationCount;

            const securityPercent = Math.min((confirmationCount / maxConfirmations) * 100, 100);
            const fill = document.getElementById('securityFill');
            fill.style.width = securityPercent + '%';
            fill.textContent = Math.round(securityPercent) + '%';

            // Update block list
            const blockList = document.getElementById('blockList');
            if (confirmationCount === 0) {
                blockList.innerHTML = '';
            } else {
                let blocksHTML = '';
                for (let i = 0; i < confirmationCount; i++) {
                    const opacity = 1 - (i * 0.1);
                    blocksHTML += `
                        <div style="padding: 1rem; margin: 0.5rem 0; background: rgba(139, 111, 71, ${opacity * 0.2}); border-left: 4px solid var(--accent-bronze); border-radius: 6px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="color: var(--accent-bronze); font-weight: 600;">Block ${800000 + i}</div>
                                    <div style="color: var(--text-dim); font-size: 0.85rem;">${i === 0 ? 'Contains your transaction' : `${i} confirmation${i > 1 ? 's' : ''} deep`}</div>
                                </div>
                                <div style="color: var(--text-light); font-weight: 600;">
                                    ${i === 0 ? '‚è±Ô∏è' : '‚úì'}
                                </div>
                            </div>
                        </div>
                    `;
                }
                blockList.innerHTML = blocksHTML;
            }

            // Update status message
            const statusDiv = document.getElementById('statusMessage');
            if (confirmationCount === 0) {
                statusDiv.innerHTML = `
                    <div style="color: var(--accent-bronze); font-weight: 600; margin-bottom: 0.5rem;">‚è≥ Waiting for first confirmation...</div>
                    <div style="color: var(--text-dim); font-size: 0.9rem;">
                        Transaction is in the mempool, waiting to be included in a block.
                    </div>
                `;
            } else if (confirmationCount < 3) {
                statusDiv.style.background = 'rgba(241, 196, 15, 0.1)';
                statusDiv.style.borderLeft = '4px solid #f1c40f';
                statusDiv.innerHTML = `
                    <div style="color: #f1c40f; font-weight: 600; margin-bottom: 0.5rem;">‚ö†Ô∏è Low Security (${confirmationCount} confirmation${confirmationCount > 1 ? 's' : ''})</div>
                    <div style="color: var(--text-dim); font-size: 0.9rem;">
                        Wait for more confirmations for high-value transactions. Each block makes reversal exponentially harder.
                    </div>
                `;
            } else if (confirmationCount < 6) {
                statusDiv.style.background = 'rgba(52, 152, 219, 0.1)';
                statusDiv.style.borderLeft = '4px solid #3498db';
                statusDiv.innerHTML = `
                    <div style="color: #3498db; font-weight: 600; margin-bottom: 0.5rem;"><span data-icon="lock"></span> Medium Security (${confirmationCount} confirmations)</div>
                    <div style="color: var(--text-dim); font-size: 0.9rem;">
                        Your transaction is getting buried deeper. Reversal would require re-mining ${confirmationCount} blocks.
                    </div>
                `;
            } else {
                statusDiv.style.background = 'rgba(46, 204, 113, 0.1)';
                statusDiv.style.borderLeft = '4px solid #2ecc71';
                statusDiv.innerHTML = `
                    <div style="color: #2ecc71; font-weight: 600; margin-bottom: 0.5rem;">‚úÖ High Security (${confirmationCount} confirmations)</div>
                    <div style="color: var(--text-dim); font-size: 0.9rem;">
                        Your transaction is effectively irreversible. It would cost millions to attempt reversal.
                    </div>
                `;
            }
        }

        // ===== Tab Switching =====
        function switchTab(tab) {
            document.querySelectorAll('.demo-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.demo-panel').forEach(p => p.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(`${tab}-panel`).classList.add('active');
        }

        // ===== Interactive Reflection System =====
        const STORAGE_KEY = 'principled-stage3-module3-reflections';

        function saveReflection(key, value) {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            reflections[key] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reflections));
        }

        function loadReflections() {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');

            // Load Q1 choice and deep answer
            const q1Choice = document.getElementById('question1-choice');
            const q1Deep = document.getElementById('question1-deep');
            if (q1Choice && reflections['q1-choice']) q1Choice.value = reflections['q1-choice'];
            if (q1Deep && reflections['q1-deep']) q1Deep.value = reflections['q1-deep'];

            // Load Q2 checkboxes and deep answer
            if (reflections['energy-distributed']) document.getElementById('energy-distributed').checked = true;
            if (reflections['energy-ongoing']) document.getElementById('energy-ongoing').checked = true;
            if (reflections['energy-efficient']) document.getElementById('energy-efficient').checked = true;
            if (reflections['energy-waste']) document.getElementById('energy-waste').checked = true;
            const q2Deep = document.getElementById('question2-deep');
            if (q2Deep && reflections['q2-deep']) q2Deep.value = reflections['q2-deep'];

            // Load Q3 checkboxes
            if (reflections['domain-journalism']) document.getElementById('domain-journalism').checked = true;
            if (reflections['domain-science']) document.getElementById('domain-science').checked = true;
            if (reflections['domain-credentials']) document.getElementById('domain-credentials').checked = true;
            if (reflections['domain-social']) document.getElementById('domain-social').checked = true;

            // Trigger feedback updates for loaded checkboxes
            updateEnergyFeedback();
            updateDomainFeedback();
        }

        function switchReflectionTab(questionNum, level, event) {
            // Hide all panels for this question
            document.querySelectorAll(`#q${questionNum}-quick, #q${questionNum}-deep`).forEach(panel => {
                panel.classList.remove('active');
                panel.setAttribute('aria-hidden', 'true');
            });

            // Deactivate all tabs for this question
            event.target.parentElement.querySelectorAll('.reflection-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });

            // Activate selected panel and tab
            const panel = document.getElementById(`q${questionNum}-${level}`);
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');
            event.target.classList.add('active');
            event.target.setAttribute('aria-selected', 'true');
        }

        // Q1: Digital vs Physical Bridge
        function checkReflection(questionNum, level) {
            if (questionNum === 1 && level === 'quick') {
                const choice = document.getElementById('question1-choice').value;
                const feedbackDiv = document.getElementById('feedback1-quick');
                let feedback = '';

                if (!choice) {
                    feedback = `<h5><span data-icon="lightbulb"></span> Hint</h5><p>Please select an answer to continue.</p>`;
                    feedbackDiv.className = 'feedback-box hint';
                } else if (choice === 'energy') {
                    feedback = `<h5>‚úì Correct!</h5><p>Energy expenditure through <strong>proof-of-work</strong> is exactly what bridges the digital and physical worlds. Digital bits can be copied for free, but energy cannot be faked. By tying each block to real energy expenditure, Bitcoin makes its ledger <strong>costly to corrupt</strong> and <strong>cheap to verify</strong>.</p><p style="margin-top: 1rem; color: var(--text-dim);"><span data-icon="lightbulb"></span> Want to go deeper? Explore Stage 4.1 for the thermodynamics behind proof-of-work.</p>`;
                    feedbackDiv.className = 'feedback-box positive';
                } else if (choice === 'blockchain') {
                    feedback = `<h5>‚ö†Ô∏è Close, but not quite</h5><p>The blockchain <em>structure</em> is important (each block links to the previous one), but the <em>bridge</em> to physical reality comes from <strong>energy expenditure</strong>. Without proof-of-work, a blockchain could be rewritten costlessly.</p>`;
                    feedbackDiv.className = 'feedback-box hint';
                } else if (choice === 'crypto') {
                    feedback = `<h5>‚ö†Ô∏è Partial Understanding</h5><p>Cryptographic algorithms ensure <em>authenticity</em> (you can't forge signatures), but they don't prevent <em>rewriting history</em>. The answer is <strong>energy expenditure</strong>‚Äîit makes altering the past prohibitively expensive.</p>`;
                    feedbackDiv.className = 'feedback-box hint';
                } else if (choice === 'speed') {
                    feedback = `<h5>‚ö†Ô∏è Reconsider</h5><p>Fast transactions are convenient, but they don't make the ledger unforgeable. In fact, Bitcoin intentionally <em>slows down</em> block creation (one every ~10 minutes) to accumulate proof-of-work. The correct answer is <strong>energy expenditure</strong>.</p>`;
                    feedbackDiv.className = 'feedback-box hint';
                }

                feedbackDiv.innerHTML = feedback;
                feedbackDiv.style.display = 'block';
                saveReflection('q1-choice', choice);
            } else if (questionNum === 1 && level === 'deep') {
                const text = document.getElementById('question1-deep').value.trim().toLowerCase();
                const feedbackDiv = document.getElementById('feedback1-deep');
                let feedback = '';

                if (text.length < 50) {
                    feedback = `<h5><span data-icon="lightbulb"></span> Hint</h5><p>Try writing 3-4 sentences. Consider: Why can't digital bits alone secure money? What role does energy play? How does thermodynamics relate?</p>`;
                    feedbackDiv.className = 'feedback-box hint';
                } else {
                    const hasEnergy = text.match(/\b(energy|thermodynamic|entropy|work|cost|physical|anchor|real|tangible|expend)\b/);
                    const hasImmutability = text.match(/\b(immut|unforge|tamper|alter|rewrite|corrupt|history|past|irrevers)\b/);
                    const hasCopy = text.match(/\b(copy|free|zero.?cost|digit|virtual|abstract|bits|information)\b/);

                    const score = [hasEnergy, hasImmutability, hasCopy].filter(Boolean).length;

                    if (score === 3) {
                        feedback = `<h5>‚úì Excellent Analysis!</h5><p>You've identified the key concepts: (1) Digital information is costless to copy, (2) Energy anchors digital records to physical reality, (3) This makes the ledger immutable. This is the foundation of Bitcoin's security model.</p>`;
                        feedbackDiv.className = 'feedback-box positive';
                    } else if (score === 2) {
                        feedback = `<h5>Good Understanding!</h5><p>You're on the right track. To deepen your answer, consider: ${!hasEnergy ? 'How energy expenditure creates a physical anchor.' : ''} ${!hasImmutability ? 'Why this makes rewriting history prohibitively expensive.' : ''} ${!hasCopy ? 'The difference between costless digital copying and costly energy work.' : ''}</p>`;
                        feedbackDiv.className = 'feedback-box neutral';
                    } else {
                        feedback = `<h5><span data-icon="lightbulb"></span> Keep Going</h5><p>You're exploring important ideas. Try to address: (1) Why digital bits alone can't secure money (they're free to copy), (2) How energy expenditure anchors Bitcoin to physical reality, (3) Why this makes the ledger immutable.</p>`;
                        feedbackDiv.className = 'feedback-box hint';
                    }
                }

                feedbackDiv.innerHTML = feedback;
                feedbackDiv.style.display = 'block';
                saveReflection('q1-deep', document.getElementById('question1-deep').value);
            }
        }

        // Q2: Energy Comparison
        function updateEnergyFeedback() {
            const distributed = document.getElementById('energy-distributed').checked;
            const ongoing = document.getElementById('energy-ongoing').checked;
            const efficient = document.getElementById('energy-efficient').checked;
            const waste = document.getElementById('energy-waste').checked;

            const feedbackDiv = document.getElementById('feedback2');
            let feedback = '';

            // Save choices
            saveReflection('energy-distributed', distributed);
            saveReflection('energy-ongoing', ongoing);
            saveReflection('energy-efficient', efficient);
            saveReflection('energy-waste', waste);

            const correctCount = [distributed, ongoing, efficient].filter(Boolean).length;

            if (distributed && ongoing && efficient && !waste) {
                feedback = `<h5>‚úì Perfect Understanding!</h5><p>You've identified all key differences:<br><strong>1. Distributed globally</strong> (not centralized in vaults)<br><strong>2. Ongoing energy</strong> (miners must keep working)<br><strong>3. Less total energy</strong> than the global banking system<br><br>The "waste" framing misses the point: this energy <em>secures</em> the network, just like vault doors and guards secure banks.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (waste && correctCount === 3) {
                feedback = `<h5>‚ö†Ô∏è Reconsider "Waste"</h5><p>You correctly identified the three TRUE statements, but marked "waste" as well. Bitcoin's energy <strong>secures the network</strong>‚Äîit's not waste any more than vault security is waste. Would you call bank vault electricity "wasted"?</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (correctCount === 3) {
                feedback = `<h5>‚úì Almost There!</h5><p>You've identified the correct differences. The key insight: Bitcoin's energy creates <strong>distributed, ongoing security</strong> that's more efficient than the centralized, multi-layered energy costs of traditional banking (physical vaults, armored trucks, data centers, regulatory agencies, etc.).</p>`;
                feedbackDiv.className = 'feedback-box neutral';
            } else if (correctCount >= 1) {
                feedback = `<h5>Good Start!</h5><p>You've identified ${correctCount} correct statement${correctCount > 1 ? 's' : ''}. Keep thinking about: ${!distributed ? 'Bitcoin\'s global distribution vs. centralized vaults. ' : ''}${!ongoing ? 'Why miners must continuously expend energy. ' : ''}${!efficient ? 'Total energy: Bitcoin network vs. entire banking industry.' : ''}</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedback = `<h5><span data-icon="lightbulb"></span> Hint</h5><p>Think about the <em>nature</em> of Bitcoin's energy use: Is it centralized or distributed? Is it a one-time cost or ongoing? How does it compare to the total energy of global banking infrastructure?</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
        }

        // Q3: Costly Signals Beyond Bitcoin
        function updateDomainFeedback() {
            const journalism = document.getElementById('domain-journalism').checked;
            const science = document.getElementById('domain-science').checked;
            const credentials = document.getElementById('domain-credentials').checked;
            const social = document.getElementById('domain-social').checked;

            const feedbackDiv = document.getElementById('feedback3');
            let feedback = '';

            // Save choices
            saveReflection('domain-journalism', journalism);
            saveReflection('domain-science', science);
            saveReflection('domain-credentials', credentials);
            saveReflection('domain-social', social);

            const correctCount = [journalism, science, credentials].filter(Boolean).length;

            if (journalism && science && credentials && !social) {
                feedback = `<h5>‚úì Perfect Application!</h5><p>You've identified exactly where costly signals ensure quality:<br><strong>1. Investigative journalism</strong>: Time + resources = credible reporting<br><strong>2. Academic research</strong>: Peer review + replication = scientific truth<br><strong>3. Professional credentials</strong>: Education + testing = skill signal<br><br>Social media likes are <em>costless</em> to produce (bots, fake accounts), making them meaningless as quality signals.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (social && correctCount === 3) {
                feedback = `<h5>‚ö†Ô∏è Reconsider Social Media</h5><p>You correctly identified journalism, science, and credentials‚Äîbut social media likes are <strong>zero-cost signals</strong>. They can be faked with bots, bought cheaply, or gamed algorithmically. Costless = meaningless as a quality filter.</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else if (correctCount === 3) {
                feedback = `<h5>‚úì Excellent Understanding!</h5><p>You've grasped the core principle: <strong>costly signals filter for quality</strong>. When creating truth requires real work (investigation, research, education), lies become expensive. When signals are free (social media), truth drowns in noise.</p>`;
                feedbackDiv.className = 'feedback-box positive';
            } else if (correctCount >= 1) {
                feedback = `<h5>Good Start!</h5><p>You've identified ${correctCount} domain${correctCount > 1 ? 's' : ''} correctly. Consider: ${!journalism ? 'Does investigative journalism require time and resources? ' : ''}${!science ? 'Does peer review and replication cost effort? ' : ''}${!credentials ? 'Does professional education create a costly signal?' : ''}</p>`;
                feedbackDiv.className = 'feedback-box hint';
            } else {
                feedback = `<h5><span data-icon="lightbulb"></span> Hint</h5><p>Think about the <em>cost</em> to create each signal. Which domains require significant time, resources, or expertise? Which can be faked for free?</p>`;
                feedbackDiv.className = 'feedback-box hint';
            }

            feedbackDiv.innerHTML = feedback;
            feedbackDiv.style.display = 'block';
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            loadReflections();
            updateEnergyCost();
            updateAttackCost();
            updateTimeLock();

            // Auto-save text inputs
            const q1Deep = document.getElementById('question1-deep');
            const q2Deep = document.getElementById('question2-deep');
            if (q1Deep) q1Deep.addEventListener('input', (e) => saveReflection('q1-deep', e.target.value));
            if (q2Deep) q2Deep.addEventListener('input', (e) => saveReflection('q2-deep', e.target.value));
        });
    </script>

    <!-- Animated Icon Library -->
    <script src="/js/icon-library.js"></script>
    <script>
        // Inject icons after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            if (window.IconLibrary) {
                document.querySelectorAll('[data-icon]').forEach(function(element) {
                    var iconName = element.getAttribute('data-icon');
                    if (iconName) {
                        var iconHTML = IconLibrary.get(iconName, 20, true);
                        var span = document.createElement('span');
                        span.innerHTML = iconHTML;
                        span.className = 'icon-inline';
                        span.style.marginRight = '0.5rem';
                        span.style.display = 'inline-block';
                        span.style.verticalAlign = 'middle';
                        element.insertBefore(span, element.firstChild);
                    }
                });
            }
        });
    </script>


    <!-- Navigation Context (return-to-path functionality) -->
    <script src="/js/navigation-context.js"></script>
<script src="/js/membership-gate.js"></script>
</body></html>