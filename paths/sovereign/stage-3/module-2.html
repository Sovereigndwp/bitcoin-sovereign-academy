<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payjoin and PayNym | The Sovereign Path</title>
    <meta name="description" content="Placeholder content for Payjoin and PayNym - Coming soon!">

    <style>
        :root {
            --sovereign-gold: #d4af37;
            --sovereign-amber: #FFBF00;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --text-light: #e0e0e0;
            --text-dim: #b3b3b3;
            --border-color: rgba(212, 175, 55, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--sovereign-gold);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--sovereign-gold);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .breadcrumb ol {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb li {
            display: inline;
            color: var(--text-dim);
        }

        .breadcrumb li:not(:last-child)::after {
            content: "‚Üí";
            margin-left: 0.5rem;
        }


        .module-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--sovereign-gold);
        }

        .module-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section:last-of-type {
            border-bottom: none;
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--sovereign-gold);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .placeholder-notice {
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid var(--sovereign-gold);
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin: 2rem 0;
        }

        .placeholder-notice h3 {
            color: var(--sovereign-gold);
            margin-bottom: 0.5rem;
        }

        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--sovereign-gold);
            color: var(--primary-dark);
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-btn:hover {
            background: var(--sovereign-amber);
            transform: translateX(5px);
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        .nav-btn-secondary:hover {
            border-color: var(--sovereign-gold);
            background: rgba(212, 175, 55, 0.1);
            transform: none;
        }

        
        /* ===== ACCESSIBILITY ENHANCEMENTS (WCAG 2.1 AA) ===== */

        /* WCAG 2.5.5: Touch Target Size */
        button, a, [role="button"], .nav-btn, .module-cta {
            min-height: 44px;
            min-width: 44px;
        }

        p a, li a {
            min-height: auto;
            min-width: auto;
            padding: 0.25rem 0;
        }

        /* WCAG 2.4.7: Focus Visible */
        *:focus-visible {
            outline: 3px solid var(--sovereign-gold, #d4af37);
            outline-offset: 2px;
        }

        button:focus-visible, a:focus-visible, [role="button"]:focus-visible {
            outline: 3px solid var(--sovereign-gold, #d4af37);
            outline-offset: 4px;
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.2);
        }

        /* WCAG 2.3.3: Animation from Interactions */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* WCAG 1.4.10: Reflow */
        @media (max-width: 360px) {
            body {
                overflow-x: hidden;
            }

            .container {
                padding: 0 1rem;
            }
        }


        @media (max-width: 768px) {
            .module-title-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .module-navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
    <script src="/js/config.js"></script>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
    <script src="/js/module-progress.js"></script>
    <link rel="stylesheet" href="/css/icons.css">
<link rel="canonical" href="https://bitcoinsovereign.academy/module-2.html"><meta property="og:title" content="Module 2 - Bitcoin Sovereign Academy"><meta property="og:description" content="Learn about module 2 at Bitcoin Sovereign Academy. Interactive Bitcoin education with hands-on exercises and expert guidance."><meta property="og:image" content="https://bitcoinsovereign.academy/assets/og-image.jpg"><meta property="og:url" content="https://bitcoinsovereign.academy/module-2.html"><meta property="og:type" content="website"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "EducationalOrganization",
  "name": "Bitcoin Sovereign Academy",
  "description": "Master Bitcoin through interactive experiences, AI-powered learning, and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.",
  "url": "https://bitcoinsovereign.academy",
  "logo": "https://bitcoinsovereign.academy/assets/og-image.jpg",
  "sameAs": [
    "https://github.com/Sovereigndwp/bitcoin-sovereign-academy"
  ],
  "educationalLevel": "Beginner to Advanced",
  "teaches": [
    "Bitcoin Fundamentals",
    "Cryptocurrency Technology",
    "Financial Sovereignty",
    "Digital Asset Security"
  ],
  "audience": {
    "@type": "Audience",
    "audienceType": "Students interested in Bitcoin and cryptocurrency"
  }
}</script><link rel="stylesheet" href="/css/lab-guide.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header class="module-header">
        <div class="container">
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <ol>
                    <li><a href="/">Home</a></li>
                    <li><a href="/paths/sovereign/">The Sovereign Path</a></li>
                    <li><a href="/paths/sovereign/stage-3/">Stage 3</a></li>
                    <li aria-current="page">Module 2</li>
                </ol>
            </nav>
            <div class="module-title-section">
                <h1>PayJoin and PayNym</h1>
                <div class="module-meta">
                    <span><span data-icon="timer"></span> 40 minutes</span>
                    <span><span data-icon="lock"></span> Advanced Privacy</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <section class="content-section">
                <h2><span data-icon="lock"></span> Introduction: Beyond Basic Privacy</h2>
                <p>
                    In Stage 2, you learned the fundamentals of Bitcoin privacy: UTXO management, avoiding
                    address reuse, and running your own node. Those techniques reduce information leakage,
                    but they don't actively break blockchain analysis heuristics.
                </p>
                <p>
                    This module covers two powerful advanced privacy tools: <strong>PayJoin</strong> (BIP78)
                    and <strong>PayNym</strong> (BIP47). These techniques actively confuse blockchain analysts
                    and provide privacy that's "built into" regular transactions.
                </p>

                <div class="info-box">
                    <h4><span data-icon="lightbulb"></span> Active vs. Passive Privacy</h4>
                    <p><strong>Passive privacy</strong> (what we learned before):</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>Don't reuse addresses</li>
                        <li>Don't consolidate UTXOs from different sources</li>
                        <li>Run your own node</li>
                        <li>Reduces what you reveal, but doesn't actively obscure</li>
                    </ul>
                    <p style="margin-top: 1rem;"><strong>Active privacy</strong> (this module):</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>PayJoin: Makes your transactions look like something they're not</li>
                        <li>PayNym: Lets people pay you without revealing your addresses</li>
                        <li>Actively breaks analyst assumptions and heuristics</li>
                    </ul>
                </div>
            </section>

            <section class="content-section">
                <h2><span data-icon="shuffle"></span> PayJoin (BIP78): Breaking the Common Input Heuristic</h2>
                <p>
                    PayJoin (also called P2EP, Pay-to-Endpoint) is a protocol where the <strong>receiver
                    contributes inputs to the transaction</strong>. This breaks the fundamental assumption
                    that blockchain analysts rely on.
                </p>

                <h3>The Common Input Ownership Heuristic</h3>
                <p>
                    Recall from Stage 2: analysts assume that all inputs in a transaction belong to the
                    same entity. This is how they cluster addresses and track funds.
                </p>
                <div style="background: var(--secondary-dark); padding: 1.5rem; border-radius: 0.5rem; font-family: monospace; font-size: 0.85rem; margin: 1.5rem 0;">
                    <p style="color: var(--text-dim); margin-bottom: 0.5rem;">Normal transaction:</p>
                    <p style="margin: 0.25rem 0;">Input 1 (Address A): 0.5 BTC ‚îÄ‚îê</p>
                    <p style="margin: 0.25rem 0;">Input 2 (Address B): 0.3 BTC ‚îÄ‚îº‚îÄ‚Üí All inputs = same owner (ASSUMED)</p>
                    <p style="color: var(--text-dim); margin-top: 1rem;">Analyst conclusion: Addresses A and B belong to the sender.</p>
                </div>

                <h3>How PayJoin Breaks This</h3>
                <p>
                    In a PayJoin transaction, BOTH the sender AND the receiver contribute inputs:
                </p>
                <div style="background: var(--secondary-dark); padding: 1.5rem; border-radius: 0.5rem; font-family: monospace; font-size: 0.85rem; margin: 1.5rem 0;">
                    <p style="color: var(--text-dim); margin-bottom: 0.5rem;">PayJoin transaction:</p>
                    <p style="margin: 0.25rem 0;">Input 1 (Sender's Address): 0.5 BTC ‚îÄ‚îê</p>
                    <p style="margin: 0.25rem 0;">Input 2 (Receiver's Address): 0.2 BTC ‚îÄ‚îº‚îÄ‚Üí Inputs from DIFFERENT owners!</p>
                    <p style="margin: 0.25rem 0; color: var(--text-dim);">Output 1 (Receiver): 0.6 BTC</p>
                    <p style="margin: 0.25rem 0; color: var(--text-dim);">Output 2 (Sender change): 0.1 BTC</p>
                    <p style="color: var(--sovereign-gold); margin-top: 1rem;">Analyst sees: Standard-looking transaction. Assumes all inputs = one owner. WRONG!</p>
                </div>

                <p>
                    The transaction looks completely normal‚Äîanalysts can't tell it's a PayJoin just by
                    looking at it. But their clustering heuristic is now broken. They'll incorrectly
                    link the sender's and receiver's addresses.
                </p>

                <div class="warning-box">
                    <h4><span data-icon="alert"></span> The Privacy Benefit is Mutual</h4>
                    <p>
                        PayJoin benefits BOTH parties:
                    </p>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Sender:</strong> Their address is now mixed with the receiver's, breaking their cluster</li>
                        <li><strong>Receiver:</strong> Their UTXO history is now entangled with the sender's</li>
                        <li><strong>Everyone:</strong> Every PayJoin makes analysts less confident about ALL transactions</li>
                    </ul>
                </div>

                <h3>How PayJoin Works (Technically)</h3>
                <ol>
                    <li><strong>Sender creates a normal transaction</strong> (called the "Original PSBT")</li>
                    <li><strong>Sender sends it to receiver's PayJoin endpoint</strong> (a URL, usually via BIP21 URI)</li>
                    <li><strong>Receiver adds their own input(s)</strong> and modifies outputs</li>
                    <li><strong>Receiver sends back the modified PSBT</strong></li>
                    <li><strong>Sender verifies it's correct</strong> (their payment is still included, no funny business)</li>
                    <li><strong>Sender signs and broadcasts</strong></li>
                </ol>

                <h3>PayJoin in Practice</h3>

                <div class="config-card">
                    <h3>BTCPay Server</h3>
                    <p>
                        BTCPay Server has built-in PayJoin support. When a merchant runs BTCPay with PayJoin
                        enabled, customers paying with a PayJoin-compatible wallet automatically get PayJoin
                        transactions.
                    </p>
                    <ul>
                        <li>Merchant enables PayJoin in BTCPay settings</li>
                        <li>Payment invoices include PayJoin endpoint</li>
                        <li>Compatible wallets (Sparrow, Wasabi) use it automatically</li>
                        <li>No extra action needed from either party</li>
                    </ul>
                </div>

                <div class="config-card">
                    <h3>Sparrow Wallet</h3>
                    <p>
                        Sparrow supports PayJoin for both sending and receiving:
                    </p>
                    <ul>
                        <li><strong>Sending:</strong> If a payment URI includes a PayJoin endpoint, Sparrow uses it</li>
                        <li><strong>Receiving:</strong> You can run a PayJoin receiver (requires technical setup)</li>
                    </ul>
                </div>

                <div class="config-card">
                    <h3>Wasabi Wallet</h3>
                    <p>
                        Wasabi also supports PayJoin for payments to compatible endpoints.
                    </p>
                </div>

                <h3>Limitations of PayJoin</h3>
                <ul>
                    <li><strong>Requires cooperation:</strong> Receiver must run a PayJoin server</li>
                    <li><strong>Receiver must be online:</strong> Can't do PayJoin to a static address</li>
                    <li><strong>Limited adoption:</strong> Not many merchants/receivers support it yet</li>
                    <li><strong>Detectable if repeated:</strong> If a receiver always adds the same UTXO, patterns emerge</li>
                </ul>

                <div class="info-box">
                    <h4><span data-icon="lightbulb"></span> PayJoin's Network Effect</h4>
                    <p>
                        Even if PayJoin isn't widely used, its existence creates uncertainty. Analysts can't be
                        sure that ANY transaction isn't a PayJoin. This "plausible deniability" benefits everyone,
                        even those who never use PayJoin.
                    </p>
                </div>
            </section>

            <section class="content-section">
                <h2><span data-icon="user"></span> PayNym (BIP47): Reusable Payment Codes</h2>
                <p>
                    The second privacy tool in this module is PayNym, based on BIP47 (Reusable Payment Codes).
                    It solves a different problem: <strong>how to receive payments repeatedly without reusing
                    addresses or requiring interactive communication.</strong>
                </p>

                <h3>The Problem: Static Addresses vs. Privacy</h3>
                <p>
                    Consider a freelancer who wants to put a Bitcoin address on their website for tips:
                </p>
                <ul>
                    <li><strong>Option 1: Single address</strong> ‚Äî Address reuse destroys privacy. Everyone sees all payments.</li>
                    <li><strong>Option 2: Generate fresh address each time</strong> ‚Äî Requires interaction ("email me for payment address")</li>
                    <li><strong>Option 3: Lightning invoice</strong> ‚Äî Also requires interaction, expires quickly</li>
                </ul>
                <p>
                    PayNym provides a fourth option: a <strong>public payment code</strong> that can generate
                    unlimited unique addresses, without the sender needing to contact you.
                </p>

                <h3>How PayNym Works</h3>
                <p>
                    A PayNym is a public payment code that looks like this:
                </p>
                <div style="background: var(--secondary-dark); padding: 1rem; border-radius: 0.5rem; font-family: monospace; font-size: 0.75rem; overflow-x: auto; margin: 1.5rem 0; word-break: break-all;">
                    PM8TJS2JxQ5ztXUpBBRnpTbcUXbUHy2T1abfrb3KkAAtMEGNbey4oumH7Hc578WgQJhPjBxteQ5GHHToTYHE3A1w6p7tU6KSoFmWBVbFGjKPisZDbP97
                </div>
                <p>
                    But humans don't use these directly. Instead, PayNym creates a friendly "Nym" identity:
                </p>
                <ul>
                    <li><strong>+silentpanda</strong></li>
                    <li><strong>+mellowhawk</strong></li>
                    <li><strong>+brightmoon</strong></li>
                </ul>
                <p>
                    These human-readable names map to the full payment code and can be looked up via the
                    PayNym directory.
                </p>

                <h3>The Connection Process</h3>
                <p>
                    Before someone can pay your PayNym, they must "connect" to you. This is a one-time process:
                </p>
                <ol>
                    <li><strong>Sender looks up your PayNym</strong> (+yourname)</li>
                    <li><strong>Sender sends a "notification transaction"</strong> to establish the connection</li>
                    <li><strong>Both wallets now share a secret</strong> (derived from ECDH key exchange)</li>
                    <li><strong>Sender can generate unlimited unique addresses</strong> for you</li>
                    <li><strong>Only you can spend from those addresses</strong> (your keys)</li>
                </ol>

                <div class="info-box">
                    <h4><span data-icon="lightbulb"></span> Why the Notification Transaction?</h4>
                    <p>
                        The notification transaction (sometimes called "opening the channel") is an on-chain
                        transaction that establishes the cryptographic connection. It costs a small amount
                        in fees but only needs to happen once per sender-receiver pair.
                    </p>
                    <p>
                        After connection, all future payments use regular transactions to unique addresses‚Äîno
                        special protocol or extra fees.
                    </p>
                </div>

                <h3>Privacy Benefits of PayNym</h3>
                <ul>
                    <li><strong>No address reuse:</strong> Each payment goes to a unique address</li>
                    <li><strong>No public address leak:</strong> Your PayNym is public, but the actual addresses are not</li>
                    <li><strong>Non-interactive:</strong> After connection, sender doesn't need your cooperation</li>
                    <li><strong>Stealth addresses:</strong> Only you and the sender know which addresses belong to your PayNym</li>
                </ul>

                <h3>PayNym in Practice</h3>

                <div class="config-card">
                    <h3>Sparrow Wallet</h3>
                    <p>
                        Sparrow has excellent BIP47 support:
                    </p>
                    <ul>
                        <li>Create your own PayNym identity</li>
                        <li>Connect to other PayNyms</li>
                        <li>Send and receive with full BIP47 support</li>
                        <li>Works with your own node</li>
                    </ul>
                    <p><strong>To use:</strong> Tools ‚Üí PayNym ‚Üí Retrieve PayNym (creates yours) or Add Contact (to connect to someone)</p>
                </div>

                <div class="config-card">
                    <h3>Samourai Wallet (Android)</h3>
                    <p>
                        Samourai pioneered PayNym and has deep integration:
                    </p>
                    <ul>
                        <li>PayNym is a core feature</li>
                        <li>One-tap connection to other PayNyms</li>
                        <li>Integrates with other Samourai privacy features</li>
                    </ul>
                </div>

                <h3>Use Cases for PayNym</h3>
                <ul>
                    <li><strong>Receiving donations:</strong> Put your PayNym on your website/profile instead of an address</li>
                    <li><strong>Paying friends regularly:</strong> Connect once, pay forever with fresh addresses</li>
                    <li><strong>Business payments:</strong> Clients connect to your PayNym, pay invoices privately</li>
                    <li><strong>Any recurring payment:</strong> Rent, subscriptions, allowances, etc.</li>
                </ul>

                <h3>Limitations of PayNym</h3>
                <ul>
                    <li><strong>Notification transaction cost:</strong> First connection requires an on-chain transaction</li>
                    <li><strong>Not widely adopted:</strong> Both parties need BIP47-compatible wallets</li>
                    <li><strong>PayNym directory is centralized:</strong> The name lookup service (paynym.is) is a central point</li>
                    <li><strong>Notification transaction is visible:</strong> Creates an on-chain link (though obfuscated)</li>
                </ul>

                <div class="warning-box">
                    <h4><span data-icon="alert"></span> Silent Payments: The Future</h4>
                    <p>
                        BIP352 (Silent Payments) is an upcoming improvement that provides similar benefits
                        to PayNym without the notification transaction. It's not yet widely implemented,
                        but it's worth watching. For now, PayNym is the best option for reusable payment
                        codes.
                    </p>
                </div>
            </section>

            <section class="content-section">
                <h2><span data-icon="puzzle"></span> Combining Privacy Techniques</h2>
                <p>
                    The most powerful privacy comes from combining multiple techniques. Here's how the
                    tools you've learned work together:
                </p>

                <div class="config-card">
                    <h3>Maximum Privacy Stack</h3>
                    <ol>
                        <li><strong>Acquire non-KYC:</strong> Start with Bitcoin not linked to your identity (Bisq, mining, earning)</li>
                        <li><strong>CoinJoin:</strong> Break the on-chain link to any acquisition history (Wasabi, Samourai, JoinMarket)</li>
                        <li><strong>PayJoin payments:</strong> When spending, use PayJoin to confuse clustering</li>
                        <li><strong>PayNym for receiving:</strong> Give people your PayNym instead of addresses</li>
                        <li><strong>Lightning for small payments:</strong> Off-chain payments leave no on-chain trace</li>
                        <li><strong>Own node + Tor:</strong> No IP address leakage, no third-party address queries</li>
                    </ol>
                </div>

                <h3>Practical Privacy Levels</h3>

                <div class="config-card">
                    <h4>Level 1: Basic (Better than average)</h4>
                    <ul>
                        <li>Never reuse addresses (automatic in modern wallets)</li>
                        <li>Run your own node (from Stage 2)</li>
                        <li>Use coin control for spending (from Stage 2)</li>
                    </ul>
                </div>

                <div class="config-card">
                    <h4>Level 2: Enhanced (Significant privacy)</h4>
                    <ul>
                        <li>Everything in Level 1</li>
                        <li>Use PayNym for receiving</li>
                        <li>Use PayJoin when available</li>
                        <li>Use Lightning for routine payments</li>
                    </ul>
                </div>

                <div class="config-card">
                    <h4>Level 3: Maximum (Near-complete privacy)</h4>
                    <ul>
                        <li>Everything in Levels 1 and 2</li>
                        <li>Acquire non-KYC</li>
                        <li>CoinJoin all incoming funds</li>
                        <li>Tor for all Bitcoin activity</li>
                        <li>Separate identities for different purposes</li>
                    </ul>
                </div>
            </section>

            <!-- Interactive UTXO Visualizer -->
            <section class="content-section">
                <div class="demo-embed" style="background: var(--secondary-dark); border: 2px solid var(--sovereign-gold); border-radius: 1rem; padding: 2rem; margin: 2rem 0; text-align: center;">
                    <h3 style="color: var(--sovereign-gold); margin-bottom: 1rem;"><span data-icon="eye"></span> Interactive: UTXO Visualizer</h3>
                    <p style="margin-bottom: 1.5rem; color: var(--text-dim);">
                        Visualize how different transaction types affect your privacy. See how PayJoin transactions differ from regular transactions and understand why combining techniques creates stronger privacy.
                    </p>
                    <a href="/interactive-demos/utxo-visualizer-enhanced/index.html?level=advanced&amp;path=sovereign&amp;stage=3&amp;module=2" target="_blank" class="demo-link">
                        Launch UTXO Visualizer ‚Üí
                    </a>
                    <p style="margin-top: 1rem; text-align: center; color: var(--text-dim); font-size: 0.9rem;"><span data-icon="lightbulb"></span> See how transaction graph analysis works and how privacy techniques break tracking heuristics!
                    </p>
                </div>
            </section>

            <section class="key-takeaways">
                <h3><span data-icon="star"></span> Key Takeaways: PayJoin and PayNym</h3>
                <ul>
                    <li>
                        <strong>PayJoin breaks the common input heuristic.</strong> By having the receiver
                        contribute inputs, transactions look normal but fool blockchain analysts.
                    </li>
                    <li>
                        <strong>PayJoin benefits both parties.</strong> Sender and receiver both gain privacy
                        from the mixed transaction.
                    </li>
                    <li>
                        <strong>PayNym provides reusable payment codes.</strong> Share your PayNym publicly;
                        senders generate unique addresses for you without interaction.
                    </li>
                    <li>
                        <strong>PayNym requires a one-time connection.</strong> The notification transaction
                        establishes the cryptographic relationship.
                    </li>
                    <li>
                        <strong>Sparrow supports both PayJoin and PayNym.</strong> A great all-in-one wallet
                        for privacy-conscious users.
                    </li>
                    <li>
                        <strong>Combine techniques for maximum privacy.</strong> Non-KYC acquisition + CoinJoin
                        + PayJoin + PayNym + Lightning + own node = strong privacy.
                    </li>
                    <li>
                        <strong>Even partial use helps everyone.</strong> The existence of these techniques
                        creates plausible deniability for all Bitcoin users.
                    </li>
                </ul>
            </section>

            <div class="info-box" style="margin: 2rem 0;">
                <h4>Next: Emergency Recovery Plans</h4>
                <p>
                    You've learned to secure your Bitcoin, protect your privacy, and use advanced techniques.
                    But what happens if disaster strikes? The next module covers emergency recovery: backup
                    verification, disaster scenarios, dead man's switches, and ensuring your Bitcoin survives
                    anything life throws at you.
                </p>
            </div>

            
<!-- Lab Cards ‚Äî Try It Now -->
<div style="padding:2rem 0 1rem; border-top:1px solid rgba(247,147,26,0.15); margin-top:1rem;">
    <h2 style="color:var(--primary-orange,#f7931a); margin-bottom:0.6rem;">‚ö° Apply This Knowledge</h2>
    <p style="color:var(--text-dim,#9ca3af); margin-bottom:1.5rem; font-size:0.95rem;">Practice on a real Bitcoin test network ‚Äî free coins, zero risk.</p>
    <div class="lab-card" data-lab="passphrase-wallet" onclick="openLab('passphrase-wallet')" style="cursor:pointer;">
    <div class="lab-card-icon">üîê</div>
    <div class="lab-card-body">
        <div class="lab-card-eyebrow">‚ö° Try It Now</div>
        <h3>Create a Passphrase-Protected Wallet</h3>
        <p>Use the same 12 seed words with and without a BIP39 passphrase. Confirm that each passphrase produces a completely different wallet ‚Äî same seed, different keys.</p>
        <div class="lab-card-meta">
            <span class="lab-card-tag signet">Signet (free)</span>
            <span class="lab-card-tag">Sparrow / Blue Wallet</span>
            <span class="lab-card-tag">20 min</span>
        </div>
    </div>
    <div class="lab-card-arrow">‚Üí</div>
</div>

<div class="lab-card" data-lab="sparrow-watch-only" onclick="openLab('sparrow-watch-only')" style="cursor:pointer;">
    <div class="lab-card-icon">üëÅÔ∏è</div>
    <div class="lab-card-body">
        <div class="lab-card-eyebrow">‚ö° Try It Now</div>
        <h3>Set Up a Watch-Only Wallet</h3>
        <p>Import your hardware wallet xpub into Sparrow to monitor balances and verify addresses ‚Äî without ever connecting your private key to the internet.</p>
        <div class="lab-card-meta">
            <span class="lab-card-tag mainnet">Mainnet</span>
            <span class="lab-card-tag">Sparrow + Hardware Wallet</span>
            <span class="lab-card-tag">20 min</span>
        </div>
    </div>
    <div class="lab-card-arrow">‚Üí</div>
</div>
</div>

<nav class="module-navigation">
                <a href="/paths/sovereign/stage-3/" class="nav-btn nav-btn-secondary">‚Üê Back to Stage 3</a>
                <a href="module-1.html" class="nav-btn nav-btn-secondary">‚Üê Previous: Lightning Network Self-Hosting</a>
                <a href="module-3.html" class="nav-btn" id="finish-btn">Next: Emergency Recovery Plans ‚Üí</a>
            </nav>
        </div>
    </main>

    <script>
        // Save progress when finishing module
        function saveProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            const moduleId = 'sovereign-3-2';
            if (!progress.completedModules.includes(moduleId)) {
                progress.completedModules.push(moduleId);
            }

            // Check if stage is complete
            const stageModules = progress.completedModules.filter(m => m.startsWith('sovereign-3-'));
            if (stageModules.length === 3) {
                if (!progress.completedStages) progress.completedStages = [];
                const stageId = 'sovereign-3';
                if (!progress.completedStages.includes(stageId)) {
                    progress.completedStages.push(stageId);
                }
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'sovereign';
            progress.currentStage = 3;
            progress.currentModule = 3;

            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        // Check if already completed
        function checkProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');
            const completedModules = progress.completedModules || [];

            if (completedModules.includes('sovereign-3-2')) {
                const notice = document.createElement('div');
                notice.style.background = 'rgba(76, 175, 80, 0.2)';
                notice.style.padding = '1rem';
                notice.style.borderRadius = '0.5rem';
                notice.style.color = 'var(--accent-green)';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '2rem';
                notice.textContent = '‚úì You\'ve already completed this module. Feel free to review or move on!';
                document.querySelector('.container').insertBefore(notice, document.querySelector('.placeholder-notice'));
            }
        }

        checkProgress();

        // Handle finish button
        const finishBtn = document.getElementById('finish-btn');
        if (finishBtn) {
            finishBtn.addEventListener('click', function(e) {
                e.preventDefault();
                saveProgress();
                window.location.href = this.href;
            });
        }
    </script>
    
    <!-- Animated Icon Library -->
    <script src="/js/icon-library.js"></script>
    <script>
        // Inject icons after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            if (window.IconLibrary) {
                document.querySelectorAll('[data-icon]').forEach(function(element) {
                    var iconName = element.getAttribute('data-icon');
                    if (iconName) {
                        var iconHTML = IconLibrary.get(iconName, 20, true);
                        var span = document.createElement('span');
                        span.innerHTML = iconHTML;
                        span.className = 'icon-inline';
                        span.style.marginRight = '0.5rem';
                        span.style.display = 'inline-block';
                        span.style.verticalAlign = 'middle';
                        element.insertBefore(span, element.firstChild);
                    }
                });
            }
        });
    </script>

    <!-- Navigation Context (return-to-path functionality) -->
    <script src="/js/navigation-context.js"></script>
<script src="/js/membership-gate.js"></script>
<script src="/js/lab-guide.js"></script>
</body></html>