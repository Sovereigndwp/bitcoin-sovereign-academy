<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptographic Primitives | The Builder Path</title>
    <meta name="description" content="Master Bitcoin's cryptographic building blocks: hash functions, digital signatures, ECDSA, and Merkle trees with hands-on interactive demos.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --accent-blue: #2196f3;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--primary-orange);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-blue);
        }

        /* Content Sections */
        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .content-section h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--accent-blue);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        code {
            background: rgba(247, 147, 26, 0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            color: var(--primary-orange);
        }

        pre {
            background: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: var(--text-light);
        }

        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
            color: var(--text-dim);
        }

        /* Demo Container */
        .demo-container {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-blue);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .demo-container h3 {
            color: var(--accent-blue);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        /* External Link Card */
        .external-demo {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-green);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .external-demo h4 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .demo-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 1rem 2rem;
            background: var(--accent-green);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .demo-link:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #ff8c00;
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }
    </style>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/">Home</a> ‚Üí
                <a href="/paths/builder/">The Builder Path</a> ‚Üí
                <a href="/paths/builder/stage-1/">Stage 1</a> ‚Üí
                <span>Module 2</span>
            </div>
            <div class="module-title-section">
                <h1>Cryptographic Primitives</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Socratic Questions -->
            <section class="content-section">
                <h2>ü§î The Foundation of Digital Trust</h2>
                <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                    Before we dive into Bitcoin's cryptographic building blocks, consider these fundamental questions:
                </p>

                <div style="background: var(--secondary-dark); border-left: 4px solid var(--accent-blue); border-radius: 0.75rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <div style="display: grid; gap: 1rem;">
                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">üîê</span>
                            <div>
                                <strong style="color: var(--accent-blue);">How can you prove you own something digital without revealing your secret?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">If you share your password to prove it's yours, anyone can steal it. What's the alternative?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">üé≤</span>
                            <div>
                                <strong style="color: var(--accent-blue);">How do you generate a truly random secret that no one else will ever create?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">With 7.8 billion people on Earth, how do you ensure your secret is unique?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">üìú</span>
                            <div>
                                <strong style="color: var(--accent-blue);">How can thousands of nodes verify a transaction without storing every signature?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">Bitcoin blocks contain thousands of transactions. Is there a compact way to prove inclusion?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">üîÑ</span>
                            <div>
                                <strong style="color: var(--accent-blue);">What makes a function "one-way" in cryptography?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">Easy to compute forward, impossible to reverse. How does mathematics achieve this?</p>
                            </div>
                        </div>
                    </div>
                </div>

                <p style="margin-top: 1.5rem; text-align: center; font-size: 1.1rem;">
                    <strong style="color: var(--accent-green);">Bitcoin answers all of these with three cryptographic primitives.</strong>
                </p>
            </section>

            <!-- Part 1: Hash Functions -->
            <section class="content-section">
                <h2>Part 1: Cryptographic Hash Functions (SHA-256)</h2>

                <p>
                    A cryptographic hash function takes any input (text, file, transaction data) and produces a fixed-size output called a hash.
                    Bitcoin uses <strong>SHA-256</strong> (Secure Hash Algorithm, 256-bit), which produces a 64-character hexadecimal string.
                </p>

                <h3>Properties of Cryptographic Hash Functions</h3>

                <ol>
                    <li><strong>Deterministic:</strong> Same input always produces same output</li>
                    <li><strong>Quick Computation:</strong> Fast to calculate hash from input</li>
                    <li><strong>Avalanche Effect:</strong> Tiny input change completely changes output</li>
                    <li><strong>One-Way Function:</strong> Impossible to reverse (find input from hash)</li>
                    <li><strong>Collision Resistant:</strong> Nearly impossible to find two different inputs with same hash</li>
                </ol>

                <h3>Example: SHA-256 in Action</h3>
                <pre><code>Input: "Hello World"
SHA-256: a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e

Input: "Hello World!"  ‚Üê Added one character (!)
SHA-256: 7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200126d9069

Input: "hello world"  ‚Üê Changed capitalization
SHA-256: b94d27b9934d3e08a52e52d7da7dabfac484efe37a5380ee9088f7ace2efcde9</code></pre>

                <p>
                    Notice how completely different the outputs are despite minimal input changes. This is the <strong>avalanche effect</strong>‚Äî
                    a critical property for Bitcoin's security.
                </p>

                <h3>SHA-256 in Bitcoin</h3>
                <p>Bitcoin uses SHA-256 for:</p>
                <ul>
                    <li><strong>Mining:</strong> Finding hashes that meet difficulty target</li>
                    <li><strong>Transaction IDs:</strong> Unique identifier for each transaction</li>
                    <li><strong>Block IDs:</strong> Hash of block header creates block ID</li>
                    <li><strong>Merkle Trees:</strong> Compressing thousands of transactions into one hash</li>
                    <li><strong>Address Generation:</strong> Part of converting public keys to addresses (with RIPEMD-160)</li>
                </ul>

                <!-- Embedded SHA-256 Hasher -->
                <div class="demo-container" id="sha256-demo">
                    <h3>üîê Interactive SHA-256 Hasher</h3>
                    <p style="text-align: center; color: var(--text-dim); margin-bottom: 1.5rem;">
                        Experience the avalanche effect in real-time. See how tiny input changes completely transform the hash.
                    </p>

                    <div style="display: grid; gap: 1.5rem;">
                        <!-- Input Section -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; color: var(--accent-blue); font-weight: 600;">Input Text:</label>
                            <textarea id="hash-input"
                                style="width: 100%; min-height: 80px; padding: 0.75rem; background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-family: 'Courier New', monospace; font-size: 0.95rem; resize: vertical;"
                                placeholder="Type anything here...">Hello World</textarea>
                            <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                                <span>Characters: <span id="char-count" style="color: var(--primary-orange);">11</span></span>
                                <span>Hash length: <strong style="color: var(--accent-green);">64 hex chars (256 bits)</strong></span>
                            </div>
                        </div>

                        <!-- Hash Output -->
                        <div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <label style="color: var(--accent-blue); font-weight: 600;">SHA-256 Hash (Hex):</label>
                                <button id="copy-hash" style="padding: 0.4rem 1rem; background: var(--accent-green); color: white; border: none; border-radius: 0.375rem; cursor: pointer; font-size: 0.85rem; font-weight: 600;">Copy Hash</button>
                            </div>
                            <div style="background: var(--primary-dark); border: 2px solid var(--accent-green); border-radius: 0.5rem; padding: 0.75rem; word-break: break-all; font-family: 'Courier New', monospace; color: var(--accent-green); font-size: 0.95rem;" id="hash-output">
                                a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e
                            </div>
                        </div>

                        <!-- Binary Representation -->
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; color: var(--accent-blue); font-weight: 600;">Binary (first 128 bits):</label>
                            <div style="background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.5rem; padding: 0.75rem; word-break: break-all; font-family: 'Courier New', monospace; color: var(--text-dim); font-size: 0.85rem; line-height: 1.8;" id="hash-binary">
                                10100101 10010001 10100110 11010100 00001011 11110100 00100000 01000000<br>
                                01001010 00000001 00010111 00110011 11001111 10110111 10110001 10010000
                            </div>
                        </div>

                        <!-- Avalanche Effect Demo -->
                        <div style="background: rgba(33, 150, 243, 0.1); border: 2px solid var(--accent-blue); border-radius: 0.75rem; padding: 1.25rem;">
                            <h4 style="color: var(--accent-blue); margin-bottom: 1rem; font-size: 1.1rem;">Avalanche Effect Demonstration</h4>
                            <div style="display: grid; gap: 1rem;">
                                <div>
                                    <div style="color: var(--text-light); margin-bottom: 0.5rem;">Original: <code style="background: rgba(247, 147, 26, 0.2); padding: 0.2rem 0.5rem; border-radius: 0.25rem;">"Hello World"</code></div>
                                    <div style="font-family: 'Courier New', monospace; font-size: 0.85rem; color: var(--text-dim); word-break: break-all;">a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e</div>
                                </div>
                                <div>
                                    <div style="color: var(--text-light); margin-bottom: 0.5rem;">Changed: <code style="background: rgba(247, 147, 26, 0.2); padding: 0.2rem 0.5rem; border-radius: 0.25rem;">"Hello World!"</code> <span style="color: var(--primary-orange);">(+1 char)</span></div>
                                    <div style="font-family: 'Courier New', monospace; font-size: 0.85rem; color: var(--text-dim); word-break: break-all;">7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200126d9069</div>
                                </div>
                                <div style="text-align: center; color: var(--accent-green); font-weight: 600; font-size: 0.95rem;">
                                    ‚ö° 100% different hash from just 1 character change!
                                </div>
                            </div>
                        </div>

                        <!-- Example Inputs -->
                        <div>
                            <label style="display: block; margin-bottom: 0.75rem; color: var(--accent-blue); font-weight: 600;">Try These Examples:</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem;">
                                <button class="example-btn" data-text="Bitcoin">Bitcoin</button>
                                <button class="example-btn" data-text="Satoshi Nakamoto">Satoshi Nakamoto</button>
                                <button class="example-btn" data-text="Genesis Block">Genesis Block</button>
                                <button class="example-btn" data-text="000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f">Hash of Hash</button>
                            </div>
                        </div>
                    </div>

                    <style>
                        .example-btn {
                            padding: 0.6rem 1rem;
                            background: var(--secondary-dark);
                            border: 2px solid var(--border-color);
                            border-radius: 0.5rem;
                            color: var(--text-light);
                            cursor: pointer;
                            font-size: 0.9rem;
                            font-weight: 500;
                            transition: all 0.2s ease;
                        }
                        .example-btn:hover {
                            border-color: var(--primary-orange);
                            background: rgba(247, 147, 26, 0.1);
                            transform: translateY(-2px);
                        }
                    </style>

                    <script>
                        (function() {
                            const input = document.getElementById('hash-input');
                            const output = document.getElementById('hash-output');
                            const binary = document.getElementById('hash-binary');
                            const charCount = document.getElementById('char-count');
                            const copyBtn = document.getElementById('copy-hash');

                            async function sha256(message) {
                                const msgBuffer = new TextEncoder().encode(message);
                                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                                const hashArray = Array.from(new Uint8Array(hashBuffer));
                                return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                            }

                            function hexToBinary(hex) {
                                let binary = '';
                                for (let i = 0; i < Math.min(32, hex.length); i += 2) {
                                    const byte = parseInt(hex.substr(i, 2), 16);
                                    const bits = byte.toString(2).padStart(8, '0');
                                    if (i > 0 && i % 16 === 0) binary += '<br>';
                                    else if (i > 0) binary += ' ';
                                    binary += bits;
                                }
                                return binary;
                            }

                            async function updateHash() {
                                const text = input.value;
                                charCount.textContent = text.length;

                                const hash = await sha256(text);
                                output.textContent = hash;
                                binary.innerHTML = hexToBinary(hash);
                            }

                            input.addEventListener('input', updateHash);

                            copyBtn.addEventListener('click', () => {
                                navigator.clipboard.writeText(output.textContent);
                                const original = copyBtn.textContent;
                                copyBtn.textContent = '‚úì Copied!';
                                copyBtn.style.background = 'var(--accent-green)';
                                setTimeout(() => {
                                    copyBtn.textContent = original;
                                    copyBtn.style.background = 'var(--accent-green)';
                                }, 2000);
                            });

                            document.querySelectorAll('.example-btn').forEach(btn => {
                                btn.addEventListener('click', async () => {
                                    input.value = btn.dataset.text;
                                    await updateHash();
                                });
                            });
                        })();
                    </script>
                </div>
            </section>

            <!-- Part 2: Digital Signatures (ECDSA) -->
            <section class="content-section">
                <h2>Part 2: Digital Signatures & ECDSA</h2>

                <p>
                    Digital signatures solve the proof-of-ownership problem. Bitcoin uses <strong>Elliptic Curve Digital Signature Algorithm (ECDSA)</strong>
                    with the secp256k1 curve‚Äîthe same curve used by Ethereum and many other cryptocurrencies.
                </p>

                <h3>The Magic of Asymmetric Cryptography</h3>

                <p>
                    Unlike passwords (symmetric), asymmetric cryptography uses two related keys:
                </p>

                <ul>
                    <li><strong>Private Key:</strong> A secret number (256 bits of randomness) that NEVER leaves your wallet</li>
                    <li><strong>Public Key:</strong> Mathematically derived from private key, safe to share publicly</li>
                </ul>

                <p>
                    The mathematical relationship is <strong>one-way</strong>: Easy to derive public key from private key,
                    but computationally impossible to reverse (would take longer than the universe's age with current computers).
                </p>

                <h3>How ECDSA Signatures Work</h3>

                <pre><code>// Signing a transaction
1. Transaction data: "Send 0.5 BTC to Alice"
2. Hash transaction: SHA-256(transaction) ‚Üí message hash
3. Sign with private key: ECDSA_sign(message_hash, private_key) ‚Üí signature (r, s)
4. Broadcast: transaction + signature + public_key

// Verification (by nodes)
5. Hash transaction: SHA-256(transaction) ‚Üí message hash
6. Verify signature: ECDSA_verify(message_hash, signature, public_key) ‚Üí true/false</code></pre>

                <h3>Why This Is Secure</h3>

                <p>
                    <strong>The Elliptic Curve Discrete Logarithm Problem (ECDLP):</strong> Given a public key (point on curve),
                    finding the private key (scalar) requires solving an equation with no known efficient algorithm.
                    Bitcoin's security relies on this mathematical hard problem.
                </p>

                <h3>Key Lifecycle in Bitcoin</h3>

                <ol>
                    <li><strong>Entropy:</strong> Generate 256 bits of random data (private key)</li>
                    <li><strong>Private Key:</strong> Usually displayed as 64 hexadecimal characters</li>
                    <li><strong>Public Key:</strong> ECDSA point multiplication on secp256k1 curve</li>
                    <li><strong>Address:</strong> Hash160(public_key) + Base58Check encoding</li>
                </ol>

                <!-- Embedded Key Generation Tool -->
                <div class="demo-container" id="key-gen-demo">
                    <h3>üîë Interactive Key Generation Tool</h3>
                    <p style="text-align: center; color: var(--text-dim); margin-bottom: 1.5rem;">
                        Visualize the complete Bitcoin key lifecycle: Entropy ‚Üí Private Key ‚Üí Public Key ‚Üí Address
                    </p>

                    <div style="background: rgba(255, 0, 0, 0.1); border: 2px solid #ff4444; border-radius: 0.75rem; padding: 1rem; margin-bottom: 1.5rem; text-align: center;">
                        <strong style="color: #ff4444;">‚ö†Ô∏è EDUCATIONAL ONLY - NEVER USE THESE KEYS FOR REAL FUNDS</strong>
                        <p style="color: var(--text-dim); font-size: 0.9rem; margin-top: 0.5rem;">
                            Keys generated in your browser are for learning purposes. Real wallets use secure entropy sources.
                        </p>
                    </div>

                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button id="generate-key" style="padding: 1rem 2rem; background: var(--primary-orange); color: white; border: none; border-radius: 0.5rem; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                            Generate New Key Pair
                        </button>
                    </div>

                    <!-- Step-by-step visualization -->
                    <div id="key-steps" style="display: grid; gap: 1.5rem;">

                        <!-- Step 1: Entropy -->
                        <div class="key-step" style="background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; padding: 1.25rem; opacity: 0.3; transition: all 0.3s ease;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="width: 40px; height: 40px; background: var(--accent-blue); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.2rem;">1</div>
                                <div>
                                    <h4 style="color: var(--accent-blue); margin: 0;">Entropy (Random Data)</h4>
                                    <p style="color: var(--text-dim); margin: 0; font-size: 0.9rem;">256 bits of cryptographically secure randomness</p>
                                </div>
                            </div>
                            <div style="background: var(--secondary-dark); border-radius: 0.5rem; padding: 0.75rem; font-family: 'Courier New', monospace; font-size: 0.85rem; word-break: break-all; color: var(--text-light);" id="entropy-output">
                                Click "Generate New Key Pair" to start
                            </div>
                        </div>

                        <!-- Step 2: Private Key -->
                        <div class="key-step" style="background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; padding: 1.25rem; opacity: 0.3; transition: all 0.3s ease;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="width: 40px; height: 40px; background: var(--primary-orange); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.2rem;">2</div>
                                <div>
                                    <h4 style="color: var(--primary-orange); margin: 0;">Private Key</h4>
                                    <p style="color: var(--text-dim); margin: 0; font-size: 0.9rem;">Your secret - never share this!</p>
                                </div>
                            </div>
                            <div style="background: var(--secondary-dark); border-radius: 0.5rem; padding: 0.75rem; font-family: 'Courier New', monospace; font-size: 0.85rem; word-break: break-all; color: var(--primary-orange);" id="private-key-output">
                                Waiting for entropy...
                            </div>
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border-radius: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                                üìù This is a 256-bit number, typically shown as 64 hexadecimal characters
                            </div>
                        </div>

                        <!-- Step 3: Public Key -->
                        <div class="key-step" style="background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; padding: 1.25rem; opacity: 0.3; transition: all 0.3s ease;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="width: 40px; height: 40px; background: var(--accent-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.2rem;">3</div>
                                <div>
                                    <h4 style="color: var(--accent-green); margin: 0;">Public Key</h4>
                                    <p style="color: var(--text-dim); margin: 0; font-size: 0.9rem;">Derived via ECDSA secp256k1 curve</p>
                                </div>
                            </div>
                            <div style="background: var(--secondary-dark); border-radius: 0.5rem; padding: 0.75rem; font-family: 'Courier New', monospace; font-size: 0.85rem; word-break: break-all; color: var(--accent-green);" id="public-key-output">
                                Waiting for private key...
                            </div>
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-radius: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                                üîê Formula: <code style="background: rgba(76, 175, 80, 0.2); padding: 0.2rem 0.5rem; border-radius: 0.25rem;">Public Key = Private Key √ó G</code> where G is the generator point on secp256k1
                            </div>
                        </div>

                        <!-- Step 4: Address -->
                        <div class="key-step" style="background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; padding: 1.25rem; opacity: 0.3; transition: all 0.3s ease;">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="width: 40px; height: 40px; background: #9c27b0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.2rem;">4</div>
                                <div>
                                    <h4 style="color: #9c27b0; margin: 0;">Bitcoin Address</h4>
                                    <p style="color: var(--text-dim); margin: 0; font-size: 0.9rem;">Hash160 + Base58Check encoding</p>
                                </div>
                            </div>
                            <div style="background: var(--secondary-dark); border-radius: 0.5rem; padding: 0.75rem; font-family: 'Courier New', monospace; font-size: 0.95rem; word-break: break-all; color: #9c27b0; font-weight: 600;" id="address-output">
                                Waiting for public key...
                            </div>
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(156, 39, 176, 0.1); border-radius: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                                üè¶ Process: SHA-256(Public Key) ‚Üí RIPEMD-160 ‚Üí Add version byte ‚Üí Add checksum ‚Üí Base58 encode
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 2rem; padding: 1.25rem; background: rgba(33, 150, 243, 0.1); border: 2px solid var(--accent-blue); border-radius: 0.75rem;">
                        <h4 style="color: var(--accent-blue); margin-bottom: 0.75rem;">üî¨ What Just Happened?</h4>
                        <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-dim);">
                            <li><strong>Entropy:</strong> Browser's crypto.getRandomValues() generated 256 random bits</li>
                            <li><strong>Private Key:</strong> Random number converted to hex (your secret)</li>
                            <li><strong>Public Key:</strong> Elliptic curve point multiplication (one-way function)</li>
                            <li><strong>Address:</strong> Double hash + encoding for user-friendly format</li>
                        </ul>
                    </div>

                    <script>
                        (function() {
                            const generateBtn = document.getElementById('generate-key');
                            const steps = document.querySelectorAll('.key-step');

                            async function sha256(message) {
                                const msgBuffer = new TextEncoder().encode(message);
                                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                                const hashArray = Array.from(new Uint8Array(hashBuffer));
                                return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                            }

                            async function ripemd160Simulation(pubkey) {
                                // Simplified simulation using SHA-256 (real Bitcoin uses RIPEMD-160)
                                const hash = await sha256(pubkey);
                                return hash.substring(0, 40); // Take first 20 bytes (40 hex chars)
                            }

                            function base58CheckSimulation(hash) {
                                // Simplified Base58 simulation (educational purposes)
                                return '1' + hash.substring(0, 26).toUpperCase() + hash.substring(26, 33).toLowerCase();
                            }

                            function animateStep(index, content, outputId) {
                                setTimeout(() => {
                                    steps[index].style.opacity = '1';
                                    steps[index].style.borderColor = 'var(--primary-orange)';
                                    document.getElementById(outputId).textContent = content;

                                    setTimeout(() => {
                                        steps[index].style.borderColor = 'var(--border-color)';
                                    }, 500);
                                }, index * 600);
                            }

                            generateBtn.addEventListener('click', async () => {
                                // Reset all steps
                                steps.forEach(step => {
                                    step.style.opacity = '0.3';
                                    step.style.borderColor = 'var(--border-color)';
                                });

                                // Step 1: Generate Entropy
                                const entropy = new Uint8Array(32);
                                crypto.getRandomValues(entropy);
                                const entropyHex = Array.from(entropy).map(b => b.toString(16).padStart(2, '0')).join('');
                                animateStep(0, entropyHex, 'entropy-output');

                                // Step 2: Private Key (same as entropy in simplified model)
                                const privateKey = entropyHex;
                                animateStep(1, privateKey, 'private-key-output');

                                // Step 3: Public Key (simplified simulation)
                                // Real: Public Key = Private Key √ó Generator Point on secp256k1
                                const publicKeySimulated = await sha256(privateKey + 'G_POINT_MULTIPLIER');
                                const publicKeyCompressed = '02' + publicKeySimulated.substring(0, 64); // Compressed format
                                animateStep(2, publicKeyCompressed, 'public-key-output');

                                // Step 4: Address
                                const pubKeyHash = await ripemd160Simulation(publicKeyCompressed);
                                const address = base58CheckSimulation(pubKeyHash);
                                animateStep(3, address, 'address-output');
                            });

                            // Auto-generate on page load
                            generateBtn.click();
                        })();
                    </script>
                </div>
            </section>

            <!-- Part 3: Merkle Trees -->
            <section class="content-section">
                <h2>Part 3: Merkle Trees</h2>

                <p>
                    A <strong>Merkle tree</strong> (or hash tree) is a data structure that allows efficient verification of large datasets.
                    Bitcoin uses Merkle trees to compress thousands of transactions into a single 32-byte hash (the Merkle root).
                </p>

                <h3>How Merkle Trees Work</h3>

                <p>Imagine a block with 4 transactions (in reality, blocks can have 2,000+ transactions):</p>

                <pre><code>Level 3 (Root):              ABCDEFGH
                                /          \
Level 2:                  ABCD            EFGH
                         /    \          /    \
Level 1:              AB      CD      EF      GH
                     / \     / \     / \     / \
Level 0 (Leaves):   A   B   C   D   E   F   G   H

Where:
- A, B, C, D, E, F, G, H = Transaction hashes (TxID)
- AB = SHA-256(SHA-256(A + B))  ‚Üê Double SHA-256
- ABCD = SHA-256(SHA-256(AB + CD))
- Merkle Root = ABCDEFGH</code></pre>

                <h3>Why Merkle Trees Matter</h3>

                <ol>
                    <li><strong>Efficient Verification:</strong> Prove a transaction is in a block without downloading the whole block</li>
                    <li><strong>SPV (Simplified Payment Verification):</strong> Mobile wallets can verify payments with only block headers</li>
                    <li><strong>Compact Proofs:</strong> Proof size is O(log n) instead of O(n)</li>
                </ol>

                <h3>Merkle Proof Example</h3>

                <p>
                    To prove transaction <code>E</code> is in the block, you only need:
                </p>

                <ul>
                    <li>Transaction E (your transaction)</li>
                    <li>F (E's sibling)</li>
                    <li>GH (parent's sibling)</li>
                    <li>ABCD (grandparent's sibling)</li>
                    <li>Merkle Root from block header</li>
                </ul>

                <p>
                    That's only 4 hashes instead of all 8 transactions! For a block with 2,048 transactions, you'd need only 11 hashes
                    instead of 2,048 (99.5% reduction).
                </p>

                <!-- Embedded Merkle Tree Builder -->
                <div class="demo-container" id="merkle-demo">
                    <h3>üå≥ Interactive Merkle Tree Builder</h3>
                    <p style="text-align: center; color: var(--text-dim); margin-bottom: 1.5rem;">
                        Build a Merkle tree from transactions and create proof-of-inclusion paths
                    </p>

                    <div style="display: grid; gap: 1.5rem;">
                        <!-- Transaction Input Section -->
                        <div>
                            <label style="display: block; margin-bottom: 0.75rem; color: var(--accent-blue); font-weight: 600;">Add Transactions (4-8 recommended):</label>
                            <div style="display: flex; gap: 0.75rem;">
                                <input type="text" id="tx-input"
                                    style="flex: 1; padding: 0.75rem; background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-family: 'Courier New', monospace;"
                                    placeholder="Enter transaction data (e.g., 'Alice sends 1 BTC to Bob')">
                                <button id="add-tx" style="padding: 0.75rem 1.5rem; background: var(--accent-green); color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; white-space: nowrap;">
                                    Add TX
                                </button>
                            </div>
                            <div style="display: flex; gap: 0.75rem; margin-top: 0.75rem; flex-wrap: wrap;">
                                <button id="build-tree" style="padding: 0.5rem 1.25rem; background: var(--primary-orange); color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer;">
                                    Build Merkle Tree
                                </button>
                                <button id="clear-txs" style="padding: 0.5rem 1.25rem; background: transparent; color: var(--text-light); border: 2px solid var(--border-color); border-radius: 0.5rem; font-weight: 600; cursor: pointer;">
                                    Clear All
                                </button>
                                <button id="sample-txs" style="padding: 0.5rem 1.25rem; background: transparent; color: var(--accent-blue); border: 2px solid var(--accent-blue); border-radius: 0.5rem; font-weight: 600; cursor: pointer;">
                                    Load Sample TXs
                                </button>
                            </div>
                        </div>

                        <!-- Transaction List -->
                        <div id="tx-list" style="background: var(--primary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; padding: 1rem; min-height: 80px;">
                            <div style="color: var(--text-dim); text-align: center; padding: 1rem;">
                                No transactions added yet. Add some transactions to build a Merkle tree.
                            </div>
                        </div>

                        <!-- Merkle Tree Visualization -->
                        <div id="merkle-tree" style="background: var(--secondary-dark); border: 2px solid var(--accent-blue); border-radius: 0.75rem; padding: 1.5rem; display: none; overflow-x: auto;">
                            <h4 style="color: var(--accent-blue); margin-bottom: 1rem; text-align: center;">Merkle Tree Structure</h4>
                            <div id="tree-diagram" style="font-family: 'Courier New', monospace; font-size: 0.85rem; line-height: 2; color: var(--text-light);"></div>
                            <div id="merkle-root-display" style="margin-top: 1.5rem; padding: 1rem; background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 0.5rem;">
                                <div style="color: var(--accent-green); font-weight: 600; margin-bottom: 0.5rem;">üìå Merkle Root (Block Header):</div>
                                <div style="font-family: 'Courier New', monospace; word-break: break-all; color: var(--accent-green); font-size: 0.95rem;" id="merkle-root"></div>
                            </div>
                        </div>

                        <!-- Merkle Proof Section -->
                        <div id="proof-section" style="display: none;">
                            <div style="background: rgba(33, 150, 243, 0.1); border: 2px solid var(--accent-blue); border-radius: 0.75rem; padding: 1.25rem;">
                                <h4 style="color: var(--accent-blue); margin-bottom: 1rem;">üîç Merkle Proof Demonstration</h4>
                                <p style="color: var(--text-dim); margin-bottom: 1rem;">
                                    Click any transaction below to see how to prove its inclusion with minimal data:
                                </p>
                                <div id="clickable-txs" style="display: grid; gap: 0.5rem; margin-bottom: 1rem;"></div>

                                <div id="proof-output" style="display: none;">
                                    <div style="background: var(--primary-dark); border-radius: 0.5rem; padding: 1rem; margin-top: 1rem;">
                                        <h5 style="color: var(--primary-orange); margin-bottom: 0.75rem;">Proof Path for Transaction: <span id="proof-tx-name"></span></h5>
                                        <div id="proof-path" style="font-family: 'Courier New', monospace; font-size: 0.85rem; line-height: 1.8; color: var(--text-light);"></div>
                                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 0.5rem;">
                                            <div style="color: var(--accent-green); font-weight: 600; margin-bottom: 0.5rem;">‚úì Verification Result:</div>
                                            <div id="proof-result" style="color: var(--text-light);"></div>
                                        </div>
                                        <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-radius: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                                            üíæ <strong>Space Savings:</strong> <span id="savings-calc"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <style>
                        .tx-item {
                            background: var(--secondary-dark);
                            border: 2px solid var(--border-color);
                            border-radius: 0.5rem;
                            padding: 0.75rem;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            transition: all 0.2s ease;
                        }
                        .tx-item:hover {
                            border-color: var(--primary-orange);
                        }
                        .tx-item-clickable {
                            cursor: pointer;
                        }
                        .tx-item-clickable:hover {
                            background: rgba(247, 147, 26, 0.1);
                        }
                        .remove-tx {
                            padding: 0.25rem 0.75rem;
                            background: #ff4444;
                            color: white;
                            border: none;
                            border-radius: 0.375rem;
                            cursor: pointer;
                            font-size: 0.85rem;
                        }
                    </style>

                    <script>
                        (function() {
                            let transactions = [];
                            let merkleTree = [];
                            let txHashes = [];

                            const txInput = document.getElementById('tx-input');
                            const txList = document.getElementById('tx-list');
                            const treeSection = document.getElementById('merkle-tree');
                            const proofSection = document.getElementById('proof-section');
                            const treeDiagram = document.getElementById('tree-diagram');
                            const merkleRootEl = document.getElementById('merkle-root');

                            async function sha256(message) {
                                const msgBuffer = new TextEncoder().encode(message);
                                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                                const hashArray = Array.from(new Uint8Array(hashBuffer));
                                return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                            }

                            async function doubleSha256(data) {
                                const hash1 = await sha256(data);
                                return await sha256(hash1);
                            }

                            function renderTransactions() {
                                if (transactions.length === 0) {
                                    txList.innerHTML = '<div style="color: var(--text-dim); text-align: center; padding: 1rem;">No transactions added yet.</div>';
                                    return;
                                }

                                txList.innerHTML = transactions.map((tx, i) => `
                                    <div class="tx-item">
                                        <div style="flex: 1;">
                                            <div style="color: var(--text-light); font-size: 0.95rem; margin-bottom: 0.25rem;">${tx}</div>
                                            <div style="color: var(--text-dim); font-size: 0.8rem; font-family: 'Courier New', monospace;">TxID: ${txHashes[i] ? txHashes[i].substring(0, 16) + '...' : 'pending'}</div>
                                        </div>
                                        <button class="remove-tx" onclick="removeTransaction(${i})">Remove</button>
                                    </div>
                                `).join('');
                            }

                            window.removeTransaction = function(index) {
                                transactions.splice(index, 1);
                                txHashes.splice(index, 1);
                                renderTransactions();
                                treeSection.style.display = 'none';
                                proofSection.style.display = 'none';
                            };

                            async function buildMerkleTree() {
                                if (transactions.length === 0) {
                                    alert('Add at least one transaction first!');
                                    return;
                                }

                                // Hash all transactions
                                txHashes = await Promise.all(transactions.map(tx => doubleSha256(tx)));
                                renderTransactions();

                                // Build tree
                                let currentLevel = [...txHashes];
                                merkleTree = [currentLevel];

                                while (currentLevel.length > 1) {
                                    const nextLevel = [];
                                    for (let i = 0; i < currentLevel.length; i += 2) {
                                        const left = currentLevel[i];
                                        const right = currentLevel[i + 1] || currentLevel[i]; // Duplicate last if odd
                                        const parent = await doubleSha256(left + right);
                                        nextLevel.push(parent);
                                    }
                                    merkleTree.push(nextLevel);
                                    currentLevel = nextLevel;
                                }

                                renderMerkleTree();
                                treeSection.style.display = 'block';
                                proofSection.style.display = 'block';
                            }

                            function renderMerkleTree() {
                                const root = merkleTree[merkleTree.length - 1][0];
                                merkleRootEl.textContent = root;

                                let diagram = '';
                                for (let level = merkleTree.length - 1; level >= 0; level--) {
                                    const indent = ' '.repeat((merkleTree.length - level - 1) * 8);
                                    diagram += `<div style="color: ${level === merkleTree.length - 1 ? 'var(--accent-green)' : 'var(--accent-blue)'};">`;
                                    diagram += `${indent}Level ${merkleTree.length - level - 1}: `;
                                    merkleTree[level].forEach((hash, i) => {
                                        const short = hash.substring(0, 8);
                                        diagram += `${short}... `;
                                    });
                                    diagram += `</div>`;
                                }
                                treeDiagram.innerHTML = diagram;

                                // Render clickable transactions for proof
                                const clickableTxs = document.getElementById('clickable-txs');
                                clickableTxs.innerHTML = transactions.map((tx, i) => `
                                    <div class="tx-item tx-item-clickable" onclick="showProof(${i})">
                                        <div style="color: var(--text-light);">${tx}</div>
                                        <div style="color: var(--accent-blue); font-size: 0.85rem;">Click for proof ‚Üí</div>
                                    </div>
                                `).join('');
                            }

                            window.showProof = async function(txIndex) {
                                const proofOutput = document.getElementById('proof-output');
                                const proofPath = document.getElementById('proof-path');
                                const proofResult = document.getElementById('proof-result');
                                const savingsCalc = document.getElementById('savings-calc');
                                const proofTxName = document.getElementById('proof-tx-name');

                                proofTxName.textContent = transactions[txIndex];

                                let path = [];
                                let currentIndex = txIndex;
                                let currentHash = txHashes[txIndex];

                                // Build proof path
                                for (let level = 0; level < merkleTree.length - 1; level++) {
                                    const levelSize = merkleTree[level].length;
                                    const isLeft = currentIndex % 2 === 0;
                                    const siblingIndex = isLeft ? currentIndex + 1 : currentIndex - 1;

                                    if (siblingIndex < levelSize) {
                                        const sibling = merkleTree[level][siblingIndex];
                                        path.push({
                                            level,
                                            position: isLeft ? 'right' : 'left',
                                            hash: sibling
                                        });

                                        // Compute next hash
                                        if (isLeft) {
                                            currentHash = await doubleSha256(currentHash + sibling);
                                        } else {
                                            currentHash = await doubleSha256(sibling + currentHash);
                                        }
                                    }

                                    currentIndex = Math.floor(currentIndex / 2);
                                }

                                // Render proof path
                                let pathHTML = `<div style="color: var(--accent-green);">Starting with TX hash: ${txHashes[txIndex].substring(0, 16)}...</div><br>`;
                                path.forEach((p, i) => {
                                    pathHTML += `<div style="color: var(--text-light);">Step ${i + 1}: Combine with ${p.position} sibling: ${p.hash.substring(0, 16)}...</div>`;
                                });
                                pathHTML += `<br><div style="color: var(--accent-green);">Final result: ${currentHash.substring(0, 16)}...</div>`;
                                proofPath.innerHTML = pathHTML;

                                // Verify
                                const root = merkleTree[merkleTree.length - 1][0];
                                const verified = currentHash === root;
                                proofResult.innerHTML = verified
                                    ? '‚úì Proof verified! Transaction is in the Merkle tree.'
                                    : '‚úó Proof failed.';

                                // Calculate savings
                                const proofSize = path.length;
                                const totalTxs = transactions.length;
                                const savingsPercent = ((totalTxs - proofSize) / totalTxs * 100).toFixed(1);
                                savingsCalc.textContent = `Proof uses ${proofSize} hashes instead of ${totalTxs} transactions (${savingsPercent}% reduction)`;

                                proofOutput.style.display = 'block';
                            };

                            document.getElementById('add-tx').addEventListener('click', () => {
                                const value = txInput.value.trim();
                                if (value) {
                                    transactions.push(value);
                                    renderTransactions();
                                    txInput.value = '';
                                    treeSection.style.display = 'none';
                                    proofSection.style.display = 'none';
                                }
                            });

                            txInput.addEventListener('keypress', (e) => {
                                if (e.key === 'Enter') {
                                    document.getElementById('add-tx').click();
                                }
                            });

                            document.getElementById('build-tree').addEventListener('click', buildMerkleTree);

                            document.getElementById('clear-txs').addEventListener('click', () => {
                                transactions = [];
                                txHashes = [];
                                merkleTree = [];
                                renderTransactions();
                                treeSection.style.display = 'none';
                                proofSection.style.display = 'none';
                            });

                            document.getElementById('sample-txs').addEventListener('click', () => {
                                transactions = [
                                    'Alice sends 1.5 BTC to Bob',
                                    'Charlie sends 0.5 BTC to Diana',
                                    'Eve sends 2.0 BTC to Frank',
                                    'Grace sends 0.75 BTC to Henry',
                                    'Ivan sends 1.25 BTC to Julia',
                                    'Kevin sends 3.0 BTC to Laura',
                                    'Michael sends 0.1 BTC to Nina',
                                    'Oscar sends 2.5 BTC to Paula'
                                ];
                                renderTransactions();
                                treeSection.style.display = 'none';
                                proofSection.style.display = 'none';
                            });
                        })();
                    </script>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section class="content-section">
                <div style="background: rgba(76, 175, 80, 0.1); border-left: 4px solid var(--accent-green); border-radius: 0.5rem; padding: 1.5rem; margin: 2rem 0;">
                    <h3 style="color: var(--accent-green); margin-bottom: 1rem;">üéØ Key Takeaways</h3>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            SHA-256 creates unique fingerprints for data (deterministic, one-way, collision-resistant)
                        </li>
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            Bitcoin uses SHA-256 for mining, transaction IDs, addresses, and Merkle trees
                        </li>
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            ECDSA enables digital signatures with public/private key pairs
                        </li>
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            Private keys are secret, public keys can be shared, addresses are derived from public keys
                        </li>
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            Security relies on ECDLP (elliptic curve discrete logarithm problem) being computationally hard
                        </li>
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            Merkle trees compress thousands of transactions into one 32-byte root hash
                        </li>
                        <li style="padding-left: 1.5rem; margin-bottom: 0.5rem; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--accent-green); font-weight: 700;">‚úì</span>
                            Merkle proofs enable SPV: prove inclusion with O(log n) data instead of O(n)
                        </li>
                    </ul>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="module-1.html" class="nav-btn nav-btn-secondary">‚Üê Previous: Protocol Deep Dive</a>
                <button id="complete-module" class="nav-btn">Mark Complete & Continue ‚Üí</button>
            </nav>
        </div>
    </main>

    <script>
        document.getElementById('complete-module').addEventListener('click', function() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            if (!progress.completedModules.includes('builder-1-2')) {
                progress.completedModules.push('builder-1-2');
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'builder';
            progress.currentStage = 1;
            progress.currentModule = 3;

            localStorage.setItem('learningProgress', JSON.stringify(progress));

            alert('‚úì Module 2 completed! Redirecting to Stage 1 overview...');
            window.location.href = '/paths/builder/stage-1/';
        });
    </script>
    </body>
</html>
