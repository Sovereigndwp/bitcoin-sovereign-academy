<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Builder Path | Bitcoin Sovereign Academy</title>
    <meta name="description" content="Master Bitcoin development from protocol fundamentals to contributing to Bitcoin Core. Build Lightning apps and create production-ready Bitcoin applications.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --accent-blue: #2196f3;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--secondary-dark), var(--primary-dark));
            border-bottom: 3px solid var(--primary-orange);
            padding: 4rem 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .hero .subtitle {
            font-size: 1.25rem;
            color: var(--text-dim);
            margin-bottom: 2rem;
        }

        .path-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            font-size: 0.95rem;
            color: var(--text-dim);
        }

        .path-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Progress Dashboard */
        .progress-dashboard {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-green);
            border-radius: 1rem;
            padding: 2rem;
            margin: 3rem 0;
        }

        .progress-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .progress-header h2 {
            color: var(--accent-green);
            margin-bottom: 0.5rem;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-orange);
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .progress-bar-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 2rem;
            height: 2rem;
            overflow: hidden;
            margin: 1.5rem 0;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--primary-orange), var(--accent-green));
            height: 100%;
            border-radius: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            transition: width 0.5s ease;
            min-width: 2rem;
        }

        /* Badges */
        .badges-section {
            margin-top: 2rem;
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .badge-card {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid var(--accent-green);
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .badge-card.locked {
            background: rgba(0, 0, 0, 0.2);
            border-color: var(--border-color);
            opacity: 0.5;
        }

        .badge-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .badge-name {
            font-weight: 600;
            color: var(--text-light);
        }

        /* Stages Grid */
        .stages-section {
            margin: 4rem 0;
        }

        .stages-section h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--primary-orange);
        }

        .stages-grid {
            display: grid;
            gap: 2rem;
        }

        .stage-card {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .stage-card:hover {
            border-color: var(--primary-orange);
            transform: translateY(-5px);
        }

        .stage-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .stage-card.locked:hover {
            transform: none;
        }

        .stage-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .stage-title {
            flex: 1;
        }

        .stage-title h3 {
            font-size: 1.5rem;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .stage-subtitle {
            color: var(--text-dim);
            font-size: 0.95rem;
        }

        .stage-status {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .stage-status.locked {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-dim);
        }

        .stage-description {
            margin-bottom: 1.5rem;
            color: var(--text-light);
        }

        .modules-list {
            margin-bottom: 1.5rem;
        }

        .modules-list h4 {
            font-size: 1rem;
            margin-bottom: 0.75rem;
            color: var(--text-light);
        }

        .modules-list ul {
            list-style: none;
            padding-left: 0;
        }

        .modules-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-dim);
        }

        .modules-list li:before {
            content: "▸";
            position: absolute;
            left: 0;
            color: var(--primary-orange);
        }

        .modules-list li.completed:before {
            content: "✓";
            color: var(--accent-green);
        }

        .stage-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .stage-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .stage-cta {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .stage-cta:hover {
            background: #ff8c00;
            transform: translateX(5px);
        }

        .stage-cta.locked {
            background: var(--border-color);
            color: var(--text-dim);
            cursor: not-allowed;
            pointer-events: none;
        }

        /* Genesis Timeline */
        .genesis-section {
            margin: 4rem 0;
            padding: 3rem 0;
            background: linear-gradient(180deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
        }

        .genesis-intro {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 2rem;
        }

        .genesis-intro h2 {
            font-size: 2.5rem;
            color: var(--primary-orange);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-orange), #ffb347);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .genesis-intro p {
            font-size: 1.2rem;
            color: var(--text-dim);
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .control-button {
            padding: 0.75rem 1.5rem;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            color: var(--primary-orange);
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: var(--primary-orange);
            color: white;
            transform: translateY(-2px);
        }

        .control-button.active {
            background: var(--primary-orange);
            color: white;
        }

        .timeline-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--primary-orange), var(--accent-green));
            transform: translateX(-50%);
        }

        .timeline-card {
            position: relative;
            margin: 2rem 0;
            opacity: 0.5;
            transform: scale(0.95);
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .timeline-card.revealed {
            opacity: 1;
            transform: scale(1);
        }

        .timeline-card.left {
            margin-right: 50%;
            padding-right: 3rem;
        }

        .timeline-card.right {
            margin-left: 50%;
            padding-left: 3rem;
        }

        .timeline-dot {
            position: absolute;
            top: 1.5rem;
            width: 20px;
            height: 20px;
            background: var(--primary-orange);
            border: 4px solid var(--primary-dark);
            border-radius: 50%;
            z-index: 10;
        }

        .timeline-card.left .timeline-dot {
            right: -10px;
        }

        .timeline-card.right .timeline-dot {
            left: -10px;
        }

        .timeline-card.revealed .timeline-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(247, 147, 26, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(247, 147, 26, 0);
            }
        }

        .card-content {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .timeline-card.revealed .card-content {
            border-color: var(--primary-orange);
            box-shadow: 0 5px 20px rgba(247, 147, 26, 0.2);
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .card-year {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 0.75rem;
        }

        .card-description {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .demo-button {
            padding: 0.6rem 1.2rem;
            background: linear-gradient(135deg, var(--primary-orange), #ffb347);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 0.5rem;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4);
        }

        .demo-output {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.5rem;
            border-left: 3px solid var(--accent-green);
            display: none;
            animation: slideDown 0.3s ease;
        }

        .demo-output.visible {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .demo-output code {
            color: var(--accent-green);
            font-family: 'Courier New', monospace;
        }

        .demo-output input,
        .demo-output select {
            width: 100%;
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            color: var(--text-light);
            font-family: inherit;
        }

        .demo-output button {
            padding: 0.5rem 1rem;
            background: var(--primary-orange);
            border: none;
            border-radius: 0.25rem;
            color: white;
            cursor: pointer;
            margin: 0.25rem;
        }

        .demo-output button:hover {
            background: #ff8c00;
        }

        .merkle-tree {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.5rem;
            position: relative;
        }

        .merkle-level {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
            position: relative;
        }

        .merkle-node {
            background: rgba(247, 147, 26, 0.2);
            border: 2px solid var(--primary-orange);
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-family: monospace;
            min-width: 80px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 10;
        }

        .merkle-node:hover {
            background: rgba(247, 147, 26, 0.4);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(247, 147, 26, 0.5);
        }

        .merkle-node.active {
            background: rgba(76, 175, 80, 0.3);
            border-color: var(--accent-green);
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.6);
        }

        .merkle-node.highlighted {
            background: rgba(33, 150, 243, 0.3);
            border-color: var(--accent-blue);
            box-shadow: 0 0 20px rgba(33, 150, 243, 0.6);
        }

        .merkle-connector {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-orange), var(--accent-green));
            transform-origin: left center;
            pointer-events: none;
            z-index: 1;
        }

        .merkle-process {
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(33, 150, 243, 0.1);
            border: 2px solid var(--accent-blue);
            border-radius: 0.5rem;
            font-size: 0.9rem;
            display: none;
        }

        .merkle-process.visible {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .hash-step {
            margin: 0.5rem 0;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.25rem;
            border-left: 3px solid var(--accent-green);
        }

        .network-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .network-node {
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid var(--accent-blue);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .network-node:hover {
            background: rgba(33, 150, 243, 0.3);
            transform: scale(1.05);
        }

        .network-node.offline {
            opacity: 0.3;
            background: rgba(255, 0, 0, 0.2);
            border-color: #ff4444;
        }

        .hash-attempt {
            font-family: monospace;
            font-size: 0.85rem;
            padding: 0.25rem;
            margin: 0.25rem 0;
        }

        .hash-valid {
            color: var(--accent-green);
        }

        .hash-invalid {
            color: var(--text-dim);
        }

        .connections-map {
            margin: 3rem 0;
            padding: 2rem;
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            display: none;
        }

        .connections-map.visible {
            display: block;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .connection-node {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .connection-node:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
            transform: scale(1.05);
        }

        .connection-node.active {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero .subtitle {
                font-size: 1rem;
            }

            .path-meta {
                flex-direction: column;
                gap: 0.5rem;
            }

            .progress-stats {
                grid-template-columns: 1fr;
            }

            .stage-header {
                flex-direction: column;
                gap: 1rem;
            }

            .stage-footer {
                flex-direction: column;
                gap: 1rem;
            }

            .timeline-line {
                left: 20px;
            }

            .timeline-card.left,
            .timeline-card.right {
                margin-left: 60px;
                margin-right: 0;
                padding-left: 0;
                padding-right: 0;
            }

            .timeline-card.left .timeline-dot,
            .timeline-card.right .timeline-dot {
                left: -40px;
                right: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Hero -->
    <section class="hero">
        <div class="container">
            <h1>🔨 The Builder Path</h1>
            <p class="subtitle">Master Bitcoin Development from Protocol to Production</p>
            <div class="path-meta">
                <div class="path-meta-item">
                    <span>📚</span>
                    <span>4 Stages</span>
                </div>
                <div class="path-meta-item">
                    <span>📝</span>
                    <span>10 Modules</span>
                </div>
                <div class="path-meta-item">
                    <span>⏱️</span>
                    <span>~12 weeks</span>
                </div>
                <div class="path-meta-item">
                    <span>🎯</span>
                    <span>Expert Level</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Progress Dashboard -->
    <div class="container">
        <div class="progress-dashboard" id="progress-dashboard">
            <div class="progress-header">
                <h2>Your Progress</h2>
                <p style="color: var(--text-dim);">Track your journey to becoming a Bitcoin developer</p>
            </div>

            <div class="progress-stats">
                <div class="stat-card">
                    <span class="stat-value" id="modules-completed">0</span>
                    <span class="stat-label">Modules Completed</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="current-stage">1</span>
                    <span class="stat-label">Current Stage</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="badges-earned">0</span>
                    <span class="stat-label">Badges Earned</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="completion-percent">0%</span>
                    <span class="stat-label">Overall Progress</span>
                </div>
            </div>

            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%;">0%</div>
            </div>

            <!-- Badges -->
            <div class="badges-section">
                <h3 style="text-align: center; margin-bottom: 1rem; color: var(--text-light);">🏆 Achievements</h3>
                <div class="badges-grid">
                    <div class="badge-card locked" data-badge="protocol-mastery">
                        <div class="badge-icon">🔬</div>
                        <div class="badge-name">Protocol Mastery</div>
                    </div>
                    <div class="badge-card locked" data-badge="lightning-developer">
                        <div class="badge-icon">⚡</div>
                        <div class="badge-name">Lightning Developer</div>
                    </div>
                    <div class="badge-card locked" data-badge="bitcoin-builder">
                        <div class="badge-icon">🛠️</div>
                        <div class="badge-name">Bitcoin Builder</div>
                    </div>
                    <div class="badge-card locked" data-badge="bitcoin-contributor">
                        <div class="badge-icon">🌟</div>
                        <div class="badge-name">Bitcoin Contributor</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Genesis Timeline Section -->
    <section class="genesis-section">
        <div class="container">
            <div class="genesis-intro">
                <h2>🌟 The Bitcoin Genesis Timeline</h2>
                <p>Every revolution stands on the shoulders of giants. Discover the technologies, visionaries, and pivotal moments that had to happen before Satoshi could write the whitepaper.</p>
            </div>

            <div class="timeline-controls">
                <button class="control-button" onclick="revealAll()">⚡ Reveal All</button>
                <button class="control-button" onclick="toggleComparison()">🔄 Compare: Without These</button>
                <button class="control-button" onclick="toggleConnections()">🗺️ Connections Map</button>
            </div>

            <div class="connections-map" id="connections-map">
                <h3 style="color: var(--primary-orange); text-align: center; margin-bottom: 1rem;">How Six Pillars Became Bitcoin</h3>
                <p style="text-align: center; color: var(--text-dim); margin-bottom: 1.5rem;">Click each technology to see how it connects to Bitcoin's design</p>
                <div class="connections-grid">
                    <div class="connection-node" onclick="highlightConnection('crypto')">
                        🔐<br><strong>Public-Key Crypto</strong><br>
                        <small style="color: var(--text-dim);">→ Digital ownership</small>
                    </div>
                    <div class="connection-node" onclick="highlightConnection('network')">
                        🌐<br><strong>P2P Networks</strong><br>
                        <small style="color: var(--text-dim);">→ Decentralization</small>
                    </div>
                    <div class="connection-node" onclick="highlightConnection('timestamping')">
                        ⏰<br><strong>Timestamping</strong><br>
                        <small style="color: var(--text-dim);">→ Immutability</small>
                    </div>
                    <div class="connection-node" onclick="highlightConnection('merkle')">
                        🌳<br><strong>Merkle Trees</strong><br>
                        <small style="color: var(--text-dim);">→ Efficient proofs</small>
                    </div>
                    <div class="connection-node" onclick="highlightConnection('pow')">
                        💎<br><strong>Proof of Work</strong><br>
                        <small style="color: var(--text-dim);">→ Spam prevention</small>
                    </div>
                    <div class="connection-node" onclick="highlightConnection('failed')">
                        🧩<br><strong>Failed Attempts</strong><br>
                        <small style="color: var(--text-dim);">→ Learned mistakes</small>
                    </div>
                </div>
            </div>

            <div class="timeline-container">
                <div class="timeline-line"></div>

                <!-- 1970s: Public-Key Cryptography -->
                <div class="timeline-card left" onclick="revealCard(this)" data-era="1970s">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">🔐</span>
                        <div class="card-year">1970s</div>
                        <div class="card-title">The Age of Secret Codes</div>
                        <div class="card-description">
                            Whitfield Diffie & Martin Hellman invented public-key cryptography (1976), followed by RSA encryption (1977).
                            These breakthroughs made digital ownership possible for the first time.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoPublicKey(this)">🔑 Try Public Key Demo</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 1983-1990s: Internet -->
                <div class="timeline-card right" onclick="revealCard(this)" data-era="1990s">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">🌐</span>
                        <div class="card-year">1983-1990s</div>
                        <div class="card-title">The Internet Goes Global</div>
                        <div class="card-description">
                            TCP/IP protocol connects computers worldwide without central control. This peer-to-peer foundation
                            became essential for Bitcoin's decentralized network.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoNetwork(this)">🕸️ See Network Effect</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 1989: DigiCash -->
                <div class="timeline-card left" onclick="revealCard(this)" data-era="1989">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">💰</span>
                        <div class="card-year">1989</div>
                        <div class="card-title">DigiCash - First Digital Money</div>
                        <div class="card-description">
                            David Chaum created the first cryptographic digital currency. It worked perfectly but required trust
                            in a central company - the missing piece Bitcoin would later solve.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoDigiCash(this)">💳 See DigiCash Model</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 1991: Timestamping -->
                <div class="timeline-card right" onclick="revealCard(this)" data-era="1991">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">⏰</span>
                        <div class="card-year">1991</div>
                        <div class="card-title">Time-Stamping & Timechains</div>
                        <div class="card-description">
                            Stuart Haber & Scott Stornetta created the first "timechain" - linking documents together so no one
                            could backdate or alter them. This became Bitcoin's blockchain foundation.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoTimechain(this)">⛓️ Build a Chain</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 1992: Merkle Trees -->
                <div class="timeline-card left" onclick="revealCard(this)" data-era="1992">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">🌳</span>
                        <div class="card-year">1992</div>
                        <div class="card-title">Merkle Trees Added</div>
                        <div class="card-description">
                            Haber, Stornetta & Bayer improve their design with Merkle Trees. Now, multiple documents can be
                            linked into a single proof efficiently. This innovation later powers Bitcoin's block structure.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoMerkle(this)">🌲 See 8 Transactions → 1 Root</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 1997: Hashcash -->
                <div class="timeline-card right" onclick="revealCard(this)" data-era="1997">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">💎</span>
                        <div class="card-year">1997</div>
                        <div class="card-title">Hashcash - Proof of Work</div>
                        <div class="card-description">
                            Adam Back invented Hashcash to fight email spam. Users had to solve a small math problem before
                            sending emails, making spam expensive. Bitcoin uses this exact concept.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoHashcash(this)">⛏️ Try Hash Mining</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 1998-2005: Cypherpunks -->
                <div class="timeline-card left" onclick="revealCard(this)" data-era="2000s">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">👥</span>
                        <div class="card-year">1998-2005</div>
                        <div class="card-title">Cypherpunks & Failed Prototypes</div>
                        <div class="card-description">
                            Privacy advocates created b-money (Wei Dai), Bit Gold (Nick Szabo), and e-gold (Douglas Jackson).
                            Each solved part of the puzzle, but none achieved full decentralization.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoCypherpunks(this)">🧩 See the Pieces</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 2008: Whitepaper -->
                <div class="timeline-card right" onclick="revealCard(this)" data-era="2008">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">📜</span>
                        <div class="card-year">October 31, 2008</div>
                        <div class="card-title">The Bitcoin White Paper</div>
                        <div class="card-description">
                            Satoshi Nakamoto publishes "Bitcoin: A Peer-to-Peer Electronic Cash System" - elegantly combining
                            all previous innovations into one self-sustaining system.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoWhitepaper(this)">📄 Read Key Excerpt</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 2009: Genesis Block -->
                <div class="timeline-card left" onclick="revealCard(this)" data-era="2009">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">⛏️</span>
                        <div class="card-year">January 3, 2009</div>
                        <div class="card-title">Genesis Block</div>
                        <div class="card-description">
                            Satoshi mines the first Bitcoin block with a hidden message: "The Times 03/Jan/2009 Chancellor on brink
                            of second bailout for banks" - a protest encoded in history.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoGenesis(this)">🎮 Mine Genesis Block</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 2010: Pizza Day -->
                <div class="timeline-card right" onclick="revealCard(this)" data-era="2010">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">🍕</span>
                        <div class="card-year">May 22, 2010</div>
                        <div class="card-title">First Real Purchase</div>
                        <div class="card-description">
                            Laszlo Hanyecz buys 2 pizzas for 10,000 BTC - proving Bitcoin works as real money.
                            Those pizzas are worth over $600 million today!
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoPizza(this)">🍕 Calculate Pizza Value</button>
                        <div class="demo-output"></div>
                    </div>
                </div>

                <!-- 2011-Today: Adoption -->
                <div class="timeline-card left" onclick="revealCard(this)" data-era="today">
                    <div class="timeline-dot"></div>
                    <div class="card-content">
                        <span class="card-icon">🌍</span>
                        <div class="card-year">2011-Today</div>
                        <div class="card-title">Global Adoption</div>
                        <div class="card-description">
                            From $1 in 2011 to legal tender in El Salvador (2021). Bitcoin evolved from an experiment to global
                            financial infrastructure with Lightning Network, institutional adoption, and scaling solutions.
                        </div>
                        <button class="demo-button" onclick="event.stopPropagation(); demoGrowth(this)">📈 See Growth Timeline</button>
                        <div class="demo-output"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stages Section -->
    <section class="stages-section">
        <div class="container">
            <h2>Learning Stages</h2>

            <div class="stages-grid">
                <!-- Stage 1 -->
                <div class="stage-card" data-stage="1">
                    <div class="stage-header">
                        <div class="stage-title">
                            <h3>Stage 1: Technical Foundations</h3>
                            <p class="stage-subtitle">Deep dive into Bitcoin's core protocol and cryptography</p>
                        </div>
                        <div class="stage-status" data-status="unlocked">Unlocked</div>
                    </div>

                    <div class="stage-description">
                        Master the fundamental building blocks of Bitcoin: UTXO model, transaction structure, cryptographic primitives,
                        and proof-of-work. Build interactive tools to visualize and understand how Bitcoin works under the hood.
                    </div>

                    <div class="modules-list">
                        <h4>Modules:</h4>
                        <ul>
                            <li data-module="builder-1-1">Bitcoin Protocol Deep Dive (60 min)</li>
                            <li data-module="builder-1-2">Cryptographic Primitives (45 min)</li>
                            <li data-module="builder-1-3">Proof of Work (45 min)</li>
                        </ul>
                    </div>

                    <div class="stage-footer">
                        <div class="stage-meta">
                            <span>⏱️ ~2.5 hours</span>
                            <span>🎯 3 modules</span>
                            <span>🏆 Protocol Mastery badge</span>
                        </div>
                        <a href="/paths/builder/stage-1/" class="stage-cta">Begin Stage 1 →</a>
                    </div>
                </div>

                <!-- Stage 2 -->
                <div class="stage-card locked" data-stage="2">
                    <div class="stage-header">
                        <div class="stage-title">
                            <h3>Stage 2: Lightning Network</h3>
                            <p class="stage-subtitle">Build scalable payment solutions with Lightning</p>
                        </div>
                        <div class="stage-status locked" data-status="locked">🔒 Locked</div>
                    </div>

                    <div class="stage-description">
                        Learn how Lightning Network enables instant, low-cost Bitcoin transactions. Understand payment channels,
                        routing, HTLCs, and build your first Lightning application.
                    </div>

                    <div class="modules-list">
                        <h4>Modules:</h4>
                        <ul>
                            <li data-module="builder-2-1">Payment Channels (50 min)</li>
                            <li data-module="builder-2-2">Routing & HTLCs (55 min)</li>
                            <li data-module="builder-2-3">Lightning Application Development (90 min)</li>
                        </ul>
                    </div>

                    <div class="stage-footer">
                        <div class="stage-meta">
                            <span>⏱️ ~3.25 hours</span>
                            <span>🎯 3 modules</span>
                            <span>🏆 Lightning Developer badge</span>
                        </div>
                        <a href="/paths/builder/stage-2/" class="stage-cta locked">Complete Stage 1 First</a>
                    </div>
                </div>

                <!-- Stage 3 -->
                <div class="stage-card locked" data-stage="3">
                    <div class="stage-header">
                        <div class="stage-title">
                            <h3>Stage 3: Building Applications</h3>
                            <p class="stage-subtitle">Create production-ready Bitcoin applications</p>
                        </div>
                        <div class="stage-status locked" data-status="locked">🔒 Locked</div>
                    </div>

                    <div class="stage-description">
                        Set up your development environment, learn best practices, and build real Bitcoin applications.
                        Create wallets, generate addresses, construct transactions, and deploy to production.
                    </div>

                    <div class="modules-list">
                        <h4>Modules:</h4>
                        <ul>
                            <li data-module="builder-3-1">Bitcoin Development Environment (60 min)</li>
                            <li data-module="builder-3-2">Building with Bitcoin (120 min)</li>
                            <li data-module="builder-3-3">Best Practices (45 min)</li>
                        </ul>
                    </div>

                    <div class="stage-footer">
                        <div class="stage-meta">
                            <span>⏱️ ~3.75 hours</span>
                            <span>🎯 3 modules</span>
                            <span>🏆 Bitcoin Builder badge</span>
                        </div>
                        <a href="/paths/builder/stage-3/" class="stage-cta locked">Complete Stage 2 First</a>
                    </div>
                </div>

                <!-- Stage 4 -->
                <div class="stage-card locked" data-stage="4">
                    <div class="stage-header">
                        <div class="stage-title">
                            <h3>Stage 4: Contributing to Bitcoin</h3>
                            <p class="stage-subtitle">Join the Bitcoin Core contributor community</p>
                        </div>
                        <div class="stage-status locked" data-status="locked">🔒 Locked</div>
                    </div>

                    <div class="stage-description">
                        Dive into Bitcoin Core development, understand BIPs and protocol evolution, and make your first contribution
                        to the Bitcoin ecosystem. Join the global community building the future of money.
                    </div>

                    <div class="modules-list">
                        <h4>Modules:</h4>
                        <ul>
                            <li data-module="builder-4-1">Bitcoin Core Development (90 min)</li>
                            <li data-module="builder-4-2">BIPs and Protocol Evolution (60 min)</li>
                            <li data-module="builder-4-3">Your First Contribution (Ongoing)</li>
                        </ul>
                    </div>

                    <div class="stage-footer">
                        <div class="stage-meta">
                            <span>⏱️ ~2.5+ hours</span>
                            <span>🎯 3 modules</span>
                            <span>🏆 Bitcoin Contributor badge</span>
                        </div>
                        <a href="/paths/builder/stage-4/" class="stage-cta locked">Complete Stage 3 First</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Load and display progress
        function updateProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (progress.path !== 'builder') {
                // Initialize Builder path progress
                return;
            }

            const completedModules = progress.completedModules || [];
            const badges = progress.badges || [];
            const completedStages = progress.completedStages || [];

            // Update stats
            const builderModules = completedModules.filter(m => m.startsWith('builder-'));
            document.getElementById('modules-completed').textContent = builderModules.length;
            document.getElementById('current-stage').textContent = progress.currentStage || 1;
            document.getElementById('badges-earned').textContent = badges.length;

            const totalModules = 10;
            const completionPercent = Math.round((builderModules.length / totalModules) * 100);
            document.getElementById('completion-percent').textContent = completionPercent + '%';

            // Update progress bar
            const progressBar = document.getElementById('progress-bar');
            progressBar.style.width = completionPercent + '%';
            progressBar.textContent = completionPercent + '%';

            // Update badges
            badges.forEach(badge => {
                const badgeCard = document.querySelector(`[data-badge="${badge}"]`);
                if (badgeCard) {
                    badgeCard.classList.remove('locked');
                }
            });

            // Update modules completion checkmarks
            builderModules.forEach(moduleId => {
                const moduleLi = document.querySelector(`[data-module="${moduleId}"]`);
                if (moduleLi) {
                    moduleLi.classList.add('completed');
                }
            });

            // Unlock stages
            completedStages.forEach(stageId => {
                const stageNum = parseInt(stageId.split('-')[1]);
                const nextStage = document.querySelector(`[data-stage="${stageNum + 1}"]`);
                if (nextStage) {
                    nextStage.classList.remove('locked');
                    const statusBadge = nextStage.querySelector('[data-status]');
                    statusBadge.textContent = 'Unlocked';
                    statusBadge.classList.remove('locked');
                    const cta = nextStage.querySelector('.stage-cta');
                    cta.classList.remove('locked');
                    cta.textContent = `Begin Stage ${stageNum + 1} →`;
                }
            });

            // Mark completed stages
            completedStages.forEach(stageId => {
                const stageNum = parseInt(stageId.split('-')[1]);
                const stage = document.querySelector(`[data-stage="${stageNum}"]`);
                if (stage) {
                    const statusBadge = stage.querySelector('[data-status]');
                    statusBadge.textContent = '✓ Complete';
                    statusBadge.style.background = 'rgba(76, 175, 80, 0.3)';
                }
            });
        }

        updateProgress();

        // === Genesis Timeline Functions ===

        function revealCard(card) {
            card.classList.add('revealed');
        }

        function revealAll() {
            const cards = document.querySelectorAll('.timeline-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('revealed');
                }, index * 200);
            });
        }

        function toggleComparison() {
            const button = event.target;
            const showing = button.textContent.includes('Without');

            if (showing) {
                alert('🚫 Without These Technologies:\n\n' +
                      '❌ No Public-Key Crypto → No digital signatures, no wallets\n' +
                      '❌ No P2P Networks → Requires central server (single point of failure)\n' +
                      '❌ No Timestamping → History can be rewritten\n' +
                      '❌ No Merkle Trees → Inefficient, bloated proofs\n' +
                      '❌ No Proof of Work → Easy spam, no consensus\n' +
                      '❌ No Failed Attempts → We\'d repeat their mistakes\n\n' +
                      '💡 Bitcoin needed ALL of these to work!');
                button.textContent = '✅ Compare: With These';
            } else {
                button.textContent = '🔄 Compare: Without These';
            }
        }

        function toggleConnections() {
            const map = document.getElementById('connections-map');
            map.classList.toggle('visible');
        }

        function highlightConnection(tech) {
            const connections = {
                crypto: 'Public-Key Cryptography enables Bitcoin\'s digital signatures and addresses. Without it, there\'s no way to prove ownership of coins!',
                network: 'P2P Networks allow Bitcoin to operate without any central server. Every node is equal, making censorship nearly impossible.',
                timestamping: 'Timestamping chains create immutable history. Bitcoin\'s blockchain uses this to prevent double-spending forever.',
                merkle: 'Merkle Trees let Bitcoin compress thousands of transactions into a single 32-byte hash, enabling lightweight wallets.',
                pow: 'Proof of Work makes attacking Bitcoin expensive. It costs real energy to mine blocks, securing the network economically.',
                failed: 'Failed attempts like DigiCash and e-gold taught us what NOT to do: never trust a single company with the money supply.'
            };

            alert('💡 Connection: ' + tech.toUpperCase() + '\n\n' + connections[tech]);

            // Highlight the node
            document.querySelectorAll('.connection-node').forEach(node => {
                node.classList.remove('active');
            });
            event.target.closest('.connection-node').classList.add('active');
        }

        // === Demo Functions ===

        // SHA-256 helper function
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        function demoPublicKey(button) {
            const output = button.nextElementSibling;

            // Generate actual cryptographic keys
            const privateKey = Array.from({length: 32}, () => Math.floor(Math.random() * 256).toString(16).padStart(2, '0')).join('');
            const publicKey = '04' + Array.from({length: 64}, () => Math.floor(Math.random() * 256).toString(16).padStart(2, '0')).join('');

            output.innerHTML = `
<strong>🔑 Interactive Public-Key Cryptography</strong>

<div style="margin: 1rem 0;">
    <label>Your Message:</label>
    <input type="text" id="msg-input" placeholder="Type a message to sign..." value="Hello Bitcoin!" />
</div>

<button onclick="signMessage('${privateKey}', '${publicKey}')">🔏 Sign Message</button>

<div id="key-display" style="margin-top: 1rem;">
    <code>Private Key (Keep Secret!):</code><br>
    <small style="color: #ff6b6b; word-break: break-all;">${privateKey}</small><br><br>

    <code>Public Key (Share This):</code><br>
    <small style="color: var(--accent-green); word-break: break-all;">${publicKey.substring(0, 40)}...</small>
</div>

<div id="signature-result"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>✨ The Magic:</strong><br>
    • Private key signs → Creates unique signature<br>
    • Anyone with public key can verify signature<br>
    • Can't reverse engineer private from public<br>
    • This is how Bitcoin proves ownership!
</div>
            `;
            output.classList.add('visible');
        }

        async function signMessage(privateKey, publicKey) {
            const message = document.getElementById('msg-input').value;
            const resultDiv = document.getElementById('signature-result');

            // Simulate signing (in real Bitcoin, this would use ECDSA)
            const signature = await sha256(message + privateKey);

            resultDiv.innerHTML = `
<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 1px solid var(--primary-orange); border-radius: 0.25rem;">
    <strong>📝 Signed Message:</strong><br>
    <small style="color: var(--text-dim);">"${message}"</small><br><br>

    <strong>✍️ Signature:</strong><br>
    <code style="font-size: 0.75rem; word-break: break-all;">${signature}</code><br><br>

    <strong>✅ Verification:</strong> Anyone with your public key can verify this signature proves YOU signed this message!
</div>
            `;
        }

        let networkState = {
            nodes: ['Node 1', 'Node 2', 'Node 3', 'Node 4', 'Node 5', 'Node 6'],
            offline: []
        };

        function demoNetwork(button) {
            const output = button.nextElementSibling;
            networkState.offline = [];

            output.innerHTML = `
<strong>🌐 Interactive P2P Network</strong>

<p style="color: var(--text-dim);">Click nodes to take them offline. Watch how the network survives!</p>

<div class="network-grid" id="network-grid">
    ${networkState.nodes.map((node, i) => `
        <div class="network-node" id="node-${i}" onclick="toggleNode(${i})">
            <div style="font-size: 2rem;">🖥️</div>
            <strong>${node}</strong>
            <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                <span style="color: var(--accent-green);">● Online</span>
            </div>
        </div>
    `).join('')}
</div>

<div id="network-status" style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green);">
    <strong>Network Status:</strong> ${networkState.nodes.length}/6 nodes online<br>
    <strong>✅ Network Active:</strong> Transactions flowing normally
</div>

<button onclick="resetNetwork()">🔄 Reset Network</button>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(33, 150, 243, 0.1); border-left: 3px solid var(--accent-blue); font-size: 0.9rem;">
    <strong>💡 The Power of P2P:</strong><br>
    • No central server to attack<br>
    • Nodes can go offline without affecting network<br>
    • Bitcoin has ~15,000 nodes worldwide<br>
    • Network stays alive as long as ONE node exists!
</div>
            `;
            output.classList.add('visible');
        }

        function toggleNode(index) {
            const node = document.getElementById(`node-${index}`);
            const status = document.getElementById('network-status');

            if (networkState.offline.includes(index)) {
                networkState.offline = networkState.offline.filter(n => n !== index);
                node.classList.remove('offline');
                node.innerHTML = `
                    <div style="font-size: 2rem;">🖥️</div>
                    <strong>${networkState.nodes[index]}</strong>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                        <span style="color: var(--accent-green);">● Online</span>
                    </div>
                `;
            } else {
                networkState.offline.push(index);
                node.classList.add('offline');
                node.innerHTML = `
                    <div style="font-size: 2rem;">💀</div>
                    <strong>${networkState.nodes[index]}</strong>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                        <span style="color: #ff4444;">● Offline</span>
                    </div>
                `;
            }

            const online = networkState.nodes.length - networkState.offline.length;
            const networkAlive = online > 0;

            status.innerHTML = `
                <strong>Network Status:</strong> ${online}/6 nodes online<br>
                ${networkAlive
                    ? '<strong style="color: var(--accent-green);">✅ Network Active:</strong> Transactions flowing normally'
                    : '<strong style="color: #ff4444;">❌ Network Down:</strong> All nodes offline'}
                ${online < 3 && online > 0 ? '<br><span style="color: #ffaa00;">⚠️ Warning: Low node count</span>' : ''}
            `;
            status.style.borderColor = networkAlive ? 'var(--accent-green)' : '#ff4444';
            status.style.background = networkAlive ? 'rgba(76, 175, 80, 0.1)' : 'rgba(255, 68, 68, 0.1)';
        }

        function resetNetwork() {
            networkState.offline = [];
            networkState.nodes.forEach((_, i) => {
                const node = document.getElementById(`node-${i}`);
                if (node) {
                    node.classList.remove('offline');
                    node.innerHTML = `
                        <div style="font-size: 2rem;">🖥️</div>
                        <strong>${networkState.nodes[i]}</strong>
                        <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                            <span style="color: var(--accent-green);">● Online</span>
                        </div>
                    `;
                }
            });
            const status = document.getElementById('network-status');
            status.innerHTML = `
                <strong>Network Status:</strong> 6/6 nodes online<br>
                <strong>✅ Network Active:</strong> Transactions flowing normally
            `;
            status.style.borderColor = 'var(--accent-green)';
            status.style.background = 'rgba(76, 175, 80, 0.1)';
        }

        function demoDigiCash(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>💳 DigiCash Model (1989)</strong>

<code>How It Worked:</code>
1. Bank issues digital coins (cryptographically signed)
2. You spend coins anonymously
3. Merchant verifies with bank
4. Bank prevents double-spending

<code>The Problem:</code>
❌ Requires trusting DigiCash Inc.
❌ Company went bankrupt in 1998
❌ All coins became worthless

<strong>💡 Bitcoin's Fix: No company required!</strong>
            `;
            output.classList.add('visible');
        }

        let timechainBlocks = [];

        async function demoTimechain(button) {
            const output = button.nextElementSibling;
            timechainBlocks = [];

            output.innerHTML = `
<strong>⛓️ Interactive Timechain Builder</strong>

<p style="color: var(--text-dim);">Add documents to see how each block links to the previous one!</p>

<div style="margin: 1rem 0;">
    <input type="text" id="doc-input" placeholder="Enter document content..." value="Genesis Document" />
    <button onclick="addToTimechain()">➕ Add Block</button>
</div>

<div id="timechain-display" style="margin-top: 1rem;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>🔒 Why This Works:</strong><br>
    • Each block contains the previous block's hash<br>
    • Changing any block breaks all subsequent blocks<br>
    • The entire chain validates itself!<br>
    • This is Bitcoin's blockchain foundation!
</div>
            `;
            output.classList.add('visible');
        }

        async function addToTimechain() {
            const input = document.getElementById('doc-input');
            const data = input.value || 'Document';
            const display = document.getElementById('timechain-display');

            const prevHash = timechainBlocks.length > 0
                ? timechainBlocks[timechainBlocks.length - 1].hash
                : '0000000000000000';

            const hash = await sha256(data + prevHash);
            timechainBlocks.push({ data, prevHash, hash });

            display.innerHTML = timechainBlocks.map((block, i) => `
                <div style="margin: 0.75rem 0; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); border-radius: 0.5rem;">
                    <strong>Block ${i + 1}:</strong> "${block.data}"<br>
                    <small style="color: var(--text-dim);">Previous Hash:</small> <code style="font-size: 0.7rem;">${block.prevHash.substring(0, 16)}...</code><br>
                    <small style="color: var(--accent-green);">Current Hash:</small> <code style="font-size: 0.7rem;">${block.hash.substring(0, 16)}...</code>
                </div>
            `).join('');

            input.value = '';
        }

        let merkleTransactions = ['Alice→Bob: 1 BTC', 'Carol→Dave: 0.5 BTC', 'Eve→Frank: 2 BTC', 'Grace→Henry: 0.3 BTC',
                                  'Ivy→Jack: 1.5 BTC', 'Kim→Leo: 0.8 BTC', 'Mia→Noah: 0.2 BTC', 'Olivia→Paul: 3 BTC'];
        let merkleTree = {};
        let merkleStepIndex = 0;

        async function demoMerkle(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>🌳 Interactive Merkle Tree: Watch Transactions Combine Into a Single Root!</strong>

<p style="color: var(--text-dim);">Enter your own transaction data below, then click "Build Tree Step-by-Step"</p>

<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin: 1rem 0;">
    ${merkleTransactions.map((tx, i) => `
        <div>
            <label style="font-size: 0.75rem; color: var(--text-dim);">TX${i+1}:</label>
            <input type="text" id="tx-${i}" value="${tx}" placeholder="Transaction ${i+1}" style="width: 100%; padding: 0.5rem; font-size: 0.75rem;" />
        </div>
    `).join('')}
</div>

<div style="margin: 1rem 0;">
    <button onclick="buildMerkleTreeStepByStep()">🌲 Build Tree Step-by-Step</button>
    <button onclick="buildMerkleTreeInstant()">⚡ Build Instantly</button>
    <button onclick="resetMerkleTree()">🔄 Reset</button>
</div>

<div id="merkle-process" class="merkle-process"></div>
<div id="merkle-tree-viz" class="merkle-tree"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>💡 How Merkle Trees Work:</strong><br>
    • Transactions are hashed in pairs: Hash(TX7 + TX8)<br>
    • Those hashes are paired again: Hash(H78 + H56)<br>
    • Repeat until you get one ROOT hash<br>
    • 8 transactions (2048 bytes) → 1 root (32 bytes) = 64x compression!<br>
    • Bitcoin uses this in every block header
</div>
            `;
            output.classList.add('visible');
        }

        async function buildMerkleTreeStepByStep() {
            merkleStepIndex = 0;
            const processDiv = document.getElementById('merkle-process');
            processDiv.classList.add('visible');
            processDiv.innerHTML = '<strong>🔨 Building Merkle Tree...</strong>';

            // Get transactions
            const transactions = [];
            for (let i = 0; i < 8; i++) {
                transactions.push(document.getElementById(`tx-${i}`).value);
            }

            // Step 1: Hash each transaction
            processDiv.innerHTML += `
                <div class="hash-step">
                    <strong>Step 1: Hash Each Transaction</strong><br>
                    Hashing 8 transactions individually...
                </div>
            `;
            await new Promise(resolve => setTimeout(resolve, 800));

            const level3 = await Promise.all(transactions.map(async (tx, i) => {
                const hash = await sha256(tx);
                processDiv.innerHTML += `
                    <div style="font-size: 0.8rem; margin: 0.25rem 0; color: var(--text-dim);">
                        TX${i+1}: "${tx.substring(0, 20)}..." → <code style="color: var(--accent-green);">${hash.substring(0, 12)}...</code>
                    </div>
                `;
                return { data: tx, hash: hash.substring(0, 10), fullHash: hash };
            }));

            await new Promise(resolve => setTimeout(resolve, 1000));

            // Step 2: Pair level 3
            processDiv.innerHTML += `
                <div class="hash-step">
                    <strong>Step 2: Combine Pairs (Level 3 → Level 2)</strong><br>
                    Hashing pairs together...
                </div>
            `;

            const level2 = [];
            for (let i = 0; i < level3.length; i += 2) {
                const left = level3[i];
                const right = level3[i+1];
                const combined = left.fullHash + right.fullHash;
                const hash = await sha256(combined);

                processDiv.innerHTML += `
                    <div style="font-size: 0.8rem; margin: 0.5rem 0; padding: 0.5rem; background: rgba(247, 147, 26, 0.1); border-radius: 0.25rem;">
                        <strong>Pair ${i/2 + 1}:</strong><br>
                        TX${i+1} (<code>${left.hash}...</code>) +<br>
                        TX${i+2} (<code>${right.hash}...</code>)<br>
                        = Hash(<code style="color: var(--accent-green);">${hash.substring(0, 12)}...</code>)
                    </div>
                `;

                level2.push({ data: `H${i+1}${i+2}`, hash: hash.substring(0, 10), fullHash: hash });
                await new Promise(resolve => setTimeout(resolve, 600));
            }

            // Step 3: Pair level 2
            processDiv.innerHTML += `
                <div class="hash-step">
                    <strong>Step 3: Combine Pairs Again (Level 2 → Level 1)</strong>
                </div>
            `;

            const level1 = [];
            for (let i = 0; i < level2.length; i += 2) {
                const left = level2[i];
                const right = level2[i+1];
                const combined = left.fullHash + right.fullHash;
                const hash = await sha256(combined);

                processDiv.innerHTML += `
                    <div style="font-size: 0.8rem; margin: 0.5rem 0; padding: 0.5rem; background: rgba(247, 147, 26, 0.1); border-radius: 0.25rem;">
                        ${left.data} + ${right.data} = <code style="color: var(--accent-green);">${hash.substring(0, 12)}...</code>
                    </div>
                `;

                level1.push({ data: `H${i*2+1}-${(i+1)*2}`, hash: hash.substring(0, 10), fullHash: hash });
                await new Promise(resolve => setTimeout(resolve, 600));
            }

            // Step 4: Final root
            processDiv.innerHTML += `
                <div class="hash-step">
                    <strong>Step 4: Combine Final Pair → MERKLE ROOT!</strong>
                </div>
            `;

            const left = level1[0];
            const right = level1[1];
            const combined = left.fullHash + right.fullHash;
            const rootHash = await sha256(combined);
            const root = { data: 'MERKLE ROOT', hash: rootHash.substring(0, 10), fullHash: rootHash };

            processDiv.innerHTML += `
                <div style="font-size: 0.8rem; margin: 0.5rem 0; padding: 0.75rem; background: rgba(76, 175, 80, 0.2); border: 2px solid var(--accent-green); border-radius: 0.25rem; text-align: center;">
                    <strong>🌳 MERKLE ROOT CREATED!</strong><br>
                    <code style="color: var(--accent-green); font-size: 0.9rem;">${rootHash.substring(0, 20)}...</code><br>
                    <small>This single 32-byte hash represents ALL 8 transactions!</small>
                </div>
            `;

            merkleTree = { level3, level2, level1, root };
            renderMerkleTree();
        }

        async function buildMerkleTreeInstant() {
            // Same logic but without delays
            const processDiv = document.getElementById('merkle-process');
            processDiv.classList.remove('visible');

            const transactions = [];
            for (let i = 0; i < 8; i++) {
                transactions.push(document.getElementById(`tx-${i}`).value);
            }

            const level3 = await Promise.all(transactions.map(async (tx) => {
                const hash = await sha256(tx);
                return { data: tx, hash: hash.substring(0, 10), fullHash: hash };
            }));

            const level2 = [];
            for (let i = 0; i < level3.length; i += 2) {
                const combined = level3[i].fullHash + level3[i+1].fullHash;
                const hash = await sha256(combined);
                level2.push({ data: `H${i+1}${i+2}`, hash: hash.substring(0, 10), fullHash: hash });
            }

            const level1 = [];
            for (let i = 0; i < level2.length; i += 2) {
                const combined = level2[i].fullHash + level2[i+1].fullHash;
                const hash = await sha256(combined);
                level1.push({ data: `H${i*2+1}-${(i+1)*2}`, hash: hash.substring(0, 10), fullHash: hash });
            }

            const combined = level1[0].fullHash + level1[1].fullHash;
            const rootHash = await sha256(combined);
            const root = { data: 'MERKLE ROOT', hash: rootHash.substring(0, 10), fullHash: rootHash };

            merkleTree = { level3, level2, level1, root };
            renderMerkleTree();
        }

        function renderMerkleTree() {
            const viz = document.getElementById('merkle-tree-viz');
            const { level3, level2, level1, root } = merkleTree;

            viz.innerHTML = `
                <svg width="100%" height="60" style="position: absolute; top: 0; left: 0; pointer-events: none;">
                    <!-- Connections will be drawn here if needed -->
                </svg>

                <div style="text-align: center; margin: 2rem 0 3rem 0;">
                    <div style="color: var(--text-dim); margin-bottom: 0.5rem;">⬇️ Level 0: MERKLE ROOT ⬇️</div>
                    <div class="merkle-node active" style="display: inline-block; min-width: 150px;">
                        <div style="font-size: 1rem;"><strong>🌳 ${root.data}</strong></div>
                        <code style="color: var(--accent-green); font-size: 0.75rem;">${root.hash}...</code><br>
                        <small style="color: var(--accent-green);">✅ 32 bytes</small>
                    </div>
                </div>

                <div style="text-align: center; margin: 3rem 0;">
                    <div style="color: var(--text-dim); margin-bottom: 0.5rem;">⬇️ Level 1: Branch Hashes ⬇️</div>
                    <div class="merkle-level">
                        ${level1.map(node => `
                            <div class="merkle-node">
                                <strong>${node.data}</strong><br>
                                <code>${node.hash}...</code>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div style="text-align: center; margin: 3rem 0;">
                    <div style="color: var(--text-dim); margin-bottom: 0.5rem;">⬇️ Level 2: Pair Hashes ⬇️</div>
                    <div class="merkle-level">
                        ${level2.map(node => `
                            <div class="merkle-node">
                                <strong>${node.data}</strong><br>
                                <code>${node.hash}...</code>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div style="text-align: center; margin: 3rem 0;">
                    <div style="color: var(--text-dim); margin-bottom: 0.5rem;">⬇️ Level 3: Transaction Hashes (Leaves) ⬇️</div>
                    <div class="merkle-level">
                        ${level3.map((node, i) => `
                            <div class="merkle-node" style="background: rgba(33, 150, 243, 0.2); border-color: var(--accent-blue); max-width: 120px;">
                                <strong style="font-size: 0.8rem;">TX${i+1}</strong><br>
                                <div style="font-size: 0.7rem; margin: 0.25rem 0; color: var(--text-dim);">${node.data.substring(0, 15)}...</div>
                                <code style="font-size: 0.7rem;">${node.hash}...</code>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div style="margin-top: 2rem; padding: 1rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); border-radius: 0.5rem; text-align: center;">
                    <strong>🎯 Compression Result:</strong><br>
                    8 transactions (2,048 bytes) → 1 Merkle Root (32 bytes)<br>
                    <strong style="color: var(--accent-green);">Compression Ratio: 64:1</strong>
                </div>
            `;
        }

        function resetMerkleTree() {
            merkleTransactions = ['Alice→Bob: 1 BTC', 'Carol→Dave: 0.5 BTC', 'Eve→Frank: 2 BTC', 'Grace→Henry: 0.3 BTC',
                                  'Ivy→Jack: 1.5 BTC', 'Kim→Leo: 0.8 BTC', 'Mia→Noah: 0.2 BTC', 'Olivia→Paul: 3 BTC'];
            for (let i = 0; i < 8; i++) {
                document.getElementById(`tx-${i}`).value = merkleTransactions[i];
            }
            document.getElementById('merkle-tree-viz').innerHTML = '';
            document.getElementById('merkle-process').innerHTML = '';
            document.getElementById('merkle-process').classList.remove('visible');
        }

        let miningInProgress = false;

        async function demoHashcash(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>⛏️ Interactive Hash Mining (Real SHA-256)</strong>

<p style="color: var(--text-dim);">Adjust difficulty and start mining to see Proof of Work in action!</p>

<div style="margin: 1rem 0;">
    <label>Difficulty (leading zeros): </label>
    <select id="difficulty-select">
        <option value="1">1 (Easy - Fast)</option>
        <option value="2" selected>2 (Medium)</option>
        <option value="3">3 (Hard)</option>
        <option value="4">4 (Very Hard)</option>
    </select>
</div>

<div style="margin: 1rem 0;">
    <label>Data to hash: </label>
    <input type="text" id="mining-data" value="Hello Bitcoin!" />
</div>

<button onclick="startMining()" id="mine-btn">⛏️ Start Mining</button>
<button onclick="stopMining()" style="display: none;" id="stop-btn">⏹️ Stop</button>

<div id="mining-output" style="margin-top: 1rem; max-height: 300px; overflow-y: auto;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border-left: 3px solid var(--accent-green); font-size: 0.9rem;">
    <strong>💡 Proof of Work:</strong><br>
    • Finding a hash with N leading zeros requires ~16^N attempts<br>
    • 1 zero = ~16 attempts, 2 zeros = ~256 attempts<br>
    • Bitcoin uses 19-20 zeros (quintillions of attempts!)<br>
    • This makes attacks extremely expensive
</div>
            `;
            output.classList.add('visible');
        }

        async function startMining() {
            miningInProgress = true;
            document.getElementById('mine-btn').style.display = 'none';
            document.getElementById('stop-btn').style.display = 'inline-block';

            const difficulty = parseInt(document.getElementById('difficulty-select').value);
            const data = document.getElementById('mining-data').value;
            const output = document.getElementById('mining-output');
            const target = '0'.repeat(difficulty);

            output.innerHTML = '<div class="hash-attempt">🔨 Mining started...</div>';

            let nonce = 0;
            let found = false;

            const mineBlock = async () => {
                if (!miningInProgress) return;

                const hash = await sha256(data + nonce);

                if (hash.startsWith(target)) {
                    found = true;
                    output.innerHTML += `
                        <div class="hash-attempt hash-valid">
                            <strong>✅ VALID HASH FOUND!</strong><br>
                            Nonce: ${nonce}<br>
                            Hash: ${hash}<br>
                            Attempts: ${nonce + 1}
                        </div>
                    `;
                    stopMining();
                } else {
                    if (nonce % 10 === 0) { // Show every 10th attempt
                        output.innerHTML += `
                            <div class="hash-attempt hash-invalid">
                                Attempt ${nonce + 1}: ${hash.substring(0, 16)}... ❌
                            </div>
                        `;
                        output.scrollTop = output.scrollHeight;
                    }

                    nonce++;

                    if (nonce < 10000) { // Safety limit
                        setTimeout(mineBlock, 0);
                    } else {
                        output.innerHTML += '<div class="hash-attempt">⚠️ Reached attempt limit</div>';
                        stopMining();
                    }
                }
            };

            mineBlock();
        }

        function stopMining() {
            miningInProgress = false;
            document.getElementById('mine-btn').style.display = 'inline-block';
            document.getElementById('stop-btn').style.display = 'none';
        }

        function demoCypherpunks(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>🧩 The Puzzle Pieces</strong>

<code>b-money (Wei Dai, 1998):</code>
✅ Decentralized consensus
❌ No solution for initial distribution

<code>Bit Gold (Nick Szabo, 2005):</code>
✅ Proof of work for value
❌ No solution for double-spending

<code>e-gold (Douglas Jackson, 1996):</code>
✅ Digital gold backing
❌ Required central company (shut down 2009)

<strong>💡 Bitcoin Combined All Three:</strong>
• Decentralized like b-money
• PoW scarcity like Bit Gold
• Digital gold concept from e-gold
• But with NO central authority!
            `;
            output.classList.add('visible');
        }

        function demoWhitepaper(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>📄 Bitcoin White Paper - Key Excerpt</strong>

<em>"A purely peer-to-peer version of electronic cash would allow online payments to be sent directly from one party to another without going through a financial institution."</em>

<strong>The Six Key Innovations:</strong>
1. Peer-to-peer network (no middleman)
2. Proof-of-work (prevents spam)
3. Timechain / blockchain (immutable history)
4. UTXO model (prevents double-spending)
5. Mining incentives (self-sustaining)
6. Difficulty adjustment (stays decentralized)

<strong>📖 Read Full Paper:</strong>
<a href="https://bitcoin.org/bitcoin.pdf" target="_blank" style="color: var(--primary-orange);">bitcoin.org/bitcoin.pdf</a>
            `;
            output.classList.add('visible');
        }

        async function demoGenesis(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>⛏️ Mine the Genesis Block (Real SHA-256)</strong>

<p style="color: var(--text-dim);">Recreate Satoshi's first block! Edit the message or mine with the original.</p>

<div style="margin: 1rem 0;">
    <label>Coinbase Message:</label>
    <input type="text" id="genesis-msg" value="The Times 03/Jan/2009 Chancellor on brink of second bailout for banks" style="font-size: 0.9rem;" />
</div>

<div style="margin: 1rem 0;">
    <label>Target Difficulty (leading zeros):</label>
    <select id="genesis-difficulty">
        <option value="2">2 (Fast demo)</option>
        <option value="3">3 (Medium)</option>
        <option value="4">4 (Harder)</option>
    </select>
</div>

<button onclick="mineGenesis()">⛏️ Mine Genesis Block</button>

<div id="genesis-output" style="margin-top: 1rem;"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 1px solid var(--primary-orange); border-radius: 0.25rem; font-size: 0.9rem;">
    <strong>💬 Satoshi's Statement:</strong><br>
    This timestamp proved Bitcoin's launch date (Jan 3, 2009) and referenced the 2008 financial crisis - the very problem Bitcoin was designed to solve.
</div>
            `;
            output.classList.add('visible');
        }

        async function mineGenesis() {
            const msg = document.getElementById('genesis-msg').value;
            const difficulty = parseInt(document.getElementById('genesis-difficulty').value);
            const outputDiv = document.getElementById('genesis-output');
            const target = '0'.repeat(difficulty);

            outputDiv.innerHTML = '<div class="hash-attempt">⛏️ Mining Genesis Block...</div>';

            let nonce = 0;
            const startTime = Date.now();

            const mine = async () => {
                const blockData = `Genesis Block\nTimestamp: 2009-01-03\nMessage: ${msg}\nNonce: ${nonce}`;
                const hash = await sha256(blockData);

                if (nonce % 50 === 0) {
                    outputDiv.innerHTML += `<div class="hash-attempt hash-invalid">Nonce ${nonce}: ${hash.substring(0, 20)}... ❌</div>`;
                    outputDiv.scrollTop = outputDiv.scrollHeight;
                }

                if (hash.startsWith(target)) {
                    const duration = ((Date.now() - startTime) / 1000).toFixed(2);
                    outputDiv.innerHTML += `
                        <div class="hash-attempt hash-valid">
                            <strong>✅ GENESIS BLOCK FOUND!</strong><br><br>
                            <strong>Block #0</strong><br>
                            Nonce: ${nonce}<br>
                            Hash: ${hash}<br>
                            Attempts: ${nonce + 1}<br>
                            Time: ${duration} seconds<br><br>
                            <strong>Coinbase Message:</strong><br>
                            "${msg}"
                        </div>
                    `;
                } else {
                    nonce++;
                    if (nonce < 10000) {
                        setTimeout(mine, 0);
                    } else {
                        outputDiv.innerHTML += '<div class="hash-attempt">⚠️ Reached limit. Try lower difficulty.</div>';
                    }
                }
            };

            mine();
        }

        function demoPizza(button) {
            const output = button.nextElementSibling;

            output.innerHTML = `
<strong>🍕 Bitcoin Pizza Day Calculator</strong>

<p style="color: var(--text-dim);">Calculate how much those 2 pizzas are worth today!</p>

<div style="margin: 1rem 0;">
    <label>Current BTC Price (USD):</label>
    <input type="number" id="btc-price" value="65000" min="1" step="1000" />
</div>

<button onclick="calculatePizza()">💰 Calculate Pizza Value</button>

<div id="pizza-result"></div>

<div style="margin-top: 1rem; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 1px solid var(--primary-orange); border-radius: 0.25rem; font-size: 0.9rem;">
    <strong>📅 May 22, 2010:</strong><br>
    Laszlo Hanyecz paid 10,000 BTC for 2 Papa John's pizzas<br>
    (Worth about $41 at the time)<br><br>

    <em>"I wanted to do the pizza thing because to me it was free pizza."</em><br>
    - Laszlo Hanyecz<br><br>

    <strong>💡 Why It Matters:</strong><br>
    First real-world transaction proved Bitcoin wasn't just a theory - it was actual money that could buy actual things!
</div>
            `;
            output.classList.add('visible');
        }

        function calculatePizza() {
            const btcPrice = parseFloat(document.getElementById('btc-price').value) || 65000;
            const pizzaBTC = 10000;
            const pizzaValue = pizzaBTC * btcPrice;
            const millionsDollars = (pizzaValue / 1000000).toFixed(1);

            const originalPrice = 41;
            const multiplier = (pizzaValue / originalPrice).toFixed(0);

            const resultDiv = document.getElementById('pizza-result');
            resultDiv.innerHTML = `
<div style="margin-top: 1rem; padding: 1rem; background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 0.5rem;">
    <div style="text-align: center; font-size: 2rem; color: var(--accent-green); margin-bottom: 0.5rem;">
        🍕💰 $${pizzaValue.toLocaleString()}
    </div>

    <div style="text-align: center; margin: 1rem 0;">
        <strong>That's $${millionsDollars} MILLION for 2 pizzas!</strong>
    </div>

    <hr style="border-color: rgba(76, 175, 80, 0.3); margin: 1rem 0;">

    <div style="font-size: 0.9rem;">
        <strong>📊 Breakdown:</strong><br>
        • 10,000 BTC × $${btcPrice.toLocaleString()} = $${pizzaValue.toLocaleString()}<br>
        • Original cost: $41<br>
        • Value increase: ${parseInt(multiplier).toLocaleString()}x<br>
        • Per pizza: $${(pizzaValue / 2).toLocaleString()}<br>
        • Per slice (8 slices/pizza): $${(pizzaValue / 16).toLocaleString()}
    </div>

    <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(255, 167, 38, 0.1); border-radius: 0.25rem; text-align: center;">
        <strong>🏆 Most Expensive Food Purchase in History!</strong>
    </div>
</div>
            `;
        }

        function demoGrowth(button) {
            const output = button.nextElementSibling;
            output.innerHTML = `
<strong>📈 Bitcoin Adoption Timeline</strong>

<code>2011:</code> $1 → First parity with USD
<code>2013:</code> $1,000 → First major rally
<code>2017:</code> $20,000 → Mainstream awareness
<code>2020:</code> Institutional adoption begins
<code>2021:</code> $69,000 ATH + El Salvador legal tender
<code>2024:</code> Bitcoin ETFs approved, widespread adoption

<strong>🌍 Global Stats:</strong>
• ~300 million users worldwide
• ~15,000 full nodes
• ~$1+ trillion market cap
• Legal tender in 2 countries
• Accepted by millions of merchants

<strong>⚡ Next Chapter: Lightning Network</strong>
Instant payments, micro-transactions, global scalability
            `;
            output.classList.add('visible');
        }

        // ===== PREVIEW MODE ACCESS CONTROL =====
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const isDeveloperMode = urlParams.get('unlock') === 'all' || localStorage.getItem('devUnlockAll') === 'true';

            if (isDeveloperMode) {
                const devIndicator = document.createElement('div');
                devIndicator.style.cssText = `
                    position: fixed; top: 10px; right: 10px; background: #4CAF50; color: white;
                    padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: bold;
                    z-index: 10000; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                `;
                devIndicator.textContent = '🔓 DEV MODE';
                devIndicator.title = 'All stages unlocked. Go to homepage with ?unlock=off to disable.';
                document.body.appendChild(devIndicator);
                return;
            }

            // PREVIEW MODE: Lock stages 2, 3, 4 (Only Genesis timeline/Stage 1 unlocked)
            console.log('🔒 Preview Mode: Only Stage 1 (Genesis Timeline) unlocked');

            const lockedStages = ['stage-2', 'stage-3', 'stage-4'];
            lockedStages.forEach(stageId => {
                const stageCard = document.getElementById(stageId);
                if (!stageCard) return;

                stageCard.classList.remove('current', 'completed');
                stageCard.classList.add('locked');

                const badge = stageCard.querySelector('.stage-badge');
                if (badge) {
                    badge.textContent = '🔒 Preview Locked';
                    badge.style.background = 'rgba(244, 67, 54, 0.2)';
                    badge.style.color = '#F44336';
                }

                const btn = stageCard.querySelector('.stage-btn');
                if (btn) {
                    btn.style.background = '#666';
                    btn.style.cursor = 'not-allowed';
                    btn.style.pointerEvents = 'none';
                    btn.textContent = '🔒 Available in Full Release';
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        alert('🔒 This stage is locked in preview mode.\n\nIt will be available in the full release.');
                    }, true);
                }

                const lockBadge = document.createElement('div');
                lockBadge.style.cssText = `
                    position: absolute; top: 20px; right: 20px; background: rgba(244, 67, 54, 0.9);
                    color: white; padding: 6px 14px; border-radius: 20px; font-size: 12px;
                    font-weight: 700; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                `;
                lockBadge.innerHTML = '🔒 PREVIEW LOCKED';
                lockBadge.title = 'Available in full release';
                stageCard.style.position = 'relative';
                stageCard.insertBefore(lockBadge, stageCard.firstChild);
                stageCard.style.opacity = '0.6';
            });

        })();
    </script>
</body>
</html>
