<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protecting Your Bitcoin | Security Best Practices | The Curious Path</title>
    <meta name="description" content="Learn practical security measures: hot vs cold storage, password management, 2FA, phishing prevention, and more.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --accent-blue: #2196f3;
            --accent-red: #f44336;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--accent-green);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-green);
        }

        /* Content Sections */
        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .content-section h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--accent-green);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .content-section ul, .content-section ol {
            margin-left: 2rem;
            color: var(--text-dim);
            margin-bottom: 1rem;
        }

        .content-section li {
            margin-bottom: 0.5rem;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: var(--secondary-dark);
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .comparison-table th {
            background: rgba(247, 147, 26, 0.2);
            color: var(--primary-orange);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .comparison-table tr:hover {
            background: rgba(247, 147, 26, 0.05);
        }

        /* Password Strength Tester */
        .password-tester {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-blue);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .password-tester h3 {
            color: var(--accent-blue);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .password-input-group {
            margin: 1.5rem 0;
        }

        .password-input-group input {
            width: 100%;
            padding: 1rem;
            background: var(--primary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-light);
            font-size: 1rem;
            font-family: monospace;
        }

        .password-input-group input:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .strength-meter {
            height: 8px;
            background: var(--primary-dark);
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .strength-bar {
            height: 100%;
            width: 0%;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        .strength-feedback {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            display: none;
        }

        .strength-feedback.show {
            display: block;
        }

        /* Security Checklist */
        .security-checklist {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-green);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .security-checklist h3 {
            color: var(--accent-green);
            margin-bottom: 1.5rem;
        }

        .checklist-item {
            background: rgba(247, 147, 26, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 0.75rem 0;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checklist-item:hover {
            background: rgba(247, 147, 26, 0.1);
        }

        .checklist-item.completed {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--accent-green);
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-radius: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .checklist-item.completed .checklist-checkbox {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }

        .checklist-checkbox::after {
            content: "✓";
            color: white;
            font-weight: bold;
            display: none;
        }

        .checklist-item.completed .checklist-checkbox::after {
            display: block;
        }

        .checklist-content {
            flex: 1;
        }

        .checklist-content h4 {
            color: var(--text-light);
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }

        .checklist-content p {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin: 0;
        }

        /* Phishing Example */
        .phishing-example {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-red);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .phishing-example h4 {
            color: var(--accent-red);
            margin-bottom: 1rem;
        }

        .url-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .url-box {
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .url-box.legit {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid var(--accent-green);
            color: var(--accent-green);
        }

        .url-box.fake {
            background: rgba(244, 67, 54, 0.2);
            border: 2px solid var(--accent-red);
            color: var(--accent-red);
        }

        .url-box .label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-family: sans-serif;
        }

        /* Takeaway Box */
        .takeaway-box {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .takeaway-box h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .takeaway-box ul {
            list-style: none;
            padding-left: 0;
        }

        .takeaway-box li {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .takeaway-box li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: 700;
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--accent-green);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }

        .nav-btn:hover {
            background: #45a049;
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        @media (max-width: 768px) {
            .url-comparison {
                grid-template-columns: 1fr;
            }

            .comparison-table {
                font-size: 0.9rem;
            }

            .comparison-table th, .comparison-table td {
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/">Home</a> →
                <a href="/paths/curious/">The Curious Path</a> →
                <a href="/paths/curious/stage-4/">Stage 4</a> →
                <span>Module 2</span>
            </div>
            <div class="module-title-section">
                <h1>🛡️ Module 2: Protecting Your Bitcoin</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Introduction -->
            <section class="content-section">
                <h2>Defense in Depth</h2>
                <p>
                    In the last module, you learned about common attacks. Now let's implement practical defenses.
                    Security isn't about one perfect solution—it's about <strong>layers of protection</strong>.
                </p>

                <p>
                    Think of it like home security: You don't just rely on a door lock. You also have windows locks,
                    an alarm system, outdoor lighting, and maybe a safe for valuables. If one layer fails, the others
                    still protect you.
                </p>

                <p style="margin-top: 1.5rem; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 0.5rem; border-left: 4px solid var(--accent-green);">
                    <strong>The Bitcoin Security Layers:</strong><br>
                    Device Security → Account Security → Wallet Security → Transaction Security → Storage Security
                </p>
            </section>

            <!-- Hot vs Cold Storage -->
            <section class="content-section">
                <h2>Hot Wallets vs Cold Wallets</h2>

                <p>
                    The fundamental security decision: Should your Bitcoin be connected to the internet (hot) or
                    kept offline (cold)?
                </p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Hot Wallet (Mobile/Desktop)</th>
                            <th>Cold Wallet (Hardware)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Connection</strong></td>
                            <td>Always online</td>
                            <td>Offline (air-gapped)</td>
                        </tr>
                        <tr>
                            <td><strong>Security</strong></td>
                            <td>Vulnerable to malware, phishing</td>
                            <td>Highly secure, immune to online attacks</td>
                        </tr>
                        <tr>
                            <td><strong>Convenience</strong></td>
                            <td>Very convenient for daily use</td>
                            <td>Less convenient, requires device</td>
                        </tr>
                        <tr>
                            <td><strong>Cost</strong></td>
                            <td>Free</td>
                            <td>$50-$200</td>
                        </tr>
                        <tr>
                            <td><strong>Best For</strong></td>
                            <td>Small amounts, daily spending</td>
                            <td>Savings, large amounts</td>
                        </tr>
                        <tr>
                            <td><strong>Examples</strong></td>
                            <td>BlueWallet, Electrum, Muun</td>
                            <td>Ledger, Trezor, Coldcard</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Recommended Setup for Different Holdings</h3>
                <ul>
                    <li><strong>$100-$1,000:</strong> Non-custodial mobile hot wallet (BlueWallet, Muun)</li>
                    <li><strong>$1,000-$5,000:</strong> Split between hot wallet (spending) and cold wallet (savings)</li>
                    <li><strong>$5,000+:</strong> Primarily cold storage, small amount in hot wallet for liquidity</li>
                    <li><strong>$50,000+:</strong> Multi-signature cold storage setup</li>
                </ul>

                <p style="margin-top: 1.5rem; padding: 1rem; background: rgba(33, 150, 243, 0.1); border-radius: 0.5rem; border-left: 4px solid var(--accent-blue);">
                    <strong>💡 Pro Tip:</strong> Think of hot wallets like your physical wallet (cash for daily use)
                    and cold wallets like a bank vault (savings you rarely touch).
                </p>
            </section>

            <!-- Password Management -->
            <section class="content-section">
                <h2>Password & PIN Security</h2>

                <p>
                    Weak passwords are the #1 way accounts get compromised. Let's test your password strength and
                    learn what makes a secure password.
                </p>

                <div class="password-tester">
                    <h3>🔐 Password Strength Tester</h3>
                    <p style="color: var(--text-dim); text-align: center; margin-bottom: 1.5rem;">
                        Test different passwords to see what makes them strong or weak
                    </p>

                    <div class="password-input-group">
                        <input type="password" id="password-input" placeholder="Enter a password to test...">
                    </div>

                    <div class="strength-meter">
                        <div id="strength-bar" class="strength-bar"></div>
                    </div>

                    <div id="strength-feedback" class="strength-feedback"></div>
                </div>

                <h3>Password Best Practices</h3>
                <ul>
                    <li><strong>Length is key:</strong> Minimum 16 characters for important accounts</li>
                    <li><strong>Use a password manager:</strong> 1Password, Bitwarden, or KeePassXC</li>
                    <li><strong>Unique passwords:</strong> Never reuse passwords across services</li>
                    <li><strong>Passphrases work:</strong> "correct-horse-battery-staple" is better than "P@ssw0rd1"</li>
                    <li><strong>Avoid personal info:</strong> No names, birthdays, pet names, etc.</li>
                    <li><strong>Hardware wallet PINs:</strong> Use 8+ digits, avoid patterns like 1234 or 0000</li>
                </ul>
            </section>

            <!-- Two-Factor Authentication -->
            <section class="content-section">
                <h2>Two-Factor Authentication (2FA)</h2>

                <p>
                    2FA adds a second verification step beyond your password. Even if someone steals your password,
                    they still can't access your account without the second factor.
                </p>

                <h3>Types of 2FA (From Weakest to Strongest)</h3>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Security Level</th>
                            <th>Vulnerability</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>SMS/Text Message</strong></td>
                            <td style="color: #ff9800;">⚠️ Low</td>
                            <td>Vulnerable to SIM swap attacks</td>
                        </tr>
                        <tr>
                            <td><strong>Email Code</strong></td>
                            <td style="color: #ff9800;">⚠️ Low</td>
                            <td>If email is compromised, 2FA is bypassed</td>
                        </tr>
                        <tr>
                            <td><strong>Authenticator App</strong></td>
                            <td style="color: var(--accent-green);">✓ Good</td>
                            <td>Requires device access</td>
                        </tr>
                        <tr>
                            <td><strong>Hardware Security Key</strong></td>
                            <td style="color: var(--accent-green);">✓✓ Best</td>
                            <td>Requires physical key, phishing-resistant</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Recommended Setup</h3>
                <p style="margin-top: 1rem;">
                    Use authenticator apps (Google Authenticator, Authy) for exchanges, email, and password managers. Never use SMS 2FA when better options exist. Always save backup codes.
                </p>

                <p style="margin-top: 1.5rem; padding: 1rem; background: rgba(244, 67, 54, 0.1); border-radius: 0.5rem; border-left: 4px solid var(--accent-red);">
                    <strong>⚠️ Critical:</strong> Store your 2FA backup codes in a secure location (not the same place
                    as your seed phrase). If you lose your phone without backups, you could be locked out.
                </p>
            </section>

            <!-- Phishing Prevention -->
            <section class="content-section">
                <h2>Spotting & Preventing Phishing</h2>

                <p>
                    Phishing is when attackers impersonate legitimate websites, apps, or people to steal your
                    credentials or seed phrases. It's the #1 attack vector for stealing Bitcoin.
                </p>

                <div class="phishing-example">
                    <h4>🎣 Can You Spot the Fake?</h4>
                    <p>Attackers create URLs that look almost identical to legitimate sites. Here's a real example:</p>

                    <div class="url-comparison">
                        <div class="url-box legit">
                            <div class="label">✅ LEGITIMATE</div>
                            https://www.coinbase.com/login
                        </div>
                        <div class="url-box fake">
                            <div class="label">🚨 PHISHING</div>
                            https://www.coinbase-verify.com/login
                        </div>
                    </div>

                    <div class="url-comparison" style="margin-top: 1rem;">
                        <div class="url-box legit">
                            <div class="label">✅ LEGITIMATE</div>
                            https://metamask.io
                        </div>
                        <div class="url-box fake">
                            <div class="label">🚨 PHISHING</div>
                            https://metamask.io.verify-account.com
                        </div>
                    </div>
                </div>

                <h3>How to Protect Yourself from Phishing</h3>
                <ul>
                    <li><strong>Bookmark important sites:</strong> Don't rely on search results or links</li>
                    <li><strong>Check the URL carefully:</strong> Look for typos, extra words, unusual domains</li>
                    <li><strong>HTTPS is NOT enough:</strong> Phishing sites can have HTTPS too</li>
                    <li><strong>Never click email links:</strong> Go directly to the site by typing the URL</li>
                    <li><strong>Be suspicious of urgency:</strong> "Verify now or account will be suspended" is a red flag</li>
                    <li><strong>Use a hardware wallet:</strong> Even if you visit a phishing site, your keys stay safe</li>
                    <li><strong>Enable browser warnings:</strong> Use browsers with anti-phishing features (Brave, Chrome)</li>
                </ul>
            </section>

            <!-- Security Checklist -->
            <section class="content-section">
                <div class="security-checklist">
                    <h3>✅ Your Personal Security Checklist</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Click to check off each item as you complete it. Your progress will be saved!
                    </p>

                    <div class="checklist-item" onclick="toggleChecklist('cl1')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Install a Password Manager</h4>
                            <p>Use 1Password, Bitwarden, or KeePassXC to generate & store unique passwords</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl2')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Enable 2FA on All Crypto Accounts</h4>
                            <p>Use authenticator apps (not SMS) for exchanges, email, and password manager</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl3')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Save 2FA Backup Codes Securely</h4>
                            <p>Print or write down backup codes and store them in a safe place</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl4')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Bookmark Important Sites</h4>
                            <p>Bookmark your exchange, wallet sites, and browser extension downloads</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl5')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Set Up Mobile Wallet with Seed Phrase</h4>
                            <p>Install BlueWallet or Muun, write down seed phrase on paper, store securely</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl6')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Add PIN/Password to Phone Carrier Account</h4>
                            <p>Protect against SIM swap attacks by requiring verification for account changes</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl7')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Update Operating System & Antivirus</h4>
                            <p>Keep your devices patched against security vulnerabilities</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl8')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Review Installed Apps & Extensions</h4>
                            <p>Remove suspicious or unused apps that could contain malware</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl9')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Consider a Hardware Wallet (if holdings > $1,000)</h4>
                            <p>Research Ledger, Trezor, or Coldcard for cold storage</p>
                        </div>
                    </div>

                    <div class="checklist-item" onclick="toggleChecklist('cl10')">
                        <div class="checklist-checkbox"></div>
                        <div class="checklist-content">
                            <h4>Test Wallet Recovery with Small Amount</h4>
                            <p>Verify you can recover your wallet using your seed phrase</p>
                        </div>
                    </div>

                    <p id="checklist-progress" style="text-align: center; margin-top: 1.5rem; font-size: 1.1rem; color: var(--accent-green); font-weight: 600;"></p>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section class="content-section">
                <div class="takeaway-box">
                    <h3>🎯 Key Takeaways</h3>
                    <ul>
                        <li>Use hot wallets for spending, cold wallets for savings (like cash vs. bank vault)</li>
                        <li>Strong passwords: 16+ characters, unique for every service, use a password manager</li>
                        <li>Enable 2FA everywhere with authenticator apps (not SMS)</li>
                        <li>Always save 2FA backup codes in a secure physical location</li>
                        <li>Phishing is the #1 attack - bookmark sites, verify URLs, never click email links</li>
                        <li>Hardware wallets ($50-$200) are worth it for amounts over $1,000</li>
                        <li>Security is layered - no single solution protects everything</li>
                        <li>Test your recovery process with small amounts before storing large sums</li>
                    </ul>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="/paths/curious/stage-4/" class="nav-btn nav-btn-secondary">← Back to Stage 4</a>
                <button id="complete-module" class="nav-btn">Mark Complete & Continue →</button>
            </nav>
        </div>
    </main>

    <script>
        // Password Strength Tester
        const passwordInput = document.getElementById('password-input');
        const strengthBar = document.getElementById('strength-bar');
        const strengthFeedback = document.getElementById('strength-feedback');

        passwordInput.addEventListener('input', function() {
            const password = this.value;
            const analysis = analyzePassword(password);

            // Update strength bar
            strengthBar.style.width = analysis.score + '%';
            strengthBar.style.background = analysis.color;

            // Show feedback
            if (password.length > 0) {
                strengthFeedback.classList.add('show');
                strengthFeedback.style.background = analysis.bgColor;
                strengthFeedback.style.borderLeft = `4px solid ${analysis.color}`;
                strengthFeedback.style.color = analysis.color;
                strengthFeedback.innerHTML = `
                    <strong>${analysis.rating}</strong><br>
                    ${analysis.feedback}
                    ${analysis.suggestions.length > 0 ? '<br><br><strong>Suggestions:</strong><br>' + analysis.suggestions.join('<br>') : ''}
                `;
            } else {
                strengthFeedback.classList.remove('show');
            }
        });

        function analyzePassword(password) {
            let score = 0;
            let suggestions = [];
            let feedback = '';

            if (password.length === 0) return { score: 0, rating: '', feedback: '', suggestions: [], color: '#666', bgColor: 'transparent' };

            // Length
            if (password.length < 8) {
                suggestions.push('• Use at least 16 characters');
                score += password.length * 2;
            } else if (password.length < 12) {
                suggestions.push('• Aim for 16+ characters');
                score += 16 + (password.length - 8) * 4;
            } else if (password.length < 16) {
                score += 40 + (password.length - 12) * 5;
            } else {
                score += 60;
            }

            // Character variety
            const hasLower = /[a-z]/.test(password);
            const hasUpper = /[A-Z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[^a-zA-Z0-9]/.test(password);

            let variety = 0;
            if (hasLower) variety++;
            if (hasUpper) variety++;
            if (hasNumber) variety++;
            if (hasSpecial) variety++;

            score += variety * 10;

            if (!hasLower || !hasUpper) suggestions.push('• Mix uppercase and lowercase letters');
            if (!hasNumber) suggestions.push('• Add numbers');
            if (!hasSpecial) suggestions.push('• Add special characters (!@#$%^&*)');

            // Common patterns
            if (/^[0-9]+$/.test(password)) {
                suggestions.push('• Don\'t use only numbers');
                score -= 20;
            }
            if (/password|123456|qwerty|admin/i.test(password)) {
                suggestions.push('• Avoid common passwords');
                score -= 30;
            }
            if (/(.)\1{2,}/.test(password)) {
                suggestions.push('• Avoid repeated characters (e.g., "aaa")');
                score -= 10;
            }

            // Normalize score
            score = Math.max(0, Math.min(100, score));

            let rating, color, bgColor;
            if (score < 30) {
                rating = '🔴 Very Weak';
                feedback = 'This password would be cracked in seconds.';
                color = '#f44336';
                bgColor = 'rgba(244, 67, 54, 0.1)';
            } else if (score < 50) {
                rating = '🟡 Weak';
                feedback = 'This password could be cracked in hours or days.';
                color = '#ff9800';
                bgColor = 'rgba(255, 152, 0, 0.1)';
            } else if (score < 70) {
                rating = '🟠 Moderate';
                feedback = 'This password is okay but could be stronger.';
                color = '#ff9800';
                bgColor = 'rgba(255, 152, 0, 0.1)';
            } else if (score < 90) {
                rating = '🟢 Strong';
                feedback = 'This is a strong password. Good job!';
                color = '#4caf50';
                bgColor = 'rgba(76, 175, 80, 0.1)';
            } else {
                rating = '🟢 Very Strong';
                feedback = 'Excellent password! This would take centuries to crack.';
                color = '#4caf50';
                bgColor = 'rgba(76, 175, 80, 0.1)';
            }

            return { score, rating, feedback, suggestions, color, bgColor };
        }

        // Security Checklist
        function toggleChecklist(id) {
            const item = event.currentTarget;
            item.classList.toggle('completed');
            saveChecklistProgress();
            updateChecklistProgress();
        }

        function saveChecklistProgress() {
            const completed = [];
            document.querySelectorAll('.checklist-item.completed').forEach(item => {
                const id = item.getAttribute('onclick').match(/toggleChecklist\('(.+?)'\)/)[1];
                completed.push(id);
            });
            localStorage.setItem('securityChecklistProgress', JSON.stringify(completed));
        }

        function loadChecklistProgress() {
            const saved = JSON.parse(localStorage.getItem('securityChecklistProgress') || '[]');
            saved.forEach(id => {
                const item = document.querySelector(`[onclick="toggleChecklist('${id}')"]`);
                if (item) item.classList.add('completed');
            });
            updateChecklistProgress();
        }

        function updateChecklistProgress() {
            const total = document.querySelectorAll('.checklist-item').length;
            const completed = document.querySelectorAll('.checklist-item.completed').length;
            const percentage = Math.round((completed / total) * 100);

            const progress = document.getElementById('checklist-progress');
            progress.textContent = `${completed} of ${total} completed (${percentage}%)`;

            if (completed === total) {
                progress.textContent += ' 🎉 All done!';
            }
        }

        // Load checklist on page load
        window.addEventListener('load', loadChecklistProgress);

        // Module Completion
        document.getElementById('complete-module').addEventListener('click', function() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            if (!progress.completedModules.includes('curious-4-2')) {
                progress.completedModules.push('curious-4-2');
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'curious';
            progress.currentStage = 4;
            progress.currentModule = 3;

            localStorage.setItem('learningProgress', JSON.stringify(progress));

            alert('✓ Module 2 completed! Redirecting to Stage 4 overview...');
            window.location.href = '/paths/curious/stage-4/';
        });
    </script>
    <script src="/js/module-gate.js" defer></script>
</body>
</html>
