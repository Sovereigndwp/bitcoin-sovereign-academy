<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Bitcoin Works | The Curious Path</title>
    <meta name="description" content="Learn about the blockchain, how transactions work, and what mining actually does with interactive demonstrations.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--primary-orange);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .module-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-green);
        }

        .module-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Content Sections */
        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section:last-of-type {
            border-bottom: none;
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .content-section h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--primary-orange);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        /* Demo Embed */
        .demo-embed {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .demo-embed h3 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .demo-embed p {
            color: var(--text-dim);
            margin-bottom: 1.5rem;
        }

        .demo-link {
            display: inline-block;
            padding: 1rem 2rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .demo-link:hover {
            background: #ff8c00;
            transform: translateY(-2px);
        }

        /* Visualization */
        .blockchain-viz {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .blocks-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
        }

        .block {
            min-width: 200px;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            border-radius: 0.75rem;
            padding: 1rem;
            position: relative;
        }

        .block::after {
            content: "→";
            position: absolute;
            right: -1.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--primary-orange);
        }

        .block:last-child::after {
            display: none;
        }

        .block-header {
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .block-data {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .block-data div {
            margin-bottom: 0.5rem;
        }

        .hash-value {
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            word-break: break-all;
            color: var(--accent-green);
        }

        /* Transaction Flow */
        .transaction-flow {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .flow-diagram {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto 1fr;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .flow-box {
            background: rgba(247, 147, 26, 0.2);
            border: 2px solid var(--primary-orange);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
        }

        .flow-box h4 {
            color: var(--primary-orange);
            margin-bottom: 0.75rem;
        }

        .flow-arrow {
            font-size: 2rem;
            color: var(--primary-orange);
        }

        .utxo-example {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .utxo-example h4 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .utxo-list {
            display: grid;
            gap: 0.75rem;
        }

        .utxo-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(247, 147, 26, 0.1);
            padding: 0.75rem;
            border-radius: 0.5rem;
        }

        .utxo-amount {
            font-weight: 700;
            color: var(--primary-orange);
        }

        /* Concept Cards */
        .concept-cards {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-card {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .concept-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .concept-icon {
            font-size: 2rem;
        }

        .concept-header h3 {
            color: var(--primary-orange);
            margin: 0;
        }

        /* Key Takeaways */
        .takeaways {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .takeaways h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .takeaways ul {
            list-style: none;
            padding-left: 0;
        }

        .takeaways li {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .takeaways li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: 700;
        }

        /* Quiz */
        .quiz-container {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-container h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .quiz-question {
            margin-bottom: 2rem;
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }

        .quiz-option {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.selected {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
        }

        .quiz-submit {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1.5rem;
        }

        .quiz-submit:hover {
            background: #ff8c00;
        }

        .quiz-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-btn:hover {
            background: #ff8c00;
            transform: translateX(5px);
        }

        .nav-btn.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        .nav-btn-secondary:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
            transform: translateX(-5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .module-title-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .flow-diagram {
                grid-template-columns: 1fr;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }

            .module-navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/">Home</a> →
                <a href="/paths/curious/">The Curious Path</a> →
                <a href="/paths/curious/stage-2/">Stage 2</a> →
                <span>Module 1</span>
            </div>
            <div class="module-title-section">
                <h1>How Bitcoin Works</h1>
                <div class="module-meta">
                    <span>⏱️ 30 minutes</span>
                    <span>📝 Quiz included</span>
                    <span>🎮 Interactive</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Introduction -->
            <section class="content-section">
                <h2>Understanding the Machine Behind the Magic</h2>
                <p>
                    You already know why Bitcoin matters—now let's uncover how it works.
                </p>
                <p>
                    Bitcoin is built from three key innovations that work together seamlessly:
                </p>
                <ol style="margin-left: 2rem; margin-bottom: 1rem; color: var(--text-light);">
                    <li><strong>The Blockchain</strong> — a shared public ledger</li>
                    <li><strong>Transactions</strong> — the rules for how value moves</li>
                    <li><strong>Mining</strong> — the system that secures and synchronizes everything</li>
                </ol>
                <p>
                    Don't worry—you don't need to be a developer to follow along. Everything here is visual, practical, and easy to grasp.
                </p>
            </section>

            <!-- Part 1: The Blockchain -->
            <section class="content-section">
                <h2>⚙️ Part 1: The Blockchain – Bitcoin's Memory</h2>
                <p>
                    Think of the blockchain as a digital notebook where every page is glued to the next. Each page (block) records new Bitcoin transactions and references the one before it, creating an unbreakable chain.
                </p>

                <h3>Each block includes:</h3>
                <ul style="margin-left: 2rem; margin-bottom: 1rem;">
                    <li><strong>Transactions:</strong> Bitcoin transfers between users</li>
                    <li><strong>Previous Block Hash:</strong> The unique fingerprint linking it to the past</li>
                    <li><strong>Timestamp:</strong> When it was added</li>
                    <li><strong>Nonce:</strong> A random number miners adjust to find a valid hash</li>
                </ul>

                <p>
                    <strong>Why this matters:</strong> If anyone tries to alter an old block, the hash changes and breaks the chain. The network instantly rejects it. This design makes Bitcoin's history tamper-evident and self-defending—no central authority needed.
                </p>

                <!-- Blockchain Visualization -->
                <div class="blockchain-viz">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1.5rem;">📦 How Blocks Link Together</h3>
                    <div class="blocks-container">
                        <div class="block">
                            <div class="block-header">Block #100</div>
                            <div class="block-data">
                                <div><strong>Transactions:</strong> 2,500</div>
                                <div><strong>Previous Hash:</strong></div>
                                <div class="hash-value">00000a8c...</div>
                                <div><strong>This Block Hash:</strong></div>
                                <div class="hash-value">00000b3f...</div>
                            </div>
                        </div>

                        <div class="block">
                            <div class="block-header">Block #101</div>
                            <div class="block-data">
                                <div><strong>Transactions:</strong> 2,700</div>
                                <div><strong>Previous Hash:</strong></div>
                                <div class="hash-value">00000b3f...</div>
                                <div><strong>This Block Hash:</strong></div>
                                <div class="hash-value">00000c7d...</div>
                            </div>
                        </div>

                        <div class="block">
                            <div class="block-header">Block #102</div>
                            <div class="block-data">
                                <div><strong>Transactions:</strong> 3,100</div>
                                <div><strong>Previous Hash:</strong></div>
                                <div class="hash-value">00000c7d...</div>
                                <div><strong>This Block Hash:</strong></div>
                                <div class="hash-value">00000d9e...</div>
                            </div>
                        </div>
                    </div>
                    <p style="text-align: center; color: var(--text-dim); margin-top: 1rem; font-size: 0.9rem;">
                        Notice how each block's hash becomes the "Previous Hash" for the next block. This creates an unbreakable chain.
                    </p>
                </div>

                <!-- The Double-Spend Wall Demo -->
                <div class="double-spend-demo" style="background: linear-gradient(135deg, rgba(244, 67, 54, 0.15), rgba(76, 175, 80, 0.15)); border-radius: 1.5rem; padding: 3rem 2rem; margin: 3rem 0; border: 2px solid var(--border-color);">
                    <style>
                        .dspend-demo-title-section {
                            text-align: center;
                            margin-bottom: 2.5rem;
                        }

                        .dspend-demo-title-section h3 {
                            font-size: 1.75rem;
                            color: var(--primary-orange);
                            margin-bottom: 0.75rem;
                        }

                        .dspend-demo-title-section p {
                            font-size: 1rem;
                            color: var(--text-dim);
                            max-width: 700px;
                            margin: 0 auto;
                        }

                        .dspend-comparison-container {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 2.5rem;
                            margin-bottom: 2.5rem;
                        }

                        .dspend-scenario-box {
                            background: rgba(0, 0, 0, 0.3);
                            border: 2px solid var(--border-color);
                            border-radius: 1rem;
                            padding: 2rem;
                            text-align: center;
                            position: relative;
                            overflow: hidden;
                        }

                        .dspend-scenario-box h4 {
                            font-size: 1.25rem;
                            margin-bottom: 0.5rem;
                            color: var(--primary-orange);
                        }

                        .dspend-scenario-box .scenario-subtitle {
                            font-size: 0.9rem;
                            color: var(--text-dim);
                            margin-bottom: 2rem;
                        }

                        .dspend-animation-area {
                            min-height: 320px;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            gap: 1.5rem;
                            position: relative;
                        }

                        .dspend-coin {
                            font-size: 4rem;
                            position: relative;
                            z-index: 2;
                        }

                        .dspend-recipients {
                            display: flex;
                            gap: 3rem;
                            margin-top: 1rem;
                        }

                        .dspend-recipient {
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            gap: 0.5rem;
                        }

                        .dspend-person {
                            font-size: 3rem;
                            transition: all 0.4s ease;
                        }

                        .dspend-person.received {
                            animation: receiveCoin 0.6s ease;
                            transform: scale(1.2);
                        }

                        @keyframes receiveCoin {
                            0% { transform: scale(1); }
                            50% { transform: scale(1.3); }
                            100% { transform: scale(1.2); }
                        }

                        .dspend-person-label {
                            font-size: 0.85rem;
                            color: var(--text-dim);
                            font-weight: 600;
                        }

                        .dspend-coin-path {
                            position: absolute;
                            width: 3rem;
                            height: 3rem;
                            background: var(--primary-orange);
                            border-radius: 50%;
                            opacity: 0;
                            pointer-events: none;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 1.5rem;
                        }

                        .dspend-coin-path.flying-left {
                            animation: flyLeft 1.2s ease-out forwards;
                        }

                        .dspend-coin-path.flying-right {
                            animation: flyRight 1.2s ease-out forwards;
                        }

                        @keyframes flyLeft {
                            0% {
                                opacity: 1;
                                transform: translate(0, -50px) scale(1);
                            }
                            100% {
                                opacity: 0.8;
                                transform: translate(-120px, 80px) scale(0.8);
                            }
                        }

                        @keyframes flyRight {
                            0% {
                                opacity: 1;
                                transform: translate(0, -50px) scale(1);
                            }
                            100% {
                                opacity: 0.8;
                                transform: translate(120px, 80px) scale(0.8);
                            }
                        }

                        .dspend-coin-path.rejected {
                            animation: coinRejected 1.2s ease-out forwards !important;
                        }

                        @keyframes coinRejected {
                            0% {
                                opacity: 1;
                                transform: translate(0, -50px) scale(1);
                            }
                            50% {
                                opacity: 0.8;
                                transform: translate(60px, 20px) scale(0.9);
                                filter: brightness(0.5);
                            }
                            100% {
                                opacity: 0;
                                transform: translate(120px, -30px) scale(0.3);
                                filter: brightness(0) grayscale(100%);
                            }
                        }

                        .rejection-x {
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            font-size: 6rem;
                            color: #ff6b6b;
                            opacity: 0;
                            z-index: 6;
                            pointer-events: none;
                        }

                        .rejection-x.show {
                            animation: showRejection 1.5s ease-out forwards;
                        }

                        @keyframes showRejection {
                            0% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.5) rotate(-45deg);
                            }
                            30% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1.3) rotate(0deg);
                            }
                            70% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                            }
                            100% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.8) rotate(45deg);
                            }
                        }

                        .dspend-blockchain-wall {
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            font-size: 8rem;
                            opacity: 0;
                            z-index: 5;
                            pointer-events: none;
                        }

                        .dspend-blockchain-wall.active {
                            animation: wallBlock 1.5s ease-out forwards;
                        }

                        @keyframes wallBlock {
                            0% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.5) rotate(0deg);
                            }
                            40% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1.2) rotate(5deg);
                            }
                            100% {
                                opacity: 0.9;
                                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                            }
                        }

                        .dspend-attack-button {
                            margin-top: 1.5rem;
                            padding: 0.9rem 1.8rem;
                            background: var(--primary-orange);
                            color: white;
                            border: none;
                            border-radius: 0.5rem;
                            font-size: 1rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 12px rgba(247, 147, 26, 0.3);
                        }

                        .dspend-attack-button:hover {
                            background: #ff8c00;
                            transform: translateY(-2px);
                            box-shadow: 0 6px 16px rgba(247, 147, 26, 0.4);
                        }

                        .dspend-attack-button:active {
                            transform: translateY(0);
                        }

                        .dspend-status-message {
                            margin-top: 1.5rem;
                            min-height: 60px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            padding: 1rem;
                            border-radius: 0.5rem;
                            font-weight: 600;
                            font-size: 0.95rem;
                        }

                        .dspend-status-message .status-text {
                            text-align: center;
                            line-height: 1.4;
                        }

                        .dspend-status-message .status-text.danger {
                            color: #ff6b6b;
                        }

                        .dspend-status-message .status-text.safe {
                            color: var(--accent-green);
                        }

                        .dspend-socratic-question {
                            text-align: center;
                            margin-top: 2rem;
                            padding: 1.5rem;
                            background: rgba(247, 147, 26, 0.1);
                            border-left: 4px solid var(--primary-orange);
                            border-radius: 0.5rem;
                        }

                        .dspend-socratic-question strong {
                            color: var(--primary-orange);
                            display: block;
                            margin-bottom: 0.5rem;
                            font-size: 1.1rem;
                        }

                        .dspend-socratic-question em {
                            color: var(--text-light);
                            font-size: 1rem;
                            font-style: italic;
                        }

                        @media (max-width: 768px) {
                            .dspend-comparison-container {
                                grid-template-columns: 1fr;
                                gap: 2rem;
                            }

                            .dspend-demo-title-section h3 {
                                font-size: 1.4rem;
                            }

                            .dspend-animation-area {
                                min-height: 280px;
                            }

                            .dspend-recipients {
                                gap: 2rem;
                            }

                            @keyframes flyLeft {
                                100% {
                                    transform: translate(-80px, 80px) scale(0.8);
                                }
                            }

                            @keyframes flyRight {
                                100% {
                                    transform: translate(80px, 80px) scale(0.8);
                                }
                            }
                        }
                    </style>

                    <div class="dspend-demo-title-section">
                        <h3>🚫 The Double-Spend Wall</h3>
                        <p>See how digital money without blockchain can be copied and spent twice—and how Bitcoin prevents this.</p>
                    </div>

                    <div class="dspend-comparison-container">
                        <!-- Traditional Digital Cash: Double-Spend Succeeds -->
                        <div class="dspend-scenario-box">
                            <h4>❌ Traditional Digital Cash</h4>
                            <p class="scenario-subtitle">No blockchain verification</p>

                            <div class="dspend-animation-area" id="traditional-area">
                                <div class="dspend-coin">💵</div>
                                <div class="dspend-coin-path" id="trad-coin-left">💵</div>
                                <div class="dspend-coin-path" id="trad-coin-right">💵</div>

                                <div class="dspend-recipients">
                                    <div class="dspend-recipient">
                                        <div class="dspend-person" id="trad-alice">👩</div>
                                        <div class="dspend-person-label">Alice</div>
                                    </div>
                                    <div class="dspend-recipient">
                                        <div class="dspend-person" id="trad-bob">👨</div>
                                        <div class="dspend-person-label">Bob</div>
                                    </div>
                                </div>
                            </div>

                            <button class="dspend-attack-button" id="traditional-attack">
                                💸 Try to Double-Spend
                            </button>

                            <div class="dspend-status-message" id="traditional-status">
                                <span class="status-text">Ready to attempt double-spend</span>
                            </div>
                        </div>

                        <!-- Bitcoin: Double-Spend Blocked -->
                        <div class="dspend-scenario-box">
                            <h4>✅ Bitcoin with Blockchain</h4>
                            <p class="scenario-subtitle">Cryptographic verification prevents fraud</p>

                            <div class="dspend-animation-area" id="bitcoin-area">
                                <div class="dspend-coin">₿</div>
                                <div class="dspend-coin-path" id="btc-coin-left">₿</div>
                                <div class="dspend-coin-path" id="btc-coin-right">₿</div>
                                <div class="dspend-blockchain-wall" id="btc-wall">🧱</div>
                                <div class="rejection-x" id="rejection-indicator">❌</div>

                                <div class="dspend-recipients">
                                    <div class="dspend-recipient">
                                        <div class="dspend-person" id="btc-alice">👩</div>
                                        <div class="dspend-person-label">Alice</div>
                                    </div>
                                    <div class="dspend-recipient">
                                        <div class="dspend-person" id="btc-bob">👨</div>
                                        <div class="dspend-person-label">Bob</div>
                                    </div>
                                </div>
                            </div>

                            <button class="dspend-attack-button" id="bitcoin-attack">
                                🔒 Try to Double-Spend
                            </button>

                            <div class="dspend-status-message" id="bitcoin-status">
                                <span class="status-text">Ready to attempt double-spend</span>
                            </div>
                        </div>
                    </div>

                    <div class="dspend-socratic-question">
                        <strong>The Socratic Question:</strong>
                        <em>If digital money can be copied like a photo file, how can it ever be scarce without a trusted central authority?</em>
                    </div>

                    <script>
                        (function() {
                            let traditionalInProgress = false;
                            let bitcoinInProgress = false;

                            // Traditional Digital Cash Attack
                            document.getElementById('traditional-attack').addEventListener('click', function() {
                                if (traditionalInProgress) return;
                                traditionalInProgress = true;

                                const coinLeft = document.getElementById('trad-coin-left');
                                const coinRight = document.getElementById('trad-coin-right');
                                const alice = document.getElementById('trad-alice');
                                const bob = document.getElementById('trad-bob');
                                const status = document.getElementById('traditional-status');

                                // Reset
                                coinLeft.className = 'dspend-coin-path';
                                coinRight.className = 'dspend-coin-path';
                                alice.className = 'dspend-person';
                                bob.className = 'dspend-person';

                                // Start animation
                                setTimeout(() => {
                                    coinLeft.classList.add('flying-left');
                                    coinRight.classList.add('flying-right');
                                }, 100);

                                // Both receive the coin
                                setTimeout(() => {
                                    alice.classList.add('received');
                                    bob.classList.add('received');
                                    status.innerHTML = '<span class="status-text danger">🚨 DOUBLE-SPEND SUCCESSFUL!<br>Same money spent twice!</span>';
                                }, 1300);

                                setTimeout(() => {
                                    traditionalInProgress = false;
                                }, 2500);
                            });

                            // Bitcoin Blockchain Attack
                            document.getElementById('bitcoin-attack').addEventListener('click', function() {
                                if (bitcoinInProgress) return;
                                bitcoinInProgress = true;

                                const coinLeft = document.getElementById('btc-coin-left');
                                const coinRight = document.getElementById('btc-coin-right');
                                const alice = document.getElementById('btc-alice');
                                const bob = document.getElementById('btc-bob');
                                const wall = document.getElementById('btc-wall');
                                const rejectionX = document.getElementById('rejection-indicator');
                                const status = document.getElementById('bitcoin-status');

                                // Reset
                                coinLeft.className = 'dspend-coin-path';
                                coinRight.className = 'dspend-coin-path';
                                alice.className = 'dspend-person';
                                bob.className = 'dspend-person';
                                wall.className = 'dspend-blockchain-wall';
                                rejectionX.className = 'rejection-x';

                                // Start animation - both coins try to fly
                                setTimeout(() => {
                                    coinLeft.classList.add('flying-left');
                                    coinRight.classList.add('flying-right');
                                }, 100);

                                // Blockchain verification starts
                                setTimeout(() => {
                                    wall.classList.add('active');
                                    status.innerHTML = '<span class="status-text safe">⏳ Blockchain verifying...</span>';
                                }, 600);

                                // Second transaction gets rejected (right coin disappears)
                                setTimeout(() => {
                                    coinRight.classList.remove('flying-right');
                                    coinRight.classList.add('rejected');
                                    rejectionX.classList.add('show');
                                }, 900);

                                // Only Alice receives (one transaction confirmed)
                                setTimeout(() => {
                                    alice.classList.add('received');
                                    status.innerHTML = '<span class="status-text safe">✅ DOUBLE-SPEND PREVENTED!<br>Only one transaction confirmed!</span>';
                                }, 1500);

                                setTimeout(() => {
                                    bitcoinInProgress = false;
                                }, 3000);
                            });
                        })();
                    </script>
                </div>
            </section>

            <!-- Part 2: Transactions -->
            <section class="content-section">
                <h2>💸 Part 2: Transactions – How Bitcoin Actually Moves</h2>
                <p>
                    Bitcoin doesn't track balances like banks. It uses <strong>UTXOs—Unspent Transaction Outputs</strong>.
                </p>
                <p>
                    Think of them like bills in your wallet: you can't tear one in half, but you can combine or split them when spending.
                </p>

                <!-- UTXO Example -->
                <div class="utxo-example">
                    <h4>Example:</h4>
                    <p style="color: var(--text-light); margin-bottom: 1rem;">
                        Alice holds three UTXOs totaling 0.10 BTC.<br>
                        She wants to send 0.07 BTC to Eve.
                    </p>
                    <div class="utxo-list">
                        <div class="utxo-item">
                            <span>UTXO #1</span>
                            <span class="utxo-amount">0.05 BTC</span>
                        </div>
                        <div class="utxo-item">
                            <span>UTXO #2</span>
                            <span class="utxo-amount">0.03 BTC</span>
                        </div>
                        <div class="utxo-item">
                            <span>UTXO #3</span>
                            <span class="utxo-amount">0.02 BTC</span>
                        </div>
                    </div>
                    <p style="margin-top: 1rem; color: var(--text-light);">
                        Her wallet combines two UTXOs (0.05 + 0.03), sends 0.07 BTC to Eve, and returns 0.0099 BTC as change.
                    </p>
                    <p style="margin-top: 0.5rem; color: var(--text-dim); font-size: 0.9rem;">
                        This simple model allows the network to verify ownership and prevent double spending—without needing bank accounts.
                    </p>
                </div>

                <p style="text-align: center; margin: 1.5rem 0; font-size: 1.1rem; color: var(--primary-orange); font-weight: 600;">
                    🎮 Interactive: Build a Transaction
                </p>
                <p style="text-align: center; margin-bottom: 1.5rem; color: var(--text-dim);">
                    Choose UTXOs, set fees, and see how "change" works in real time.
                </p>

                <!-- Interactive Transaction Builder Demo -->
                <div class="demo-embed">
                    <h3>🎮 Interactive Transaction Builder</h3>
                    <p style="margin-bottom: 1.5rem;">
                        Build a real Bitcoin transaction step-by-step. Select UTXOs, add recipients, and watch how fees work!
                    </p>
                    <iframe
                        src="../../../interactive-demos/transaction-builder/index.html"
                        style="width: 100%; height: 700px; border: 2px solid var(--primary-orange); border-radius: 0.75rem;"
                        title="Transaction Builder">
                    </iframe>
                    <p style="margin-top: 1rem; text-align: center; color: var(--text-dim); font-size: 0.9rem;">
                        💡 Try creating transactions with different amounts and see how change works!
                    </p>
                </div>
            </section>

            <!-- Part 3: Mining -->
            <section class="content-section">
                <h2>⛏️ Part 3: Mining – How the Network Stays Honest</h2>
                <p>
                    Mining keeps Bitcoin fair, synchronized, and secure.
                </p>
                <p>
                    Miners collect new transactions, group them into blocks, and compete to find a special number—called a <strong>nonce</strong>—that produces a valid hash starting with enough zeros.
                </p>
                <p>
                    This process, known as <strong>Proof-of-Work</strong>, ensures that:
                </p>
                <ul style="margin-left: 2rem; margin-bottom: 1rem;">
                    <li>Adding new blocks requires real energy and computation</li>
                    <li>Tampering with past blocks would mean redoing all that work—an impossible task against the global network</li>
                </ul>

                <div class="concept-cards">
                    <div class="concept-card">
                        <div class="concept-header">
                            <span class="concept-icon">🔐</span>
                            <h3>Hash Functions (SHA-256)</h3>
                        </div>
                        <p>
                            A hash function turns any input into a fixed-length string of random-looking letters and numbers.
                        </p>
                        <p>
                            Even one small change completely transforms the output—this is called the <strong>avalanche effect</strong>.
                        </p>

                        <!-- Interactive Hash Demo -->
                        <div style="background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 0.75rem; padding: 1.5rem; margin: 1.5rem 0;">
                            <h4 style="color: var(--primary-orange); margin-bottom: 1rem; text-align: center;">Try it:</h4>
                            <p style="color: var(--text-dim); font-size: 0.9rem; text-align: center; margin-bottom: 1.5rem;">
                                Type any word and see how the hash changes instantly. Now, change one letter. Notice how unpredictable it is? That's why Bitcoin can't be forged or reversed.
                            </p>

                            <div style="margin-bottom: 1rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-light);">Your Input:</label>
                                <input type="text"
                                       id="hash-input"
                                       value="Hello World"
                                       style="width: 100%; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; font-family: 'Courier New', monospace;"
                                       placeholder="Type anything...">
                            </div>

                            <div style="margin-bottom: 1rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--accent-green);">SHA-256 Hash:</label>
                                <div id="hash-output"
                                     style="padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 0.5rem; font-family: 'Courier New', monospace; font-size: 0.85rem; word-break: break-all; color: var(--accent-green); min-height: 50px;">
                                    Calculating...
                                </div>
                            </div>

                            <div style="background: rgba(247, 147, 26, 0.05); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid var(--primary-orange);">
                                <p style="font-size: 0.85rem; color: var(--text-dim); margin: 0;">
                                    💡 <strong>Try this:</strong> Change just one letter and see how dramatically the hash changes.
                                    This "avalanche effect" makes Bitcoin mining unpredictable!
                                </p>
                            </div>
                        </div>

                        <div style="background: rgba(247, 147, 26, 0.1); padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; font-family: 'Courier New', monospace; font-size: 0.85rem;">
                            <div style="margin-bottom: 0.5rem;">Input: "Hello World"</div>
                            <div style="color: var(--accent-green);">Hash: a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e</div>
                            <div style="margin: 1rem 0 0.5rem; color: var(--text-dim);">Input: "Hello world" (lowercase 'w')</div>
                            <div style="color: var(--accent-green);">Hash: 64ec88ca00b268e5ba1a35678a1b5316d212f4f366b2477232534a8aeca37f3c</div>
                        </div>

                        <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 0.5rem; margin-top: 1.5rem; border-left: 3px solid var(--accent-green);">
                            <p style="margin: 0; color: var(--text-light); line-height: 1.6;">
                                <strong style="color: var(--accent-green);">💡 Now imagine a global competition:</strong><br><br>
                                Everyone is racing to find a hash that begins with a 0. You can change a letter, a space, or a number and try again.
                                The first person to create a valid hash that starts with enough zeros wins.
                            </p>
                            <p style="margin: 1rem 0 0 0; color: var(--text-dim); font-size: 0.95rem;">
                                That's exactly what Bitcoin miners do. Their computers make billions of guesses per second, adjusting a number called a <strong>nonce</strong> until they find a hash that meets Bitcoin's difficulty rule. The more zeros required at the start, the harder it is to find a valid result—and the greater the proof of work behind it.
                            </p>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-header">
                            <span class="concept-icon">🏰</span>
                            <h3>Why It's Nearly Unbreakable</h3>
                        </div>
                        <p>
                            To rewrite Bitcoin's history, an attacker would have to:
                        </p>
                        <ol style="margin-left: 2rem; margin-top: 1rem; color: var(--text-light);">
                            <li>Re-mine the altered block</li>
                            <li>Re-mine every block after it</li>
                            <li>Outpace the entire network</li>
                        </ol>
                        <p style="margin-top: 1rem;">
                            With today's hashrate (~400 EH/s), this would require more energy than all supercomputers combined—making it practically impossible.
                        </p>
                    </div>
                </div>

                <p style="text-align: center; margin: 2rem 0 1.5rem 0; font-size: 1.1rem; color: var(--primary-orange); font-weight: 600;">
                    🎮 Mining Simulator:
                </p>
                <p style="text-align: center; margin-bottom: 1.5rem; color: var(--text-dim);">
                    Adjust difficulty levels and see how long it takes to find a valid block.
                </p>

                <!-- Interactive Mining Simulator -->
                <div class="demo-embed">
                    <h3>⛏️ Interactive Mining Simulator</h3>
                    <p style="margin-bottom: 1.5rem;">
                        Experience Bitcoin mining firsthand! Adjust difficulty levels and see how mining actually works.
                    </p>
                    <iframe
                        src="../../../interactive-demos/mining-simulator/index.html"
                        style="width: 100%; height: 800px; border: 2px solid var(--primary-orange); border-radius: 0.75rem;"
                        title="Mining Simulator">
                    </iframe>
                    <p style="margin-top: 1rem; text-align: center; color: var(--text-dim); font-size: 0.9rem;">
                        💡 Start with Easy Mode to learn the concepts, then try Realistic Mode to see actual Bitcoin difficulty!
                    </p>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section class="content-section">
                <div class="takeaways">
                    <h3>🎯 Key Takeaways</h3>
                    <ul>
                        <li>The blockchain is Bitcoin's tamper-proof memory</li>
                        <li>Transactions use UTXOs, not balances, for clear ownership and validation</li>
                        <li>Mining turns electricity into security, making attacks prohibitively expensive</li>
                        <li>Hash functions ensure even tiny changes are instantly detectable</li>
                        <li>New blocks appear every ~10 minutes, keeping global consensus in sync</li>
                    </ul>
                </div>
            </section>

            <!-- Quiz -->
            <section class="content-section">
                <div class="quiz-container">
                    <h3>📝 Test Your Knowledge</h3>

                    <div class="quiz-question" data-question="1">
                        <p>1. What links blocks together in the blockchain?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) Timestamps
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) Each block contains the hash of the previous block
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) Transaction amounts
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Bitcoin addresses
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="2">
                        <p>2. What is a UTXO?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) A type of Bitcoin wallet
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) An unspent chunk of Bitcoin from a previous transaction
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) A Bitcoin mining algorithm
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) A blockchain explorer tool
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="3">
                        <p>3. What are miners trying to find?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) The longest password
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                B) Lost Bitcoin addresses
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                C) A nonce that produces a hash starting with enough zeros
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Satoshi Nakamoto's identity
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="4">
                        <p>4. Why can't you easily change old Bitcoin transactions?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) Banks prevent it
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) Changing one block would break the chain and require re-mining all subsequent blocks
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) Bitcoin wallets lock automatically
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Satoshi Nakamoto must approve all changes
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="5">
                        <p>5. In a Bitcoin transaction, Inputs = Outputs + ___?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) Profit
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) Transaction Fee
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) Mining Reward
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Block Size
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <button class="quiz-submit" id="submit-quiz">Submit Quiz</button>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="/paths/curious/stage-2/" class="nav-btn nav-btn-secondary">← Back to Stage 2</a>
                <a href="module-2.html" class="nav-btn disabled" id="next-module">Next: Bitcoin's Rules →</a>
            </nav>
        </div>
    </main>

    <script>
        // SHA-256 Hash Function (using SubtleCrypto API)
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        // Interactive Hash Demo
        const hashInput = document.getElementById('hash-input');
        const hashOutput = document.getElementById('hash-output');

        async function updateHash() {
            const input = hashInput.value;
            if (input === '') {
                hashOutput.textContent = 'Type something to see the hash...';
                hashOutput.style.color = 'var(--text-dim)';
                return;
            }

            hashOutput.textContent = 'Calculating...';
            hashOutput.style.color = 'var(--text-dim)';

            try {
                const hash = await sha256(input);
                hashOutput.textContent = hash;
                hashOutput.style.color = 'var(--accent-green)';
            } catch (error) {
                hashOutput.textContent = 'Error calculating hash';
                hashOutput.style.color = '#f44336';
            }
        }

        // Update hash on input
        if (hashInput) {
            hashInput.addEventListener('input', updateHash);
            // Calculate initial hash
            updateHash();
        }

        // Quiz functionality
        let selectedAnswers = {};
        let quizCompleted = false;

        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                if (quizCompleted) return;

                const question = this.closest('.quiz-question');
                const questionNum = question.dataset.question;

                question.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('selected');
                });

                this.classList.add('selected');
                selectedAnswers[questionNum] = this.dataset.answer;

                if (Object.keys(selectedAnswers).length === 5) {
                    document.getElementById('submit-quiz').disabled = false;
                }
            });
        });

        document.getElementById('submit-quiz').addEventListener('click', function() {
            if (quizCompleted) return;

            let correctCount = 0;

            document.querySelectorAll('.quiz-question').forEach(question => {
                const questionNum = question.dataset.question;
                const selectedOption = question.querySelector('.quiz-option.selected');
                const feedback = question.querySelector('.quiz-feedback');

                if (selectedOption) {
                    const isCorrect = selectedOption.dataset.answer === 'correct';

                    if (isCorrect) {
                        correctCount++;
                        selectedOption.classList.add('correct');
                        feedback.classList.add('correct', 'show');
                        feedback.textContent = '✓ Correct! Well done.';
                    } else {
                        selectedOption.classList.add('incorrect');
                        const correctOption = question.querySelector('[data-answer="correct"]');
                        correctOption.classList.add('correct');
                        feedback.classList.add('incorrect', 'show');
                        feedback.textContent = '✗ Not quite. The correct answer is highlighted above.';
                    }
                }
            });

            quizCompleted = true;
            this.textContent = `Quiz Complete! Score: ${correctCount}/5`;
            this.disabled = true;

            if (correctCount >= 4) {
                saveProgress();
                document.getElementById('next-module').classList.remove('disabled');

                const successMsg = document.createElement('p');
                successMsg.style.color = 'var(--accent-green)';
                successMsg.style.textAlign = 'center';
                successMsg.style.marginTop = '1rem';
                successMsg.style.fontWeight = '600';
                successMsg.textContent = '🎉 Great job! You can now proceed to Module 2.';
                document.querySelector('.quiz-container').appendChild(successMsg);
            } else {
                const retryMsg = document.createElement('p');
                retryMsg.style.color = '#ff6b6b';
                retryMsg.style.textAlign = 'center';
                retryMsg.style.marginTop = '1rem';
                retryMsg.textContent = 'Review the material above and try again. You need 4/5 to proceed.';
                document.querySelector('.quiz-container').appendChild(retryMsg);

                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        });

        function saveProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            if (!progress.completedModules.includes('curious-2-1')) {
                progress.completedModules.push('curious-2-1');
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'curious';
            progress.currentStage = 2;
            progress.currentModule = 2;

            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        function checkProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');
            const completedModules = progress.completedModules || [];

            if (completedModules.includes('curious-2-1')) {
                document.getElementById('next-module').classList.remove('disabled');

                const notice = document.createElement('div');
                notice.style.background = 'rgba(76, 175, 80, 0.2)';
                notice.style.padding = '1rem';
                notice.style.borderRadius = '0.5rem';
                notice.style.color = 'var(--accent-green)';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '2rem';
                notice.textContent = '✓ You\'ve already completed this module. Feel free to review or move on!';

                document.querySelector('.container').insertBefore(notice, document.querySelector('.content-section'));
            }
        }

        checkProgress();
    </script>
    <script src="/js/module-gate.js" defer></script>
</body>
</html>
