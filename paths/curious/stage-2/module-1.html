<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Bitcoin Works | The Curious Path</title>
    <meta name="description" content="Learn about the blockchain, how transactions work, and what mining actually does with interactive demonstrations.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--primary-orange);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .module-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-green);
        }

        .module-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Content Sections */
        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section:last-of-type {
            border-bottom: none;
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .content-section h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--primary-orange);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        /* Demo Embed */
        .demo-embed {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .demo-embed h3 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .demo-embed p {
            color: var(--text-dim);
            margin-bottom: 1.5rem;
        }

        .demo-link {
            display: inline-block;
            padding: 1rem 2rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .demo-link:hover {
            background: #ff8c00;
            transform: translateY(-2px);
        }

        /* Visualization */
        .blockchain-viz {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .blocks-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
        }

        .block {
            min-width: 200px;
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--primary-orange);
            border-radius: 0.75rem;
            padding: 1rem;
            position: relative;
        }

        .block::after {
            content: "→";
            position: absolute;
            right: -1.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--primary-orange);
        }

        .block:last-child::after {
            display: none;
        }

        .block-header {
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .block-data {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        .block-data div {
            margin-bottom: 0.5rem;
        }

        .hash-value {
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            word-break: break-all;
            color: var(--accent-green);
        }

        /* Transaction Flow */
        .transaction-flow {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .flow-diagram {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto 1fr;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .flow-box {
            background: rgba(247, 147, 26, 0.2);
            border: 2px solid var(--primary-orange);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
        }

        .flow-box h4 {
            color: var(--primary-orange);
            margin-bottom: 0.75rem;
        }

        .flow-arrow {
            font-size: 2rem;
            color: var(--primary-orange);
        }

        .utxo-example {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .utxo-example h4 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .utxo-list {
            display: grid;
            gap: 0.75rem;
        }

        .utxo-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(247, 147, 26, 0.1);
            padding: 0.75rem;
            border-radius: 0.5rem;
        }

        .utxo-amount {
            font-weight: 700;
            color: var(--primary-orange);
        }

        /* Concept Cards */
        .concept-cards {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-card {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .concept-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .concept-icon {
            font-size: 2rem;
        }

        .concept-header h3 {
            color: var(--primary-orange);
            margin: 0;
        }

        /* Key Takeaways */
        .takeaways {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .takeaways h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .takeaways ul {
            list-style: none;
            padding-left: 0;
        }

        .takeaways li {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .takeaways li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: 700;
        }

        /* Quiz */
        .quiz-container {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-container h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .quiz-question {
            margin-bottom: 2rem;
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }

        .quiz-option {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.selected {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
        }

        .quiz-submit {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1.5rem;
        }

        .quiz-submit:hover {
            background: #ff8c00;
        }

        .quiz-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-btn:hover {
            background: #ff8c00;
            transform: translateX(5px);
        }

        .nav-btn.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        .nav-btn-secondary:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
            transform: translateX(-5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .module-title-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .flow-diagram {
                grid-template-columns: 1fr;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }

            .module-navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/">Home</a> →
                <a href="/paths/curious/">The Curious Path</a> →
                <a href="/paths/curious/stage-2/">Stage 2</a> →
                <span>Module 1</span>
            </div>
            <div class="module-title-section">
                <h1>How Bitcoin Works</h1>
                <div class="module-meta">
                    <span>⏱️ 30 minutes</span>
                    <span>📝 Quiz included</span>
                    <span>🎮 Interactive</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Introduction -->
            <section class="content-section">
                <h2>Understanding the Mechanics</h2>
                <p>
                    You know <em>why</em> Bitcoin matters. Now let's understand <em>how</em> it works. Bitcoin combines three key innovations:
                    the <strong>blockchain</strong> (a public ledger), <strong>transactions</strong> (how value moves), and <strong>mining</strong>
                    (how the network stays secure and synchronized).
                </p>
                <p>
                    Don't worry—you don't need to be a developer or mathematician to understand these concepts. We'll explain everything
                    in plain language with visual demonstrations.
                </p>
            </section>

            <!-- Part 1: The Blockchain -->
            <section class="content-section">
                <h2>Part 1: The Blockchain (Bitcoin's Public Ledger)</h2>
                <p>
                    At its core, the blockchain is just a <strong>list of transactions organized into blocks</strong>, with each new block
                    linked to the previous one. Think of it like a notebook where every page is glued to the next—you can't tear out or
                    change a page without everyone noticing.
                </p>

                <h3>What's in a Block?</h3>
                <p>Each block contains:</p>
                <ul style="margin-left: 2rem; margin-bottom: 1rem;">
                    <li><strong>Transactions</strong> - The actual Bitcoin transfers (Alice pays Bob, etc.)</li>
                    <li><strong>Previous Block Hash</strong> - A cryptographic link to the block before it</li>
                    <li><strong>Timestamp</strong> - When the block was created</li>
                    <li><strong>Nonce</strong> - A number miners adjust to "solve" the block (more on this later)</li>
                </ul>

                <!-- Blockchain Visualization -->
                <div class="blockchain-viz">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1.5rem;">📦 How Blocks Link Together</h3>
                    <div class="blocks-container">
                        <div class="block">
                            <div class="block-header">Block #100</div>
                            <div class="block-data">
                                <div><strong>Transactions:</strong> 2,500</div>
                                <div><strong>Previous Hash:</strong></div>
                                <div class="hash-value">00000a8c...</div>
                                <div><strong>This Block Hash:</strong></div>
                                <div class="hash-value">00000b3f...</div>
                            </div>
                        </div>

                        <div class="block">
                            <div class="block-header">Block #101</div>
                            <div class="block-data">
                                <div><strong>Transactions:</strong> 2,700</div>
                                <div><strong>Previous Hash:</strong></div>
                                <div class="hash-value">00000b3f...</div>
                                <div><strong>This Block Hash:</strong></div>
                                <div class="hash-value">00000c7d...</div>
                            </div>
                        </div>

                        <div class="block">
                            <div class="block-header">Block #102</div>
                            <div class="block-data">
                                <div><strong>Transactions:</strong> 3,100</div>
                                <div><strong>Previous Hash:</strong></div>
                                <div class="hash-value">00000c7d...</div>
                                <div><strong>This Block Hash:</strong></div>
                                <div class="hash-value">00000d9e...</div>
                            </div>
                        </div>
                    </div>
                    <p style="text-align: center; color: var(--text-dim); margin-top: 1rem; font-size: 0.9rem;">
                        Notice how each block's hash becomes the "Previous Hash" for the next block. This creates an unbreakable chain.
                    </p>
                </div>

                <h3>Why This Design is Brilliant</h3>
                <p>
                    Because each block contains the hash of the previous block, <strong>you can't change old transactions</strong> without
                    breaking the entire chain. If someone tries to alter Block #100, its hash changes, which breaks Block #101's link,
                    which breaks #102, and so on. The entire network would immediately reject the fake chain.
                </p>
                <p>
                    This is how Bitcoin achieves <strong>immutability</strong> without a central authority—mathematics and cryptography
                    make cheating virtually impossible.
                </p>
            </section>

            <!-- Part 2: Transactions -->
            <section class="content-section">
                <h2>Part 2: How Bitcoin Transactions Work</h2>
                <p>
                    Bitcoin doesn't use "account balances" like your bank. Instead, it uses something called <strong>UTXOs</strong>
                    (Unspent Transaction Outputs). Think of UTXOs like bills in your wallet—you can't spend "half" of a $20 bill.
                </p>

                <h3>The UTXO Model</h3>
                <p>
                    When you receive Bitcoin, you receive specific "chunks" of Bitcoin (UTXOs). When you send Bitcoin, you must spend
                    entire UTXOs and create new ones. Any leftover Bitcoin comes back to you as "change"—just like using a $20 bill
                    to buy $13 of groceries.
                </p>

                <!-- UTXO Example -->
                <div class="utxo-example">
                    <h4>Example: Alice's Wallet</h4>
                    <p style="color: var(--text-dim); margin-bottom: 1rem;">Alice has 3 UTXOs in her wallet:</p>
                    <div class="utxo-list">
                        <div class="utxo-item">
                            <span>UTXO #1 (from Bob)</span>
                            <span class="utxo-amount">0.05 BTC</span>
                        </div>
                        <div class="utxo-item">
                            <span>UTXO #2 (from Charlie)</span>
                            <span class="utxo-amount">0.03 BTC</span>
                        </div>
                        <div class="utxo-item">
                            <span>UTXO #3 (from Diana)</span>
                            <span class="utxo-amount">0.02 BTC</span>
                        </div>
                    </div>
                    <p style="margin-top: 1rem; color: var(--text-light);">
                        <strong>Total Balance: 0.10 BTC</strong> (but stored as 3 separate pieces)
                    </p>
                </div>

                <!-- Transaction Flow -->
                <div class="transaction-flow">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1.5rem;">💸 Example Transaction</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Alice wants to send 0.07 BTC to Eve. Here's what happens:
                    </p>

                    <div class="flow-diagram">
                        <div class="flow-box">
                            <h4>INPUTS</h4>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                <div>UTXO #1: 0.05 BTC</div>
                                <div>UTXO #2: 0.03 BTC</div>
                                <div style="margin-top: 0.5rem; font-weight: 700;">Total: 0.08 BTC</div>
                            </div>
                        </div>

                        <div class="flow-arrow">→</div>

                        <div class="flow-box">
                            <h4>TRANSACTION</h4>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                <div>Size: ~225 vBytes</div>
                                <div>Fee: 0.0001 BTC</div>
                            </div>
                        </div>

                        <div class="flow-arrow">→</div>

                        <div class="flow-box">
                            <h4>OUTPUTS</h4>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                <div>To Eve: 0.07 BTC</div>
                                <div>Change to Alice: 0.0099 BTC</div>
                                <div style="margin-top: 0.5rem; font-weight: 700;">Total: 0.0799 BTC</div>
                            </div>
                        </div>
                    </div>

                    <p style="text-align: center; color: var(--text-light); margin-top: 1.5rem;">
                        <strong>Notice:</strong> Inputs (0.08 BTC) = Outputs (0.07 + 0.0099) + Fee (0.0001 BTC)
                    </p>
                </div>

                <!-- Interactive Transaction Builder Demo -->
                <div class="demo-embed">
                    <h3>🎮 Interactive Transaction Builder</h3>
                    <p style="margin-bottom: 1.5rem;">
                        Build a real Bitcoin transaction step-by-step. Select UTXOs, add recipients, and watch how fees work!
                    </p>
                    <iframe
                        src="/interactive-demos/transaction-builder/index.html"
                        style="width: 100%; height: 700px; border: 2px solid var(--primary-orange); border-radius: 0.75rem; background: white;"
                        title="Transaction Builder">
                    </iframe>
                    <p style="margin-top: 1rem; text-align: center; color: var(--text-dim); font-size: 0.9rem;">
                        💡 Try creating transactions with different amounts and see how change works!
                    </p>
                </div>
            </section>

            <!-- Part 3: Mining -->
            <section class="content-section">
                <h2>Part 3: Mining (How Bitcoin Stays Secure)</h2>
                <p>
                    Mining serves two critical purposes: <strong>(1)</strong> It adds new transactions to the blockchain, and
                    <strong>(2)</strong> it makes the blockchain extremely expensive to attack. Here's how it works.
                </p>

                <h3>What is Mining?</h3>
                <p>
                    Mining is a computational guessing game. Miners compete to find a special number (called a "nonce") that,
                    when combined with the block's data and run through a hash function (SHA-256), produces a hash that starts
                    with a certain number of zeros.
                </p>

                <div class="concept-cards">
                    <div class="concept-card">
                        <div class="concept-header">
                            <span class="concept-icon">🔐</span>
                            <h3>Hash Functions (SHA-256)</h3>
                        </div>
                        <p>
                            A hash function takes any input and produces a fixed-length output (256 bits). The same input always
                            produces the same output, but changing even 1 character completely changes the hash.
                        </p>

                        <!-- Interactive Hash Demo -->
                        <div style="background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 0.75rem; padding: 1.5rem; margin: 1.5rem 0;">
                            <h4 style="color: var(--primary-orange); margin-bottom: 1rem; text-align: center;">🎮 Try It Yourself!</h4>
                            <p style="color: var(--text-dim); font-size: 0.9rem; text-align: center; margin-bottom: 1.5rem;">
                                Type anything below and watch how the hash changes instantly:
                            </p>

                            <div style="margin-bottom: 1rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-light);">Your Input:</label>
                                <input type="text"
                                       id="hash-input"
                                       value="Hello World"
                                       style="width: 100%; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem; font-family: 'Courier New', monospace;"
                                       placeholder="Type anything...">
                            </div>

                            <div style="margin-bottom: 1rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--accent-green);">SHA-256 Hash:</label>
                                <div id="hash-output"
                                     style="padding: 0.75rem; background: rgba(76, 175, 80, 0.1); border: 2px solid var(--accent-green); border-radius: 0.5rem; font-family: 'Courier New', monospace; font-size: 0.85rem; word-break: break-all; color: var(--accent-green); min-height: 50px;">
                                    Calculating...
                                </div>
                            </div>

                            <div style="background: rgba(247, 147, 26, 0.05); padding: 1rem; border-radius: 0.5rem; border-left: 3px solid var(--primary-orange);">
                                <p style="font-size: 0.85rem; color: var(--text-dim); margin: 0;">
                                    💡 <strong>Try this:</strong> Change just one letter and see how dramatically the hash changes.
                                    This "avalanche effect" makes Bitcoin mining unpredictable!
                                </p>
                            </div>
                        </div>

                        <div style="background: rgba(247, 147, 26, 0.1); padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; font-family: 'Courier New', monospace; font-size: 0.85rem;">
                            <div style="margin-bottom: 0.5rem;">Input: "Hello World"</div>
                            <div style="color: var(--accent-green);">Hash: a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e</div>
                            <div style="margin: 1rem 0 0.5rem; color: var(--text-dim);">Input: "Hello world" (lowercase 'w')</div>
                            <div style="color: var(--accent-green);">Hash: 64ec88ca00b268e5ba1a35678a1b5316d212f4f366b2477232534a8aeca37f3c</div>
                        </div>
                        <p style="margin-top: 1rem; color: var(--text-dim); font-size: 0.9rem;">
                            Notice how one character change completely transformed the hash. This makes it impossible to predict
                            or reverse-engineer.
                        </p>
                    </div>

                    <div class="concept-card">
                        <div class="concept-header">
                            <span class="concept-icon">⛏️</span>
                            <h3>The Mining Process</h3>
                        </div>
                        <p>
                            Miners gather pending transactions, add them to a block template, and then try billions of different
                            nonce values until they find one that produces a hash meeting Bitcoin's difficulty target.
                        </p>
                        <div style="background: rgba(247, 147, 26, 0.1); padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; font-family: 'Courier New', monospace; font-size: 0.85rem;">
                            <div>Target: Hash must start with 19 zeros (current difficulty)</div>
                            <div style="margin-top: 0.5rem; color: #f44336;">Nonce 0: fe3a92b5... ❌ (no zeros)</div>
                            <div style="color: #f44336;">Nonce 1: b3f88dc4... ❌ (no zeros)</div>
                            <div style="color: #f44336;">Nonce 2: 8e2f45a1... ❌ (no zeros)</div>
                            <div style="color: var(--text-dim);">... billions of attempts later ...</div>
                            <div style="color: var(--accent-green);">Nonce 2,083,236,893: 0000000000000000000839a8e6b8... ✅</div>
                        </div>
                        <p style="margin-top: 1rem;">
                            When a miner finds a valid hash, they broadcast the block to the network. Other nodes verify it
                            (which takes milliseconds), accept it, and the miner earns the block reward (currently 6.25 BTC) plus transaction fees.
                        </p>
                    </div>

                    <div class="concept-card">
                        <div class="concept-header">
                            <span class="concept-icon">🛡️</span>
                            <h3>Why This Makes Bitcoin Secure</h3>
                        </div>
                        <p>
                            To change a past transaction, an attacker would need to:
                        </p>
                        <ol style="margin-left: 2rem; margin-top: 1rem; color: var(--text-dim);">
                            <li>Re-mine the block containing that transaction (finding a new valid nonce)</li>
                            <li>Re-mine every block that came after it (because changing one block breaks the chain)</li>
                            <li>Do this faster than the rest of the network is mining new blocks</li>
                        </ol>
                        <p style="margin-top: 1rem;">
                            With the Bitcoin network's current hashrate (~400 exahashes per second), this would require more
                            computational power than all the world's supercomputers combined—and cost billions of dollars in electricity.
                        </p>
                        <p>
                            <strong>Result:</strong> Bitcoin's past transactions are effectively immutable. The deeper a transaction
                            is buried (more blocks on top), the more impossible it becomes to alter.
                        </p>
                    </div>
                </div>

                <!-- Interactive Mining Simulator -->
                <div class="demo-embed">
                    <h3>⛏️ Interactive Mining Simulator</h3>
                    <p style="margin-bottom: 1.5rem;">
                        Experience Bitcoin mining! Adjust difficulty levels, watch hash attempts in real-time, and understand
                        proof-of-work by trying to find valid blocks yourself.
                    </p>
                    <iframe
                        src="/interactive-demos/mining-simulator/index.html"
                        style="width: 100%; height: 800px; border: 2px solid var(--primary-orange); border-radius: 0.75rem; background: white;"
                        title="Mining Simulator">
                    </iframe>
                    <p style="margin-top: 1rem; text-align: center; color: var(--text-dim); font-size: 0.9rem;">
                        💡 Start with Easy Mode to learn the concepts, then try Realistic Mode to see actual Bitcoin difficulty!
                    </p>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section class="content-section">
                <div class="takeaways">
                    <h3>🎯 Key Takeaways</h3>
                    <ul>
                        <li>The blockchain is a chain of blocks, each cryptographically linked to the previous one</li>
                        <li>Changing past transactions is nearly impossible because it would break the entire chain</li>
                        <li>Transactions use UTXOs (chunks of Bitcoin), not account balances like banks</li>
                        <li>When you send Bitcoin, you spend entire UTXOs and receive "change" back</li>
                        <li>Mining is a computational guessing game to find hashes meeting Bitcoin's difficulty target</li>
                        <li>Mining makes Bitcoin secure by making attacks prohibitively expensive</li>
                        <li>Hash functions (SHA-256) are one-way—easy to compute, impossible to reverse</li>
                        <li>New blocks are added every ~10 minutes on average, containing ~2,000-3,000 transactions</li>
                    </ul>
                </div>
            </section>

            <!-- Quiz -->
            <section class="content-section">
                <div class="quiz-container">
                    <h3>📝 Test Your Knowledge</h3>

                    <div class="quiz-question" data-question="1">
                        <p>1. What links blocks together in the blockchain?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) Timestamps
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) Each block contains the hash of the previous block
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) Transaction amounts
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Bitcoin addresses
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="2">
                        <p>2. What is a UTXO?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) A type of Bitcoin wallet
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) An unspent chunk of Bitcoin from a previous transaction
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) A Bitcoin mining algorithm
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) A blockchain explorer tool
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="3">
                        <p>3. What are miners trying to find?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) The longest password
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                B) Lost Bitcoin addresses
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                C) A nonce that produces a hash starting with enough zeros
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Satoshi Nakamoto's identity
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="4">
                        <p>4. Why can't you easily change old Bitcoin transactions?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) Banks prevent it
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) Changing one block would break the chain and require re-mining all subsequent blocks
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) Bitcoin wallets lock automatically
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Satoshi Nakamoto must approve all changes
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <div class="quiz-question" data-question="5">
                        <p>5. In a Bitcoin transaction, Inputs = Outputs + ___?</p>
                        <div class="quiz-options">
                            <div class="quiz-option" data-answer="wrong">
                                A) Profit
                            </div>
                            <div class="quiz-option" data-answer="correct">
                                B) Transaction Fee
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                C) Mining Reward
                            </div>
                            <div class="quiz-option" data-answer="wrong">
                                D) Block Size
                            </div>
                        </div>
                        <div class="quiz-feedback"></div>
                    </div>

                    <button class="quiz-submit" id="submit-quiz">Submit Quiz</button>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="/paths/curious/stage-2/" class="nav-btn nav-btn-secondary">← Back to Stage 2</a>
                <a href="module-2.html" class="nav-btn disabled" id="next-module">Next: Bitcoin's Rules →</a>
            </nav>
        </div>
    </main>

    <script>
        // SHA-256 Hash Function (using SubtleCrypto API)
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        // Interactive Hash Demo
        const hashInput = document.getElementById('hash-input');
        const hashOutput = document.getElementById('hash-output');

        async function updateHash() {
            const input = hashInput.value;
            if (input === '') {
                hashOutput.textContent = 'Type something to see the hash...';
                hashOutput.style.color = 'var(--text-dim)';
                return;
            }

            hashOutput.textContent = 'Calculating...';
            hashOutput.style.color = 'var(--text-dim)';

            try {
                const hash = await sha256(input);
                hashOutput.textContent = hash;
                hashOutput.style.color = 'var(--accent-green)';
            } catch (error) {
                hashOutput.textContent = 'Error calculating hash';
                hashOutput.style.color = '#f44336';
            }
        }

        // Update hash on input
        if (hashInput) {
            hashInput.addEventListener('input', updateHash);
            // Calculate initial hash
            updateHash();
        }

        // Quiz functionality
        let selectedAnswers = {};
        let quizCompleted = false;

        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                if (quizCompleted) return;

                const question = this.closest('.quiz-question');
                const questionNum = question.dataset.question;

                question.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('selected');
                });

                this.classList.add('selected');
                selectedAnswers[questionNum] = this.dataset.answer;

                if (Object.keys(selectedAnswers).length === 5) {
                    document.getElementById('submit-quiz').disabled = false;
                }
            });
        });

        document.getElementById('submit-quiz').addEventListener('click', function() {
            if (quizCompleted) return;

            let correctCount = 0;

            document.querySelectorAll('.quiz-question').forEach(question => {
                const questionNum = question.dataset.question;
                const selectedOption = question.querySelector('.quiz-option.selected');
                const feedback = question.querySelector('.quiz-feedback');

                if (selectedOption) {
                    const isCorrect = selectedOption.dataset.answer === 'correct';

                    if (isCorrect) {
                        correctCount++;
                        selectedOption.classList.add('correct');
                        feedback.classList.add('correct', 'show');
                        feedback.textContent = '✓ Correct! Well done.';
                    } else {
                        selectedOption.classList.add('incorrect');
                        const correctOption = question.querySelector('[data-answer="correct"]');
                        correctOption.classList.add('correct');
                        feedback.classList.add('incorrect', 'show');
                        feedback.textContent = '✗ Not quite. The correct answer is highlighted above.';
                    }
                }
            });

            quizCompleted = true;
            this.textContent = `Quiz Complete! Score: ${correctCount}/5`;
            this.disabled = true;

            if (correctCount >= 4) {
                saveProgress();
                document.getElementById('next-module').classList.remove('disabled');

                const successMsg = document.createElement('p');
                successMsg.style.color = 'var(--accent-green)';
                successMsg.style.textAlign = 'center';
                successMsg.style.marginTop = '1rem';
                successMsg.style.fontWeight = '600';
                successMsg.textContent = '🎉 Great job! You can now proceed to Module 2.';
                document.querySelector('.quiz-container').appendChild(successMsg);
            } else {
                const retryMsg = document.createElement('p');
                retryMsg.style.color = '#ff6b6b';
                retryMsg.style.textAlign = 'center';
                retryMsg.style.marginTop = '1rem';
                retryMsg.textContent = 'Review the material above and try again. You need 4/5 to proceed.';
                document.querySelector('.quiz-container').appendChild(retryMsg);

                setTimeout(() => {
                    location.reload();
                }, 3000);
            }
        });

        function saveProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            if (!progress.completedModules.includes('curious-2-1')) {
                progress.completedModules.push('curious-2-1');
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'curious';
            progress.currentStage = 2;
            progress.currentModule = 2;

            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        function checkProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');
            const completedModules = progress.completedModules || [];

            if (completedModules.includes('curious-2-1')) {
                document.getElementById('next-module').classList.remove('disabled');

                const notice = document.createElement('div');
                notice.style.background = 'rgba(76, 175, 80, 0.2)';
                notice.style.padding = '1rem';
                notice.style.borderRadius = '0.5rem';
                notice.style.color = 'var(--accent-green)';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '2rem';
                notice.textContent = '✓ You\'ve already completed this module. Feel free to review or move on!';

                document.querySelector('.container').insertBefore(notice, document.querySelector('.content-section'));
            }
        }

        checkProgress();
    </script>
</body>
</html>
