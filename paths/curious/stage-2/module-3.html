<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who Controls Bitcoin? | The Curious Path</title>
    <meta name="description" content="Explore decentralization, understand the roles of nodes, miners, and users, and learn why no single entity can control Bitcoin.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--primary-orange);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .module-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-green);
        }

        .module-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Content Sections */
        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section:last-of-type {
            border-bottom: none;
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .content-section h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--primary-orange);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        /* Network Visualization */
        .network-viz {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .network-viz h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
        }

        .nodes-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 1.5rem;
            max-width: 500px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(247, 147, 26, 0.05);
            border-radius: 0.75rem;
            position: relative;
        }

        .node {
            width: 60px;
            height: 60px;
            background: var(--primary-orange);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            position: relative;
            animation: pulse 3s ease-in-out infinite;
        }

        .node:nth-child(1) { animation-delay: 0s; }
        .node:nth-child(2) { animation-delay: 0.3s; }
        .node:nth-child(3) { animation-delay: 0.6s; }
        .node:nth-child(4) { animation-delay: 0.9s; }
        .node:nth-child(5) { animation-delay: 1.2s; }
        .node:nth-child(6) { animation-delay: 1.5s; }
        .node:nth-child(7) { animation-delay: 1.8s; }
        .node:nth-child(8) { animation-delay: 2.1s; }
        .node:nth-child(9) { animation-delay: 2.4s; }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        /* Participant Cards */
        .participants {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .participant-card {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .participant-card:hover {
            border-color: var(--primary-orange);
        }

        .participant-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .participant-icon {
            font-size: 3rem;
        }

        .participant-title h3 {
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .participant-subtitle {
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .participant-role {
            margin: 1rem 0;
        }

        .participant-role h4 {
            color: var(--accent-green);
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .participant-role ul {
            margin-left: 1.5rem;
            color: var(--text-dim);
        }

        .participant-role li {
            margin-bottom: 0.5rem;
        }

        .participant-power {
            background: rgba(247, 147, 26, 0.1);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .participant-power strong {
            color: var(--primary-orange);
        }

        /* Checks and Balances */
        .checks-balances {
            background: var(--secondary-dark);
            border: 2px solid var(--accent-green);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .checks-balances h3 {
            color: var(--accent-green);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .check-item {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 0.75rem;
        }

        .check-party {
            text-align: center;
        }

        .check-party-name {
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .check-party-desc {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .check-arrow {
            font-size: 2rem;
            color: var(--accent-green);
        }

        /* Comparison Table */
        .comparison-table {
            background: var(--secondary-dark);
            border-radius: 0.75rem;
            overflow: hidden;
            margin: 2rem 0;
        }

        .comparison-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            background: rgba(247, 147, 26, 0.2);
            padding: 1rem;
            font-weight: 700;
            text-align: center;
        }

        .comparison-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-row:last-child {
            border-bottom: none;
        }

        .comparison-cell {
            text-align: center;
            padding: 0.5rem;
        }

        .comparison-cell.label {
            text-align: left;
            font-weight: 600;
            color: var(--primary-orange);
            grid-column: span 2;
            background: rgba(247, 147, 26, 0.05);
            margin-bottom: 0.5rem;
            border-radius: 0.5rem;
        }

        /* Key Takeaways */
        .takeaways {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .takeaways h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .takeaways ul {
            list-style: none;
            padding-left: 0;
        }

        .takeaways li {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .takeaways li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: 700;
        }

        /* Quiz */
        .quiz-container {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-container h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .quiz-question {
            margin-bottom: 2rem;
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }

        .quiz-option {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.selected {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
        }

        .quiz-submit {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1.5rem;
        }

        .quiz-submit:hover {
            background: #ff8c00;
        }

        .quiz-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Completion Banner */
        .completion-banner {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0.1));
            border: 3px solid var(--accent-green);
            border-radius: 1rem;
            padding: 2.5rem;
            margin: 2rem 0;
            text-align: center;
        }

        .completion-banner h3 {
            color: var(--accent-green);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .badge {
            font-size: 4rem;
            margin: 1rem 0;
        }

        .completion-banner p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        .completion-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1.5rem 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item strong {
            display: block;
            font-size: 1.5rem;
            color: var(--accent-green);
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-btn:hover {
            background: #ff8c00;
            transform: translateX(5px);
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        .nav-btn-secondary:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
            transform: translateX(-5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .module-title-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .nodes-diagram {
                grid-template-columns: repeat(3, 1fr);
            }

            .check-item {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .check-arrow {
                transform: rotate(90deg);
            }

            .comparison-header,
            .comparison-row {
                grid-template-columns: 1fr;
            }

            .completion-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .module-navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/">Home</a> →
                <a href="/paths/curious/">The Curious Path</a> →
                <a href="/paths/curious/stage-2/">Stage 2</a> →
                <span>Module 3</span>
            </div>
            <div class="module-title-section">
                <h1>Who Controls Bitcoin?</h1>
                <div class="module-meta">
                    <span>⏱️ 25 minutes</span>
                    <span>🎯 Interactive</span>
                    <span>📝 Quiz included</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Socratic Questions -->
            <section class="content-section">
                <h2>🤔 Think About Power and Control</h2>
                <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                    Before we explore how Bitcoin distributes power, consider what it means to truly control something:
                </p>

                <div style="background: var(--secondary-dark); border-left: 4px solid var(--primary-orange); border-radius: 0.75rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <div style="display: grid; gap: 1rem;">
                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">👑</span>
                            <div>
                                <strong style="color: var(--primary-orange);">Who controls the U.S. dollar?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">Can you vote on interest rates or money supply? Does anyone ask your permission?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">🏦</span>
                            <div>
                                <strong style="color: var(--primary-orange);">What if you disagreed with the Federal Reserve's decisions?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">Could you opt out? Switch to a different version of the dollar? Or are you forced to accept their rules?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">⚖️</span>
                            <div>
                                <strong style="color: var(--primary-orange);">What would happen if the controller of money became corrupt?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">Who would stop them? Could you personally verify they're following the rules?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">🔍</span>
                            <div>
                                <strong style="color: var(--primary-orange);">Can you audit the Federal Reserve yourself?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">Can you see every decision, every transaction, every policy change in real-time? Or do you have to trust them?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; align-items: flex-start;">
                            <span style="font-size: 1.5rem;">🗳️</span>
                            <div>
                                <strong style="color: var(--primary-orange);">What if money could be designed so NO ONE could control it?</strong>
                                <p style="color: var(--text-dim); font-size: 0.95rem; margin-top: 0.5rem;">What if the rules were enforced by mathematics, not by people? What if you could verify everything yourself?</p>
                            </div>
                        </div>
                    </div>
                </div>

                <p style="margin-top: 1.5rem; text-align: center; font-size: 1.1rem;">
                    <strong style="color: var(--accent-green);">This is Bitcoin's radical experiment: money with no ruler.</strong>
                </p>
            </section>

            <!-- Introduction -->
            <section class="content-section">
                <h2>The Answer: Nobody (and Everybody)</h2>
                <p>
                    There's no CEO, no board of directors, no central authority that can change Bitcoin's rules. Yet it has operated 24/7/365 without fail since January 3, 2009.
                </p>
                <p>
                    How? Through <strong>decentralization</strong>—distributing power across thousands of independent participants who keep each other in check. Let's meet the key players.
                </p>
            </section>

            <!-- Network Visualization -->
            <section class="content-section">
                <div class="network-viz">
                    <h3>🌐 Bitcoin's Decentralized Network</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Bitcoin runs on ~18,000 nodes worldwide. Each node independently verifies transactions and enforces rules.
                    </p>

                    <div class="nodes-diagram">
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                        <div class="node">🖥️</div>
                    </div>

                    <p style="color: var(--text-light);">
                        No single node is special. If 5,000 nodes go offline, the other 13,000 keep Bitcoin running. Every node has equal power
                        to reject invalid transactions or blocks.
                    </p>
                </div>
            </section>

            <!-- The Centralization Tower Demo -->
            <section class="content-section">
                <style>
                    .centralization-demo-container {
                        background: linear-gradient(135deg, rgba(244, 67, 54, 0.15), rgba(76, 175, 80, 0.15));
                        border: 2px solid var(--border-color);
                        border-radius: 1rem;
                        padding: 2.5rem;
                        margin: 2rem 0;
                    }

                    .demo-title-center {
                        text-align: center;
                        margin-bottom: 2rem;
                    }

                    .demo-title-center h3 {
                        color: var(--primary-orange);
                        font-size: 1.5rem;
                        margin-bottom: 0.5rem;
                    }

                    .demo-subtitle-center {
                        color: var(--text-dim);
                        font-style: italic;
                        font-size: 1.1rem;
                    }

                    .comparison-sides-container {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 3rem;
                        margin: 2rem 0;
                    }

                    .side-box {
                        text-align: center;
                        padding: 2rem;
                        background: var(--secondary-dark);
                        border-radius: 1rem;
                        border: 2px solid var(--border-color);
                        min-height: 450px;
                        display: flex;
                        flex-direction: column;
                    }

                    .side-label-text {
                        font-size: 1.1rem;
                        font-weight: 600;
                        margin-bottom: 1.5rem;
                        color: var(--text-light);
                    }

                    .tower-container {
                        flex: 1;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: center;
                        position: relative;
                        min-height: 250px;
                    }

                    .tower-icon {
                        font-size: 8rem;
                        transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                        animation: towerSway 3s ease-in-out infinite;
                    }

                    @keyframes towerSway {
                        0%, 100% { transform: rotate(0deg); }
                        50% { transform: rotate(2deg); }
                    }

                    .tower-icon.collapsed {
                        animation: none;
                        transform: translateY(80px) rotate(25deg) scale(0.7);
                        opacity: 0.3;
                        filter: grayscale(100%);
                    }

                    @keyframes towerCollapse {
                        0% { transform: rotate(0) scale(1); opacity: 1; }
                        30% { transform: rotate(-5deg) scale(1.05); }
                        60% { transform: translateY(20px) rotate(15deg) scale(0.95); }
                        100% { transform: translateY(80px) rotate(25deg) scale(0.7); opacity: 0.3; }
                    }

                    .network-nodes-grid {
                        flex: 1;
                        display: grid;
                        grid-template-columns: repeat(5, 1fr);
                        gap: 0.8rem;
                        padding: 1.5rem;
                        align-items: center;
                        min-height: 250px;
                    }

                    .network-node-item {
                        width: 45px;
                        height: 45px;
                        background: var(--primary-orange);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 1.3rem;
                        transition: all 0.4s ease;
                        box-shadow: 0 0 15px rgba(247, 147, 26, 0.5);
                        animation: nodePulse 2s ease-in-out infinite;
                    }

                    @keyframes nodePulse {
                        0%, 100% { transform: scale(1); box-shadow: 0 0 15px rgba(247, 147, 26, 0.5); }
                        50% { transform: scale(1.08); box-shadow: 0 0 25px rgba(247, 147, 26, 0.8); }
                    }

                    .network-node-item.offline {
                        background: #555;
                        box-shadow: none;
                        opacity: 0.4;
                        animation: fadeOffline 0.6s ease;
                    }

                    @keyframes fadeOffline {
                        0% { transform: scale(1); opacity: 1; }
                        50% { transform: scale(0.5); opacity: 0.2; }
                        100% { transform: scale(0.9); opacity: 0.4; }
                    }

                    .network-node-item.boosted {
                        animation: nodeBoost 1s ease-in-out;
                    }

                    @keyframes nodeBoost {
                        0%, 100% { transform: scale(1); }
                        30% { transform: scale(1.3); box-shadow: 0 0 35px rgba(247, 147, 26, 1); }
                        60% { transform: scale(1.15); }
                    }

                    .attack-button {
                        padding: 1rem 2rem;
                        background: var(--accent-red);
                        color: white;
                        border: none;
                        border-radius: 0.5rem;
                        font-size: 1rem;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        margin-top: 1.5rem;
                    }

                    .attack-button:hover {
                        background: #d32f2f;
                        transform: scale(1.05);
                    }

                    .attack-button:active {
                        transform: scale(0.95);
                    }

                    .status-message {
                        margin-top: 1.5rem;
                        padding: 1rem;
                        background: rgba(0, 0, 0, 0.3);
                        border-radius: 0.5rem;
                        min-height: 60px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }

                    .status-message.down {
                        background: rgba(244, 67, 54, 0.2);
                        border: 2px solid var(--accent-red);
                    }

                    .status-message.resilient {
                        background: rgba(76, 175, 80, 0.2);
                        border: 2px solid var(--accent-green);
                    }

                    .status-text {
                        font-size: 1.1rem;
                        font-weight: 700;
                        text-align: center;
                    }

                    .status-text.down {
                        color: var(--accent-red);
                    }

                    .status-text.resilient {
                        color: var(--accent-green);
                    }

                    .comparison-insight-section {
                        background: var(--secondary-dark);
                        border-left: 4px solid var(--primary-orange);
                        border-radius: 0.5rem;
                        padding: 1.5rem;
                        margin-top: 2rem;
                    }

                    .comparison-insight-section h4 {
                        color: var(--primary-orange);
                        margin-bottom: 1rem;
                        font-size: 1.1rem;
                    }

                    .insights-comparison-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 1.5rem;
                        margin-top: 1rem;
                    }

                    .insight-box {
                        text-align: center;
                        padding: 1.5rem;
                        background: rgba(247, 147, 26, 0.1);
                        border-radius: 0.5rem;
                    }

                    .insight-box.vulnerable {
                        border: 2px solid rgba(244, 67, 54, 0.6);
                    }

                    .insight-box.robust {
                        border: 2px solid var(--accent-green);
                    }

                    .insight-box strong {
                        display: block;
                        margin-bottom: 0.75rem;
                        font-size: 1rem;
                    }

                    .insight-box p {
                        font-size: 0.9rem;
                        color: var(--text-dim);
                        margin: 0;
                    }

                    @media (max-width: 768px) {
                        .comparison-sides-container {
                            grid-template-columns: 1fr;
                            gap: 2rem;
                        }

                        .insights-comparison-grid {
                            grid-template-columns: 1fr;
                        }

                        .tower-icon {
                            font-size: 6rem;
                        }

                        .network-nodes-grid {
                            grid-template-columns: repeat(4, 1fr);
                        }

                        .network-node-item {
                            width: 40px;
                            height: 40px;
                            font-size: 1.1rem;
                        }
                    }
                </style>

                <div class="centralization-demo-container">
                    <div class="demo-title-center">
                        <h3>🏢 The Centralization Tower</h3>
                        <p class="demo-subtitle-center">Single point of failure vs. Resilient network</p>
                    </div>

                    <div class="comparison-sides-container">
                        <!-- Traditional Finance Side -->
                        <div class="side-box">
                            <div class="side-label-text">🏦 Traditional Finance</div>
                            <div class="tower-container">
                                <div class="tower-icon" id="tower">🏛️</div>
                            </div>
                            <button class="attack-button" id="attack-tower-btn">⚔️ Attack the System</button>
                            <div class="status-message" id="tower-status">
                                <span class="status-text">System operational</span>
                            </div>
                        </div>

                        <!-- Bitcoin Network Side -->
                        <div class="side-box">
                            <div class="side-label-text">₿ Bitcoin Network</div>
                            <div class="network-nodes-grid" id="bitcoin-nodes">
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                                <div class="network-node-item">🖥️</div>
                            </div>
                            <button class="attack-button" id="attack-nodes-btn">⚔️ Attack the Network</button>
                            <div class="status-message" id="nodes-status">
                                <span class="status-text">Network operational</span>
                            </div>
                        </div>
                    </div>

                    <div class="comparison-insight-section">
                        <h4>💡 The Critical Difference</h4>
                        <div class="insights-comparison-grid">
                            <div class="insight-box vulnerable">
                                <strong>❌ Central Point of Failure</strong>
                                <p>One building. One server. One decision-maker. Attack or corrupt the center, and the entire system collapses. Everyone loses access.</p>
                            </div>
                            <div class="insight-box robust">
                                <strong>✓ Distributed Resilience</strong>
                                <p>18,000+ independent nodes. No center to attack. Even if thousands go offline, the network continues operating. Self-healing design.</p>
                            </div>
                        </div>
                    </div>

                    <p style="text-align: center; margin-top: 2rem; font-size: 1.05rem; color: var(--text-light);">
                        <strong style="color: var(--primary-orange);">The Socratic Question:</strong><br>
                        <em style="color: var(--text-dim); font-size: 1.1rem;">Should a single server decide the fate of everyone's money?</em>
                    </p>
                </div>

                <script>
                    (function() {
                        const tower = document.getElementById('tower');
                        const towerStatus = document.getElementById('tower-status');
                        const attackTowerBtn = document.getElementById('attack-tower-btn');

                        const nodesContainer = document.getElementById('bitcoin-nodes');
                        const nodesStatus = document.getElementById('nodes-status');
                        const attackNodesBtn = document.getElementById('attack-nodes-btn');
                        const allNodes = nodesContainer.querySelectorAll('.network-node-item');

                        let towerCollapsed = false;
                        let nodesAttacked = false;

                        // Attack Tower (Traditional Finance)
                        attackTowerBtn.addEventListener('click', function() {
                            if (towerCollapsed) {
                                // Reset
                                tower.classList.remove('collapsed');
                                towerStatus.classList.remove('down');
                                towerStatus.innerHTML = '<span class="status-text">System operational</span>';
                                attackTowerBtn.textContent = '⚔️ Attack the System';
                                towerCollapsed = false;
                            } else {
                                // Collapse
                                tower.classList.add('collapsed');
                                towerStatus.classList.add('down');
                                towerStatus.innerHTML = '<span class="status-text down">🚨 SYSTEM DOWN<br>Everyone locked out!</span>';
                                attackTowerBtn.textContent = '🔄 Reset';
                                towerCollapsed = true;
                            }
                        });

                        // Attack Nodes (Bitcoin Network)
                        attackNodesBtn.addEventListener('click', function() {
                            if (nodesAttacked) {
                                // Reset
                                allNodes.forEach(node => {
                                    node.classList.remove('offline', 'boosted');
                                });
                                nodesStatus.classList.remove('resilient');
                                nodesStatus.innerHTML = '<span class="status-text">Network operational</span>';
                                attackNodesBtn.textContent = '⚔️ Attack the Network';
                                nodesAttacked = false;
                            } else {
                                // Attack: Take down 30% of nodes
                                const nodesToAttack = Math.floor(allNodes.length * 0.3);
                                const attackedIndices = new Set();

                                while (attackedIndices.size < nodesToAttack) {
                                    attackedIndices.add(Math.floor(Math.random() * allNodes.length));
                                }

                                allNodes.forEach((node, idx) => {
                                    if (attackedIndices.has(idx)) {
                                        setTimeout(() => {
                                            node.classList.add('offline');
                                        }, idx * 50);
                                    } else {
                                        // Remaining nodes get boosted
                                        setTimeout(() => {
                                            node.classList.add('boosted');
                                            setTimeout(() => node.classList.remove('boosted'), 1000);
                                        }, nodesToAttack * 50 + idx * 30);
                                    }
                                });

                                setTimeout(() => {
                                    nodesStatus.classList.add('resilient');
                                    nodesStatus.innerHTML = '<span class="status-text resilient">✅ NETWORK CONTINUES<br>Remaining nodes compensate!</span>';
                                }, (nodesToAttack + allNodes.length) * 50);

                                attackNodesBtn.textContent = '🔄 Reset';
                                nodesAttacked = true;
                            }
                        });
                    })();
                </script>
            </section>

            <!-- The Three Key Participants -->
            <section class="content-section">
                <h2>The Three Key Participants</h2>
                <p>
                    Bitcoin's ecosystem has three main types of participants. Each has different roles, incentives, and powers.
                    Critically, <strong>no single group can change Bitcoin without the others agreeing</strong>.
                </p>

                <div class="participants">
                    <!-- Nodes -->
                    <div class="participant-card">
                        <div class="participant-header">
                            <span class="participant-icon">🖥️</span>
                            <div class="participant-title">
                                <h3>Nodes (The Validators)</h3>
                                <div class="participant-subtitle">~18,000 worldwide | Anyone can run one</div>
                            </div>
                        </div>

                        <div class="participant-role">
                            <h4>What Nodes Do:</h4>
                            <ul>
                                <li>Store the complete Bitcoin blockchain (every transaction since 2009)</li>
                                <li>Independently verify every transaction and block against Bitcoin's rules</li>
                                <li>Reject anything that violates the protocol (invalid signatures, double-spends, etc.)</li>
                                <li>Broadcast valid transactions and blocks to other nodes</li>
                                <li>Provide data to wallets and users</li>
                            </ul>
                        </div>

                        <div class="participant-power">
                            <strong>Power:</strong> Nodes enforce Bitcoin's rules. If miners create an invalid block (say, with 50 BTC reward instead of 3.125),
                            nodes simply reject it. Even if 99% of miners agree, nodes can veto it.
                        </div>

                        <p style="margin-top: 1rem; font-style: italic; color: var(--text-dim);">
                            💡 <strong>Key Point:</strong> Running a node means <em>you</em> independently verify everything. You don't trust miners,
                            exchanges, or anyone else. Trust, but verify.
                        </p>
                    </div>

                    <!-- Miners -->
                    <div class="participant-card">
                        <div class="participant-header">
                            <span class="participant-icon">⛏️</span>
                            <div class="participant-title">
                                <h3>Miners (The Producers)</h3>
                                <div class="participant-subtitle">~400 EH/s global hashrate | Compete for rewards</div>
                            </div>
                        </div>

                        <div class="participant-role">
                            <h4>What Miners Do:</h4>
                            <ul>
                                <li>Gather pending transactions from the mempool</li>
                                <li>Compete to find valid proof-of-work (hash with required leading zeros)</li>
                                <li>Create new blocks and add them to the blockchain</li>
                                <li>Earn block rewards (currently 3.125 BTC) + transaction fees</li>
                                <li>Provide security through computational work</li>
                            </ul>
                        </div>

                        <div class="participant-power">
                            <strong>Power:</strong> Miners decide which transactions to include in blocks (within reason—they need fees). They also vote
                            on certain protocol upgrades by signaling support. However, nodes can reject blocks that break the rules.
                        </div>

                        <p style="margin-top: 1rem; font-style: italic; color: var(--text-dim);">
                            💡 <strong>Key Point:</strong> Miners are like employees—they get paid to do work (secure the network), but they don't make
                            the rules. Nodes (the customers) can fire them by rejecting invalid blocks.
                        </p>
                    </div>

                    <!-- Users -->
                    <div class="participant-card">
                        <div class="participant-header">
                            <span class="participant-icon">👥</span>
                            <div class="participant-title">
                                <h3>Users (The Deciders)</h3>
                                <div class="participant-subtitle">Millions worldwide | Give Bitcoin value</div>
                            </div>
                        </div>

                        <div class="participant-role">
                            <h4>What Users Do:</h4>
                            <ul>
                                <li>Decide which version of Bitcoin software to run</li>
                                <li>Choose to accept or reject protocol changes</li>
                                <li>Buy, hold, and transact with Bitcoin (creating demand)</li>
                                <li>Run nodes (users who verify become part of the enforcement)</li>
                                <li>Vote with their feet—can switch to alternative chains if dissatisfied</li>
                            </ul>
                        </div>

                        <div class="participant-power">
                            <strong>Power:</strong> Users give Bitcoin its value. If users reject a change (like increasing the 21 million cap), that
                            change is dead on arrival—even if miners and developers support it. User consensus is ultimate.
                        </div>

                        <p style="margin-top: 1rem; font-style: italic; color: var(--text-dim);">
                            💡 <strong>Key Point:</strong> Bitcoin serves <em>users</em>, not miners or developers. Users can fork Bitcoin if they
                            disagree with changes (see: Bitcoin Cash, 2017).
                        </p>
                    </div>
                </div>
            </section>

            <!-- Checks and Balances -->
            <section class="content-section">
                <h2>Checks and Balances</h2>
                <p>
                    Bitcoin's governance is beautifully balanced. Each participant group keeps the others in check:
                </p>

                <div class="checks-balances">
                    <h3>⚖️ How Power is Balanced</h3>

                    <div class="check-item">
                        <div class="check-party">
                            <div class="check-party-name">Miners</div>
                            <div class="check-party-desc">Want to include transactions, earn rewards</div>
                        </div>
                        <div class="check-arrow">⟷</div>
                        <div class="check-party">
                            <div class="check-party-name">Nodes</div>
                            <div class="check-party-desc">Can reject invalid blocks instantly</div>
                        </div>
                    </div>

                    <div class="check-item">
                        <div class="check-party">
                            <div class="check-party-name">Developers</div>
                            <div class="check-party-desc">Propose code changes, improvements</div>
                        </div>
                        <div class="check-arrow">⟷</div>
                        <div class="check-party">
                            <div class="check-party-name">Users</div>
                            <div class="check-party-desc">Choose which software to run</div>
                        </div>
                    </div>

                    <div class="check-item">
                        <div class="check-party">
                            <div class="check-party-name">Users</div>
                            <div class="check-party-desc">Demand certain features, security</div>
                        </div>
                        <div class="check-arrow">⟷</div>
                        <div class="check-party">
                            <div class="check-party-name">Miners</div>
                            <div class="check-party-desc">Must follow user preferences for fees</div>
                        </div>
                    </div>
                </div>

                <h3>Real Example: The Block Size War (2015-2017)</h3>
                <p>
                    A group of miners and businesses wanted to increase Bitcoin's block size from 1MB to 8MB+, arguing it would allow more transactions.
                    Developers and many users opposed this, believing it would centralize nodes (larger blocks = more expensive to run nodes).
                </p>
                <p>
                    <strong>What happened:</strong>
                </p>
                <ul style="margin-left: 2rem; color: var(--text-dim);">
                    <li>Miners signaled support for larger blocks (~85% hashrate)</li>
                    <li>Nodes refused to upgrade (only ~10% adopted the new software)</li>
                    <li>Users sided with nodes, keeping block size at 1MB</li>
                    <li>The large-block faction forked to create "Bitcoin Cash"</li>
                    <li>Bitcoin (BTC) remained the dominant chain with user/node support</li>
                </ul>
                <p style="margin-top: 1rem;">
                    <strong>Lesson:</strong> Even 85% of mining power couldn't force a change. Nodes and users had the final say.
                    This proved that <em>users control Bitcoin</em>, not miners or corporations.
                </p>
            </section>

            <!-- Interactive Governance Simulator -->
            <section class="content-section">
                <div style="background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 0.75rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1rem; text-align: center;">🎮 Interactive Governance Simulator</h3>
                    <p style="color: var(--text-dim); font-size: 0.9rem; text-align: center; margin-bottom: 1.5rem;">
                        Try to force a controversial change through Bitcoin's governance. See what happens!
                    </p>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-light);">
                            Proposed Change:
                        </label>
                        <select id="governance-change" style="width: 100%; padding: 0.75rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-light); font-size: 1rem;">
                            <option value="">-- Select a proposal --</option>
                            <option value="supply">Increase max supply from 21M to 42M BTC</option>
                            <option value="blocksize">Increase block size from 1MB to 100MB</option>
                            <option value="pow">Change from Proof-of-Work to Proof-of-Stake</option>
                            <option value="centralize">Give one company control over updates</option>
                        </select>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-light); font-size: 0.9rem;">
                                Miner Support:
                            </label>
                            <input type="range" id="miner-support" min="0" max="100" value="50" style="width: 100%;">
                            <div style="text-align: center; color: var(--primary-orange); font-weight: 700; margin-top: 0.25rem;">
                                <span id="miner-percent">50</span>%
                            </div>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-light); font-size: 0.9rem;">
                                Node Support:
                            </label>
                            <input type="range" id="node-support" min="0" max="100" value="50" style="width: 100%;">
                            <div style="text-align: center; color: var(--primary-orange); font-weight: 700; margin-top: 0.25rem;">
                                <span id="node-percent">50</span>%
                            </div>
                        </div>

                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-light); font-size: 0.9rem;">
                                User Support:
                            </label>
                            <input type="range" id="user-support" min="0" max="100" value="50" style="width: 100%;">
                            <div style="text-align: center; color: var(--primary-orange); font-weight: 700; margin-top: 0.25rem;">
                                <span id="user-percent">50</span>%
                            </div>
                        </div>
                    </div>

                    <button id="simulate-governance" style="width: 100%; padding: 1rem; background: var(--primary-orange); color: white; border: none; border-radius: 0.5rem; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                        Simulate Proposal
                    </button>

                    <div id="governance-result" style="margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.75rem; display: none;">
                        <h4 id="result-title" style="margin-bottom: 1rem; text-align: center;"></h4>
                        <p id="result-description" style="color: var(--text-dim); text-align: center;"></p>
                        <div id="result-details" style="margin-top: 1rem; padding: 1rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.5rem;"></div>
                    </div>
                </div>
            </section>

            <!-- Bitcoin vs Traditional Systems -->
            <section class="content-section">
                <h2>Bitcoin vs. Traditional Financial Systems</h2>

                <div class="comparison-table">
                    <div class="comparison-header">
                        <div>Traditional Finance</div>
                        <div>Bitcoin</div>
                    </div>

                    <div class="comparison-row">
                        <div class="comparison-cell label">Who Controls?</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell">
                            <span style="color: #f44336; font-weight: 700;">Central Banks, Governments</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Federal Reserve, ECB, etc. decide policy
                            </div>
                        </div>
                        <div class="comparison-cell">
                            <span style="color: var(--accent-green); font-weight: 700;">Distributed Network</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                18,000+ nodes, no single authority
                            </div>
                        </div>
                    </div>

                    <div class="comparison-row">
                        <div class="comparison-cell label">Rule Changes?</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell">
                            <span style="color: #f44336; font-weight: 700;">Unilateral</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Central bank changes rates overnight
                            </div>
                        </div>
                        <div class="comparison-cell">
                            <span style="color: var(--accent-green); font-weight: 700;">Consensus Required</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                All participants must agree
                            </div>
                        </div>
                    </div>

                    <div class="comparison-row">
                        <div class="comparison-cell label">Transparency?</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell">
                            <span style="color: #f44336; font-weight: 700;">Opaque</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Closed meetings, secret decisions
                            </div>
                        </div>
                        <div class="comparison-cell">
                            <span style="color: var(--accent-green); font-weight: 700;">Fully Transparent</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                All code open-source, all txs public
                            </div>
                        </div>
                    </div>

                    <div class="comparison-row">
                        <div class="comparison-cell label">Single Point of Failure?</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell">
                            <span style="color: #f44336; font-weight: 700;">Yes</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Central bank failure = system collapse
                            </div>
                        </div>
                        <div class="comparison-cell">
                            <span style="color: var(--accent-green); font-weight: 700;">No</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Nodes can go offline, Bitcoin continues
                            </div>
                        </div>
                    </div>

                    <div class="comparison-row">
                        <div class="comparison-cell label">Censorship?</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell">
                            <span style="color: #f44336; font-weight: 700;">Common</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Banks can freeze accounts anytime
                            </div>
                        </div>
                        <div class="comparison-cell">
                            <span style="color: var(--accent-green); font-weight: 700;">Resistant</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                No one can block your transactions
                            </div>
                        </div>
                    </div>

                    <div class="comparison-row">
                        <div class="comparison-cell label">Accountability?</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell">
                            <span style="color: #f44336; font-weight: 700;">Limited</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Bankers rarely face consequences
                            </div>
                        </div>
                        <div class="comparison-cell">
                            <span style="color: var(--accent-green); font-weight: 700;">Mathematical</span>
                            <div style="font-size: 0.85rem; color: var(--text-dim); margin-top: 0.5rem;">
                                Rules enforced by code, not humans
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section class="content-section">
                <div class="takeaways">
                    <h3>🎯 Key Takeaways</h3>
                    <ul>
                        <li>No one controls Bitcoin—power is distributed across ~18,000 independent nodes</li>
                        <li>Nodes validate and enforce rules, rejecting anything invalid</li>
                        <li>Miners produce blocks but can't change the rules without node/user consent</li>
                        <li>Users give Bitcoin value and choose which software to run</li>
                        <li>Each group keeps the others in check—no single party has absolute power</li>
                        <li>Real example: Block Size War proved users and nodes control Bitcoin, not miners</li>
                        <li>Unlike traditional finance, Bitcoin has no central authority or single point of failure</li>
                        <li>Rules can only change through overwhelming consensus across all participants</li>
                        <li>This decentralization makes Bitcoin censorship-resistant and resilient</li>
                    </ul>
                </div>
            </section>

            <!-- Interactive Network Consensus Demo -->
            <section class="content-section">
                <div class="demo-embed" style="background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem; padding: 2rem; margin: 2rem 0; text-align: center;">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1rem;">🌐 Interactive: Network Consensus</h3>
                    <p style="margin-bottom: 1.5rem; color: var(--text-dim);">
                        Become a Bitcoin node! Validate blocks, handle network attacks, and understand how distributed consensus works without central authority.
                    </p>
                    <iframe
                        src="/interactive-demos/network-consensus-demo/index.html?level=beginner&path=curious"
                        style="width: 100%; height: 900px; border: 2px solid var(--primary-orange); border-radius: 0.75rem;"
                        title="Network Consensus - Beginner">
                    </iframe>
                    <p style="margin-top: 1rem; text-align: center; color: var(--text-dim); font-size: 0.9rem;">
                        💡 Experience scenarios like 51% attacks, network splits, and see why nodes matter!
                    </p>
                </div>
            </section>

            <!-- Interactive Retention Activities -->
            <section class="content-section">
                <div class="quiz-container">
                    <h3>🎯 Check Your Understanding</h3>

                    <!-- Activity 1: Who Controls Bitcoin? Power Distribution -->
                    <div id="power-distribution" class="card" style="padding: 2.5rem; margin-bottom: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);">⚖️ Who Controls Bitcoin?</h4>
                        <p style="margin-bottom: 1.5rem; color: var(--text-dim);">Tap each group to reveal their actual power in the Bitcoin network:</p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                            <button class="power-card tapcard" data-group="miners" data-answer="<strong>Miners:</strong> Secure the network with hashpower, but nodes reject invalid blocks. Power: Limited ⚡" style="padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 0.75rem; cursor: pointer; text-align: center; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center;">
                                ⛏️ Miners
                            </button>
                            <button class="power-card tapcard" data-group="nodes" data-answer="<strong>Nodes:</strong> Enforce ALL rules. If you break them, your blocks are rejected. Power: Absolute Veto 🛡️" style="padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 0.75rem; cursor: pointer; text-align: center; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center;">
                                🖥️ Nodes (18,000+)
                            </button>
                            <button class="power-card tapcard" data-group="developers" data-answer="<strong>Developers:</strong> Propose changes, but nodes must accept them. Power: Influence Only 💬" style="padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 0.75rem; cursor: pointer; text-align: center; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center;">
                                👨‍💻 Developers
                            </button>
                            <button class="power-card tapcard" data-group="users" data-answer="<strong>Users:</strong> Choose which software to run. Economic power drives adoption. Power: Economic Final Say 💰" style="padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 0.75rem; cursor: pointer; text-align: center; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center;">
                                👥 Users
                            </button>
                        </div>
                        <div id="power-insight" style="padding: 1rem; background: rgba(247, 147, 26, 0.05); border-radius: 0.5rem; min-height: 60px; color: var(--text-dim);"></div>
                    </div>

                    <!-- Activity 2: Block Size War Scenario -->
                    <div id="block-size-war" class="card" style="padding: 2.5rem; margin-bottom: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);">🔮 Predict: The Block Size War (2015-2017)</h4>
                        <p style="margin-bottom: 1.5rem; color: var(--text-light);">Big mining companies wanted to increase block size from 1MB to 8MB. They controlled 80%+ of mining power. What happened?</p>

                        <div class="chips" style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1rem;">
                            <button class="chip" data-outcome="miners-won" style="padding: 0.75rem 1.25rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; cursor: pointer; transition: all 0.2s;">
                                Miners got their way (8MB blocks)
                            </button>
                            <button class="chip" data-outcome="nodes-rejected" style="padding: 0.75rem 1.25rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; cursor: pointer; transition: all 0.2s;">
                                Nodes rejected it, Bitcoin stayed 1MB
                            </button>
                            <button class="chip" data-outcome="compromise" style="padding: 0.75rem 1.25rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; cursor: pointer; transition: all 0.2s;">
                                They compromised at 4MB
                            </button>
                        </div>

                        <button id="reveal-war" class="btn" style="margin-top: 1rem;">Reveal What Happened</button>
                        <div id="war-result" style="display: none; margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.75rem;"></div>
                    </div>

                    <!-- Activity 3: 51% Attack Simulator -->
                    <div id="attack-simulator" class="card" style="padding: 2.5rem; margin-bottom: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);">⚔️ Try a 51% Attack</h4>
                        <p style="margin-bottom: 1.5rem; color: var(--text-dim);">You control 51% of mining power. Try to change Bitcoin's 21M cap to 42M. What happens?</p>

                        <div style="margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="color: var(--text-light);">Your Hashrate:</span>
                                <span id="hashrate-display" style="color: var(--primary-orange); font-weight: 600;">51%</span>
                            </div>
                            <input type="range" id="hashrate-slider" min="0" max="100" value="51" style="width: 100%; accent-color: var(--primary-orange);">
                        </div>

                        <button id="attempt-attack" class="btn" style="background: var(--accent-red); border-color: var(--accent-red);">Mine Blocks with 42M Cap</button>
                        <div id="attack-result" style="margin-top: 1.5rem; padding: 1.5rem; background: rgba(0, 0, 0, 0.3); border-radius: 0.5rem; min-height: 80px; display: flex; align-items: center; justify-content: center; color: var(--text-dim);">
                            Awaiting your attack...
                        </div>
                    </div>
                </div>
            </section>

            <!-- Completion Banner (hidden initially) -->
            <div class="completion-banner" id="completion-banner" style="display: none;">
                <div class="badge">🏆</div>
                <h3>Congratulations! Stage 2 Complete!</h3>
                <p>
                    You've earned the <strong>"Bitcoin Fundamentals"</strong> badge! You now understand how Bitcoin works,
                    its core rules, and its decentralized governance model. You're ready to own and use Bitcoin yourself.
                </p>
                <div class="completion-stats">
                    <div class="stat-item">
                        <strong>6/6</strong>
                        <span>Total Modules (Stages 1 & 2)</span>
                    </div>
                    <div class="stat-item">
                        <strong>~2 hours</strong>
                        <span>Total Learning Time</span>
                    </div>
                    <div class="stat-item">
                        <strong>Stage 3</strong>
                        <span>Unlocked!</span>
                    </div>
                </div>
                <a href="/paths/curious/stage-3/" class="nav-btn" style="margin-top: 1rem; display: inline-block;">
                    Continue to Stage 3: Your First Bitcoin →
                </a>
            </div>

            <!-- Curious to Learn More? -->
            <section style="margin: 3rem 0;">
                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(247, 147, 26, 0.05)); border: 2px solid var(--primary-orange); border-radius: 1rem; padding: 2rem; text-align: center;">
                    <h3 style="color: var(--primary-orange); margin-bottom: 1rem;">🌍 Curious About Bitcoin's Future?</h3>
                    <p style="margin-bottom: 1.5rem; color: var(--text-light);">
                        Bitcoin isn't just one thing—it's a growing ecosystem of layers! Lightning Network makes payments instant, Liquid adds privacy, and new layers are being built every day.
                    </p>
                    <a href="/interactive-demos/bitcoin-layers-map.html?level=beginner&path=curious"
                       target="_blank"
                       style="display: inline-block; padding: 0.75rem 1.5rem; background: var(--primary-orange); color: white; text-decoration: none; border-radius: 0.5rem; font-weight: 600; transition: all 0.3s ease;">
                        🗺️ Explore Bitcoin Layers Map →
                    </a>
                    <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-dim);">
                        Optional exploration • See what's being built on top of Bitcoin!
                    </p>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="module-2.html" class="nav-btn nav-btn-secondary">← Previous: Bitcoin's Rules</a>
                <a href="/paths/curious/stage-2/" class="nav-btn nav-btn-secondary">Back to Stage 2 Overview</a>
            </nav>
        </div>
    </main>

    <script>
        // Interactive Governance Simulator
        const minerSupportSlider = document.getElementById('miner-support');
        const nodeSupportSlider = document.getElementById('node-support');
        const userSupportSlider = document.getElementById('user-support');
        const minerPercent = document.getElementById('miner-percent');
        const nodePercent = document.getElementById('node-percent');
        const userPercent = document.getElementById('user-percent');
        const simulateBtn = document.getElementById('simulate-governance');
        const governanceChange = document.getElementById('governance-change');
        const governanceResult = document.getElementById('governance-result');
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const resultDetails = document.getElementById('result-details');

        // Update slider displays
        minerSupportSlider.addEventListener('input', (e) => {
            minerPercent.textContent = e.target.value;
        });
        nodeSupportSlider.addEventListener('input', (e) => {
            nodePercent.textContent = e.target.value;
        });
        userSupportSlider.addEventListener('input', (e) => {
            userPercent.textContent = e.target.value;
        });

        // Simulate governance
        simulateBtn.addEventListener('click', () => {
            const change = governanceChange.value;
            const minerSupport = parseInt(minerSupportSlider.value);
            const nodeSupport = parseInt(nodeSupportSlider.value);
            const userSupport = parseInt(userSupportSlider.value);

            if (!change) {
                alert('Please select a proposal first!');
                return;
            }

            let result = analyzeGovernance(change, minerSupport, nodeSupport, userSupport);
            displayResult(result);
        });

        function analyzeGovernance(change, miners, nodes, users) {
            const proposals = {
                supply: {
                    name: 'Increase Max Supply to 42M BTC',
                    controversy: 'extreme',
                    requiredConsensus: 95
                },
                blocksize: {
                    name: 'Increase Block Size to 100MB',
                    controversy: 'high',
                    requiredConsensus: 90
                },
                pow: {
                    name: 'Switch to Proof-of-Stake',
                    controversy: 'extreme',
                    requiredConsensus: 95
                },
                centralize: {
                    name: 'Centralize Development Control',
                    controversy: 'extreme',
                    requiredConsensus: 98
                }
            };

            const proposal = proposals[change];
            const avgSupport = (miners + nodes + users) / 3;

            // Nodes have veto power - if nodes < 50%, proposal dies
            if (nodes < 50) {
                return {
                    status: 'rejected',
                    title: '❌ Proposal Rejected by Nodes',
                    description: 'Nodes rejected the change! Even with strong miner and user support, nodes enforce Bitcoin\'s rules.',
                    details: `
                        <strong>Why it failed:</strong><br>
                        • Nodes have <strong>veto power</strong> - they validate all blocks<br>
                        • With only ${nodes}% node support, the new blocks would be rejected<br>
                        • Miners who create blocks with new rules would waste electricity<br>
                        • The proposal dies, no matter what miners or users want<br><br>
                        <em style="color: var(--accent-green);">This is decentralization in action: No single group can force changes.</em>
                    `
                };
            }

            // Users have ultimate power - if users < 50%, Bitcoin forks
            if (users < 50) {
                return {
                    status: 'forked',
                    title: '🔀 Bitcoin Forks Into Two Chains',
                    description: 'Users rejected the change! The network splits into two separate cryptocurrencies.',
                    details: `
                        <strong>What happens:</strong><br>
                        • ${users}% user support isn't enough for consensus<br>
                        • Pro-change faction creates a fork (new chain)<br>
                        • Original Bitcoin continues with ${100-users}% of users<br>
                        • Two competing chains now exist<br>
                        • Market will decide which has more value<br><br>
                        <em style="color: var(--primary-orange);">Historical example: Bitcoin Cash forked in 2017. BTC kept dominance because users stayed with the original chain.</em>
                    `
                };
            }

            // Check if support meets required threshold for controversial changes
            if (avgSupport >= proposal.requiredConsensus && miners >= 85 && nodes >= 85 && users >= 85) {
                return {
                    status: 'passed',
                    title: '✅ Proposal Passes (Theoretically)',
                    description: 'With overwhelming consensus across all groups, the change could theoretically happen.',
                    details: `
                        <strong>Reality check:</strong><br>
                        • This level of consensus is <strong>extremely rare</strong> in Bitcoin<br>
                        • "${proposal.name}" would likely never get ${proposal.requiredConsensus}% support<br>
                        • Bitcoin's ossification (resistance to change) is a feature, not a bug<br>
                        • Core protocol changes are intentionally difficult<br><br>
                        <em style="color: var(--accent-green);">Bitcoin prioritizes stability and predictability over rapid changes.</em>
                    `
                };
            } else {
                return {
                    status: 'contentious',
                    title: '⚠️ Contentious Fork Risk',
                    description: 'Support is mixed. This creates a dangerous situation that could split the network.',
                    details: `
                        <strong>Current support:</strong><br>
                        • Miners: ${miners}%<br>
                        • Nodes: ${nodes}%<br>
                        • Users: ${users}%<br>
                        • Average: ${avgSupport.toFixed(1)}%<br><br>
                        <strong>Required for "${proposal.name}":</strong> ${proposal.requiredConsensus}%+ across all groups<br><br>
                        <strong>Outcome:</strong> Without overwhelming consensus, this change would be rejected or cause a contentious fork.<br><br>
                        <em style="color: var(--primary-orange);">Lesson: Bitcoin's high bar for consensus protects against reckless changes.</em>
                    `
                };
            }
        }

        function displayResult(result) {
            const colors = {
                rejected: '#f44336',
                forked: '#ff9800',
                passed: '#4caf50',
                contentious: '#ff9800'
            };

            governanceResult.style.display = 'block';
            governanceResult.style.background = `rgba(${result.status === 'passed' ? '76, 175, 80' : result.status === 'rejected' ? '244, 67, 54' : '255, 152, 0'}, 0.2)`;
            governanceResult.style.border = `2px solid ${colors[result.status]}`;

            resultTitle.textContent = result.title;
            resultTitle.style.color = colors[result.status];
            resultDescription.textContent = result.description;
            resultDetails.innerHTML = result.details;

            // Scroll to result
            setTimeout(() => {
                governanceResult.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        // ===== INTERACTIVE RETENTION ACTIVITIES =====

        // Activity 1: Power Distribution - Tap to Reveal
        (() => {
            const powerInsight = document.getElementById('power-insight');
            let revealedCount = 0;

            document.querySelectorAll('.power-card').forEach((card, i) => {
                const KEY = 'retention.s2m3.power.' + i;
                const answer = card.dataset.answer;

                card.addEventListener('click', () => {
                    if (card.classList.contains('revealed')) return;

                    card.classList.add('revealed');
                    card.innerHTML = `<div style="color: var(--text-light); text-align: left;">${answer}</div>`;
                    card.style.background = 'rgba(76, 175, 80, 0.15)';
                    card.style.borderColor = 'var(--accent-green)';
                    localStorage.setItem(KEY, 'revealed');

                    revealedCount++;
                    if (revealedCount === 4) {
                        powerInsight.innerHTML = '<strong style="color: var(--accent-green);">✓ Perfect!</strong> Bitcoin has no single point of control. Nodes enforce rules, users provide economic weight, miners secure blocks, and developers propose ideas. It\'s a system of checks and balances.';
                        powerInsight.style.color = 'var(--text-light)';
                        checkAllActivitiesComplete();
                    }
                });

                // Restore state
                if (localStorage.getItem(KEY)) {
                    card.classList.add('revealed');
                    card.innerHTML = `<div style="color: var(--text-light); text-align: left;">${answer}</div>`;
                    card.style.background = 'rgba(76, 175, 80, 0.15)';
                    card.style.borderColor = 'var(--accent-green)';
                    revealedCount++;
                }
            });

            // Check if all were already revealed
            if (revealedCount === 4) {
                powerInsight.innerHTML = '<strong style="color: var(--accent-green);">✓ Already completed</strong>';
                powerInsight.style.color = 'var(--text-light)';
            }
        })();

        // Activity 2: Block Size War - Prediction & Reveal
        (() => {
            const KEY = 'retention.blockSizeWar.v1';
            const chips = document.querySelectorAll('#block-size-war .chip');
            const revealBtn = document.getElementById('reveal-war');
            const result = document.getElementById('war-result');
            let choice = null;

            chips.forEach(chip => {
                chip.addEventListener('click', () => {
                    if (choice) return;
                    choice = chip.dataset.outcome;
                    chips.forEach(c => c.style.opacity = '0.5');
                    chip.style.opacity = '1';
                    chip.style.borderColor = 'var(--primary-orange)';
                });
            });

            revealBtn.addEventListener('click', () => {
                if (!choice) {
                    alert('Please make a prediction first!');
                    return;
                }

                result.style.display = 'block';

                if (choice === 'nodes-rejected') {
                    result.style.background = 'rgba(76, 175, 80, 0.2)';
                    result.style.border = '2px solid var(--accent-green)';
                    result.innerHTML = `
                        <div style="color: var(--accent-green); font-weight: 700; margin-bottom: 0.5rem;">✓ Correct!</div>
                        <div style="color: var(--text-light);">Despite 80%+ of miners signaling support for larger blocks, <strong>nodes refused to accept them</strong>. The miners eventually gave up and Bitcoin stayed at 1MB blocks. This proved that <strong>nodes, not miners, control the rules</strong>.</div>
                        <div style="margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 0.5rem; font-size: 0.9rem; color: var(--text-dim);">
                            📚 The miners who wanted bigger blocks created a fork called "Bitcoin Cash" (BCH), but it never gained the same value or adoption as Bitcoin.
                        </div>
                    `;
                    localStorage.setItem(KEY, 'passed');
                    checkAllActivitiesComplete();
                } else if (choice === 'miners-won') {
                    result.style.background = 'rgba(255, 107, 107, 0.2)';
                    result.style.border = '2px solid #ff6b6b';
                    result.innerHTML = `
                        <div style="color: #ff6b6b; font-weight: 700; margin-bottom: 0.5rem;">✗ Not quite</div>
                        <div style="color: var(--text-light);">Despite controlling 80%+ of hashrate, miners couldn't force the change. <strong>Nodes rejected their larger blocks</strong>, and Bitcoin stayed at 1MB. This was a defining moment proving nodes control Bitcoin, not miners.</div>
                    `;
                } else {
                    result.style.background = 'rgba(255, 107, 107, 0.2)';
                    result.style.border = '2px solid #ff6b6b';
                    result.innerHTML = `
                        <div style="color: #ff6b6b; font-weight: 700; margin-bottom: 0.5rem;">✗ Close, but no</div>
                        <div style="color: var(--text-light);">There was no compromise. Nodes rejected the larger blocks entirely, and Bitcoin remained at 1MB. This proved that <strong>nodes have absolute veto power</strong> over rule changes.</div>
                    `;
                }

                revealBtn.disabled = true;
            });

            // Restore state
            if (localStorage.getItem(KEY)) {
                chips[1].style.borderColor = 'var(--accent-green)';
                chips[1].style.opacity = '1';
                chips[0].style.opacity = '0.5';
                chips[2].style.opacity = '0.5';
                result.style.display = 'block';
                result.style.background = 'rgba(76, 175, 80, 0.2)';
                result.innerHTML = '<div style="color: var(--accent-green);">✓ Already completed</div>';
                revealBtn.disabled = true;
            }
        })();

        // Activity 3: 51% Attack Simulator
        (() => {
            const KEY = 'retention.attack51.v1';
            const slider = document.getElementById('hashrate-slider');
            const display = document.getElementById('hashrate-display');
            const attackBtn = document.getElementById('attempt-attack');
            const resultDiv = document.getElementById('attack-result');

            slider.addEventListener('input', (e) => {
                display.textContent = e.target.value + '%';
            });

            attackBtn.addEventListener('click', () => {
                const hashrate = parseInt(slider.value);

                if (hashrate < 51) {
                    resultDiv.style.background = 'rgba(255, 107, 107, 0.2)';
                    resultDiv.style.border = '2px solid #ff6b6b';
                    resultDiv.innerHTML = `
                        <div style="color: #ff6b6b; text-align: center;">
                            <strong>❌ Attack Failed</strong><br>
                            <span style="font-size: 0.9rem;">You need at least 51% hashrate to mine blocks consistently. Even then, you can't change the rules!</span>
                        </div>
                    `;
                } else {
                    resultDiv.style.background = 'rgba(76, 175, 80, 0.2)';
                    resultDiv.style.border = '2px solid var(--accent-green)';
                    resultDiv.innerHTML = `
                        <div style="text-align: center; color: var(--text-light);">
                            <div style="margin-bottom: 1rem;">⛏️ Mining blocks with 42M cap...</div>
                            <div style="margin-bottom: 1rem; color: #ff6b6b;"><strong>🚫 REJECTED BY NODES</strong></div>
                            <div style="font-size: 0.95rem; color: var(--text-dim);">
                                Your blocks are being mined successfully, but <strong>every node rejects them</strong> because they break the 21M rule. Your mined blocks are orphaned and worthless. You wasted electricity and got nothing.
                            </div>
                            <div style="margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 0.5rem; font-size: 0.85rem; color: var(--accent-green);">
                                ✓ <strong>Lesson:</strong> 51% lets you reorganize recent transactions (double-spend), but you <strong>cannot</strong> change consensus rules like the 21M cap. Nodes enforce the rules absolutely.
                            </div>
                        </div>
                    `;
                    localStorage.setItem(KEY, 'passed');
                    attackBtn.disabled = true;
                    checkAllActivitiesComplete();
                }
            });

            // Restore state
            if (localStorage.getItem(KEY)) {
                resultDiv.style.background = 'rgba(76, 175, 80, 0.2)';
                resultDiv.innerHTML = '<div style="color: var(--accent-green); text-align: center;">✓ Already completed</div>';
                attackBtn.disabled = true;
            }
        })();

        // Check if all activities are complete
        function checkAllActivitiesComplete() {
            const activity1 = document.querySelectorAll('.power-card.revealed').length === 4;
            const activity2 = localStorage.getItem('retention.blockSizeWar.v1');
            const activity3 = localStorage.getItem('retention.attack51.v1');

            if (activity1 && activity2 && activity3) {
                saveProgress();

                // Show completion banner
                document.getElementById('completion-banner').style.display = 'block';

                // Scroll to completion banner
                setTimeout(() => {
                    document.getElementById('completion-banner').scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 500);
            }
        }

        function saveProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            if (!progress.completedModules.includes('curious-2-3')) {
                progress.completedModules.push('curious-2-3');
            }

            // Mark Stage 2 as complete
            if (!progress.completedStages) {
                progress.completedStages = [];
            }
            if (!progress.completedStages.includes('curious-2')) {
                progress.completedStages.push('curious-2');
            }

            // Award badge
            if (!progress.badges) {
                progress.badges = [];
            }
            if (!progress.badges.includes('bitcoin-fundamentals')) {
                progress.badges.push('bitcoin-fundamentals');
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'curious';
            progress.currentStage = 3;
            progress.currentModule = 1;

            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        function checkProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');
            const completedModules = progress.completedModules || [];

            if (completedModules.includes('curious-2-3')) {
                document.getElementById('completion-banner').style.display = 'block';

                const notice = document.createElement('div');
                notice.style.background = 'rgba(76, 175, 80, 0.2)';
                notice.style.padding = '1rem';
                notice.style.borderRadius = '0.5rem';
                notice.style.color = 'var(--accent-green)';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '2rem';
                notice.textContent = '✓ You\'ve already completed this module and earned your Stage 2 badge!';

                document.querySelector('.container').insertBefore(notice, document.querySelector('.content-section'));
            }
        }

        checkProgress();
        checkAllActivitiesComplete();
    </script>
    </body>
</html>
