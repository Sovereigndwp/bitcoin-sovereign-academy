<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin's Rules | The Curious Path</title>
    <meta name="description" content="Understand the 21 million supply cap, halving events, and difficulty adjustment that make Bitcoin unique.">

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--primary-orange);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .module-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-green);
        }

        .module-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Content Sections */
        .content-section {
            padding: 2.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section:last-of-type {
            border-bottom: none;
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-orange);
        }

        .content-section h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--primary-orange);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        /* Supply Schedule */
        .supply-schedule {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .supply-schedule h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .supply-chart {
            height: 300px;
            position: relative;
            background: rgba(247, 147, 26, 0.05);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .chart-line {
            width: 100%;
            height: 100%;
        }

        .era-timeline {
            display: grid;
            gap: 1rem;
            margin-top: 2rem;
        }

        .era-item {
            background: rgba(247, 147, 26, 0.1);
            border-left: 4px solid var(--primary-orange);
            border-radius: 0.5rem;
            padding: 1rem;
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 1rem;
            align-items: center;
        }

        .era-number {
            width: 50px;
            height: 50px;
            background: var(--primary-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .era-info h4 {
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .era-info p {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 0;
        }

        .era-reward {
            text-align: right;
            font-weight: 700;
            color: var(--accent-green);
            font-size: 1.1rem;
        }

        /* Halving Countdown */
        .halving-countdown {
            background: linear-gradient(135deg, rgba(247, 147, 26, 0.3), rgba(247, 147, 26, 0.1));
            border: 3px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .halving-countdown h3 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .countdown-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .stat-box {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        /* Difficulty Adjustment */
        .difficulty-viz {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .difficulty-viz h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
        }

        .scenario-grid {
            display: grid;
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .scenario {
            background: rgba(247, 147, 26, 0.1);
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .scenario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .scenario-title {
            font-weight: 700;
            color: var(--primary-orange);
            font-size: 1.1rem;
        }

        .scenario-icon {
            font-size: 2rem;
        }

        .scenario-steps {
            display: grid;
            gap: 0.75rem;
        }

        .step {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .step-number {
            background: var(--primary-orange);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-text {
            flex: 1;
            font-size: 0.95rem;
            color: var(--text-dim);
        }

        /* Rule Cards */
        .rule-cards {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .rule-card {
            background: var(--secondary-dark);
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .rule-card:hover {
            border-color: var(--primary-orange);
        }

        .rule-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .rule-icon {
            font-size: 2rem;
        }

        .rule-header h3 {
            color: var(--primary-orange);
            margin: 0;
        }

        /* Key Takeaways */
        .takeaways {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .takeaways h3 {
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .takeaways ul {
            list-style: none;
            padding-left: 0;
        }

        .takeaways li {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .takeaways li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: 700;
        }

        /* Quiz */
        .quiz-container {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-container h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .quiz-question {
            margin-bottom: 2rem;
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }

        .quiz-option {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.selected {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
        }

        .quiz-submit {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1.5rem;
        }

        .quiz-submit:hover {
            background: #ff8c00;
        }

        .quiz-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-btn:hover {
            background: #ff8c00;
            transform: translateX(5px);
        }

        .nav-btn.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        .nav-btn-secondary:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
            transform: translateX(-5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .module-title-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .era-item {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .era-reward {
                text-align: center;
            }

            .countdown-stats {
                grid-template-columns: 1fr;
            }

            .module-navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="/">Home</a> →
                <a href="/paths/curious/">The Curious Path</a> →
                <a href="/paths/curious/stage-2/">Stage 2</a> →
                <span>Module 2</span>
            </div>
            <div class="module-title-section">
                <h1>Bitcoin's Rules</h1>
                <div class="module-meta">
                    <span>⏱️ 20 minutes</span>
                    <span>📊 Charts</span>
                    <span>📝 Quiz included</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Introduction -->
            <section class="content-section">
                <h2>The Code is Law</h2>
                <p>
                    Bitcoin's most remarkable feature isn't technology—it's <strong>predictability</strong>. Unlike central banks
                    that can change monetary policy on a whim, Bitcoin's rules are set in code and enforced by mathematics. These rules
                    can only change if the entire network agrees—which makes them effectively unchangeable.
                </p>
                <p>
                    Three core rules define Bitcoin's monetary policy: <strong>(1)</strong> the 21 million supply cap,
                    <strong>(2)</strong> the halving schedule, and <strong>(3)</strong> difficulty adjustment. Let's understand each one.
                </p>
            </section>

            <!-- Rule 1: 21 Million Cap -->
            <section class="content-section">
                <h2>Rule #1: The 21 Million Supply Cap</h2>
                <p>
                    Bitcoin will only ever have <strong>21 million coins</strong>. Not 21 million "for now"—21 million forever.
                    This is hardcoded into Bitcoin's protocol and cannot be changed without breaking Bitcoin itself.
                </p>

                <div class="supply-schedule">
                    <h3>📈 Bitcoin Supply Schedule (2009-2140)</h3>

                    <div class="supply-chart">
                        <svg viewBox="0 0 800 250" class="chart-line">
                            <!-- Grid lines -->
                            <line x1="50" y1="200" x2="750" y2="200" stroke="rgba(247, 147, 26, 0.2)" stroke-width="1"/>
                            <line x1="50" y1="150" x2="750" y2="150" stroke="rgba(247, 147, 26, 0.2)" stroke-width="1"/>
                            <line x1="50" y1="100" x2="750" y2="100" stroke="rgba(247, 147, 26, 0.2)" stroke-width="1"/>
                            <line x1="50" y1="50" x2="750" y2="50" stroke="rgba(247, 147, 26, 0.2)" stroke-width="1"/>

                            <!-- Axes -->
                            <line x1="50" y1="10" x2="50" y2="210" stroke="#f7931a" stroke-width="2"/>
                            <line x1="50" y1="210" x2="750" y2="210" stroke="#f7931a" stroke-width="2"/>

                            <!-- Supply curve (logarithmic approach to 21M) -->
                            <path d="M 50 210 Q 200 150, 300 80 T 600 30 L 750 25"
                                  fill="none"
                                  stroke="#4caf50"
                                  stroke-width="3"/>

                            <!-- Labels -->
                            <text x="25" y="215" fill="#999" font-size="12">0M</text>
                            <text x="20" y="155" fill="#999" font-size="12">10M</text>
                            <text x="15" y="55" fill="#999" font-size="12">21M</text>

                            <text x="40" y="235" fill="#999" font-size="12">2009</text>
                            <text x="250" y="235" fill="#999" font-size="12">2024</text>
                            <text x="450" y="235" fill="#999" font-size="12">2050</text>
                            <text x="700" y="235" fill="#999" font-size="12">2140</text>

                            <!-- Asymptote line -->
                            <line x1="50" y1="25" x2="750" y2="25" stroke="rgba(244, 67, 54, 0.5)" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="650" y="20" fill="#f44336" font-size="12" font-weight="700">21M Cap</text>
                        </svg>
                    </div>

                    <p style="text-align: center; color: var(--text-dim); margin-top: 1rem;">
                        The supply curve approaches 21 million asymptotically—getting infinitely close but never exceeding it.
                    </p>
                </div>

                <h3>Why 21 Million?</h3>
                <p>
                    Satoshi Nakamoto chose 21 million somewhat arbitrarily, but the key insight was choosing <em>any</em> fixed number.
                    The specific amount matters less than the fact that it's <strong>knowable, verifiable, and unchangeable</strong>.
                </p>
                <p>
                    As of 2024, about <strong>19.7 million Bitcoin</strong> have been mined (94% of total supply). The remaining
                    ~1.3 million will be distributed over the next 116 years through mining rewards.
                </p>
            </section>

            <!-- Rule 2: The Halving -->
            <section class="content-section">
                <h2>Rule #2: The Halving (Programmed Scarcity)</h2>
                <p>
                    New Bitcoin enters circulation through mining rewards. But here's the ingenious part: <strong>the reward
                    gets cut in half every 210,000 blocks</strong> (approximately every 4 years). This is called "the halving."
                </p>

                <div class="era-timeline">
                    <div class="era-item">
                        <div class="era-number">1</div>
                        <div class="era-info">
                            <h4>Era 1: 2009-2012</h4>
                            <p>Genesis era. Most BTC created. Early adopters, miners with laptops.</p>
                        </div>
                        <div class="era-reward">50 BTC<br><span style="font-size: 0.8rem; color: var(--text-dim);">per block</span></div>
                    </div>

                    <div class="era-item">
                        <div class="era-number">2</div>
                        <div class="era-info">
                            <h4>Era 2: 2012-2016</h4>
                            <p>First halving. Bitcoin gains recognition. GPU mining emerges.</p>
                        </div>
                        <div class="era-reward">25 BTC<br><span style="font-size: 0.8rem; color: var(--text-dim);">per block</span></div>
                    </div>

                    <div class="era-item">
                        <div class="era-number">3</div>
                        <div class="era-info">
                            <h4>Era 3: 2016-2020</h4>
                            <p>Second halving. Institutional interest grows. ASIC mining dominates.</p>
                        </div>
                        <div class="era-reward">12.5 BTC<br><span style="font-size: 0.8rem; color: var(--text-dim);">per block</span></div>
                    </div>

                    <div class="era-item">
                        <div class="era-number">4</div>
                        <div class="era-info">
                            <h4>Era 4: 2020-2024</h4>
                            <p>Third halving. Corporate treasuries adopt Bitcoin. Lightning Network scales.</p>
                        </div>
                        <div class="era-reward">6.25 BTC<br><span style="font-size: 0.8rem; color: var(--text-dim);">per block</span></div>
                    </div>

                    <div class="era-item" style="border-left-color: var(--accent-green);">
                        <div class="era-number" style="background: var(--accent-green);">5</div>
                        <div class="era-info">
                            <h4>Era 5: 2024-2028 (Current)</h4>
                            <p>Fourth halving. Nation-states enter. Only 3.125 BTC per block.</p>
                        </div>
                        <div class="era-reward" style="color: var(--accent-green);">3.125 BTC<br><span style="font-size: 0.8rem; color: var(--text-dim);">per block</span></div>
                    </div>

                    <div class="era-item" style="opacity: 0.6;">
                        <div class="era-number" style="background: var(--text-dim);">6+</div>
                        <div class="era-info">
                            <h4>Future Eras: 2028-2140</h4>
                            <p>Rewards continue halving every 4 years until reaching ~0.00000001 BTC around 2140.</p>
                        </div>
                        <div class="era-reward" style="color: var(--text-dim);">→ 0<br><span style="font-size: 0.8rem; color: var(--text-dim);">asymptotically</span></div>
                    </div>
                </div>

                <!-- Halving Countdown -->
                <div class="halving-countdown">
                    <h3>⏰ Next Halving</h3>
                    <p style="color: var(--text-dim);">The 5th halving is estimated to occur around April 2028</p>

                    <div class="countdown-stats">
                        <div class="stat-box">
                            <div class="stat-value">~4 years</div>
                            <div class="stat-label">Time Remaining</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">~210,000</div>
                            <div class="stat-label">Blocks Between Halvings</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">1.5625 BTC</div>
                            <div class="stat-label">Reward After Next Halving</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">~32</div>
                            <div class="stat-label">Total Halvings Until 2140</div>
                        </div>
                    </div>
                </div>

                <h3>Why Halving Matters</h3>
                <p>
                    The halving creates <strong>programmed scarcity</strong>. As the supply of new Bitcoin decreases, demand must
                    increase for price to remain stable. Historically, Bitcoin's price has increased significantly in the 12-18 months
                    following each halving event.
                </p>
                <p>
                    More importantly, the halving demonstrates Bitcoin's <strong>predictable monetary policy</strong>. You can calculate
                    exactly how many Bitcoin will exist in 2050, 2100, or 2140. Try doing that with the US dollar.
                </p>

                <!-- Stock-to-Flow Interactive Demo -->
                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(247, 147, 26, 0.05)); border: 2px solid var(--primary-orange); border-radius: 12px; padding: 2rem; margin: 2rem 0; text-align: center;">
                    <span style="font-size: 3rem; display: block; margin-bottom: 1rem;">📊</span>
                    <h3 style="color: var(--primary-orange); margin-bottom: 1rem; font-size: 1.5rem;">Explore Bitcoin's Scarcity Model</h3>
                    <p style="margin-bottom: 1.5rem; line-height: 1.6;">
                        See how Bitcoin's <strong>stock-to-flow ratio</strong> compares to gold and other assets.
                        Understand why halvings make Bitcoin progressively scarcer over time.
                    </p>
                    <a href="/interactive-demos/stock-to-flow.html" style="display: inline-block; padding: 1rem 2rem; background: linear-gradient(135deg, #f7931a, #ffb347); color: white; text-decoration: none; border-radius: 999px; font-weight: 700; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(247, 147, 26, 0.3);">
                        Launch Stock-to-Flow Demo →
                    </a>
                    <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-dim);">
                        Interactive calculator with live charts showing Bitcoin's increasing scarcity
                    </p>
                </div>
            </section>

            <!-- Rule 3: Difficulty Adjustment -->
            <section class="content-section">
                <h2>Rule #3: Difficulty Adjustment (The 10-Minute Heartbeat)</h2>
                <p>
                    Bitcoin targets a <strong>10-minute average</strong> for block production. But as more miners join (or leave)
                    the network, blocks would be found faster (or slower). The difficulty adjustment solves this.
                </p>

                <div class="difficulty-viz">
                    <h3>⚙️ How Difficulty Adjustment Works</h3>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem;">
                        Every 2,016 blocks (~2 weeks), Bitcoin measures how fast blocks were found and adjusts difficulty to maintain
                        the 10-minute target.
                    </p>

                    <div class="scenario-grid">
                        <!-- Scenario 1: More miners join -->
                        <div class="scenario">
                            <div class="scenario-header">
                                <span class="scenario-title">Scenario 1: More Miners Join ⬆️</span>
                                <span class="scenario-icon">📈</span>
                            </div>
                            <div class="scenario-steps">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <div class="step-text">Hashrate increases (more miners = more computing power)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <div class="step-text">Blocks start being found faster than 10 minutes (maybe 8 minutes average)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <div class="step-text">After 2,016 blocks, Bitcoin notices blocks came too fast</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">4</div>
                                    <div class="step-text">Difficulty increases (requires more leading zeros in hash)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">5</div>
                                    <div class="step-text">Block time returns to ~10 minutes average</div>
                                </div>
                            </div>
                        </div>

                        <!-- Scenario 2: Miners leave -->
                        <div class="scenario">
                            <div class="scenario-header">
                                <span class="scenario-title">Scenario 2: Miners Leave ⬇️</span>
                                <span class="scenario-icon">📉</span>
                            </div>
                            <div class="scenario-steps">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <div class="step-text">Hashrate decreases (fewer miners = less computing power)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <div class="step-text">Blocks start being found slower than 10 minutes (maybe 13 minutes average)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <div class="step-text">After 2,016 blocks, Bitcoin notices blocks came too slowly</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">4</div>
                                    <div class="step-text">Difficulty decreases (requires fewer leading zeros in hash)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">5</div>
                                    <div class="step-text">Block time returns to ~10 minutes average</div>
                                </div>
                            </div>
                        </div>

                        <!-- Real Example -->
                        <div class="scenario" style="background: rgba(76, 175, 80, 0.1); border-left: 4px solid var(--accent-green);">
                            <div class="scenario-header">
                                <span class="scenario-title">Real Example: China Mining Ban (2021)</span>
                                <span class="scenario-icon">🌍</span>
                            </div>
                            <div class="scenario-steps">
                                <div class="step">
                                    <div class="step-number">📅</div>
                                    <div class="step-text"><strong>May 2021:</strong> China bans Bitcoin mining, representing ~50% of global hashrate</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">⚠️</div>
                                    <div class="step-text">Hashrate drops from 180 EH/s to 90 EH/s almost overnight</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">⏱️</div>
                                    <div class="step-text">Block times increase to 14-20 minutes (network slows down)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">⚙️</div>
                                    <div class="step-text">Difficulty automatically adjusts downward by 28% (largest drop ever)</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">✅</div>
                                    <div class="step-text">Block times return to 10 minutes. Bitcoin continues operating normally</div>
                                </div>
                                <div class="step">
                                    <div class="step-number">🎯</div>
                                    <div class="step-text"><strong>Lesson:</strong> Even losing half the network didn't stop Bitcoin. Difficulty adjusted automatically.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>Why This Is Crucial</h3>
                <p>
                    Difficulty adjustment ensures Bitcoin's predictability. Without it, a surge in mining would produce all
                    21 million Bitcoin in just a few years. Or if miners left, blocks would take hours to find and the network
                    would freeze.
                </p>
                <p>
                    The adjustment makes Bitcoin <strong>resilient</strong>. Miners can join, leave, get banned by countries,
                    or face natural disasters—and Bitcoin keeps ticking along, one block every 10 minutes, like clockwork.
                </p>
            </section>

            <!-- Summary of Rules -->
            <section class="content-section">
                <h2>Why These Rules Matter</h2>

                <div class="rule-cards">
                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-icon">💎</span>
                            <h3>Absolute Scarcity</h3>
                        </div>
                        <p>
                            The 21 million cap + halving schedule create the first truly scarce digital asset. Unlike gold (more can
                            be mined), fiat (more can be printed), or even other cryptocurrencies (most have unlimited supply),
                            Bitcoin's scarcity is mathematically guaranteed.
                        </p>
                    </div>

                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-icon">📊</span>
                            <h3>Predictability</h3>
                        </div>
                        <p>
                            You can calculate exactly how many Bitcoin will exist at any future date. This predictability allows for
                            long-term planning and economic calculation—something impossible with central bank currencies that change
                            policy based on politics.
                        </p>
                    </div>

                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-icon">🛡️</span>
                            <h3>Self-Regulation</h3>
                        </div>
                        <p>
                            Difficulty adjustment makes Bitcoin antifragile. The network automatically adapts to changes in mining
                            power, maintaining security and consistency without human intervention or governance.
                        </p>
                    </div>

                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-icon">⚖️</span>
                            <h3>No Central Control</h3>
                        </div>
                        <p>
                            These rules are enforced by math and code, not by people or institutions. No central bank can print more
                            Bitcoin. No government can speed up the halving. The rules apply equally to everyone, everywhere, forever.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Key Takeaways -->
            <section class="content-section">
                <div class="takeaways">
                    <h3>🎯 Key Takeaways</h3>
                    <ul>
                        <li>Bitcoin's supply is capped at exactly 21 million coins—hardcoded and unchangeable</li>
                        <li>The halving cuts mining rewards in half every ~4 years, creating programmed scarcity</li>
                        <li>We're currently in Era 5 (2024-2028) with 3.125 BTC per block reward</li>
                        <li>Difficulty adjusts every 2,016 blocks to maintain 10-minute average block time</li>
                        <li>Difficulty adjustment makes Bitcoin resilient to hashrate changes (miners joining/leaving)</li>
                        <li>Real example: Bitcoin survived losing 50% of hashrate (China ban) with automatic adjustment</li>
                        <li>These rules create absolute scarcity, predictability, and censorship resistance</li>
                        <li>Unlike fiat currencies, Bitcoin's monetary policy cannot be changed by humans</li>
                    </ul>
                </div>
            </section>

            <!-- Quiz -->
            <section class="content-section">
                <!-- Interactive Retention Activities -->
                <div class="retention-section">
                    <h3 style="text-align: center; margin-bottom: 2rem; color: var(--text-light);">✨ Master Bitcoin's Rules</h3>

                    <!-- Activity 1: Halving Timeline Slider -->
                    <section id="halving-timeline" class="card" style="padding: 2rem; margin-bottom: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);">📅 The Halving Schedule</h4>
                        <p style="margin-bottom: 1.5rem; color: var(--text-dim);">Slide through Bitcoin's eras to see how rewards decrease:</p>
                        <input id="era-slider" type="range" min="1" max="5" value="5" style="width: 100%; margin: 1rem 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 1.5rem;">
                            <span style="font-size: 0.85rem; color: var(--text-dim);">2009</span>
                            <span id="era-year" style="font-weight: 600; color: var(--primary-orange);">2024</span>
                            <span style="font-size: 0.85rem; color: var(--text-dim);">2140</span>
                        </div>
                        <div id="era-info" style="padding: 1.5rem; background: rgba(247, 147, 26, 0.1); border-radius: 0.75rem; border-left: 4px solid var(--primary-orange);">
                            <h5 style="margin-bottom: 0.75rem; color: var(--text-light);" id="era-title">Era 5 (2024-2028)</h5>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1rem;">
                                <div>
                                    <div style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 0.25rem;">Block Reward:</div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-orange);" id="era-reward">3.125 BTC</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 0.25rem;">% of Total Mined:</div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent-green);" id="era-pct">~94%</div>
                                </div>
                            </div>
                            <p style="font-size: 0.9rem; color: var(--text-dim); margin: 0;" id="era-desc">5th halving complete. Reward = 3.125 BTC. Most Bitcoin already mined.</p>
                        </div>
                        <button id="confirm-halving" style="background: var(--primary-orange); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; width: 100%; margin-top: 1rem;">I Understand the Halving</button>
                    </section>

                    <!-- Activity 2: Tap-to-Reveal (Bitcoin's Unchangeable Rules) -->
                    <section style="margin-bottom: 2rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);">💡 Bitcoin's Ironclad Rules</h4>
                        <p style="margin-bottom: 1rem; color: var(--text-dim);">Test your recall:</p>
                        <div class="grid" style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
                            <article class="card tapcard" data-answer="21 million BTC — hard-coded and impossible to change without breaking consensus" style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">What is Bitcoin's <strong>maximum supply</strong>?</article>
                            <article class="card tapcard" data-answer="Every ~4 years (210,000 blocks), mining rewards get cut in half. Ensures predictable scarcity." style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">What is <strong>the halving</strong>?</article>
                            <article class="card tapcard" data-answer="Every 2,016 blocks (~2 weeks). Keeps block time at ~10 minutes regardless of hashpower changes." style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">How often does <strong>difficulty adjust</strong>?</article>
                            <article class="card tapcard" data-answer="3.125 BTC per block (Era 5, after April 2024 halving). Down from 50 BTC in 2009." style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">Current <strong>mining reward</strong>?</article>
                        </div>
                    </section>

                    <!-- Activity 3: Resilience Scenario (China Mining Ban) -->
                    <section id="resilience-test" class="card" style="padding: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);">🎯 Resilience Test: China Mining Ban (2021)</h4>
                        <p style="margin-bottom: 1.5rem; color: var(--text-light);">China banned Bitcoin mining, removing ~50% of global hashrate overnight. What happened?</p>
                        <div class="chips" style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1.5rem;">
                            <button class="chip" data-outcome="stopped" style="padding: 0.75rem 1.25rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); cursor: pointer; border-radius: 2rem; transition: all 0.2s;">Bitcoin stopped working</button>
                            <button class="chip" data-outcome="vote" style="padding: 0.75rem 1.25rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); cursor: pointer; border-radius: 2rem; transition: all 0.2s;">Miners voted on emergency fix</button>
                            <button class="chip" data-outcome="adjusted" style="padding: 0.75rem 1.25rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); cursor: pointer; border-radius: 2rem; transition: all 0.2s;">Difficulty auto-adjusted, continued normally</button>
                        </div>
                        <div id="resilience-viz" style="display: none; margin-bottom: 1.5rem;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                                <div style="text-align: center; padding: 1rem; background: rgba(247, 147, 26, 0.05); border-radius: 0.5rem;">
                                    <div style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 0.5rem;">Hashrate Drop</div>
                                    <div style="font-size: 1.75rem; font-weight: 700; color: #ff6b6b;">-50%</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: rgba(247, 147, 26, 0.05); border-radius: 0.5rem;">
                                    <div style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 0.5rem;">Difficulty Adjustment</div>
                                    <div style="font-size: 1.75rem; font-weight: 700; color: var(--accent-green);">-28%</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: rgba(247, 147, 26, 0.05); border-radius: 0.5rem;">
                                    <div style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 0.5rem;">Network Status</div>
                                    <div style="font-size: 1.75rem; font-weight: 700; color: var(--accent-green);">✓ Online</div>
                                </div>
                            </div>
                        </div>
                        <p id="resilience-fb" style="padding: 1rem; background: rgba(247, 147, 26, 0.05); border-radius: 0.5rem; min-height: 60px; color: var(--text-dim);"></p>
                    </section>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="module-1.html" class="nav-btn nav-btn-secondary">← Previous: How Bitcoin Works</a>
                <a href="module-3.html" class="nav-btn disabled" id="next-module">Next: Who Controls Bitcoin? →</a>
            </nav>
        </div>
    </main>

    <script>
        // ===== INTERACTIVE RETENTION ACTIVITIES =====

        // Activity 1: Halving Timeline Slider
        (() => {
            const KEY = 'retention.halvingTimeline.v1';
            const slider = document.getElementById('era-slider');
            const title = document.getElementById('era-title');
            const reward = document.getElementById('era-reward');
            const pct = document.getElementById('era-pct');
            const confirmBtn = document.getElementById('confirm-halving');

            const eras = {
                1: { year: '2009-2012', reward: '50 BTC', pct: '~50%', desc: 'The genesis era - massive rewards, few miners' },
                2: { year: '2012-2016', reward: '25 BTC', pct: '~75%', desc: 'First halving - Bitcoin gaining traction' },
                3: { year: '2016-2020', reward: '12.5 BTC', pct: '~87.5%', desc: 'Second halving - institutional interest grows' },
                4: { year: '2020-2024', reward: '6.25 BTC', pct: '~93.75%', desc: 'Third halving - mainstream adoption begins' },
                5: { year: '2024-2028', reward: '3.125 BTC', pct: '~94%', desc: 'Fourth halving - scarcity intensifies' }
            };

            function updateEra(val) {
                const era = eras[val];
                title.textContent = `Era ${val} (${era.year})`;
                reward.textContent = era.reward;
                pct.textContent = era.pct;
            }

            slider.addEventListener('input', (e) => updateEra(e.target.value));
            updateEra(5); // Initialize with current era

            confirmBtn.addEventListener('click', () => {
                const fb = confirmBtn.nextElementSibling || (() => {
                    const div = document.createElement('div');
                    div.style.cssText = 'margin-top: 1rem; padding: 1rem; background: rgba(76, 175, 80, 0.2); border-radius: 0.5rem; color: var(--accent-green); text-align: center;';
                    confirmBtn.parentNode.appendChild(div);
                    return div;
                })();

                fb.innerHTML = '✓ Excellent! You understand the halving schedule reduces inflation over time.';
                localStorage.setItem(KEY, 'passed');
                confirmBtn.disabled = true;
                checkAllActivitiesComplete();
            });

            // Restore state
            if (localStorage.getItem(KEY)) {
                confirmBtn.disabled = true;
                const fb = document.createElement('div');
                fb.style.cssText = 'margin-top: 1rem; padding: 1rem; background: rgba(76, 175, 80, 0.2); border-radius: 0.5rem; color: var(--accent-green); text-align: center;';
                fb.innerHTML = '✓ Already completed';
                confirmBtn.parentNode.appendChild(fb);
            }
        })();

        // Activity 2: Tap-to-Reveal Cards
        (() => {
            document.querySelectorAll('.tapcard').forEach((el, i) => {
                const KEY = 'retention.s2m2.tapcard.' + i;
                const answer = el.dataset.answer;

                el.addEventListener('click', () => {
                    if (el.classList.contains('revealed')) return;
                    el.classList.add('revealed');
                    el.innerHTML = `<div style="color: var(--text-light);">${answer}</div>`;
                    el.style.background = 'rgba(76, 175, 80, 0.15)';
                    el.style.borderColor = 'var(--accent-green)';
                    localStorage.setItem(KEY, 'revealed');
                    checkAllActivitiesComplete();
                });

                // Restore state
                if (localStorage.getItem(KEY)) {
                    el.classList.add('revealed');
                    el.innerHTML = `<div style="color: var(--text-light);">${answer}</div>`;
                    el.style.background = 'rgba(76, 175, 80, 0.15)';
                    el.style.borderColor = 'var(--accent-green)';
                }
            });
        })();

        // Activity 3: China Mining Ban Resilience Scenario
        (() => {
            const KEY = 'retention.resilienceTest.v1';
            const chips = document.querySelectorAll('#resilience-test .chip');
            const viz = document.getElementById('resilience-viz');
            let choice = null;

            chips.forEach(chip => {
                chip.addEventListener('click', () => {
                    if (choice) return; // Already answered

                    choice = chip.dataset.outcome;
                    chips.forEach(c => c.style.opacity = '0.5');
                    chip.style.opacity = '1';
                    chip.style.borderColor = 'var(--primary-orange)';

                    const fb = chip.parentNode.nextElementSibling || (() => {
                        const div = document.createElement('div');
                        div.style.cssText = 'margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.5rem; text-align: center;';
                        chip.parentNode.parentNode.appendChild(div);
                        return div;
                    })();

                    if (choice === 'adjusted') {
                        fb.style.background = 'rgba(76, 175, 80, 0.2)';
                        fb.style.color = 'var(--accent-green)';
                        fb.innerHTML = '<strong>✓ Correct!</strong><br>Bitcoin\'s difficulty adjustment kicked in automatically. No votes, no emergency meetings - just code executing as designed. The network continued producing blocks every ~10 minutes.';
                        viz.style.display = 'block';
                        localStorage.setItem(KEY, 'passed');
                        checkAllActivitiesComplete();
                    } else if (choice === 'stopped') {
                        fb.style.background = 'rgba(255, 107, 107, 0.2)';
                        fb.style.color = '#ff6b6b';
                        fb.innerHTML = '<strong>✗ Not quite.</strong><br>Bitcoin kept running! The difficulty adjustment algorithm automatically compensated for the lost hashrate. This is what makes Bitcoin resilient.';
                    } else {
                        fb.style.background = 'rgba(255, 107, 107, 0.2)';
                        fb.style.color = '#ff6b6b';
                        fb.innerHTML = '<strong>✗ Close, but no.</strong><br>There was no voting needed. The difficulty adjustment is automatic - it\'s part of Bitcoin\'s consensus rules. No human intervention required.';
                    }
                });
            });

            // Restore state
            if (localStorage.getItem(KEY)) {
                chips.forEach(c => {
                    if (c.dataset.outcome === 'adjusted') {
                        c.style.borderColor = 'var(--accent-green)';
                    }
                    c.style.opacity = c.dataset.outcome === 'adjusted' ? '1' : '0.5';
                });
                viz.style.display = 'block';
                const fb = document.createElement('div');
                fb.style.cssText = 'margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.5rem; text-align: center; background: rgba(76, 175, 80, 0.2); color: var(--accent-green);';
                fb.innerHTML = '✓ Already completed';
                chips[0].parentNode.parentNode.appendChild(fb);
            }
        })();

        // Check if all activities are complete
        function checkAllActivitiesComplete() {
            const activity1 = localStorage.getItem('retention.halvingTimeline.v1');
            const activity2Completed = document.querySelectorAll('.tapcard.revealed').length === document.querySelectorAll('.tapcard').length;
            const activity3 = localStorage.getItem('retention.resilienceTest.v1');

            if (activity1 && activity2Completed && activity3) {
                saveProgress();
                document.getElementById('next-module').classList.remove('disabled');

                // Show completion message
                const existing = document.querySelector('.completion-banner');
                if (!existing) {
                    const banner = document.createElement('div');
                    banner.className = 'completion-banner';
                    banner.style.cssText = 'position: fixed; bottom: 2rem; right: 2rem; background: linear-gradient(135deg, var(--accent-green), #45a049); color: white; padding: 1.5rem 2rem; border-radius: 1rem; box-shadow: 0 8px 24px rgba(0,0,0,0.3); z-index: 1000; animation: slideIn 0.3s ease-out;';
                    banner.innerHTML = '<strong>🎉 All Activities Complete!</strong><br>You can now proceed to Module 3.';
                    document.body.appendChild(banner);

                    setTimeout(() => banner.remove(), 5000);
                }
            }
        }

        function saveProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            if (!progress.completedModules) {
                progress.completedModules = [];
            }

            if (!progress.completedModules.includes('curious-2-2')) {
                progress.completedModules.push('curious-2-2');
            }

            progress.lastActivity = new Date().toISOString();
            progress.path = 'curious';
            progress.currentStage = 2;
            progress.currentModule = 3;

            localStorage.setItem('learningProgress', JSON.stringify(progress));
        }

        function checkProgress() {
            const progress = JSON.parse(localStorage.getItem('learningProgress') || '{}');
            const completedModules = progress.completedModules || [];

            if (completedModules.includes('curious-2-2')) {
                document.getElementById('next-module').classList.remove('disabled');

                const notice = document.createElement('div');
                notice.style.background = 'rgba(76, 175, 80, 0.2)';
                notice.style.padding = '1rem';
                notice.style.borderRadius = '0.5rem';
                notice.style.color = 'var(--accent-green)';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '2rem';
                notice.textContent = '✓ You\'ve already completed this module. Feel free to review or move on!';

                document.querySelector('.container').insertBefore(notice, document.querySelector('.content-section'));
            }
        }

        checkProgress();
        checkAllActivitiesComplete();
    </script>
    </body>
</html>
