<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What is Money? | The Curious Path</title>
    <meta name="description" content="Discover why money exists, what makes it work, and the 6 essential properties every good money needs.">

    <!-- Progress Manager -->
    <script src="/js/progress-manager.js"></script>

    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --accent-green: #4caf50;
            --text-light: #e0e0e0;
            --text-dim: #b3b3b3; /* 4.6:1 contrast - WCAG AA compliant */
            --border-color: rgba(247, 147, 26, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Module Header */
        .module-header {
            background: var(--secondary-dark);
            border-bottom: 2px solid var(--primary-orange);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .breadcrumb {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .breadcrumb a {
            color: var(--primary-orange);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .module-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title-section h1 {
            font-size: 1.75rem;
            color: var(--accent-green);
        }

        .module-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Content Sections */
        .content-section {
            padding: 2rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section:last-of-type {
            border-bottom: none;
        }

        .content-section h2 {
            font-size: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--primary-orange);
        }

        .content-section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 0.75rem 0;
        }

        .timeline-item {
            display: grid;
            grid-template-columns: 120px 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: var(--secondary-dark);
            border-left: 3px solid var(--primary-orange);
            border-radius: 0.5rem;
        }

        .timeline-year {
            font-weight: 700;
            color: var(--primary-orange);
            font-size: 0.9rem;
        }

        .timeline-content h4 {
            margin-bottom: 0.5rem;
            color: var(--accent-green);
        }

        .timeline-content p {
            font-size: 0.95rem;
            color: var(--text-dim);
            margin-bottom: 0;
        }

        /* Properties Comparison */
        .properties-grid {
            display: grid;
            gap: 1rem;
            margin: 1rem 0;
        }

        .property-card {
            background: var(--secondary-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1rem;
        }

        .property-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .property-icon {
            font-size: 1.75rem;
        }

        .property-header h3 {
            font-size: 1.1rem;
            color: var(--primary-orange);
        }

        .property-description {
            color: var(--text-dim);
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .comparison-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .comparison-label {
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .comparison-item {
            text-align: center;
            padding: 0.5rem;
            background: rgba(247, 147, 26, 0.1);
            border-radius: 0.5rem;
        }

        .rating {
            display: flex;
            justify-content: center;
            gap: 2px;
            margin-top: 0.25rem;
        }

        .rating-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-dim);
        }

        .rating-dot.filled {
            background: var(--accent-green);
        }

        /* Quiz Section */
        .quiz-container {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .quiz-container h3 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }

        .quiz-question {
            margin-bottom: 1.5rem;
        }

        .quiz-question:last-child {
            margin-bottom: 0;
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-light);
        }

        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }

        .quiz-option {
            background: rgba(247, 147, 26, 0.1);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.selected {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--accent-green);
            background: rgba(76, 175, 80, 0.2);
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .quiz-feedback {
            margin-top: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
        }

        .quiz-submit {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .quiz-submit:hover {
            background: #ff8c00;
        }

        .quiz-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Navigation */
        .module-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-orange);
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .nav-btn:hover {
            background: #ff8c00;
            transform: translateX(5px);
        }

        .nav-btn.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .nav-btn-secondary {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-light);
        }

        .nav-btn-secondary:hover {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
            transform: none;
        }

        /* Key Takeaways */
        .takeaways {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--accent-green);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .takeaways h3 {
            color: var(--accent-green);
            margin-bottom: 0.75rem;
        }

        .takeaways ul {
            list-style: none;
            padding-left: 0;
        }

        .takeaways li {
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .takeaways li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--accent-green);
            font-weight: 700;
        }

        /* Tooltip for vocabulary */
        .vocab-tooltip {
            position: relative;
            color: var(--primary-orange);
            border-bottom: 2px dotted var(--primary-orange);
            cursor: help;
        }

        .vocab-tooltip .tooltip-text {
            visibility: hidden;
            background-color: var(--secondary-dark);
            color: var(--text-light);
            text-align: center;
            border-radius: 6px;
            padding: 0.75rem 1rem;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            border: 2px solid var(--primary-orange);
            font-size: 0.9rem;
            font-weight: normal;
        }

        .vocab-tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--primary-orange) transparent transparent transparent;
        }

        .vocab-tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .timeline-item {
                grid-template-columns: 1fr;
            }

            .comparison-row {
                grid-template-columns: repeat(2, 1fr);
            }

            .module-title-section {
                flex-direction: column;
                align-items: flex-start;
            }

            .module-navigation {
                flex-direction: column;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }

            .vocab-tooltip .tooltip-text {
                white-space: normal;
                width: 200px;
            }
        }

        /* ===== ACCESSIBILITY ENHANCEMENTS ===== */

        /* WCAG 2.5.5: Touch Target Size */
        button, a, [role="button"], .nav-btn, .quiz-option, .quiz-submit {
            min-height: 44px;
            min-width: 44px;
        }

        /* Exception for inline text links */
        p a, li a {
            min-height: auto;
            min-width: auto;
            padding: 0.25rem 0;
        }

        /* WCAG 2.4.7: Focus Visible */
        *:focus-visible {
            outline: 3px solid var(--primary-orange, #f7931a);
            outline-offset: 2px;
        }

        button:focus-visible, a:focus-visible {
            outline: 3px solid var(--primary-orange, #f7931a);
            outline-offset: 4px;
            box-shadow: 0 0 0 4px rgba(247, 147, 26, 0.2);
        }

        /* WCAG 2.3.3: Animation from Interactions */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Prevent horizontal scrolling on small screens */
        @media (max-width: 360px) {
            body {
                overflow-x: hidden;
            }

            .container {
                padding: 0 1rem;
            }
        }
    </style>
    <script src="/js/subdomain-access-control.js"></script>
    <script src="/js/module-gate-subdomain.js"></script>
    <link rel="stylesheet" href="/css/icons.css">
</head>
<body>
    <!-- Skip Link for Accessibility (WCAG 2.4.1) -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Module Header -->
    <header class="module-header">
        <div class="container">
            <nav aria-label="Breadcrumb" class="breadcrumb">
                <ol style="list-style: none; display: flex; gap: 0.5rem; margin: 0; padding: 0;">
                    <li><a href="/">Home</a></li>
                    <li aria-hidden="true">‚Üí</li>
                    <li><a href="/paths/curious/">The Curious Path</a></li>
                    <li aria-hidden="true">‚Üí</li>
                    <li><a href="/paths/curious/stage-1/">Stage 1</a></li>
                    <li aria-hidden="true">‚Üí</li>
                    <li aria-current="page">Module 1</li>
                </ol>
            </nav>
            <div class="module-title-section">
                <h1>What is Money?</h1>
                <div class="module-meta">
                    <span><span data-icon="timer"></span> 15 minutes</span>
                    <span>üìù Quiz included</span>
                    <span><span data-icon="game"></span> Interactive</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <div class="container">
            <!-- The Island: Opening Hook -->
            <section class="content-section">
                <h2>The Island</h2>

                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.05), rgba(76, 175, 80, 0.05));
                            border-left: 4px solid var(--primary-orange);
                            border-radius: 12px;
                            padding: 2rem;
                            margin: 2rem 0;">

                    <p style="font-size: 1.2rem; line-height: 1.8; margin-bottom: 1.5rem; font-weight: 600; color: var(--primary-orange);">
                        50 people. One island. No rescue coming.
                    </p>

                    <p style="font-size: 1.05rem; line-height: 1.7; margin-bottom: 1rem;">
                        You're a fisherman. Every morning, you wade into the water and catch fish.
                        On a good day, you bring back 10 fish.
                    </p>

                    <p style="font-size: 1.05rem; line-height: 1.7; margin-bottom: 1rem;">
                        Others have different skills. There's a farmer growing vegetables, a builder
                        constructing shelters, a doctor who can treat injuries, a toolmaker crafting
                        fishing spears and knives.
                    </p>

                    <p style="font-size: 1.05rem; line-height: 1.7; margin-bottom: 1.5rem;">
                        Everyone needs to eat. Nobody can do everything. Trade is essential for survival.
                    </p>

                    <div style="background: var(--secondary-dark);
                                border-radius: 8px;
                                padding: 1.5rem;
                                margin: 2rem 0;">

                        <p style="font-weight: 600; color: var(--primary-orange); margin-bottom: 1rem;">
                            <span data-icon="clock"></span> Day 1: Simple
                        </p>
                        <p style="color: var(--text-dim); margin-bottom: 1.5rem; line-height: 1.6;">
                            You catch fish. The builder needs food. You trade 3 fish for help
                            building your shelter. Easy.
                        </p>

                        <p style="font-weight: 600; color: var(--primary-orange); margin-bottom: 1rem;">
                            <span data-icon="clock"></span> Day 7: Problem
                        </p>
                        <p style="color: var(--text-dim); margin-bottom: 1.5rem; line-height: 1.6;">
                            You've been fishing all week. You now have 70 fish total. But fish rot
                            quickly in the tropical heat. By Day 3, the fish you caught on Day 1 are
                            already spoiling. Your work from earlier in the week is becoming worthless.
                        </p>

                        <p style="font-weight: 600; color: var(--primary-orange); margin-bottom: 1rem;">
                            <span data-icon="clock"></span> Day 30: Bigger Problem
                        </p>
                        <p style="color: var(--text-dim); line-height: 1.6;">
                            The doctor just saved the farmer's life after a snake bite. Everyone agrees
                            she deserves payment. But the doctor only works when people get sick or
                            injured. She might go weeks without providing a service. How does she eat
                            during those 29 days when nobody needs her?
                        </p>
                    </div>

                    <p style="font-size: 1.15rem;
                              font-weight: 600;
                              color: var(--accent-green);
                              text-align: center;
                              margin-top: 2rem;
                              padding: 1.5rem;
                              background: rgba(76, 175, 80, 0.1);
                              border-radius: 8px;
                              line-height: 1.7;">
                        You've just discovered the problem every human civilization has faced:<br>
                        How do you save your work for later?
                    </p>
                </div>

                <p style="font-size: 1.1rem; margin-top: 2rem; line-height: 1.7;">
                    This is what money solves. Not just trading. <strong style="color: var(--primary-orange);">Storing work across time.</strong>
                </p>

                <p style="font-size: 1.05rem; color: var(--text-dim); line-height: 1.7;">
                    On our island, people tried everything. Seashells. Carved stones. Dried fish.
                    Some worked better than others. Over thousands of years of trial and error,
                    humanity figured out what makes money actually work.
                </p>
            </section>

            <!-- Work to Money Interactive Demo -->
            <section class="content-section">
                <h2><span data-icon="lightning"></span> Money: Your Time Capsule for Work</h2>
                <p style="font-size: 1.1rem; margin-bottom: 1.5rem; line-height: 1.7;">
                    Money isn't value itself. It's <strong style="color: var(--primary-orange);">the tool that captures your work</strong> and lets you use it later.
                    Here's how this works.
                </p>

                <style>
                    .energy-demo-container {
                        background: #0a0a0a;
                        border: 2px solid var(--primary-orange);
                        border-radius: 1rem;
                        padding: 1rem;
                        margin: 1.5rem 0;
                    }

                    .demo-header {
                        text-align: center;
                        margin-bottom: 1rem;
                    }

                    .demo-title {
                        color: var(--primary-orange);
                        font-size: 1.4rem;
                        margin-bottom: 0.5rem;
                    }

                    .demo-subtitle {
                        color: var(--text-dim);
                        font-size: 0.95rem;
                    }

                    .progress-bar-demo {
                        width: 100%;
                        height: 6px;
                        background: #333;
                        border-radius: 3px;
                        margin: 15px 0;
                        overflow: hidden;
                    }

                    .progress-fill-demo {
                        height: 100%;
                        background: linear-gradient(90deg, #f7931a, #ffb347);
                        width: 16.67%;
                        transition: width 0.5s ease;
                        border-radius: 3px;
                    }

                    .frames-storyboard {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                        gap: 1rem;
                        margin-bottom: 1.5rem;
                    }

                    .demo-frame {
                        background: #111;
                        border: 2px solid #333;
                        border-radius: 12px;
                        padding: 1rem;
                        text-align: center;
                        transition: all 0.3s ease;
                        opacity: 0.4;
                        transform: scale(0.95);
                        position: relative;
                        min-height: 280px;
                    }

                    .demo-frame.active {
                        border-color: var(--primary-orange);
                        opacity: 1;
                        transform: scale(1);
                        box-shadow: 0 0 30px rgba(247, 147, 26, 0.3);
                    }

                    .demo-frame.completed {
                        border-color: var(--accent-green);
                        opacity: 0.8;
                    }

                    .frame-number-demo {
                        position: absolute;
                        top: -12px;
                        left: 15px;
                        background: var(--primary-orange);
                        color: #000;
                        width: 24px;
                        height: 24px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: bold;
                        font-size: 0.9rem;
                    }

                    .demo-frame.completed .frame-number-demo {
                        background: var(--accent-green);
                        color: #fff;
                    }

                    .frame-title-demo {
                        color: var(--primary-orange);
                        font-size: 1rem;
                        margin-bottom: 0.5rem;
                        font-weight: bold;
                    }

                    .frame-subtitle-demo {
                        color: var(--text-dim);
                        font-size: 0.75rem;
                        margin-bottom: 1rem;
                    }

                    .demo-area {
                        background: #0a0a0a;
                        border: 1px solid #222;
                        border-radius: 8px;
                        padding: 1rem;
                        margin: 0.75rem 0;
                        min-height: 120px;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                    }

                    .work-btn {
                        background: var(--primary-orange);
                        color: #000;
                        border: none;
                        padding: 0.6rem 1.2rem;
                        font-size: 0.85rem;
                        font-weight: bold;
                        border-radius: 6px;
                        cursor: pointer;
                        margin: 0.5rem;
                        transition: all 0.3s ease;
                    }

                    .work-btn:hover {
                        background: #ffb347;
                        transform: scale(1.05);
                    }

                    .bucket {
                        width: 50px;
                        height: 65px;
                        background: #333;
                        border: 2px solid #888;
                        border-radius: 0 0 12px 12px;
                        position: relative;
                        margin: 0.5rem;
                        overflow: hidden;
                    }

                    .bucket.bitcoin {
                        border-color: var(--primary-orange);
                        background: #1a1a1a;
                    }

                    .bucket-fill {
                        position: absolute;
                        bottom: 0;
                        width: 100%;
                        background: linear-gradient(180deg, var(--primary-orange), #ff8c00);
                        transition: height 0.5s ease;
                        border-radius: 0 0 10px 10px;
                    }

                    .energy-bar {
                        width: 80px;
                        height: 12px;
                        background: #333;
                        border: 1px solid var(--primary-orange);
                        border-radius: 8px;
                        margin: 0.5rem;
                        overflow: hidden;
                    }

                    .energy-fill {
                        height: 100%;
                        background: linear-gradient(90deg, var(--primary-orange), #ffb347);
                        width: 0%;
                        transition: width 0.3s ease;
                        border-radius: 8px;
                    }

                    .leak {
                        position: absolute;
                        bottom: -5px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 8px;
                        height: 8px;
                        background: var(--primary-orange);
                        border-radius: 50%;
                        animation: drip 2s infinite;
                        opacity: 0;
                    }

                    .bucket.leaking .leak {
                        opacity: 1;
                    }

                    @keyframes drip {
                        0% { transform: translateX(-50%) translateY(0); opacity: 1; }
                        100% { transform: translateX(-50%) translateY(30px); opacity: 0; }
                    }

                    .tooltip-demo {
                        background: #222;
                        border: 1px solid var(--primary-orange);
                        border-radius: 6px;
                        padding: 0.6rem 0.9rem;
                        margin: 0.5rem 0;
                        font-size: 0.8rem;
                        color: var(--primary-orange);
                    }

                    .frame-nav {
                        position: absolute;
                        bottom: 8px;
                        left: 50%;
                        transform: translateX(-50%);
                        display: flex;
                        gap: 8px;
                    }

                    .frame-arrow {
                        background: #333;
                        color: #fff;
                        border: 1px solid #555;
                        width: 28px;
                        height: 28px;
                        border-radius: 50%;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.9rem;
                        transition: all 0.3s ease;
                    }

                    .frame-arrow:hover {
                        background: var(--primary-orange);
                        color: #000;
                        border-color: var(--primary-orange);
                    }

                    .frame-arrow:disabled {
                        background: #222;
                        color: #666;
                        cursor: not-allowed;
                    }

                    .item {
                        background: #222;
                        border: 2px solid #555;
                        border-radius: 8px;
                        padding: 0.5rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        position: relative;
                    }

                    .item:hover {
                        border-color: var(--primary-orange);
                        transform: translateY(-3px);
                    }

                    .item.purchased {
                        border-color: var(--primary-orange);
                        background: #1a1a0a;
                    }

                    .item-cost {
                        position: absolute;
                        top: -8px;
                        right: -8px;
                        background: var(--primary-orange);
                        color: #000;
                        border-radius: 50%;
                        width: 24px;
                        height: 24px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: bold;
                        font-size: 0.7rem;
                    }
                </style>

                <div class="energy-demo-container">
                    <div class="demo-header">
                        <div class="demo-title"><span data-icon="lightning"></span> Money: Your Time Capsule for Work</div>
                        <div class="demo-subtitle">See how money captures your work and lets you use it anytime, anywhere</div>
                        <div class="progress-bar-demo">
                            <div class="progress-fill-demo" id="progressFillDemo"></div>
                        </div>
                    </div>

                    <div class="frames-storyboard">
                        <!-- Frame 1: Work Creates Value -->
                        <div class="demo-frame active" id="demoFrame1">
                            <div class="frame-number-demo">1</div>
                            <div class="frame-title-demo">üí™ Work Creates Value</div>
                            <div class="frame-subtitle-demo">Click to work and earn money</div>

                            <div class="demo-area">
                                <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
                                    <div style="text-align: center;">
                                        <div style="font-size: 2rem;">üë§</div>
                                        <p style="color: #888; font-size: 0.7rem; margin: 4px 0;">You</p>
                                    </div>

                                    <div style="text-align: center;">
                                        <div style="font-size: 1.5rem; color: var(--primary-orange);">‚Üí</div>
                                        <p style="color: var(--text-dim); font-size: 0.65rem; margin: 2px 0;">Work</p>
                                    </div>

                                    <div style="text-align: center;">
                                        <div style="font-size: 2rem;" id="moneyPile">üí∞</div>
                                        <p style="color: var(--accent-green); font-size: 0.7rem; margin: 4px 0;" id="moneyCount">$0</p>
                                    </div>
                                </div>

                                <!-- Bucket visualization for Frame 1 -->
                                <div style="display: flex; justify-content: center; margin-top: 1rem;">
                                    <div class="bucket bitcoin">
                                        <div class="bucket-fill" id="workBucketFill" style="height: 0%;"></div>
                                    </div>
                                </div>

                                <button class="work-btn" id="workBtnDemo">üí™ Work & Earn</button>
                            </div>

                            <div class="tooltip-demo">Your time and effort turn into money you can save.</div>

                            <div class="frame-nav">
                                <button class="frame-arrow" onclick="prevFrameDemo()" disabled>‚Üê</button>
                                <button class="frame-arrow" onclick="nextFrameDemo()">‚Üí</button>
                            </div>
                        </div>

                        <!-- Frame 2: Save Across Time -->
                        <div class="demo-frame" id="demoFrame2">
                            <div class="frame-number-demo">2</div>
                            <div class="frame-title-demo"><span data-icon="clock"></span> Save Across Time</div>
                            <div class="frame-subtitle-demo">Your work waits for you</div>

                            <div class="demo-area">
                                <div style="display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 1rem;">
                                    <div style="text-align: center;">
                                        <div style="font-size: 1.5rem;">üìÖ</div>
                                        <p style="color: var(--primary-orange); font-size: 0.8rem; font-weight: bold;" id="currentYear">2024</p>
                                    </div>

                                    <div style="text-align: center;">
                                        <div style="font-size: 2.5rem; color: var(--accent-green);">üí∞</div>
                                        <p style="color: var(--accent-green); font-size: 0.75rem; margin: 4px 0;">$500 saved</p>
                                    </div>

                                    <div style="text-align: center;">
                                        <div style="font-size: 1.5rem;">üìÖ</div>
                                        <p style="color: var(--primary-orange); font-size: 0.8rem; font-weight: bold;" id="futureYear">2025</p>
                                    </div>
                                </div>

                                <!-- Bucket visualization for Frame 2 -->
                                <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
                                    <div class="bucket bitcoin">
                                        <div class="bucket-fill" id="savingsBucketFill" style="height: 100%;"></div>
                                    </div>
                                </div>

                                <button class="work-btn" id="timePassBtnDemo">‚è≠Ô∏è Jump to Next Year</button>
                            </div>

                            <div class="tooltip-demo">Good money preserves your work so you can use it later. Next week, next year, or decades from now.</div>

                            <div class="frame-nav">
                                <button class="frame-arrow" onclick="prevFrameDemo()">‚Üê</button>
                                <button class="frame-arrow" onclick="nextFrameDemo()">‚Üí</button>
                            </div>
                        </div>

                        <!-- Frame 3: Trade Across Space -->
                        <div class="demo-frame" id="demoFrame3">
                            <div class="frame-number-demo">3</div>
                            <div class="frame-title-demo"><span data-icon="globe"></span> Trade Across Space</div>
                            <div class="frame-subtitle-demo">Exchange your work with anyone, anywhere</div>

                            <div class="demo-area">
                                <!-- Bucket visualization for Frame 3 -->
                                <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
                                    <div class="bucket bitcoin">
                                        <div class="bucket-fill" id="spendingBucketFill" style="height: 100%;"></div>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 1rem;">
                                    <div class="item" onclick="buyItem(this, 'üçï', 100)" style="text-align: center;">
                                        <div style="font-size: 1.5rem;">üçï</div>
                                        <div class="item-cost">$100</div>
                                        <p style="font-size: 0.65rem; color: #888; margin: 2px 0;">Pizza</p>
                                    </div>
                                    <div class="item" onclick="buyItem(this, 'üìö', 200)" style="text-align: center;">
                                        <div style="font-size: 1.5rem;">üìö</div>
                                        <div class="item-cost">$200</div>
                                        <p style="font-size: 0.65rem; color: #888; margin: 2px 0;">Books</p>
                                    </div>
                                    <div class="item" onclick="buyItem(this, '‚úàÔ∏è', 500)" style="text-align: center;">
                                        <div style="font-size: 1.5rem;">‚úàÔ∏è</div>
                                        <div class="item-cost">$500</div>
                                        <p style="font-size: 0.65rem; color: #888; margin: 2px 0;">Travel</p>
                                    </div>
                                </div>

                                <div style="text-align: center; padding: 0.5rem; background: rgba(76, 175, 80, 0.1); border-radius: 6px;">
                                    <p style="color: var(--accent-green); font-size: 0.75rem; margin: 0;">Your Balance: <span id="balanceDisplay" style="font-weight: bold;">$500</span></p>
                                </div>
                            </div>

                            <div class="tooltip-demo">Money lets you trade your work for anyone else's work, even across continents.</div>

                            <div class="frame-nav">
                                <button class="frame-arrow" onclick="prevFrameDemo()">‚Üê</button>
                                <button class="frame-arrow" onclick="restartEnergyDemo()">üîÑ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    let currentFrameDemo = 1;
                    let workCountDemo = 0;
                    let moneyEarnedDemo = 0;
                    let currentYearDemo = 2024;
                    let balanceDemo = 500;
                    let frameCompletedDemo = [false, false, false];

                    // Frame 1: Work functionality
                    document.getElementById('workBtnDemo').addEventListener('click', function() {
                        workCountDemo++;
                        moneyEarnedDemo += 100;

                        const moneyPile = document.getElementById('moneyPile');
                        const moneyCount = document.getElementById('moneyCount');

                        // Animate earning
                        moneyPile.style.transform = 'scale(1.3)';
                        setTimeout(() => moneyPile.style.transform = 'scale(1)', 200);

                        moneyCount.textContent = '$' + moneyEarnedDemo;

                        // Animate bucket fill (fills up as you work)
                        const bucketFill = document.getElementById('workBucketFill');
                        bucketFill.style.height = Math.min((workCountDemo / 5) * 100, 100) + '%';

                        if (workCountDemo >= 5) {
                            completeFrameDemo(1);
                        }
                    });

                    // Frame 2: Time passage
                    document.getElementById('timePassBtnDemo').addEventListener('click', function() {
                        currentYearDemo++;
                        document.getElementById('currentYear').textContent = currentYearDemo;
                        document.getElementById('futureYear').textContent = currentYearDemo + 1;

                        // Animate year change
                        const yearEl = document.getElementById('currentYear');
                        yearEl.style.color = 'var(--accent-green)';
                        setTimeout(() => yearEl.style.color = 'var(--primary-orange)', 300);

                        if (currentYearDemo >= 2027) {
                            completeFrameDemo(2);
                        }
                    });

                    // Frame 3: Trade functionality
                    function buyItem(element, emoji, cost) {
                        if (element.classList.contains('purchased')) return;
                        if (balanceDemo >= cost) {
                            balanceDemo -= cost;
                            document.getElementById('balanceDisplay').textContent = '$' + balanceDemo;
                            element.classList.add('purchased');

                            // Animate bucket drain (empties as you spend)
                            const bucketFill = document.getElementById('spendingBucketFill');
                            bucketFill.style.height = (balanceDemo / 500 * 100) + '%';

                            // Animate purchase
                            element.style.transform = 'scale(1.1)';
                            setTimeout(() => element.style.transform = 'scale(1)', 200);

                            if (document.querySelectorAll('.item.purchased').length >= 2) {
                                completeFrameDemo(3);
                            }
                        }
                    }

                    function completeFrameDemo(frameNum) {
                        if (frameCompletedDemo[frameNum - 1]) return;
                        frameCompletedDemo[frameNum - 1] = true;
                        document.getElementById('demoFrame' + frameNum).classList.add('completed');
                        updateProgressDemo();
                    }

                    function updateProgressDemo() {
                        const completedCount = frameCompletedDemo.filter(Boolean).length;
                        const progressFill = document.getElementById('progressFillDemo');
                        progressFill.style.width = (completedCount / 3 * 100) + '%';
                    }

                    function nextFrameDemo() {
                        if (currentFrameDemo < 3) {
                            document.getElementById('demoFrame' + currentFrameDemo).classList.remove('active');
                            currentFrameDemo++;
                            document.getElementById('demoFrame' + currentFrameDemo).classList.add('active');
                        }
                    }

                    function prevFrameDemo() {
                        if (currentFrameDemo > 1) {
                            document.getElementById('demoFrame' + currentFrameDemo).classList.remove('active');
                            currentFrameDemo--;
                            document.getElementById('demoFrame' + currentFrameDemo).classList.add('active');
                        }
                    }

                    function restartEnergyDemo() {
                        // Reset all variables
                        currentFrameDemo = 1;
                        workCountDemo = 0;
                        moneyEarnedDemo = 0;
                        currentYearDemo = 2024;
                        balanceDemo = 500;
                        frameCompletedDemo = [false, false, false];

                        // Reset UI
                        document.getElementById('moneyCount').textContent = '$0';
                        document.getElementById('currentYear').textContent = '2024';
                        document.getElementById('futureYear').textContent = '2025';
                        document.getElementById('balanceDisplay').textContent = '$500';

                        // Reset bucket fill levels
                        document.getElementById('workBucketFill').style.height = '0%';
                        document.getElementById('savingsBucketFill').style.height = '100%';
                        document.getElementById('spendingBucketFill').style.height = '100%';

                        document.querySelectorAll('.item').forEach(item => {
                            item.classList.remove('purchased');
                        });

                        document.querySelectorAll('.demo-frame').forEach((frame, index) => {
                            frame.classList.remove('active', 'completed');
                            if (index === 0) frame.classList.add('active');
                        });

                        updateProgressDemo();
                    }
                </script>
            </section>

            <!-- Socratic Reflection -->
            <section class="content-section">
                <div class="takeaways">
                    <h3>üí≠ Reflection Question</h3>
                    <p style="font-size: 1.15rem; font-weight: 600; color: var(--primary-orange); margin: 1.5rem 0; line-height: 1.7; text-align: center;">
                        You've seen how money captures your work and lets you use it across time and space.<br>
                        But what makes some forms of money work better than others?
                    </p>
                </div>
            </section>

            <!-- Conceptual Bridge -->
            <section class="content-section">
                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(76, 175, 80, 0.1)); border: 2px solid var(--primary-orange); border-radius: 1rem; padding: 2rem; text-align: center; margin: 2rem 0;">
                    <h3 style="font-size: 1.5rem; color: var(--primary-orange); margin-bottom: 1rem;"><span data-icon="lightbulb"></span> The Human Pattern</h3>
                    <p style="font-size: 1.15rem; line-height: 1.7; color: var(--text-light); margin-bottom: 0;">
                        Back on our island, people experimented with different forms of money.<br>
                        Shells. Stones. Dried fish. Metal beads. None, flawless.<br>
                        <strong style="color: var(--primary-orange);">Zoom out a few thousand years. Accross continents and generations, people repeated the same cycle: test, fail, improve. In time, it became clear that the best money always shared the same traits.</strong>
                    </p>
                </div>
            </section>


            <!-- Interactive Evolution of Money Timeline -->
            <section class="content-section">
                <h2>The Evolution of Money</h2>
                <p style="margin-bottom: 1.5rem; line-height: 1.7;">
                    Money has evolved over thousands of years. From barter systems to digital currencies transferred globally in seconds.
                    Each era tried to solve the same problem: how do you save work across time without it rotting, breaking, or losing value?
                </p>
                <p style="color: var(--text-dim); line-height: 1.6;">Click each era to explore what worked and what didn't:</p>

                <style>
                    .interactive-timeline {
                        position: relative;
                        padding: 2rem 0;
                    }

                    .interactive-timeline::before {
                        content: '';
                        position: absolute;
                        left: 50%;
                        top: 0;
                        bottom: 0;
                        width: 4px;
                        background: linear-gradient(to bottom, var(--primary-orange), var(--accent-green));
                        transform: translateX(-50%);
                    }

                    .interactive-timeline-item {
                        position: relative;
                        margin: 2.5rem 0;
                        opacity: 0.8;
                        transition: all 0.3s ease;
                        cursor: pointer;
                    }

                    .interactive-timeline-item:hover {
                        opacity: 1;
                        transform: scale(1.02);
                    }

                    .interactive-timeline-item.active {
                        opacity: 1;
                        transform: scale(1.03);
                    }

                    .interactive-timeline-content {
                        background: var(--secondary-dark);
                        border-radius: 1rem;
                        padding: 1.5rem;
                        width: 45%;
                        position: relative;
                        border: 2px solid var(--border-color);
                        transition: all 0.3s ease;
                    }

                    .interactive-timeline-item:hover .interactive-timeline-content,
                    .interactive-timeline-item.active .interactive-timeline-content {
                        border-color: var(--primary-orange);
                        box-shadow: 0 4px 20px rgba(247, 147, 26, 0.2);
                    }

                    .interactive-timeline-item:nth-child(odd) .interactive-timeline-content {
                        margin-left: 55%;
                    }

                    .interactive-timeline-item:nth-child(even) .interactive-timeline-content {
                        margin-right: 55%;
                    }

                    .interactive-timeline-content::before {
                        content: '';
                        position: absolute;
                        top: 30px;
                        width: 0;
                        height: 0;
                        border: 12px solid transparent;
                    }

                    .interactive-timeline-item:nth-child(odd) .interactive-timeline-content::before {
                        left: -24px;
                        border-right-color: var(--border-color);
                    }

                    .interactive-timeline-item:nth-child(even) .interactive-timeline-content::before {
                        right: -24px;
                        border-left-color: var(--border-color);
                    }

                    .interactive-timeline-marker {
                        position: absolute;
                        left: 50%;
                        top: 30px;
                        width: 18px;
                        height: 18px;
                        background: var(--primary-orange);
                        border-radius: 50%;
                        transform: translateX(-50%);
                        z-index: 10;
                        transition: all 0.3s ease;
                        border: 3px solid var(--primary-dark);
                    }

                    .interactive-timeline-item:hover .interactive-timeline-marker,
                    .interactive-timeline-item.active .interactive-timeline-marker {
                        width: 24px;
                        height: 24px;
                        top: 27px;
                        box-shadow: 0 0 20px rgba(247, 147, 26, 0.6);
                    }

                    .era-title-interactive {
                        font-size: 1.3rem;
                        font-weight: bold;
                        color: var(--primary-orange);
                        margin-bottom: 0.5rem;
                    }

                    .era-period {
                        color: var(--text-dim);
                        font-size: 0.85rem;
                        margin-bottom: 1rem;
                        font-weight: 600;
                    }

                    .era-description {
                        color: var(--text-light);
                        margin-bottom: 1rem;
                        font-size: 0.95rem;
                        line-height: 1.5;
                    }

                    .era-details {
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                    }

                    .interactive-timeline-item.active .era-details {
                        max-height: 800px;
                    }

                    .qualities-section {
                        margin: 1rem 0;
                        padding: 1rem;
                        background: rgba(76, 175, 80, 0.05);
                        border-left: 3px solid var(--accent-green);
                        border-radius: 0.5rem;
                    }

                    .qualities-section h4 {
                        color: var(--accent-green);
                        margin-bottom: 0.75rem;
                        font-size: 1rem;
                    }

                    .quality-list-interactive {
                        list-style: none;
                        padding: 0;
                    }

                    .quality-list-interactive li {
                        color: var(--text-light);
                        margin-bottom: 0.5rem;
                        padding-left: 1.5rem;
                        position: relative;
                        font-size: 0.9rem;
                    }

                    .quality-list-interactive li::before {
                        content: '‚úì';
                        position: absolute;
                        left: 0;
                        color: var(--accent-green);
                        font-weight: 700;
                    }

                    .challenges-section {
                        margin: 1rem 0;
                        padding: 1rem;
                        background: rgba(244, 67, 54, 0.05);
                        border-left: 3px solid #ff6b6b;
                        border-radius: 0.5rem;
                    }

                    .challenges-section h4 {
                        color: #ff6b6b;
                        margin-bottom: 0.75rem;
                        font-size: 1rem;
                    }

                    .challenge-list-interactive {
                        list-style: none;
                        padding: 0;
                    }

                    .challenge-list-interactive li {
                        color: var(--text-light);
                        margin-bottom: 0.5rem;
                        padding-left: 1.5rem;
                        position: relative;
                        font-size: 0.9rem;
                    }

                    .challenge-list-interactive li::before {
                        content: '‚úó';
                        position: absolute;
                        left: 0;
                        color: #ff6b6b;
                        font-weight: 700;
                    }

                    .bitcoin-conclusion-box {
                        background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(76, 175, 80, 0.1));
                        border: 2px solid var(--primary-orange);
                        border-radius: 1.5rem;
                        padding: 2.5rem;
                        margin: 3rem 0;
                        text-align: center;
                    }

                    .bitcoin-conclusion-box h3 {
                        font-size: 2rem;
                        color: var(--primary-orange);
                        margin-bottom: 1rem;
                    }

                    .bitcoin-conclusion-box p {
                        font-size: 1.05rem;
                        color: var(--text-light);
                        margin-bottom: 2rem;
                    }

                    .bitcoin-qualities-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
                        gap: 1.5rem;
                        margin: 2rem 0;
                    }

                    .bitcoin-quality-card {
                        background: rgba(45, 45, 45, 0.6);
                        padding: 1.5rem;
                        border-radius: 0.75rem;
                        border: 1px solid var(--border-color);
                        transition: all 0.3s ease;
                        text-align: left;
                    }

                    .bitcoin-quality-card:hover {
                        border-color: var(--primary-orange);
                        transform: translateY(-3px);
                        box-shadow: 0 4px 15px rgba(247, 147, 26, 0.2);
                    }

                    .bitcoin-quality-card h4 {
                        color: var(--primary-orange);
                        margin-bottom: 0.75rem;
                        font-size: 1.05rem;
                    }

                    .bitcoin-quality-card p {
                        color: var(--text-dim);
                        font-size: 0.9rem;
                        margin: 0;
                        line-height: 1.5;
                    }

                    .conclusion-final {
                        font-size: 1.1rem;
                        color: var(--accent-green);
                        margin-top: 2rem;
                        font-weight: 600;
                        line-height: 1.6;
                    }

                    @media (max-width: 768px) {
                        .interactive-timeline::before {
                            left: 30px;
                        }

                        .interactive-timeline-content {
                            width: calc(100% - 80px);
                            margin-left: 80px !important;
                            margin-right: 0 !important;
                        }

                        .interactive-timeline-content::before {
                            left: -24px !important;
                            right: auto !important;
                            border-right-color: var(--border-color) !important;
                            border-left-color: transparent !important;
                        }

                        .interactive-timeline-marker {
                            left: 30px;
                        }

                        .bitcoin-qualities-grid {
                            grid-template-columns: 1fr;
                        }
                    }
                </style>

                <div class="interactive-timeline">
                    <div class="interactive-timeline-item" onclick="toggleTimelineActive(this)">
                        <div class="interactive-timeline-marker"></div>
                        <div class="interactive-timeline-content">
                            <div class="era-title-interactive">ü§ù Barter System</div>
                            <div class="era-period">10,000 BCE - 3000 BCE</div>
                            <div class="era-description">
                                You grow wheat. Your neighbor makes pottery. You need a pot, she needs grain. Simple trade. But what if she doesn't want wheat today? You wait. Or you find someone who does, trade for something else, then trade again. Three trades just to get a pot.
                            </div>
                            <div class="era-details">
                                <div class="qualities-section">
                                    <h4>What Worked:</h4>
                                    <ul class="quality-list-interactive">
                                        <li>Simple and direct when wants align</li>
                                        <li>No middleman taking a cut</li>
                                        <li>Builds trust in small communities</li>
                                    </ul>
                                </div>
                                <div class="challenges-section">
                                    <h4>What Broke:</h4>
                                    <ul class="challenge-list-interactive">
                                        <li>Both people must want what the other has (rare)</li>
                                        <li>How many pots equal one cow? Nobody agrees</li>
                                        <li>Can't save your wheat for next year (it rots)</li>
                                        <li>Can't split a cow to buy bread</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-timeline-item" onclick="toggleTimelineActive(this)">
                        <div class="interactive-timeline-marker"></div>
                        <div class="interactive-timeline-content">
                            <div class="era-title-interactive">üêö Commodity Money</div>
                            <div class="era-period">3000 BCE - 600 BCE</div>
                            <div class="era-description">
                                People discovered something clever: use items everyone values. Salt preserves food. Cattle provide milk and labor. Shells are rare and beautiful. Everyone will accept these. Now you can trade wheat for salt today, and use that salt to buy tools next month. Progress.
                            </div>
                            <div class="era-details">
                                <div class="qualities-section">
                                    <h4>What Worked:</h4>
                                    <ul class="quality-list-interactive">
                                        <li>Useful beyond being money (eat the grain, use the salt)</li>
                                        <li>Everyone agrees these things have value</li>
                                        <li>Shells last longer than fish</li>
                                        <li>Small shells easier to carry than cows</li>
                                    </ul>
                                </div>
                                <div class="challenges-section">
                                    <h4>What Broke:</h4>
                                    <ul class="challenge-list-interactive">
                                        <li>Grain still rots. Your savings spoil</li>
                                        <li>Where do you store 100 cattle?</li>
                                        <li>Walking a cow 50 miles costs energy</li>
                                        <li>That shell is prettier than mine. Which is worth more?</li>
                                        <li>Can't make exact change with a cow</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-timeline-item" onclick="toggleTimelineActive(this)">
                        <div class="interactive-timeline-marker"></div>
                        <div class="interactive-timeline-content">
                            <div class="era-title-interactive"><span data-icon="money"></span> Metal Coins</div>
                            <div class="era-period">600 BCE - 1000 CE</div>
                            <div class="era-description">
                                The breakthrough. Someone melted gold into identical circles and stamped them with a king's seal. Every coin weighs the same. Every coin is pure gold. No arguing about which is better. You can melt one coin into ten smaller ones for change. Gold doesn't rust or rot. Your great-grandchildren can spend coins you save today.
                            </div>
                            <div class="era-details">
                                <div class="qualities-section">
                                    <h4>What Worked:</h4>
                                    <ul class="quality-list-interactive">
                                        <li>Every 1oz coin = exactly 1oz gold. No disputes</li>
                                        <li>Lasts 1000+ years without degrading</li>
                                        <li>Melt one big coin into 10 small ones perfectly</li>
                                        <li>King's stamp means it's real (government guarantee)</li>
                                        <li>Gold itself is valuable (jewelry, doesn't corrode)</li>
                                    </ul>
                                </div>
                                <div class="challenges-section">
                                    <h4>What Broke:</h4>
                                    <ul class="challenge-list-interactive">
                                        <li>$1 million in gold weighs 50 pounds. Try traveling with that</li>
                                        <li>Robbers know you're carrying wealth</li>
                                        <li>Sneaky people shave edges off, melt the shavings (free gold!)</li>
                                        <li>Mix in cheap metal, coat with gold. Looks real, isn't</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-timeline-item" onclick="toggleTimelineActive(this)">
                        <div class="interactive-timeline-marker"></div>
                        <div class="interactive-timeline-content">
                            <div class="era-title-interactive">üìú Paper Money</div>
                            <div class="era-period">1000 CE - 1971 CE</div>
                            <div class="era-description">
                                People and banks had a problem: storing everyone's gold was dangerous and expensive. The fix was paper receipts redeemable for gold. The receipt is lighter, easier to trade. When you want your gold back, return the paper. Genius. Until rulers realized they could print more receipts than they had gold.
                            </div>
                            <div class="era-details">
                                <div class="qualities-section">
                                    <h4>What Worked:</h4>
                                    <ul class="quality-list-interactive">
                                        <li>Fits in your pocket. $1 million weighs 2 pounds, not 50</li>
                                        <li>Count 100 bills faster than 100 coins</li>
                                        <li>Each bill is a promise: "We'll give you this much gold"</li>
                                        <li>$1, $5, $20 bills make exact change easy</li>
                                        <li>Counterfeiting laws built trust </li>
                                    </ul>
                                </div>
                                <div class="challenges-section">
                                    <h4>What Broke:</h4>
                                    <ul class="challenge-list-interactive">
                                        <li>Perfect fakes can fool anyone. Good luck spotting them</li>
                                        <li>Get wet? Burns? Torn? Your money is gone</li>
                                        <li>Government collapses? Your paper is worthless</li>
                                        <li>Everyone wants gold at once? Bank doesn't have enough</li>
                                        <li>The paper isn't valuable. Only the promise behind it matters</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-timeline-item" onclick="toggleTimelineActive(this)">
                        <div class="interactive-timeline-marker"></div>
                        <div class="interactive-timeline-content">
                            <div class="era-title-interactive">üíµ Fiat Currency</div>
                            <div class="era-period">1971 CE - Present</div>
                            <div class="era-description">
                                August 15, 1971. President Nixon makes an announcement: "We're closing the gold window." Translation: those paper receipts? They no longer represent gold. The promise is broken. Now money is worth whatever the government says it's worth. They call it "fiat" (Latin for "let it be done"). By decree. Because we said so.
                            </div>
                            <div class="era-details">
                                <div class="qualities-section">
                                    <h4>What Worked:</h4>
                                    <ul class="quality-list-interactive">
                                        <li>Government can create money when economy needs it (or they claim it does)</li>
                                        <li>Not limited by how much gold exists in the Earth</li>
                                        <li>Everyone still accepts it (out of habit and laws)</li>
                                        <li>Can be sent digitally through banks</li>
                                    </ul>
                                </div>
                                <div class="challenges-section">
                                    <h4>What Broke:</h4>
                                    <ul class="challenge-list-interactive">
                                        <li>Government prints more whenever convenient. Your savings buy less each year</li>
                                        <li>One group controls the money supply. You trust them, or else</li>
                                        <li>Dilute the money pool. Same dollars, less value per dollar</li>
                                        <li>Election coming? Print money. War? Print money. Crisis? Print money</li>
                                        <li>A 1971 dollar buys what 15 cents buys today</li>
                                        <li>The paper has zero inherent value. It's a promise with no backing</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-timeline-item" onclick="toggleTimelineActive(this)">
                        <div class="interactive-timeline-marker"></div>
                        <div class="interactive-timeline-content">
                            <div class="era-title-interactive">üí≥ Digital Fiat (Extension)</div>
                            <div class="era-period">1990s - Present</div>
                            <div class="era-description">
                                The internet arrives. Banks put everything online. You can now send money from your phone
                                instead of writing checks. Convenient? Absolutely. But look closer. It's still the same fiat
                                dollars the government prints. Just pixels on a screen instead of paper in your wallet.
                                The system didn't change. Only the interface did.
                            </div>
                            <div class="era-details">
                                <div class="qualities-section">
                                    <h4>What Got Better:</h4>
                                    <ul class="quality-list-interactive">
                                        <li>Pay bills at 2 AM in your pajamas</li>
                                        <li>Send money across the country in seconds instead of mailing checks</li>
                                        <li>Check your balance anytime without calling the bank</li>
                                        <li>No more driving to the ATM or bank branch</li>
                                    </ul>
                                </div>
                                <div class="challenges-section">
                                    <h4>What Got Worse:</h4>
                                    <ul class="challenge-list-interactive">
                                        <li>Your money only exists as numbers in a bank's database. If they say you have zero, you have zero.</li>
                                        <li>Banks can freeze your account instantly. Wrong political donation? Account locked.</li>
                                        <li>Every transaction is tracked, recorded, sold to advertisers, reported to governments.</li>
                                        <li>Server goes down? You can't access your money. Bank gets hacked? Your identity is stolen.</li>
                                        <li>Still inflating. Your digital dollars lose value just like paper ones.</li>
                                        <li>Payment processor doesn't like you? They can ban you from the financial system.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    function toggleTimelineActive(element) {
                        // Remove active from all items
                        document.querySelectorAll('.interactive-timeline-item').forEach(item => {
                            item.classList.remove('active');
                        });

                        // Add active to clicked item
                        element.classList.add('active');

                        // Smooth scroll to center
                        setTimeout(() => {
                            element.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }, 100);
                    }

                    // Add scroll-based visibility animation
                    function animateTimelineOnScroll() {
                        const items = document.querySelectorAll('.interactive-timeline-item');
                        const windowHeight = window.innerHeight;

                        items.forEach(item => {
                            const itemTop = item.getBoundingClientRect().top;
                            const itemBottom = item.getBoundingClientRect().bottom;

                            if (itemTop < windowHeight * 0.8 && itemBottom > windowHeight * 0.2) {
                                item.style.opacity = '1';
                            }
                        });
                    }

                    window.addEventListener('scroll', animateTimelineOnScroll);
                    window.addEventListener('load', animateTimelineOnScroll);
                </script>
            </section>

            <!-- Transition: From Timeline to Properties -->
            <section class="content-section">
                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.08), rgba(76, 175, 80, 0.08)); border: 2px solid var(--primary-orange); border-radius: 1rem; padding: 2rem; margin: 2rem 0;">
                    <h3 style="font-size: 1.4rem; color: var(--primary-orange); margin-bottom: 1rem; text-align: center;"><span data-icon="lightbulb"></span> What Made Some Money Better Than Others?</h3>
                    <p style="font-size: 1.05rem; line-height: 1.8; color: var(--text-light); text-align: center;">
                        You just explored thousands of years of monetary evolution.<br>
                        Gold worked better than shells. Coins worked better than cattle. Paper was more convenient than metal.<br>
                        <strong style="color: var(--primary-orange);">Throughout history, the best money always shared the same core qualities.</strong>
                    </p>
                </div>
            </section>

            <!-- 6 Properties: Interactive Tiles -->
            <section class="content-section">
                <h2>The 6 Properties of Good Money</h2>
                <p style="margin-bottom: 2rem; color: var(--text-dim);">
                    Tap each property to see concrete examples:
                </p>

                <style>
                    .properties-tile-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                        gap: 1rem;
                        margin: 2rem 0;
                    }

                    .property-tile {
                        background: var(--secondary-dark);
                        border: 2px solid var(--border-color);
                        border-radius: 0.75rem;
                        padding: 1.5rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        position: relative;
                    }

                    .property-tile:hover {
                        border-color: var(--primary-orange);
                        transform: translateY(-3px);
                        box-shadow: 0 4px 15px rgba(247, 147, 26, 0.2);
                    }

                    .property-tile.active {
                        border-color: var(--accent-green);
                        background: rgba(76, 175, 80, 0.05);
                    }

                    .property-tile-header {
                        display: flex;
                        align-items: center;
                        gap: 0.75rem;
                        margin-bottom: 0.75rem;
                    }

                    .property-tile-icon {
                        font-size: 2rem;
                    }

                    .property-tile-title {
                        font-size: 1.1rem;
                        font-weight: 600;
                        color: var(--primary-orange);
                    }

                    .property-tile-example {
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.4s ease;
                        color: var(--text-dim);
                        font-size: 0.9rem;
                        line-height: 1.5;
                    }

                    .property-tile.active .property-tile-example {
                        max-height: 200px;
                        margin-top: 0.75rem;
                    }
                </style>

                <div class="properties-tile-grid">
                    <div class="property-tile" onclick="togglePropertyTile(this)">
                        <div class="property-tile-header">
                            <span class="property-tile-icon" data-icon="shield"></span>
                            <h3 class="property-tile-title">1. Durability</h3>
                        </div>
                        <div class="property-tile-example">
                            Money needs to last. <strong style="color: var(--accent-green);">‚úÖ Gold:</strong> A 1000-year-old coin still works. <strong style="color: #ff6b6b;">‚ùå Fish:</strong> Rots in 3 days. <strong style="color: #ff6b6b;">‚ùå Paper:</strong> Burns, tears, fades.
                        </div>
                    </div>

                    <div class="property-tile" onclick="togglePropertyTile(this)">
                        <div class="property-tile-header">
                            <span class="property-tile-icon" data-icon="globe"></span>
                            <h3 class="property-tile-title">2. Portability</h3>
                        </div>
                        <div class="property-tile-example">
                            Can you move your savings? <strong style="color: var(--accent-green);">‚úÖ Gold coins:</strong> 1 ounce = $2000 value. <strong style="color: #ff6b6b;">‚ùå Cattle:</strong> 1 cow = hard to walk 100 miles. <strong style="color: #ff6b6b;">‚ùå Stone:</strong> Yap islanders used 12-foot rocks.
                        </div>
                    </div>

                    <div class="property-tile" onclick="togglePropertyTile(this)">
                        <div class="property-tile-header">
                            <span class="property-tile-icon" data-icon="tool"></span>
                            <h3 class="property-tile-title">3. Divisibility</h3>
                        </div>
                        <div class="property-tile-example">
                            Can you make change? <strong style="color: var(--accent-green);">‚úÖ Gold:</strong> Melt and divide into any size. <strong style="color: var(--accent-green);">‚úÖ Coins:</strong> Standardized denominations. <strong style="color: #ff6b6b;">‚ùå Cow:</strong> Can't split for small purchases.
                        </div>
                    </div>

                    <div class="property-tile" onclick="togglePropertyTile(this)">
                        <div class="property-tile-header">
                            <span class="property-tile-icon" data-icon="refresh"></span>
                            <h3 class="property-tile-title">4. Fungibility</h3>
                        </div>
                        <div class="property-tile-example">
                            Is every unit identical? <strong style="color: var(--accent-green);">‚úÖ Gold coins:</strong> Each 1oz coin = same value. <strong style="color: #ff6b6b;">‚ùå Shells:</strong> Each shell unique, hard to agree on value. <strong style="color: #ff6b6b;">‚ùå Diamonds:</strong> Quality varies wildly.
                        </div>
                    </div>

                    <div class="property-tile" onclick="togglePropertyTile(this)">
                        <div class="property-tile-header">
                            <span class="property-tile-icon" data-icon="target"></span>
                            <h3 class="property-tile-title">5. Scarcity</h3>
                        </div>
                        <div class="property-tile-example">
                            Can supply be controlled? <strong style="color: var(--accent-green);">‚úÖ Gold:</strong> Hard to mine, limited on Earth. <strong style="color: #ff6b6b;">‚ùå Shells:</strong> Beach has millions. <strong style="color: #ff6b6b;">‚ùå Paper:</strong> Government can print more anytime.
                        </div>
                    </div>

                    <div class="property-tile" onclick="togglePropertyTile(this)">
                        <div class="property-tile-header">
                            <span class="property-tile-icon" data-icon="lock"></span>
                            <h3 class="property-tile-title">6. Verifiability</h3>
                        </div>
                        <div class="property-tile-example">
                            Can you verify it's real? <strong style="color: var(--accent-green);">‚úÖ Gold:</strong> Bite test, density test, reliable methods. <strong style="color: #ff6b6b;">‚ùå Paper money:</strong> Sophisticated counterfeits exist. <strong style="color: #ff6b6b;">‚ùå Shells:</strong> Painted rocks can fool people.
                        </div>
                    </div>
                </div>

                <script>
                    function togglePropertyTile(tile) {
                        // Check if tile is already active
                        const isActive = tile.classList.contains('active');

                        // Remove active from all tiles
                        document.querySelectorAll('.property-tile').forEach(t => {
                            t.classList.remove('active');
                        });

                        // If it wasn't active, activate it
                        if (!isActive) {
                            tile.classList.add('active');
                        }
                    }
                </script>
            </section>

            <!-- Foreshadowing: The Leak -->
            <section class="content-section">
                <div style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.1), rgba(76, 175, 80, 0.1)); border: 2px solid var(--accent-green); border-radius: 1rem; padding: 2.5rem; text-align: center; margin: 3rem 0;">
                    <h2 style="font-size: 1.8rem; color: var(--accent-green); margin-bottom: 1.5rem;"><span data-icon="sparkles"></span> The Story So Far</h2>
                    <p style="font-size: 1.1rem; color: var(--text-light); line-height: 1.8; margin-bottom: 2rem;">
                        For thousands of years, humans improved money step by step.<br>
                        Barter ‚Üí Commodity ‚Üí Coins ‚Üí Paper ‚Üí Digital.<br>
                        <strong style="color: var(--accent-green);">Each upgrade fixed problems of the past.</strong>
                    </p>
                </div>

                <!-- The "But..." Moment -->
                <div style="margin: 4rem 0; text-align: center;">
                    <p style="font-size: 2.5rem; color: var(--primary-orange); font-weight: 700; margin-bottom: 1.5rem; letter-spacing: 0.05em;">
                        But...
                    </p>
                </div>

                <div style="background: rgba(244, 67, 54, 0.05); border: 2px solid rgba(244, 67, 54, 0.3); border-radius: 1rem; padding: 2.5rem; text-align: center; position: relative; overflow: hidden;">
                    <!-- Subtle leak visualization -->
                    <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 2px; height: 100%; background: linear-gradient(to bottom, transparent, rgba(244, 67, 54, 0.4), transparent); opacity: 0.6;"></div>

                    <p style="font-size: 1.2rem; color: var(--text-light); margin-bottom: 1.5rem; line-height: 1.8; position: relative; z-index: 1;">
                        What if one of those "upgrades" wasn't an upgrade at all?<br>
                        What if it <strong style="color: #ff6b6b;">broke one of the six properties</strong> and created a leak in your time capsule?
                    </p>

                    <div style="margin: 2rem 0; position: relative; z-index: 1;">
                        <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.7; animation: drip-pulse 2s ease-in-out infinite;">üíß</div>
                        <p style="font-size: 0.9rem; color: var(--text-dim); font-style: italic;">
                            (A slow leak begins...)
                        </p>
                    </div>

                    <p style="font-size: 1.25rem; color: var(--primary-orange); font-weight: 600; margin: 2rem 0 0 0; line-height: 1.7; position: relative; z-index: 1;">
                        Next: When did your time capsule start leaking?<br/>
                        <span style="font-size: 1rem; color: var(--text-dim); font-weight: 400; display: block; margin-top: 0.5rem;">
                            And can it be sealed again?
                        </span>
                    </p>
                </div>

                <style>
                    @keyframes drip-pulse {
                        0%, 100% { transform: translateY(0) scale(1); opacity: 0.7; }
                        50% { transform: translateY(10px) scale(1.1); opacity: 0.9; }
                    }
                </style>
            </section>

            <!-- Quiz -->
            <section class="content-section">
                <!-- Interactive Retention Activities -->
                <div class="retention-section">
                    <h3 style="text-align: center; margin-bottom: 2rem; color: var(--text-light);"><span data-icon="sparkles"></span> Lock in What You Learned</h3>

                    <!-- Activity 1: Drag-to-Order (Evolution of Money) -->
                    <section id="order-evolution" class="card" style="padding: 2rem; margin-bottom: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);"><span data-icon="refresh"></span> Arrange the Evolution of Money</h4>
                        <p style="margin-bottom: 1.5rem; color: var(--text-dim);">Drag the cards into the correct historical order:</p>
                        <ol class="droplist" aria-label="Ordered steps" style="list-style: none; padding: 0; min-height: 120px; background: rgba(247, 147, 26, 0.05); border: 2px dashed rgba(247, 147, 26, 0.3); border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem;"></ol>
                        <div class="drag-bin" aria-label="Shuffled steps" style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1rem;">
                            <button class="chip draggable" data-id="1" draggable="true" style="cursor: grab; padding: 0.75rem 1.25rem; font-size: 0.95rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; transition: all 0.2s;">Barter (trade goods directly)</button>
                            <button class="chip draggable" data-id="2" draggable="true" style="cursor: grab; padding: 0.75rem 1.25rem; font-size: 0.95rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; transition: all 0.2s;">Commodity money (gold, silver)</button>
                            <button class="chip draggable" data-id="3" draggable="true" style="cursor: grab; padding: 0.75rem 1.25rem; font-size: 0.95rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; transition: all 0.2s;">Gold-backed paper money</button>
                            <button class="chip draggable" data-id="4" draggable="true" style="cursor: grab; padding: 0.75rem 1.25rem; font-size: 0.95rem; background: rgba(247, 147, 26, 0.15); border: 2px solid var(--border-color); color: var(--text-light); border-radius: 2rem; transition: all 0.2s;">Fiat currency (1971 onwards)</button>
                        </div>
                        <button id="check-order" class="btn" style="background: var(--primary-orange); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; width: 100%;">Check Order</button>
                        <p id="order-feedback" style="margin-top: 1rem; text-align: center; font-weight: 500; color: var(--text-dim);"></p>
                    </section>

                    <!-- Activity 2: Tap-to-Reveal (Money Properties) -->
                    <section style="margin-bottom: 2rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);"><span data-icon="lightbulb"></span> Recall: Money Properties</h4>
                        <p style="margin-bottom: 1rem; color: var(--text-dim);">Think of the answer first, then tap to reveal:</p>
                        <div class="grid" style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
                            <article class="card tapcard" data-answer="Each unit is identical and interchangeable (one dollar = any other dollar)" style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">What does <strong>fungibility</strong> mean?</article>
                            <article class="card tapcard" data-answer="Easy to carry and transfer across distance (digital &gt; paper &gt; gold &gt; cows)" style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">What does <strong>portability</strong> mean?</article>
                            <article class="card tapcard" data-answer="Limited supply that cannot be easily increased (Gold: hard to mine, Shells: beach has millions, Paper: government prints more)" style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">What does <strong>scarcity</strong> mean?</article>
                            <article class="card tapcard" data-answer="Money captures your work so you can use it later. Saves work across time and space." style="padding: 1.5rem; cursor: pointer; background: var(--secondary-dark); border: 2px solid var(--border-color); border-radius: 0.75rem; transition: all 0.3s; min-height: 100px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 500; color: var(--text-light);">What problem does <strong>money</strong> solve?</article>
                        </div>
                    </section>

                    <!-- Activity 3: Confidence Meter (Barter Problem) -->
                    <section id="conf-barter" class="card" style="padding: 2rem; background: var(--secondary-dark); border: 2px solid var(--primary-orange); border-radius: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--text-light);"><span data-icon="target"></span> Test Your Understanding</h4>
                        <blockquote style="background: rgba(247, 147, 26, 0.1); border-left: 4px solid var(--primary-orange); padding: 1rem; margin: 1rem 0; font-style: italic; color: var(--text-light);">
                            "The barter system fails because it requires a <strong>double coincidence of wants</strong>. You need to find someone who has what you want AND wants what you have."
                        </blockquote>
                        <p style="margin: 1.5rem 0 0.75rem; color: var(--text-light);">How confident are you that you understand this concept?</p>
                        <input id="conf-barter-slider" type="range" min="0" max="100" value="50" style="width: 100%; margin: 0.5rem 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                            <span style="font-size: 0.85rem; color: var(--text-dim);">Not sure</span>
                            <span id="conf-barter-val" style="font-weight: 600; color: var(--primary-orange);">50%</span>
                            <span style="font-size: 0.85rem; color: var(--text-dim);">Very confident</span>
                        </div>
                        <button class="btn" id="get-barter-hint" style="background: var(--primary-orange); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; width: 100%;">Get Personalized Hint</button>
                        <p id="barter-hint" style="margin-top: 1rem; padding: 1rem; background: rgba(247, 147, 26, 0.05); border-radius: 0.5rem; min-height: 60px; color: var(--text-dim);"></p>
                    </section>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-navigation">
                <a href="/paths/curious/stage-1/" class="nav-btn nav-btn-secondary">‚Üê Back to Stage 1</a>
                <a href="module-2.html" class="nav-btn disabled" id="next-module">Next: Problems with Traditional Money ‚Üí</a>
            </nav>
        </div>
    </main>

    <script>
        // ===== INTERACTIVE RETENTION ACTIVITIES =====

        // Activity 1: Drag-to-Order (Evolution of Money)
        (() => {
            const KEY = 'retention.orderEvolution.v1';
            const target = document.querySelector('#order-evolution .droplist');
            const bin = document.querySelector('#order-evolution .drag-bin');
            const chips = [...bin.querySelectorAll('.draggable')];

            // Shuffle chips
            chips.sort(() => Math.random() - 0.5).forEach(c => bin.appendChild(c));

            function enableDrag(container) {
                container.addEventListener('dragstart', e => {
                    if (!e.target.matches('.draggable')) return;
                    e.dataTransfer.setData('id', e.target.dataset.id);
                    e.target.style.opacity = '0.5';
                });

                container.addEventListener('dragend', e => {
                    if (e.target.matches('.draggable')) e.target.style.opacity = '1';
                });

                container.addEventListener('dragover', e => e.preventDefault());

                container.addEventListener('drop', e => {
                    e.preventDefault();
                    const id = e.dataTransfer.getData('id');
                    const node = document.querySelector(`.draggable[data-id="${id}"]`);
                    if (e.currentTarget.classList.contains('droplist')) {
                        e.currentTarget.appendChild(node);
                    } else {
                        bin.appendChild(node);
                    }
                });
            }

            enableDrag(target);
            enableDrag(bin);

            document.querySelector('#check-order').addEventListener('click', () => {
                const ids = [...target.querySelectorAll('.draggable')].map(n => n.dataset.id).join(',');
                const ok = ids === '1,2,3,4';
                const fb = document.getElementById('order-feedback');
                fb.style.color = ok ? 'var(--accent-green)' : '#ff6b6b';
                fb.textContent = ok
                    ? '‚úì Perfect! Barter ‚Üí Commodity ‚Üí Gold-backed ‚Üí Fiat (1971)'
                    : '‚úó Not quite. Hint: Think chronologically. Barter came first, fiat (1971) came last.';
                if (ok) {
                    localStorage.setItem(KEY, 'passed');
                    checkAllActivitiesComplete();
                }
            });

            // Restore state
            if (localStorage.getItem(KEY) === 'passed') {
                document.getElementById('order-feedback').textContent = '‚úì Completed';
                document.getElementById('order-feedback').style.color = 'var(--accent-green)';
            }
        })();

        // Activity 2: Tap-to-Reveal Cards
        (() => {
            document.querySelectorAll('.tapcard').forEach((el, i) => {
                const KEY = 'retention.tapcard.' + i;

                // Restore state
                if (localStorage.getItem(KEY)) {
                    el.innerHTML = localStorage.getItem(KEY);
                    el.style.borderColor = 'var(--primary-orange)';
                }

                el.addEventListener('click', () => {
                    const ans = 'üí° ' + el.dataset.answer;
                    el.innerHTML = ans;
                    el.style.borderColor = 'var(--primary-orange)';
                    el.style.background = 'rgba(247, 147, 26, 0.1)';
                    localStorage.setItem(KEY, ans);
                    checkAllActivitiesComplete();
                });
            });
        })();

        // Activity 3: Confidence Meter
        (() => {
            const KEY = 'retention.confBarter.v1';
            const conf = document.getElementById('conf-barter-slider');
            const val = document.getElementById('conf-barter-val');

            conf.addEventListener('input', () => {
                val.textContent = conf.value + '%';
                val.style.color = conf.value >= 70 ? 'var(--accent-green)' : (conf.value >= 40 ? 'var(--primary-orange)' : '#ff6b6b');
            });

            document.getElementById('get-barter-hint').addEventListener('click', () => {
                const n = +conf.value;
                const hint = (n < 34)
                    ? 'üí≠ Think about a farmer scenario: You have wheat, you need shoes. The shoemaker wants milk, not wheat. You\'re stuck! That\'s the double coincidence problem. Money solves this by being universally accepted.'
                    : (n < 67)
                    ? 'üí° You\'re getting there! Example: Instead of finding someone who wants wheat AND has shoes, you sell wheat for money, then buy shoes with money. Money breaks the chain of needing exact matches.'
                    : 'üéØ You\'ve got it! The key insight: Barter requires BOTH people to want what the other has (double coincidence). Money only requires ONE person to want what you have. You can then use money to buy what you want from anyone.';

                document.getElementById('barter-hint').innerHTML = hint;
                document.getElementById('barter-hint').style.background = 'rgba(247, 147, 26, 0.15)';
                document.getElementById('barter-hint').style.borderLeft = '4px solid var(--primary-orange)';
                localStorage.setItem(KEY, n + ':' + hint);
                checkAllActivitiesComplete();
            });

            // Restore state
            if (localStorage.getItem(KEY)) {
                const [savedConf, savedHint] = localStorage.getItem(KEY).split(':');
                conf.value = savedConf;
                val.textContent = savedConf + '%';
                document.getElementById('barter-hint').innerHTML = savedHint;
            }
        })();

        // Check if all activities completed and enable next module
        function checkAllActivitiesComplete() {
            const activity1 = localStorage.getItem('retention.orderEvolution.v1');
            const activity2 = document.querySelectorAll('.tapcard').length === 4 &&
                            localStorage.getItem('retention.tapcard.0') &&
                            localStorage.getItem('retention.tapcard.1') &&
                            localStorage.getItem('retention.tapcard.2') &&
                            localStorage.getItem('retention.tapcard.3');
            const activity3 = localStorage.getItem('retention.confBarter.v1');

            if (activity1 && activity2 && activity3) {
                saveProgress();
                document.getElementById('next-module').classList.remove('disabled');

                // Show completion message
                if (!localStorage.getItem('retention.s1m1.completed')) {
                    const msg = document.createElement('div');
                    msg.style.cssText = 'background: rgba(76, 175, 80, 0.15); border: 2px solid var(--accent-green); border-radius: 1rem; padding: 1.5rem; margin: 2rem 0; text-align: center;';
                    msg.innerHTML = '<h4 style="color: var(--accent-green); margin-bottom: 0.5rem;">üéâ All Activities Complete!</h4><p>Great job engaging with the material. You can now proceed to Module 2.</p>';
                    document.querySelector('.retention-section').appendChild(msg);
                    localStorage.setItem('retention.s1m1.completed', 'true');
                }
            }
        }

        // Check on page load
        checkAllActivitiesComplete();

        // Initialize ProgressManager
        const progressManager = new ProgressManager();
        progressManager.init();

        // Save progress using ProgressManager
        function saveProgress() {
            progressManager.setModuleComplete('curious', 1, 1);
            progressManager.setModuleVisited('curious', 1, 2); // Mark next module as visited
        }

        // Check if module already completed
        function checkProgress() {
            if (progressManager.isModuleComplete('curious', 1, 1)) {
                document.getElementById('next-module').classList.remove('disabled');

                const notice = document.createElement('div');
                notice.style.background = 'rgba(76, 175, 80, 0.2)';
                notice.style.padding = '1rem';
                notice.style.borderRadius = '0.5rem';
                notice.style.color = 'var(--accent-green)';
                notice.style.textAlign = 'center';
                notice.style.marginBottom = '2rem';
                notice.textContent = '‚úì You\'ve already completed this module. Feel free to review or move on!';

                document.querySelector('.container').insertBefore(notice, document.querySelector('.content-section'));
            }
        }

        // Run on page load
        checkProgress();
    </script>
    
    <!-- Animated Icon Library -->
    <script src="/js/icon-library.js"></script>
    <script>
        // Inject icons after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            if (window.IconLibrary) {
                document.querySelectorAll('[data-icon]').forEach(function(element) {
                    var iconName = element.getAttribute('data-icon');
                    if (iconName) {
                        var iconHTML = IconLibrary.get(iconName, 20, true);
                        var span = document.createElement('span');
                        span.innerHTML = iconHTML;
                        span.className = 'icon-inline';
                        span.style.marginRight = '0.5rem';
                        span.style.display = 'inline-block';
                        span.style.verticalAlign = 'middle';
                        element.insertBefore(span, element.firstChild);
                    }
                });
            }
        });
    </script>
</body>
</html>
