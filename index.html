<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Redirect from GitHub Pages URL to custom domain -->
    <script>
        if (window.location.hostname === 'sovereigndwp.github.io') {
            window.location.replace('https://bitcoinsovereign.academy' + window.location.pathname + window.location.search + window.location.hash);
        }
    </script>
    <!-- Basic SEO -->
    <title>Bitcoin Sovereign Academy - Learn Bitcoin, Achieve Sovereignty</title>
    <meta name="description" content="Master Bitcoin through interactive experiences and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.">
    <link rel="canonical" href="https://bitcoinsovereign.academy/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#f7931a">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Bitcoin Sovereign Academy - Learn Bitcoin, Achieve Sovereignty">
    <meta property="og:description" content="Master Bitcoin through interactive experiences and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.">
    <meta property="og:url" content="https://bitcoinsovereign.academy/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://bitcoinsovereign.academy/assets/og-image.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Bitcoin Sovereign Academy - Learn Bitcoin, Achieve Sovereignty">
    <meta name="twitter:description" content="Master Bitcoin through interactive experiences and real-world simulations.">
    <meta name="twitter:creator" content="@dalia_platt">
    <meta name="twitter:image" content="https://bitcoinsovereign.academy/assets/og-image.jpg">
    
    <!-- Structured Data (Educational Organization) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "EducationalOrganization",
      "name": "Bitcoin Sovereign Academy",
      "url": "https://bitcoinsovereign.academy/",
      "logo": "https://bitcoinsovereign.academy/assets/logo.png",
      "description": "Master Bitcoin through interactive experiences and real-world simulations. Your journey from monetary curiosity to financial sovereignty starts here.",
      "sameAs": [
        "https://twitter.com/dalia_platt",
        "https://www.linkedin.com/in/dalia-platt-0924a763",
        "https://btcdalia.substack.com"
      ],
      "educationalLevel": "Beginner to Advanced",
      "teaches": [
        "Bitcoin Fundamentals",
        "Cryptocurrency Technology",
        "Financial Sovereignty",
        "Digital Asset Security",
        "Lightning Network",
        "Self-Custody"
      ],
      "audience": {
        "@type": "Audience",
        "audienceType": "Students interested in Bitcoin and cryptocurrency education"
      },
      "hasCredential": {
        "@type": "EducationalOccupationalCredential",
        "name": "Bitcoin Sovereignty Certificate",
        "description": "Comprehensive Bitcoin education certificate covering technical and practical aspects"
      }
    }
    </script>
    
    <!-- Best-effort Security Headers (GitHub Pages) -->
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   img-src 'self' data: https:; 
                   script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; 
                   style-src 'self' 'unsafe-inline'; 
                   font-src 'self' data:; 
                   connect-src 'self' https:; 
                   object-src 'none'; 
                   base-uri 'self'; 
                   frame-ancestors 'none'">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=()">
    
    <!-- Favicon & PWA -->
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BSA">
    
    <style>
        :root {
            --primary-orange: #f7931a;
            --primary-dark: #1a1a1a;
            --secondary-dark: #2d2d2d;
            --text-light: #e0e0e0;
            --text-dim: #999;
            --success-green: #4caf50;
            --danger-red: #f44336;
            --gradient-orange: linear-gradient(135deg, #f7931a 0%, #ffb347 100%);
            --gradient-dark: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            --path-curious: #4caf50;
            --path-hurried: #FFA726;
            --path-builder: #9C27B0;
            --path-sovereign: #E53935;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--primary-dark);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: rgba(45, 45, 45, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            border-bottom: 2px solid var(--primary-orange);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            padding: 0.5rem 0;
            background: rgba(26, 26, 26, 0.98);
        }

        /* Live Stats Bar (integrated in header) */
        .live-stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 0.75rem 1.25rem;
            padding: 0.5rem 2rem 0.8rem;
            border-top: 1px solid rgba(247, 147, 26, 0.25);
            border-bottom: 1px solid rgba(247, 147, 26, 0.15);
            background: rgba(26, 26, 26, 0.7);
        }
        .live-stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-dim);
            font-size: 0.95rem;
            white-space: nowrap;
        }
        .live-stat .label { color: var(--text-dim); }
        .live-stat .value { color: var(--primary-orange); font-weight: 600; }

        /* Creator badge from legacy index */
        .creator-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: rgba(247, 147, 26, 0.2);
            border: 1px solid var(--primary-orange);
            border-radius: 25px;
            margin: 0.75rem 0 1.5rem;
        }

        /* Navigation Hub (legacy-inspired) */
        .nav-hub {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .nav-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(247, 147, 26, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .nav-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(247, 147, 26, 0.2); border-color: var(--primary-orange); }
        .nav-card h3 { color: var(--primary-orange); margin-bottom: 0.5rem; font-size: 1.3rem; }
        .nav-card .icon { font-size: 1.8rem; margin-bottom: 0.5rem; display: block; }
        .nav-card p { color: var(--text-dim); line-height: 1.6; }
        .nav-card .badge { position: absolute; top: 1rem; right: 1rem; background: var(--primary-orange); color: #1a1a1a; padding: 0.25rem 0.6rem; border-radius: 12px; font-size: 0.75rem; font-weight: 700; }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
            color: var(--text-light);
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-orange);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        .logo-text {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            color: var(--text-dim);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-orange);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link:hover {
            color: var(--primary-orange);
        }

        /* Choose Your Path Section */
        .choose-path-section {
            padding: 4rem 2rem;
            background: linear-gradient(135deg, rgba(247, 147, 26, 0.03) 0%, transparent 100%);
            border-top: 1px solid rgba(247, 147, 26, 0.1);
        }

        .choose-path-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 0.75rem;
            color: var(--text-light);
        }

        .choose-path-subtitle {
            text-align: center;
            color: var(--text-dim);
            margin-bottom: 2.5rem;
            font-size: 1rem;
        }

        .path-cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto 2rem;
        }

        .path-card {
            background: var(--secondary-dark);
            border: 2px solid rgba(247, 147, 26, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: inherit;
        }

        .path-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--primary-orange);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .path-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .path-card:hover::before {
            transform: scaleX(1);
        }

        .path-card.curious {
            border-color: rgba(76, 175, 80, 0.4);
        }

        .path-card.curious::before {
            background: var(--path-curious);
        }

        .path-card.curious:hover {
            border-color: var(--path-curious);
            box-shadow: 0 20px 40px rgba(76, 175, 80, 0.3);
        }

        .path-card.hurried {
            border-color: rgba(255, 167, 38, 0.4);
        }

        .path-card.hurried::before {
            background: var(--path-hurried);
        }

        .path-card.hurried:hover {
            border-color: var(--path-hurried);
            box-shadow: 0 20px 40px rgba(255, 167, 38, 0.3);
        }

        .path-card.builder {
            border-color: rgba(156, 39, 176, 0.4);
        }

        .path-card.builder::before {
            background: var(--path-builder);
        }

        .path-card.builder:hover {
            border-color: var(--path-builder);
            box-shadow: 0 20px 40px rgba(156, 39, 176, 0.3);
        }

        .path-card.sovereign {
            border-color: rgba(229, 57, 53, 0.4);
        }

        .path-card.sovereign::before {
            background: var(--path-sovereign);
        }

        .path-card.sovereign:hover {
            border-color: var(--path-sovereign);
            box-shadow: 0 20px 40px rgba(229, 57, 53, 0.3);
        }

        .path-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            display: block;
            text-align: center;
        }

        .path-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            text-align: center;
            color: var(--text-light);
        }

        .path-persona {
            text-align: center;
            font-style: italic;
            color: var(--text-dim);
            margin-bottom: 1.25rem;
            font-size: 0.9rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(247, 147, 26, 0.2);
        }

        .path-perfect-for,
        .path-learn {
            margin-bottom: 1rem;
        }

        .path-perfect-for h4,
        .path-learn h4 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .path-perfect-for ul,
        .path-learn ul {
            list-style: none;
            padding: 0;
        }

        .path-perfect-for li,
        .path-learn li {
            padding: 0.3rem 0;
            color: var(--text-light);
            position: relative;
            padding-left: 1.25rem;
            font-size: 0.85rem;
        }

        .path-perfect-for li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--primary-orange);
            font-weight: bold;
        }

        .path-learn li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--success-green);
            font-weight: bold;
        }

        .path-meta {
            display: flex;
            justify-content: space-around;
            gap: 0.5rem;
            margin: 1rem 0;
            padding: 0.75rem 0;
            border-top: 1px solid rgba(247, 147, 26, 0.1);
            border-bottom: 1px solid rgba(247, 147, 26, 0.1);
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .path-meta span {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .path-cta {
            display: block;
            padding: 0.75rem 1.5rem;
            background: var(--gradient-orange);
            color: white;
            text-align: center;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            text-decoration: none;
            margin-top: auto;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(247, 147, 26, 0.3);
        }

        .path-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(247, 147, 26, 0.5);
        }

        .path-card.curious .path-cta {
            background: linear-gradient(135deg, var(--path-curious) 0%, #66BB6A 100%);
        }

        .path-card.hurried .path-cta {
            background: linear-gradient(135deg, var(--path-hurried) 0%, #FFB74D 100%);
        }

        .path-card.builder .path-cta {
            background: linear-gradient(135deg, var(--path-builder) 0%, #AB47BC 100%);
        }

        .path-card.sovereign .path-cta {
            background: linear-gradient(135deg, var(--path-sovereign) 0%, #EF5350 100%);
        }

        .path-quiz-link {
            text-align: center;
            margin-top: 2rem;
            color: var(--text-dim);
            font-size: 1rem;
        }

        .path-quiz-link a {
            color: var(--primary-orange);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .path-quiz-link a:hover {
            color: #ffb347;
            text-decoration: underline;
        }

        /* Responsive path cards */
        @media (max-width: 1200px) {
            .path-cards-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .path-cards-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .path-card {
                padding: 1.5rem;
            }

            .path-icon {
                font-size: 2.5rem;
            }

            .path-card h3 {
                font-size: 1.5rem;
            }

            .choose-path-title {
                font-size: 2rem;
            }

            .choose-path-subtitle {
                font-size: 1rem;
            }
        }

        /* Features Section */
        .features {
            padding: 4rem 2rem;
            background: var(--secondary-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 0.75rem;
            color: var(--text-light);
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-dim);
            margin-bottom: 2.5rem;
            font-size: 1rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        .feature-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(247, 147, 26, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-orange);
            border-radius: 15px 15px 0 0;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .feature-card:hover::before {
            transform: scaleX(1);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.2);
            border-color: var(--primary-orange);
        }

        .feature-icon {
            width: 45px;
            height: 45px;
            background: rgba(247, 147, 26, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            color: var(--primary-orange);
        }

        .feature-description {
            color: var(--text-dim);
            line-height: 1.5;
            margin-bottom: 1rem;
            font-size: 0.85rem;
        }

        .feature-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(247, 147, 26, 0.2);
            border: 1px solid var(--primary-orange);
            border-radius: 15px;
            font-size: 0.75rem;
            color: var(--primary-orange);
            font-weight: bold;
        }

        .badge-live {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--success-green);
            color: var(--success-green);
        }

        .badge-beta {
            background: rgba(33, 150, 243, 0.2);
            border-color: #2196f3;
            color: #2196f3;
        }

        .badge-soon {
            background: rgba(255, 152, 0, 0.2);
            border-color: #ff9800;
            color: #ff9800;
        }

        /* Learning Path Section */
        .learning-path {
            padding: 6rem 2rem;
            background: linear-gradient(135deg, rgba(247, 147, 26, 0.05) 0%, transparent 100%);
        }

        .timeline {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: rgba(247, 147, 26, 0.3);
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .timeline-item:nth-child(odd) {
            flex-direction: row-reverse;
        }

        .timeline-content {
            flex: 1;
            background: var(--secondary-dark);
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(247, 147, 26, 0.2);
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: scale(1.05);
            border-color: var(--primary-orange);
        }

        .timeline-number {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: var(--gradient-orange);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            z-index: 1;
        }

        .timeline-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary-orange);
        }

        .timeline-description {
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* Stats Section */
        .stats {
            padding: 4rem 2rem;
            background: var(--secondary-dark);
            border-top: 1px solid rgba(247, 147, 26, 0.2);
            border-bottom: 1px solid rgba(247, 147, 26, 0.2);
        }

        .stats-grid {
            max-width: 900px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 3rem;
            text-align: center;
        }

        .stat-item {
            position: relative;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            background: var(--gradient-orange);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-dim);
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        /* Footer */
        .footer {
            padding: 4rem 2rem 2rem;
            background: var(--primary-dark);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-section h4 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .footer-section p {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-links a {
            color: var(--text-dim);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary-orange);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid rgba(247, 147, 26, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dim);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--primary-orange);
            color: white;
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(247, 147, 26, 0.2);
            color: var(--text-dim);
        }

        .footer-bottom p {
            margin-bottom: 0.5rem;
        }

        .bitcoin-quote {
            font-style: italic;
            color: var(--primary-orange);
            margin-top: 1rem;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
        }

        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--primary-orange);
            transition: all 0.3s ease;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .features-grid,
            .agents-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }

            .nav-links {
                display: none;
                width: 100%;
                flex-direction: column;
                text-align: center;
                padding-top: 1rem;
            }

            .nav-links.active {
                display: flex;
            }

            .mobile-menu-toggle {
                display: flex;
            }

            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1.3rem;
            }

            .hero-buttons {
                flex-direction: column;
                width: 100%;
            }

            .btn {
                width: 100%;
            }

            .timeline::before {
                left: 20px;
            }

            .timeline-item {
                flex-direction: column !important;
                padding-left: 60px;
            }

            .timeline-number {
                left: 20px;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }

            .features-grid,
            .agents-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(247, 147, 26, 0.3);
            border-top-color: var(--primary-orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* AI Agents Section */
        .ai-agents {
            padding: 4rem 2rem;
            background: linear-gradient(135deg, rgba(247, 147, 26, 0.03) 0%, transparent 100%);
        }

        .agents-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .agent-card {
            background: rgba(45, 45, 45, 0.8);
            border: 2px solid rgba(247, 147, 26, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .agent-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-orange);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.15);
        }

        .agent-cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
            margin-top: 1rem;
            padding: 0.6rem 1rem;
            border-radius: 999px;
            background: rgba(247, 147, 26, 0.15);
            color: var(--primary-orange);
            font-weight: 600;
            font-size: 0.85rem;
            text-decoration: none;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        .agent-cta:hover {
            background: rgba(247, 147, 26, 0.3);
            transform: translateY(-2px);
        }

        .agent-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
            display: block;
        }

        .agent-name {
            color: var(--primary-orange);
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }

        .agent-description {
            color: var(--text-dim);
            line-height: 1.5;
            margin-bottom: 1rem;
            font-size: 0.85rem;
        }

        .agent-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .agent-status.active {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid var(--success-green);
            color: var(--success-green);
        }

        .agent-status.beta {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid #2196f3;
            color: #2196f3;
        }

        .mcp-info {
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(247, 147, 26, 0.2);
            border-radius: 15px;
            padding: 2rem;
        }

        .mcp-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--gradient-orange);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .mcp-icon {
            font-size: 1.2rem;
        }

        /* Bitcoin Data Section */
        .bitcoin-data {
            padding: 6rem 2rem;
            background: var(--secondary-dark);
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .data-card {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(247, 147, 26, 0.2);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .data-card:hover {
            border-color: var(--primary-orange);
            transform: translateY(-3px);
        }

        .data-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .data-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-orange);
            margin-bottom: 0.5rem;
        }

        .data-label {
            color: var(--text-light);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .data-change {
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .data-change.positive {
            color: var(--success-green);
        }

        .data-change.negative {
            color: var(--danger-red);
        }

        /* Update stats grid to handle more items */
        .stats-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 2rem;
            text-align: center;
        }

        /* Persona Selection Modal */
        .persona-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.3s ease;
        }

        .persona-modal.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .persona-modal-content {
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 20px;
            padding: 3rem;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
        }

        .persona-modal h2 {
            color: var(--primary-orange);
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .persona-modal p {
            color: var(--text-light);
            font-size: 1.2rem;
            margin-bottom: 3rem;
        }

        .persona-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .persona-card {
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid rgba(247, 147, 26, 0.3);
            border-radius: 15px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .persona-card:hover {
            border-color: var(--primary-orange);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(247, 147, 26, 0.3);
        }

        .persona-card.selected {
            border-color: var(--primary-orange);
            background: rgba(247, 147, 26, 0.1);
            box-shadow: 0 0 20px rgba(247, 147, 26, 0.4);
        }

        .persona-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .persona-card h3 {
            color: var(--primary-orange);
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }

        .persona-card p {
            color: var(--text-dim);
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .persona-badge {
            display: inline-block;
            background: var(--gradient-orange);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .persona-actions {
            display: flex;
            gap: 2rem;
            justify-content: center;
            align-items: center;
        }

        .btn-skip {
            background: transparent;
            border: 1px solid var(--text-dim);
            color: var(--text-dim);
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-skip:hover {
            border-color: var(--text-light);
            color: var(--text-light);
        }

        .btn-continue {
            background: var(--gradient-orange);
            border: none;
            color: white;
            padding: 1rem 3rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-continue:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-continue:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(247, 147, 26, 0.4);
        }

        /* Guided Tour System */
        .guided-tour {
            position: fixed;
            z-index: 9999;
            pointer-events: none;
        }

        .guided-tour.hidden {
            opacity: 0;
        }

        .tour-popup {
            position: relative;
            background: var(--secondary-dark);
            border: 2px solid var(--primary-orange);
            border-radius: 15px;
            padding: 1.5rem;
            max-width: 350px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            pointer-events: all;
        }

        .tour-content h3 {
            color: var(--primary-orange);
            margin-bottom: 1rem;
        }

        .tour-content p {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .tour-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .tour-actions button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--primary-orange);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #tourSkip {
            background: transparent;
            color: var(--text-dim);
            border-color: var(--text-dim);
        }

        #tourNext {
            background: var(--primary-orange);
            color: white;
            border-color: var(--primary-orange);
        }

        .tour-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid var(--primary-orange);
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Progress Tracker */
        .progress-tracker {
            position: fixed;
            top: 80px;
            right: 2rem;
            background: rgba(45, 45, 45, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(247, 147, 26, 0.3);
            border-radius: 15px;
            padding: 1rem;
            min-width: 300px;
            z-index: 1001;
            transition: all 0.3s ease;
        }

        .progress-tracker.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .progress-header h4 {
            color: var(--primary-orange);
            margin: 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(26, 26, 26, 0.8);
            border-radius: 4px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-orange);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .progress-achievements {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .achievement {
            background: rgba(76, 175, 80, 0.2);
            color: var(--success-green);
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        /* Help System */
        .help-system {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .help-bubble {
            background: var(--gradient-orange);
            border-radius: 50px;
            padding: 1rem 2rem;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(247, 147, 26, 0.4);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .help-bubble:hover {
            transform: scale(1.05);
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 5px 20px rgba(247, 147, 26, 0.4); }
            50% { box-shadow: 0 5px 30px rgba(247, 147, 26, 0.8); }
        }

        .help-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        /* Smart Prompts */
        .smart-prompts {
            position: fixed;
            top: 50%;
            left: 2rem;
            transform: translateY(-50%);
            z-index: 999;
        }

        .smart-prompt {
            background: rgba(26, 26, 26, 0.95);
            border: 1px solid var(--primary-orange);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            max-width: 250px;
            color: var(--text-light);
            animation: slideInLeft 0.5s ease;
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .smart-prompt-close {
            background: none;
            border: none;
            color: var(--text-dim);
            cursor: pointer;
            float: right;
            font-size: 1.2rem;
        }
        
        /* Progress and Recommendations Layout */
        .progress-recommendations {
            padding: 4rem 2rem;
            background: rgba(45, 45, 45, 0.5);
        }
        
        .progress-recommendations-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .progress-section-container h3,
        .recommendations-container h3 {
            color: var(--primary-orange);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        
        .cta-button {
            background: var(--primary-orange);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cta-button:hover {
            background: #ff7b00;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(247, 147, 26, 0.4);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .persona-grid {
                grid-template-columns: 1fr;
            }
            
            .persona-modal-content {
                padding: 2rem;
                margin: 1rem;
            }
            
            .progress-tracker {
                position: relative;
                top: auto;
                right: auto;
                margin: 1rem;
                width: calc(100% - 2rem);
            }
            
            .help-bubble {
                position: relative;
                bottom: auto;
                right: auto;
                margin: 2rem auto;
                display: block;
                text-align: center;
            }
        }
    </style>
    
    <!-- Dynamic Content & MCP Integration -->
    <link rel="stylesheet" href="/css/dynamic-content.css">
    <link rel="stylesheet" href="/css/learning-path.css">
    <link rel="stylesheet" href="/css/onboarding-flow.css">
    <link rel="stylesheet" href="/css/chips.css">
    <link rel="stylesheet" href="/css/hero3d.css">
    <link rel="stylesheet" href="/css/skeleton.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="header-content">
            <a href="#" class="logo">
                <div class="logo-icon">‚Çø</div>
                <span class="logo-text">Bitcoin Sovereign Academy</span>
            </a>
            <div class="mobile-menu-toggle" id="mobileMenu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="live-stats-bar" id="liveStatsBar">
            <div class="live-stat"><span class="label">‚Çø Price:</span> <span class="value" id="bar-btc-price">‚Äî</span></div>
            <div class="live-stat"><span class="label">Block:</span> <span class="value" id="bar-block-height">‚Äî</span></div>
            <div class="live-stat"><span class="label">Mempool:</span> <span class="value" id="bar-mempool-count">‚Äî</span></div>
            <div class="live-stat"><span class="label">Fees:</span> <span class="value" id="bar-fee-estimate">‚Äî</span></div>
            <div class="live-stat"><span class="label">Difficulty:</span> <span class="value" id="bar-difficulty">‚Äî</span></div>
        </div>
    </header>

    <!-- Hero Section - Optimized & Balanced -->
    <section class="hero3d hero3d--compact" id="hero3d" aria-label="Bitcoin Sovereign Academy hero" style="min-height: 50vh; padding: 7rem 2rem 5rem; margin-top: 0; background: linear-gradient(135deg, rgba(247, 147, 26, 0.05) 0%, rgba(26, 26, 26, 0.5) 100%); border-top: 1px solid rgba(247, 147, 26, 0.15);">
        <div class="hero3d__inner" style="max-width: 900px; margin: 0 auto;">
            <div class="hero3d__content" style="text-align: center;">
                <h1 class="hero3d__title" style="font-size: clamp(2.5rem, 6vw, 3.5rem); margin-bottom: 1.5rem; font-weight: 700; line-height: 1.2;">Master Bitcoin Through Real Experience</h1>
                <p class="hero3d__subtitle" style="font-size: 1.05rem; margin-bottom: 2.5rem; line-height: 1.6; max-width: 650px; margin-left: auto; margin-right: auto; color: rgba(224, 224, 224, 0.9);">
                    Move from curiosity to confidence with interactive demos, tailored paths, and live network insight.
                </p>
                <div class="hero3d__actions" role="group" aria-label="Primary hero actions" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <a href="#choose-path"
                       class="hero3d__action hero3d__action--primary"
                       id="cta-start-journey"
                       onclick="track('Click Choose Path',{ab:abVariant()})"
                       style="padding: 0.75rem 1.5rem; font-size: 0.95rem; font-weight: 600; border-radius: 50px; background: var(--gradient-orange); color: white; text-decoration: none; box-shadow: 0 4px 15px rgba(247, 147, 26, 0.3); transition: all 0.3s ease;">
                        üöÄ Start Your Journey
                    </a>
                    <a href="#features"
                       class="hero3d__action hero3d__action--ghost"
                       id="cta-browse-demos"
                       onclick="track('Click See Demos',{ab:abVariant()})"
                       style="padding: 0.75rem 1.5rem; font-size: 0.95rem; font-weight: 600; border-radius: 50px; background: rgba(247, 147, 26, 0.1); border: 2px solid var(--primary-orange); color: var(--primary-orange); text-decoration: none; transition: all 0.3s ease;">
                        üó∫Ô∏è Explore Interactive Demos
                    </a>
                </div>
            </div>
        </div>
        <div class="hero3d__fallback" id="hero3d-fallback"></div>
    </section>

    <!-- Choose Your Path Section -->
    <section class="choose-path-section" id="choose-path">
        <div class="container">
            <h2 class="choose-path-title">Which Bitcoin Journey Fits You Best?</h2>
            <p class="choose-path-subtitle">Choose your starting point ‚Äî you can switch anytime</p>

            <div class="path-cards-grid">
                <!-- The Curious Path -->
                <a href="/paths/curious/" class="path-card curious" onclick="track('Path Selected',{path:'curious',ab:abVariant()})">
                    <div class="path-icon">üå±</div>
                    <h3>The Curious</h3>
                    <p class="path-persona">"I'm new to Bitcoin"</p>

                    <div class="path-perfect-for">
                        <h4>Perfect For:</h4>
                        <ul>
                            <li>Complete beginners</li>
                            <li>Traditional savers</li>
                            <li>First-time buyers</li>
                        </ul>
                    </div>

                    <div class="path-learn">
                        <h4>You'll Learn:</h4>
                        <ul>
                            <li>What is Bitcoin?</li>
                            <li>Why it matters</li>
                            <li>Your first wallet</li>
                            <li>Send/receive BTC</li>
                            <li>Stay safe</li>
                        </ul>
                    </div>

                    <div class="path-meta">
                        <span>üéì 6-8 weeks</span>
                        <span>‚è±Ô∏è 2-3 hrs/week</span>
                    </div>

                    <span class="path-cta">START HERE ‚Üí</span>
                </a>

                <!-- The Hurried Path -->
                <a href="/paths/hurried/" class="path-card hurried" onclick="track('Path Selected',{path:'hurried',ab:abVariant()})">
                    <div class="path-icon">‚ö°</div>
                    <h3>The Hurried</h3>
                    <p class="path-persona">"No time to waste"</p>

                    <div class="path-perfect-for">
                        <h4>Perfect For:</h4>
                        <ul>
                            <li>Busy professionals</li>
                            <li>Fast learners</li>
                            <li>ADHD-friendly</li>
                        </ul>
                    </div>

                    <div class="path-learn">
                        <h4>You'll Learn:</h4>
                        <ul>
                            <li>Bitcoin in 1 sentence</li>
                            <li>Wallet essentials</li>
                            <li>Transaction basics</li>
                            <li>Mining explained</li>
                            <li>Security first</li>
                        </ul>
                    </div>

                    <div class="path-meta">
                        <span>üéì 1 hour total</span>
                        <span>‚è±Ô∏è 8 √ó 5-10 min</span>
                    </div>

                    <span class="path-cta">FAST TRACK ‚Üí</span>
                </a>

                <!-- The Builder Path -->
                <a href="/paths/builder/" class="path-card builder" onclick="track('Path Selected',{path:'builder',ab:abVariant()})">
                    <div class="path-icon">‚ö°</div>
                    <h3>The Builder</h3>
                    <p class="path-persona">"I want to build with Bitcoin"</p>

                    <div class="path-perfect-for">
                        <h4>Perfect For:</h4>
                        <ul>
                            <li>Developers</li>
                            <li>Tech enthusiasts</li>
                            <li>Entrepreneurs</li>
                        </ul>
                    </div>

                    <div class="path-learn">
                        <h4>You'll Learn:</h4>
                        <ul>
                            <li>Protocol deep dive</li>
                            <li>Lightning Network</li>
                            <li>Build BTC apps</li>
                            <li>Smart contracts</li>
                            <li>Contribute to OSS</li>
                        </ul>
                    </div>

                    <div class="path-meta">
                        <span>üéì 10-12 weeks</span>
                        <span>‚è±Ô∏è 5-8 hrs/week</span>
                    </div>

                    <span class="path-cta">EXPLORE ‚Üí</span>
                </a>

                <!-- The Sovereign Path -->
                <a href="/paths/sovereign/" class="path-card sovereign" onclick="track('Path Selected',{path:'sovereign',ab:abVariant()})">
                    <div class="path-icon">üéØ</div>
                    <h3>The Sovereign</h3>
                    <p class="path-persona">"I want full control & privacy"</p>

                    <div class="path-perfect-for">
                        <h4>Perfect For:</h4>
                        <ul>
                            <li>Privacy advocates</li>
                            <li>Security-focused</li>
                            <li>Node operators</li>
                        </ul>
                    </div>

                    <div class="path-learn">
                        <h4>You'll Master:</h4>
                        <ul>
                            <li>Hardware wallets</li>
                            <li>Multi-sig setups</li>
                            <li>Privacy tools</li>
                            <li>Run your own node</li>
                            <li>Cold storage</li>
                        </ul>
                    </div>

                    <div class="path-meta">
                        <span>üéì 12-16 weeks</span>
                        <span>‚è±Ô∏è 4-6 hrs/week</span>
                    </div>

                    <span class="path-cta">ADVANCE ‚Üí</span>
                </a>
            </div>

            <p class="path-quiz-link">
                üí° Not sure which path? <a href="#quiz" onclick="track('Path Quiz Click',{ab:abVariant()})">Take our 2-minute path finder quiz</a>
            </p>
        </div>
    </section>

    <!-- Navigation Hub (legacy-inspired quick access) -->
    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">Interactive Learning Experiences</h2>
            <p class="section-subtitle">Master Bitcoin through hands-on exploration ‚Äî not passive reading</p>

            <!-- Featured Demo -->
            <div style="margin-bottom: 3rem;">
                <a href="interactive-demos/bitcoin-layers-map.html" class="feature-card" style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.15), rgba(247, 147, 26, 0.05)); border: 3px solid var(--primary-orange); max-width: 100%;">
                    <div style="display: flex; gap: 0.5rem; align-items: center; margin-bottom: 1rem;">
                        <div class="feature-icon" style="font-size: 3rem;">üó∫Ô∏è</div>
                        <div style="flex: 1;">
                            <div style="display: inline-block; background: var(--primary-orange); color: white; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.75rem; font-weight: 700; margin-bottom: 0.5rem;">‚ú® FEATURED</div>
                            <h3 class="feature-title" style="font-size: 1.75rem; margin-bottom: 0.5rem;">Bitcoin Layers Map</h3>
                            <p class="feature-description" style="font-size: 1.05rem; margin-bottom: 0;">
                                Explore Bitcoin's entire layered ecosystem: Lightning for speed, Liquid for privacy, Fedimint for communities, and emerging protocols. Interactive multi-level experience adapts from beginner to advanced.
                            </p>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1.5rem;">
                        <span style="background: rgba(76, 175, 80, 0.2); color: #4caf50; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.85rem; font-weight: 600;">üå± Beginner Mode</span>
                        <span style="background: rgba(156, 39, 176, 0.2); color: #9C27B0; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.85rem; font-weight: 600;">‚ö° Intermediate Mode</span>
                        <span style="background: rgba(247, 147, 26, 0.2); color: var(--primary-orange); padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.85rem; font-weight: 600;">üîß Advanced Mode</span>
                    </div>
                    <span class="feature-badge badge-live" style="margin-top: 1rem;">EXPLORE NOW ‚Üí</span>
                </a>
            </div>

            <div class="features-grid">
                <a href="interactive-demos/bitcoin-sovereign-game/" class="feature-card">
                    <div class="feature-icon">üéÆ</div>
                    <h3 class="feature-title">SOVEREIGN Journey</h3>
                    <p class="feature-description">
                        Experience 20 years of economic history (2005-2025). Make critical decisions,
                        learn from consequences, and discover why Bitcoin emerged from the 2008 crisis.
                    </p>
                    <span class="feature-badge badge-live">PLAY NOW</span>
                </a>

                <a href="interactive-demos/lightning-network-demo.html" class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3 class="feature-title">Lightning Network Demo</h3>
                    <p class="feature-description">
                        Master Lightning from basics to HTLCs. Single channels, multi-hop routing, and trustless payments.
                        Three difficulty levels in one comprehensive demo.
                    </p>
                    <span class="feature-badge badge-live">LEARN NOW</span>
                </a>

                <a href="interactive-demos/testnet-practice-guide.html" class="feature-card">
                    <div class="feature-icon">üß™</div>
                    <h3 class="feature-title">Testnet Practice Guide</h3>
                    <p class="feature-description">
                        Get hands-on with real Bitcoin testnet. Set up wallets, get free testnet coins,
                        send transactions, and practice without risk.
                    </p>
                    <span class="feature-badge badge-live">PRACTICE</span>
                </a>

                <a href="interactive-demos/security-dojo-enhanced.html" class="feature-card">
                    <div class="feature-icon">üîê</div>
                    <h3 class="feature-title">Security Dojo</h3>
                    <p class="feature-description">
                        Complete security training: self-custody audit, multi-sig setup, testnet practice,
                        and opsec assessment. Multi-level difficulty.
                    </p>
                    <span class="feature-badge badge-live">SECURE</span>
                </a>

                <a href="interactive-demos/transaction-builder/" class="feature-card">
                    <div class="feature-icon">üî®</div>
                    <h3 class="feature-title">Transaction Builder</h3>
                    <p class="feature-description">
                        Build Bitcoin transactions step-by-step. Learn about UTXOs, fees, change outputs,
                        and different transaction types in an interactive sandbox.
                    </p>
                    <span class="feature-badge badge-live">BUILD NOW</span>
                </a>

                <a href="interactive-demos/mining-simulator/" class="feature-card">
                    <div class="feature-icon">‚õèÔ∏è</div>
                    <h3 class="feature-title">Mining Simulator</h3>
                    <p class="feature-description">
                        Visualize Bitcoin mining difficulty adjustments, block rewards, and hashrate dynamics.
                        Understand proof-of-work through interactive simulations.
                    </p>
                    <span class="feature-badge badge-live">MINE NOW</span>
                </a>

                <a href="interactive-demos/wallet-workshop/" class="feature-card">
                    <div class="feature-icon">üè¶</div>
                    <h3 class="feature-title">Wallet Workshop</h3>
                    <p class="feature-description">
                        Master Bitcoin wallets: HD wallets, seed phrases, derivation paths, and security best practices.
                        Practice with simulated wallets safely.
                    </p>
                    <span class="feature-badge badge-live">PRACTICE</span>
                </a>

                <a href="interactive-demos/consensus-game/" class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3 class="feature-title">Consensus Game</h3>
                    <p class="feature-description">
                        Simulate network attacks and defense. 51% attacks, eclipse attacks, selfish mining,
                        and network partitions. Understand Bitcoin's security model.
                    </p>
                    <span class="feature-badge badge-live">VALIDATE</span>
                </a>

                <a href="interactive-demos/utxo-visualizer-enhanced.html" class="feature-card">
                    <div class="feature-icon">ü™ô</div>
                    <h3 class="feature-title">UTXO Visualizer</h3>
                    <p class="feature-description">
                        Master UTXO management through 6 scenarios: consolidation, fee optimization,
                        privacy protection, dust handling, and expert challenges.
                    </p>
                    <span class="feature-badge badge-live">OPTIMIZE</span>
                </a>
            </div>

            <div style="text-align: center; margin-top: 3rem;">
                <p style="color: var(--text-dim); margin-bottom: 1rem;">Plus: Building the Chain, Double-Spending Demo, Digital Signatures, Network Consensus, Time Machine, and more...</p>
                <a href="/paths/curious/" style="display: inline-block; padding: 1rem 2rem; background: var(--primary-orange); color: white; text-decoration: none; border-radius: 0.5rem; font-weight: 600; transition: all 0.3s ease;">
                    üöÄ Start Your Learning Path ‚Üí
                </a>
            </div>
        </div>
    </section>

    <!-- Learning Path Section -->
    <!-- AI Learning Agents Section -->
    <section class="ai-agents" id="agents">
        <div class="container">
            <h2 class="section-title">Learning Tutors</h2>
            <p class="section-subtitle">Personalized AI tutors to guide your Bitcoin journey</p>

            <div class="agents-grid">
                <div class="agent-card" data-link="/ai-agents/story-navigator/index.html" role="link" tabindex="0" aria-label="Launch Story Navigator interactive learning">
                    <div class="agent-icon">üìñ</div>
                    <h3 class="agent-name">Story Navigator</h3>
                    <p class="agent-description">
                        Personalized Bitcoin journey narratives. Creates custom learning stories based on your interests and background.
                    </p>
                    <div class="agent-status active">Active</div>
                    <a class="agent-cta" href="/ai-agents/story-navigator/index.html">
                        Launch Story Navigator ‚Üí
                    </a>
                </div>
                
                <div class="agent-card" data-link="/ai-agents/visual-synthesizer/index.html" role="link" tabindex="0" aria-label="Launch Visual Synthesizer interactive experience">
                    <div class="agent-icon">üé®</div>
                    <h3 class="agent-name">Visual Synthesizer</h3>
                    <p class="agent-description">
                        Transforms complex Bitcoin concepts into interactive visual metaphors and diagrams.
                    </p>
                    <div class="agent-status active">Active</div>
                    <a class="agent-cta" href="/ai-agents/visual-synthesizer/index.html">
                        Launch Visual Synthesizer ‚Üí
                    </a>
                </div>
                
                <div class="agent-card">
                    <div class="agent-icon">‚öñÔ∏è</div>
                    <h3 class="agent-name">Debate Arena</h3>
                    <p class="agent-description">
                        Multi-perspective AI discussions on Bitcoin topics. Explore different viewpoints and arguments.
                    </p>
                    <div class="agent-status beta">Beta</div>
                </div>
                
                <div class="agent-card">
                    <div class="agent-icon">üîÆ</div>
                    <h3 class="agent-name">Future Oracle</h3>
                    <p class="agent-description">
                        Realistic scenario simulations (2030-2050+). Explore Bitcoin's potential future paths.
                    </p>
                    <div class="agent-status beta">Beta</div>
                </div>
                
                <div class="agent-card">
                    <div class="agent-icon">üéØ</div>
                    <h3 class="agent-name">Strategy Advisor</h3>
                    <p class="agent-description">
                        Personal Bitcoin adoption guidance. Customized strategies for your financial sovereignty journey.
                    </p>
                    <div class="agent-status active">Active</div>
                </div>
                
                <div class="agent-card">
                    <div class="agent-icon">üé≠</div>
                    <h3 class="agent-name">Data Poet</h3>
                    <p class="agent-description">
                        Blockchain metrics transformed into art. Beautiful visualizations of Bitcoin's living data.
                    </p>
                    <div class="agent-status beta">Beta</div>
                </div>
                
                <div class="agent-card">
                    <div class="agent-icon">‚è∞</div>
                    <h3 class="agent-name">Time Machine</h3>
                    <p class="agent-description">
                        Interactive historical exploration. Journey through Bitcoin's past to understand its future.
                    </p>
                    <div class="agent-status active">Active</div>
                </div>
                
                <div class="agent-card">
                    <div class="agent-icon">üß†</div>
                    <h3 class="agent-name">Philosophy Guide</h3>
                    <p class="agent-description">
                        Deep conceptual discussions on money, sovereignty, Austrian economics, and Bitcoin philosophy.
                    </p>
                    <div class="agent-status active">Active</div>
                </div>
            </div>
            
            <div class="mcp-info">
                <div class="mcp-badge">
                    <span class="mcp-icon">üîó</span>
                    <span>Connected Learning</span>
                </div>
                <p>All tutors work together to provide smarter, contextual guidance</p>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number">8</div>
                <div class="stat-label">AI Learning Agents</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">25+</div>
                <div class="stat-label">Interactive Demos</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">100+</div>
                <div class="stat-label">Learning Modules</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">50+</div>
                <div class="stat-label">Hands-on Exercises</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">24/7</div>
                <div class="stat-label">Real-time Data</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">10+</div>
                <div class="stat-label">Languages Coming</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>About Bitcoin Sovereign Academy</h4>
                <p>
                    We're building the most comprehensive Bitcoin education platform in the world. 
                    Our mission is simple: help everyone understand Bitcoin from first principles 
                    and achieve financial sovereignty.
                </p>
                <div class="social-links">
                    <a href="https://twitter.com/dalia_platt" class="social-link" target="_blank" rel="noopener" title="Follow on Twitter">
                        <span>ùïè</span>
                    </a>
                    <a href="https://www.linkedin.com/in/dalia-platt-0924a763" class="social-link" target="_blank" rel="noopener" title="Connect on LinkedIn">
                        <span>in</span>
                    </a>
                    <a href="https://btcdalia.substack.com" class="social-link" target="_blank" rel="noopener" title="Read on Substack">
                        <span>üìù</span>
                    </a>
                    <a href="https://njump.me/npub1t9yhx06qm6fw2jwgfd3633860r7akhvk3al27hd8rjwdxwgq7x2qr7sdlh" class="social-link" target="_blank" rel="noopener" title="Follow on Nostr">
                        <span>N</span>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h4>Learn</h4>
                <ul class="footer-links">
                    <li><a href="interactive-demos/bitcoin-sovereign-game/">SOVEREIGN Journey</a></li>
                    <li><a href="#features">Interactive Demos</a></li>
                    <li><a href="#agents">AI Learning Agents</a></li>
                    <li><a href="#path">Learning Path</a></li>
                    <li><a href="/api/health">API Status</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Community</h4>
                <ul class="footer-links">
                    <li><a href="#">Discord</a></li>
                    <li><a href="#">Forum</a></li>
                    <li><a href="#">Events</a></li>
                    <li><a href="#">Contributors</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Resources</h4>
                <ul class="footer-links">
                    <li><a href="https://btcdalia.substack.com">Newsletter</a></li>
                    <li><a href="#">Documentation</a></li>
                    <li><a href="#">API</a></li>
                    <li><a href="#">Support</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>¬© 2025 Bitcoin Sovereign Academy. Educational content only, not financial advice.</p>
            <p class="bitcoin-quote">"Not your keys, not your coins. Not your knowledge, not your sovereignty."</p>
            <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.7;">Created with üß° by Dalia</p>
        </div>
    </footer>

    <!-- Persona & Guidance System -->
    <div id="personaModal" class="persona-modal hidden">
        <div class="persona-modal-content">
            <h2>üëã Welcome to Bitcoin Sovereign Academy!</h2>
            <p>Let's personalize your learning journey. Which describes you best?</p>
            
            <div class="persona-grid">
                <div class="persona-card" data-persona="curious">
                    <div class="persona-icon">ü§î</div>
                    <h3>Bitcoin Curious</h3>
                    <p>"I keep hearing about Bitcoin but don't really understand what it is"</p>
                    <span class="persona-badge">Start Here</span>
                </div>
                
                <div class="persona-card" data-persona="investor">
                    <div class="persona-icon">üìà</div>
                    <h3>Traditional Investor</h3>
                    <p>"I have a portfolio but want to understand Bitcoin as an asset"</p>
                    <span class="persona-badge">Investment Focus</span>
                </div>
                
                <div class="persona-card" data-persona="developer">
                    <div class="persona-icon">üë®‚Äçüíª</div>
                    <h3>Tech Developer</h3>
                    <p>"I want to build on Bitcoin or understand the technical details"</p>
                    <span class="persona-badge">Technical Deep-Dive</span>
                </div>
                
                <div class="persona-card" data-persona="libertarian">
                    <div class="persona-icon">üóΩ</div>
                    <h3>Freedom Seeker</h3>
                    <p>"I'm interested in financial sovereignty and Austrian economics"</p>
                    <span class="persona-badge">Philosophy First</span>
                </div>
                
                <div class="persona-card" data-persona="business">
                    <div class="persona-icon">üè™</div>
                    <h3>Business Owner</h3>
                    <p>"I want to accept Bitcoin payments or integrate it into my business"</p>
                    <span class="persona-badge">Business Solutions</span>
                </div>
                
                <div class="persona-card" data-persona="student">
                    <div class="persona-icon">üéì</div>
                    <h3>Student</h3>
                    <p>"I'm studying economics/finance and want to understand Bitcoin deeply"</p>
                    <span class="persona-badge">Academic Approach</span>
                </div>
                
                <div class="persona-card" data-persona="retiree">
                    <div class="persona-icon">üèñÔ∏è</div>
                    <h3>Retiree/Saver</h3>
                    <p>"I'm worried about inflation and want to protect my savings"</p>
                    <span class="persona-badge">Wealth Preservation</span>
                </div>
                
                <div class="persona-card" data-persona="entrepreneur">
                    <div class="persona-icon">üöÄ</div>
                    <h3>Entrepreneur</h3>
                    <p>"I see Bitcoin as a business opportunity and want to innovate"</p>
                    <span class="persona-badge">Innovation Track</span>
                </div>
                
                <div class="persona-card" data-persona="skeptic">
                    <div class="persona-icon">üßê</div>
                    <h3>Bitcoin Skeptic</h3>
                    <p>"I think Bitcoin might be a scam or bubble - convince me otherwise"</p>
                    <span class="persona-badge">Address Concerns</span>
                </div>
                
                <div class="persona-card" data-persona="maximalist">
                    <div class="persona-icon">üß°</div>
                    <h3>Bitcoin Maximalist</h3>
                    <p>"I already believe in Bitcoin but want to deepen my knowledge"</p>
                    <span class="persona-badge">Advanced Level</span>
                </div>
                
                <div class="persona-card" data-persona="parent">
                    <div class="persona-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <h3>Parent/Educator</h3>
                    <p>"I want to understand Bitcoin to teach my kids about money"</p>
                    <span class="persona-badge">Family Finance</span>
                </div>
                
                <div class="persona-card" data-persona="global">
                    <div class="persona-icon">üåç</div>
                    <h3>Global Citizen</h3>
                    <p>"I live in a country with currency instability or restrictions"</p>
                    <span class="persona-badge">Freedom Money</span>
                </div>
            </div>
            
            <div class="persona-actions">
                <button class="btn-skip">Skip - I'll explore myself</button>
                <button class="btn-continue" disabled>Continue with Selected Path</button>
            </div>
        </div>
    </div>

    <!-- Guided Tour Popups -->
    <div id="guidedTour" class="guided-tour hidden">
        <div class="tour-popup">
            <div class="tour-content">
                <h3 id="tourTitle">Welcome!</h3>
                <p id="tourDescription">This is your personalized guidance.</p>
                <div class="tour-actions">
                    <button id="tourSkip">Skip Tour</button>
                    <button id="tourNext">Next</button>
                </div>
            </div>
            <div class="tour-arrow"></div>
        </div>
    </div>

    <!-- Progress Tracker -->
    <div id="progressTracker" class="progress-tracker hidden">
        <div class="progress-header">
            <h4>Your Journey: <span id="personaName">Bitcoin Learning</span></h4>
            <button id="toggleProgress">üìä</button>
        </div>
        <div class="progress-content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-stats">
                <span id="progressText">0% Complete</span>
                <span id="nextStep">Next: Choose your starting point</span>
            </div>
            <div class="progress-achievements" id="achievements"></div>
        </div>
    </div>

    <!-- Contextual Help Bubbles -->
    <div class="help-system">
        <div class="help-bubble" id="helpBubble">
            <div class="help-content">
                <p id="helpText">Need guidance? I'm here to help!</p>
                <button id="helpClose">√ó</button>
            </div>
        </div>
    </div>

    <!-- Smart Prompts -->
    <div id="smartPrompts" class="smart-prompts"></div>

    <!-- Analytics -->
    <script defer data-domain="bitcoinsovereign.academy" src="https://plausible.io/js/script.js"></script>
    
    <!-- Internationalization -->
    <script src="/js/i18n.js"></script>
    
    <script>
        // Track key events
        function trackEvent(eventName, props = {}) {
            if (window.plausible) {
                window.plausible(eventName, { props });
            }
            console.log('Event tracked:', eventName, props);
        }

        // Service Worker Registration for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => console.log('ServiceWorker registered'))
                    .catch(err => console.log('ServiceWorker registration failed'));
            });
        }

        // Remove loading screen when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
            }, 500);
        });

        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Mobile menu toggle
        const mobileMenu = document.getElementById('mobileMenu');
        const navLinks = document.getElementById('navLinks');
        
        mobileMenu.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    // Close mobile menu if open
                    navLinks.classList.remove('active');
                }
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe feature cards
        document.querySelectorAll('.feature-card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'all 0.6s ease';
            observer.observe(card);
        });

        // Observe timeline items
        document.querySelectorAll('.timeline-item').forEach((item, index) => {
            item.style.opacity = '0';
            item.style.transform = 'translateY(20px)';
            item.style.transition = `all 0.6s ease ${index * 0.1}s`;
            observer.observe(item);
        });

        // Observe agent cards
        document.querySelectorAll('.agent-card').forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = `all 0.6s ease ${index * 0.05}s`;
            observer.observe(card);
        });

        // Enable navigation for agent cards with data-link
        document.querySelectorAll('.agent-card[data-link]').forEach(card => {
            const link = card.getAttribute('data-link');
            if (!link) return;

            const openLink = () => {
                window.location.href = link;
            };

            card.addEventListener('click', event => {
                if (event.target.closest('a')) return;
                openLink();
            });

            card.addEventListener('keydown', event => {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    openLink();
                }
            });
        });

        // Live Bitcoin Data Updates (real endpoints with graceful fallbacks)
        async function updateBitcoinData() {
            const setText = (id, text) => { const el = document.getElementById(id); if (el) el.textContent = text; };
            const setBoth = (barId, mainId, text) => { setText(barId, text); setText(mainId, text); };

            try {
                // Fetch price (Coinbase)
                let priceUSD = null;
                try {
                    const r = await fetch('https://api.coinbase.com/v2/prices/BTC-USD/spot', { cache: 'no-store' });
                    if (r.ok) {
                        const j = await r.json();
                        priceUSD = parseFloat(j?.data?.amount || '');
                    }
                } catch(e) {}
                if (priceUSD) {
                    const priceStr = `$${priceUSD.toLocaleString(undefined, { maximumFractionDigits: 2 })}`;
                    setBoth('bar-btc-price', 'btc-price', priceStr);
                }

                // Fetch block height (mempool.space)
                try {
                    const r = await fetch('https://mempool.space/api/blocks/tip/height', { cache: 'no-store' });
                    if (r.ok) {
                        const txt = await r.text();
                        const height = parseInt(txt, 10);
                        if (!isNaN(height)) {
                            const hStr = height.toLocaleString();
                            setBoth('bar-block-height', 'block-height', hStr);
                        }
                    }
                } catch(e) {}

                // Fetch mempool size (mempool.space)
                try {
                    const r = await fetch('https://mempool.space/api/mempool', { cache: 'no-store' });
                    if (r.ok) {
                        const j = await r.json();
                        const count = j?.count;
                        const vsize = j?.vsize;
                        if (typeof count === 'number') {
                            setBoth('bar-mempool-count', 'mempool-size', `${count.toLocaleString()} tx`);
                        }
                        if (typeof vsize === 'number') {
                            // If there is a separate label, append vsize info
                            const el = document.getElementById('mempool-size');
                            if (el && !el.textContent.includes('vMB')) {
                                el.textContent += ` ¬∑ ${(vsize/1e6).toFixed(1)} vMB`;
                            }
                        }
                    }
                } catch(e) {}

                // Fetch fee estimates (mempool.space)
                try {
                    const r = await fetch('https://mempool.space/api/v1/fees/recommended', { cache: 'no-store' });
                    if (r.ok) {
                        const j = await r.json();
                        const fastestFee = j?.fastestFee;
                        if (typeof fastestFee === 'number') {
                            setText('bar-fee-estimate', `${fastestFee} sat/vB`);
                        }
                    }
                } catch(e) {}

                // Fetch difficulty (mempool.space)
                try {
                    const r = await fetch('https://mempool.space/api/v1/difficulty-adjustment', { cache: 'no-store' });
                    if (r.ok) {
                        const j = await r.json();
                        const difficulty = j?.difficulty;
                        if (typeof difficulty === 'number') {
                            const diffStr = (difficulty / 1e12).toFixed(2) + 'T';
                            setText('bar-difficulty', diffStr);
                        }
                    }
                } catch(e) {}

                // Optional/fallbacks for items without reliable public CORS
                if (!document.getElementById('market-cap').textContent || document.getElementById('market-cap').textContent === 'Loading...') {
                    if (priceUSD) {
                        // Approximate circulating supply; avoid exact claims
                        const approxSupply = 19_700_000; // rough estimate
                        const cap = priceUSD * approxSupply;
                        setText('market-cap', `$${cap.toLocaleString(undefined, { maximumFractionDigits: 0 })}`);
                    } else {
                        setText('market-cap', '‚Äî');
                    }
                }
                if (!document.getElementById('hashrate').textContent || document.getElementById('hashrate').textContent === 'Loading...') {
                    setText('hashrate', '‚Äî');
                }
                if (!document.getElementById('ln-capacity').textContent || document.getElementById('ln-capacity').textContent === 'Loading...') {
                    setText('ln-capacity', '‚Äî');
                }

                // Price change indicator (placeholder movement around 0)
                const changeEl = document.getElementById('btc-change');
                if (changeEl) {
                    const change = (Math.random() - 0.5) * 2; // +/-1%
                    const isPositive = change >= 0;
                    changeEl.textContent = `${isPositive ? '+' : ''}${change.toFixed(2)}% (24h est.)`;
                    changeEl.className = `data-change ${isPositive ? 'positive' : 'negative'}`;
                }

            } catch (error) {
                console.log('Bitcoin data update failed:', error);
            }
        }

        // Update data every 30 seconds
        updateBitcoinData();
        setInterval(updateBitcoinData, 30000);

        // Track feature clicks
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const title = card.querySelector('.feature-title').textContent;
                trackEvent('Feature Clicked', { feature: title, ab: (window.abVariant ? window.abVariant() : (location.hash.includes('ab=data-first')?'data-first':'experience-first')) });
            });
        });

        // Track agent card interactions
        document.querySelectorAll('.agent-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const name = card.querySelector('.agent-name').textContent;
                trackEvent('AI Agent Interest', { agent: name });
            });
        });

        // Persona and Guidance System
        class PersonaGuidanceSystem {
            constructor() {
                this.selectedPersona = null;
                this.currentTourStep = 0;
                this.progress = 0;
                this.achievements = [];
                this.tourSteps = {};
                this.init();
            }

            init() {
                this.setupPersonas();
                this.setupTour();
                this.setupProgressTracker();
                this.setupHelpSystem();
                this.loadUserProgress();
                this.showPersonaModal();
            }

            setupPersonas() {
                console.log('PersonaGuidanceSystem: Setting up personas...');
                const personas = {
                    curious: {
                        name: "Bitcoin Curious Explorer",
                        startPoint: "#features",
                        recommendations: ['bitcoin-sovereign-game', 'philosophy-guide', 'time-machine'],
                        content: "Start with our interactive game to understand why Bitcoin was created.",
                        nextSteps: ["Play SOVEREIGN Journey", "Learn Bitcoin Basics", "Understand Money History"]
                    },
                    investor: {
                        name: "Traditional Investor",
                        startPoint: "#bitcoin-data",
                        recommendations: ['data-poet', 'strategy-advisor', 'utxo-visualizer'],
                        content: "See live Bitcoin metrics and understand it as an investment asset.",
                        nextSteps: ["View Market Data", "Risk Assessment", "Portfolio Integration"]
                    },
                    developer: {
                        name: "Tech Developer",
                        startPoint: "#features",
                        recommendations: ['transaction-builder', 'consensus-game', 'lightning-lab'],
                        content: "Dive into the technical architecture with hands-on coding demos.",
                        nextSteps: ["Build Transactions", "Understand Consensus", "Lightning Development"]
                    },
                    libertarian: {
                        name: "Freedom Seeker",
                        startPoint: "#agents",
                        recommendations: ['philosophy-guide', 'future-oracle', 'story-navigator'],
                        content: "Explore Bitcoin's philosophical foundations and sovereignty implications.",
                        nextSteps: ["Philosophy Deep-Dive", "Austrian Economics", "Monetary History"]
                    },
                    business: {
                        name: "Business Owner",
                        startPoint: "#features",
                        recommendations: ['lightning-lab', 'security-dojo', 'strategy-advisor'],
                        content: "Learn practical Bitcoin integration for your business.",
                        nextSteps: ["Payment Integration", "Security Setup", "Legal Considerations"]
                    },
                    student: {
                        name: "Academic Student",
                        startPoint: "#path",
                        recommendations: ['debate-arena', 'visual-synthesizer', 'time-machine'],
                        content: "Follow our structured academic curriculum with rigorous analysis.",
                        nextSteps: ["Economic Theory", "Monetary Systems", "Research Methods"]
                    },
                    retiree: {
                        name: "Wealth Preserver",
                        startPoint: "#bitcoin-data",
                        recommendations: ['security-dojo', 'strategy-advisor', 'wallet-workshop'],
                        content: "Focus on Bitcoin as a store of value and inflation hedge.",
                        nextSteps: ["Inflation Protection", "Safe Storage", "Estate Planning"]
                    },
                    entrepreneur: {
                        name: "Bitcoin Entrepreneur",
                        startPoint: "#features",
                        recommendations: ['future-oracle', 'lightning-lab', 'business-integration'],
                        content: "Explore Bitcoin business opportunities and innovation potential.",
                        nextSteps: ["Market Opportunities", "Technical Integration", "Business Models"]
                    },
                    skeptic: {
                        name: "Bitcoin Skeptic",
                        startPoint: "#features",
                        recommendations: ['debate-arena', 'time-machine', 'philosophy-guide'],
                        content: "Address your concerns with evidence-based analysis and debate.",
                        nextSteps: ["Common Criticisms", "Evidence Review", "Risk Analysis"]
                    },
                    maximalist: {
                        name: "Bitcoin Maximalist",
                        startPoint: "#agents",
                        recommendations: ['consensus-game', 'lightning-lab', 'mining-simulator'],
                        content: "Deepen your technical knowledge and contribute to the ecosystem.",
                        nextSteps: ["Advanced Protocols", "Node Operation", "Development"]
                    },
                    parent: {
                        name: "Parent & Educator",
                        startPoint: "#features",
                        recommendations: ['story-navigator', 'visual-synthesizer', 'bitcoin-sovereign-game'],
                        content: "Learn family-friendly ways to teach Bitcoin and sound money.",
                        nextSteps: ["Teaching Resources", "Age-Appropriate Content", "Family Planning"]
                    },
                    global: {
                        name: "Global Citizen",
                        startPoint: "#features",
                        recommendations: ['bitcoin-sovereign-game', 'lightning-lab', 'security-dojo'],
                        content: "Understand Bitcoin as censorship-resistant global money.",
                        nextSteps: ["Capital Controls", "Remittances", "Financial Freedom"]
                    }
                };

                // Setup persona selection with error handling
                const personaCards = document.querySelectorAll('.persona-card');
                const continueBtn = document.querySelector('.btn-continue');
                const skipBtn = document.querySelector('.btn-skip');
                
                console.log('PersonaGuidanceSystem: Found', personaCards.length, 'persona cards');
                console.log('PersonaGuidanceSystem: Continue button found:', !!continueBtn);
                console.log('PersonaGuidanceSystem: Skip button found:', !!skipBtn);

                personaCards.forEach((card, index) => {
                    console.log(`PersonaGuidanceSystem: Setting up card ${index}:`, card.dataset.persona);
                    card.addEventListener('click', () => {
                        try {
                            console.log('PersonaGuidanceSystem: Card clicked:', card.dataset.persona);
                            personaCards.forEach(c => c.classList.remove('selected'));
                            card.classList.add('selected');
                            this.selectedPersona = personas[card.dataset.persona];
                            if (continueBtn) {
                                continueBtn.disabled = false;
                                continueBtn.textContent = `Start as ${this.selectedPersona.name}`;
                            }
                            console.log('PersonaGuidanceSystem: Persona selected:', this.selectedPersona.name);
                        } catch (error) {
                            console.error('PersonaGuidanceSystem: Error in card click handler:', error);
                        }
                    });
                });

                if (continueBtn) {
                    continueBtn.addEventListener('click', async () => {
                        try {
                            if (!this.selectedPersona) {
                                console.warn('PersonaGuidanceSystem: No persona selected yet');
                                return;
                            }
                            await this.startPersonalizedJourney();
                        } catch (error) {
                            console.error('PersonaGuidanceSystem: Error starting journey:', error);
                        }
                    });
                }

                if (skipBtn) {
                    skipBtn.addEventListener('click', () => {
                        try {
                            this.hidePersonaModal();
                        } catch (error) {
                            console.error('PersonaGuidanceSystem: Error hiding modal:', error);
                        }
                    });
                }
            }

            showPersonaModal() {
                // Only show if no persona selected and onboarding is not active
                try {
                    const hasPersona = !!localStorage.getItem('btc-academy-persona');
                    const onboardingCompleted = localStorage.getItem('btc-academy-onboarding-completed') === 'true';
                    const onboardingSkipped = localStorage.getItem('btc-academy-onboarding-skipped') === 'true';
                    const onboardingActive = document.body.classList.contains('onboarding-active');

                    // If onboarding is active or not yet completed/skipped, defer modal until onboarding finishes
                    if (onboardingActive || (!onboardingCompleted && !onboardingSkipped)) {
                        console.log('PersonaGuidanceSystem: Deferring persona modal (onboarding active)');
                        return;
                    }

                    if (!hasPersona) {
                        // Show modal after a brief delay
                        setTimeout(() => {
                            const modal = document.getElementById('personaModal');
                            if (modal) modal.classList.remove('hidden');
                        }, 2000);
                    }
                } catch (err) {
                    console.error('PersonaGuidanceSystem: Error showing persona modal:', err);
                }
            }

            hidePersonaModal() {
                document.getElementById('personaModal').classList.add('hidden');
            }

            async startPersonalizedJourney() {
                this.hidePersonaModal();
                this.showProgressTracker();
                this.updateProgress(10); // Initial progress
                this.showSmartPrompt(this.selectedPersona.content, this.selectedPersona.nextSteps);
                
                // Map persona names to MCP service persona IDs
                const personaMapping = {
                    'Bitcoin Curious Explorer': 'bitcoin-curious',
                    'Traditional Investor': 'investor',
                    'Tech Developer': 'developer',
                    'Freedom Seeker': 'libertarian',
                    'Business Owner': 'business-owner',
                    'Academic Student': 'student',
                    'Wealth Preserver': 'retiree',
                    'Bitcoin Entrepreneur': 'entrepreneur',
                    'Bitcoin Skeptic': 'skeptic',
                    'Bitcoin Maximalist': 'maximalist',
                    'Parent & Educator': 'parent',
                    'Global Citizen': 'global'
                };
                
                // Set persona in MCP service
                const personaId = personaMapping[this.selectedPersona.name];
                if (personaId && window.mcpService) {
                    await window.mcpService.setPersona(personaId);
                    
                    // Trigger content refresh event for all dynamic content
                    window.dispatchEvent(new CustomEvent('personaChanged', {
                        detail: {
                            personaId: personaId,
                            personaName: this.selectedPersona.name
                        }
                    }));
                }
                
                // Scroll to recommended starting point
                setTimeout(() => {
                    const target = document.querySelector(this.selectedPersona.startPoint);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                }, 1000);

                // Start guided tour
                setTimeout(() => {
                    this.startGuidedTour();
                }, 3000);

                // Track persona selection
                trackEvent('Persona Selected', { persona: this.selectedPersona.name });
            }

            setupTour() {
                const tourElement = document.getElementById('guidedTour');
                const tourNext = document.getElementById('tourNext');
                const tourSkip = document.getElementById('tourSkip');

                tourNext.addEventListener('click', () => {
                    this.nextTourStep();
                });

                tourSkip.addEventListener('click', () => {
                    this.endTour();
                });
            }

            startGuidedTour() {
                if (!this.selectedPersona) return;
                
                this.currentTourStep = 0;
                this.tourSteps = this.generateTourSteps();
                this.showTourStep();
            }

            generateTourSteps() {
                const baseSteps = [
                    {
                        title: `Welcome ${this.selectedPersona.name}!`,
                        description: this.selectedPersona.content,
                        target: this.selectedPersona.startPoint
                    },
                    {
                        title: "AI Learning Agents",
                        description: "Meet your personalized AI tutors who will guide your journey.",
                        target: "#agents"
                    },
                    {
                        title: "Interactive Demos",
                        description: "Try hands-on experiences to learn by doing, not just reading.",
                        target: "#features"
                    },
                    {
                        title: "Your Progress",
                        description: "Track your learning journey and earn achievements.",
                        target: ".progress-tracker"
                    }
                ];

                return baseSteps;
            }

            showTourStep() {
                if (this.currentTourStep >= this.tourSteps.length) {
                    this.endTour();
                    return;
                }

                const step = this.tourSteps[this.currentTourStep];
                const target = document.querySelector(step.target);
                
                if (target) {
                    const rect = target.getBoundingClientRect();
                    const tourElement = document.getElementById('guidedTour');
                    
                    // Position tour popup
                    tourElement.style.left = `${rect.left + rect.width / 2 - 175}px`;
                    tourElement.style.top = `${rect.top - 200}px`;
                    
                    // Update content
                    document.getElementById('tourTitle').textContent = step.title;
                    document.getElementById('tourDescription').textContent = step.description;
                    
                    // Show tour
                    tourElement.classList.remove('hidden');
                }
            }

            nextTourStep() {
                this.currentTourStep++;
                this.updateProgress(this.progress + 15);
                this.showTourStep();
            }

            endTour() {
                document.getElementById('guidedTour').classList.add('hidden');
                this.updateProgress(this.progress + 20);
                this.addAchievement('üéØ Tour Completed');
            }

            setupProgressTracker() {
                const toggleBtn = document.getElementById('toggleProgress');
                toggleBtn.addEventListener('click', () => {
                    const tracker = document.querySelector('.progress-content');
                    tracker.style.display = tracker.style.display === 'none' ? 'block' : 'none';
                });
            }

            showProgressTracker() {
                document.getElementById('progressTracker').classList.remove('hidden');
                if (this.selectedPersona) {
                    document.getElementById('personaName').textContent = this.selectedPersona.name;
                }
            }

            updateProgress(newProgress) {
                this.progress = Math.min(newProgress, 100);
                document.getElementById('progressFill').style.width = `${this.progress}%`;
                document.getElementById('progressText').textContent = `${Math.round(this.progress)}% Complete`;
                
                // Update next step
                if (this.selectedPersona && this.selectedPersona.nextSteps.length > 0) {
                    const nextIndex = Math.floor(this.progress / 33);
                    const nextStep = this.selectedPersona.nextSteps[nextIndex] || "Keep exploring!";
                    document.getElementById('nextStep').textContent = `Next: ${nextStep}`;
                }
            }

            addAchievement(achievement) {
                this.achievements.push(achievement);
                const achievementsEl = document.getElementById('achievements');
                const badge = document.createElement('span');
                badge.className = 'achievement';
                badge.textContent = achievement;
                achievementsEl.appendChild(badge);
            }

            setupHelpSystem() {
                const helpBubble = document.getElementById('helpBubble');
                const helpClose = document.getElementById('helpClose');
                
                helpBubble.addEventListener('click', () => {
                    this.showContextualHelp();
                });
                
                helpClose.addEventListener('click', () => {
                    helpBubble.style.display = 'none';
                });

                // Show help suggestions periodically
                setInterval(() => {
                    this.showRandomTip();
                }, 45000);
            }

            showContextualHelp() {
                const tips = [
                    "üí° Try clicking on any feature card to learn more!",
                    "üéÆ The SOVEREIGN Journey game is perfect for beginners",
                    "ü§ñ AI agents can answer your specific Bitcoin questions",
                    "üìä Check the live Bitcoin data section for real-time metrics",
                    "‚ö° Lightning Network demos show Bitcoin's instant payment layer"
                ];
                
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                this.showSmartPrompt(randomTip, ["Got it!", "Tell me more"]);
            }

            showRandomTip() {
                if (this.progress < 50) {
                    const tips = [
                        "üìà Check your progress in the top-right corner",
                        "üéØ Each demo teaches different Bitcoin concepts",
                        "üß† AI agents adapt to your learning style",
                        "üìö Follow the learning path for structured education"
                    ];
                    
                    const tip = tips[Math.floor(Math.random() * tips.length)];
                    document.getElementById('helpText').textContent = tip;
                }
            }

            showSmartPrompt(message, actions = []) {
                const promptsEl = document.getElementById('smartPrompts');
                const prompt = document.createElement('div');
                prompt.className = 'smart-prompt';
                
                const closeBtn = document.createElement('button');
                closeBtn.className = 'smart-prompt-close';
                closeBtn.textContent = '√ó';
                closeBtn.onclick = () => prompt.remove();
                
                prompt.innerHTML = `
                    <p>${message}</p>
                    ${actions.map(action => `<button class="btn btn-secondary" style="margin: 0.5rem 0.5rem 0 0; padding: 0.3rem 1rem; font-size: 0.8rem;">${action}</button>`).join('')}
                `;
                prompt.appendChild(closeBtn);
                
                promptsEl.appendChild(prompt);
                
                // Auto-remove after 10 seconds
                setTimeout(() => {
                    if (prompt.parentNode) {
                        prompt.remove();
                    }
                }, 10000);
            }

            loadUserProgress() {
                // Load from localStorage if available
                const saved = localStorage.getItem('bitcoinAcademyProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    this.progress = data.progress || 0;
                    this.achievements = data.achievements || [];
                }
            }

            saveUserProgress() {
                localStorage.setItem('bitcoinAcademyProgress', JSON.stringify({
                    progress: this.progress,
                    achievements: this.achievements,
                    selectedPersona: this.selectedPersona
                }));
            }
        }

        // Initialize the guidance system with proper error handling
        let guidanceSystem;
        try {
            guidanceSystem = new PersonaGuidanceSystem();
            console.log('PersonaGuidanceSystem initialized successfully');
        } catch (error) {
            console.error('Error initializing PersonaGuidanceSystem:', error);
            // Fallback initialization will be handled by fix-persona-modal.js
        }

        // Enhanced feature card interactions
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const title = card.querySelector('.feature-title').textContent;
                guidanceSystem.updateProgress(guidanceSystem.progress + 5);
                guidanceSystem.addAchievement(`üéØ Tried ${title}`);
                trackEvent('Feature Clicked', { feature: title });
            });
        });

        // Save progress periodically
        setInterval(() => {
            guidanceSystem.saveUserProgress();
        }, 30000);
        
        // Track activity for MCP dynamic updates
        document.addEventListener('click', () => {
            localStorage.setItem('btc-academy-last-activity', Date.now().toString());
        });
        
        document.addEventListener('scroll', () => {
            localStorage.setItem('btc-academy-last-activity', Date.now().toString());
        });
    </script>
    
    <!-- MCP Service and Dynamic Content Integration -->
    <script src="js/mcp-service.js"></script>
    <script src="js/bitcoin-data-fallback.js"></script>
    <script src="js/dynamic-content.js"></script>
    <script src="js/learning-path.js"></script>
    <script src="js/onboarding-flow.js"></script>
    <script type="module" defer src="/assets/hero3d.js"></script>
    <script defer src="/js/hero-cta.js"></script>
    <script defer src="/js/ab-home.js"></script>

    <!-- Analytics helpers and tracking (Plausible) -->
    <script>
      // Safe wrapper for Plausible
      window.track = function(name, props={}){
        if (window.plausible) { try { window.plausible(name, { props }); } catch(e){} }
      };
      window.abVariant = () => (location.hash.includes('ab=data-first') ? 'data-first' : 'experience-first');
      window.resolvePersona = () => (window.MCP?.state?.persona) || (window.mcpService?.currentPersona) || 'unknown';
      // Persist AB + persona for downstream pages
      try {
        const _ab = window.abVariant();
        const _persona = window.resolvePersona() || localStorage.getItem('persona') || 'unknown';
        localStorage.setItem('ab', _ab);
        localStorage.setItem('persona', _persona);
        window.getAB = () => localStorage.getItem('ab') || _ab;
        window.getPersona = () => localStorage.getItem('persona') || _persona;
      } catch {}

      // Hero chip click tracking
      document.addEventListener('click', (e) => {
        const a = e.target.closest('#hero-cta a.chip');
        if (!a) return;
        window.track('Hero Chip Click', { persona: (window.getPersona ? window.getPersona() : window.resolvePersona()), href: a.getAttribute('href'), ab: (window.getAB ? window.getAB() : window.abVariant()) });
      });

      // Featured fallback if MCP hasn't populated in time
      (function(){
        const box = document.getElementById('featured-content');
        const fb  = document.getElementById('featured-fallback');
        setTimeout(() => {
          if (box && box.children.length === 0) {
            try { box.classList.remove('skel'); box.removeAttribute('aria-busy'); } catch {}
            if (fb) fb.style.display = 'block';
          }
        }, 2000);
        window.addEventListener('mcp:featured:ready', () => { if (fb) fb.style.display = 'none'; });
      })();

      // Featured grid click delegate
      document.addEventListener('click', (e) => {
        const a = e.target.closest('#featured-content a');
        if (!a) return;
        window.track('Featured Item Click', { href: a.getAttribute('href'), ab: (window.getAB ? window.getAB() : window.abVariant()) });
      });

      // Learning Path delegate for key actions
      document.addEventListener('click', (e) => {
        const t = e.target.closest('#learning-path-content [data-lp-action]');
        if (!t) return;
        const action = t.getAttribute('data-lp-action');
        const id = t.getAttribute('data-lp-id');
        window.track('Learning Path Action', {
          action,
          id,
          ab: (window.getAB ? window.getAB() : window.abVariant()),
          persona: (window.getPersona ? window.getPersona() : window.resolvePersona())
        });
      });

      // Hide persona chips whose routes are missing (dev safeguard)
      (async function(){
        const links = document.querySelectorAll('#hero-cta a.chip');
        for (const a of links) {
          try {
            const r = await fetch(a.getAttribute('href'), { method: 'HEAD' });
            if (!r.ok) a.style.display = 'none';
          } catch { a.style.display = 'none'; }
        }
      })();

      // ===== PREVIEW MODE ACCESS CONTROL =====
      (function() {
        // Check for developer override
        const urlParams = new URLSearchParams(window.location.search);
        const hasUrlOverride = urlParams.get('unlock') === 'all';
        const hasStorageOverride = localStorage.getItem('devUnlockAll') === 'true';
        const isDeveloperMode = hasUrlOverride || hasStorageOverride;

        // Save override to localStorage if URL parameter is used
        if (hasUrlOverride && !hasStorageOverride) {
          localStorage.setItem('devUnlockAll', 'true');
          console.log('‚úÖ Developer mode ENABLED. All content unlocked. To disable, use ?unlock=off or clear localStorage.');
        }

        // Allow disabling via URL
        if (urlParams.get('unlock') === 'off') {
          localStorage.removeItem('devUnlockAll');
          console.log('üîí Developer mode DISABLED. Preview mode restrictions active.');
          window.location.href = window.location.pathname; // Reload without query params
          return;
        }

        // If developer mode is active, show indicator and exit
        if (isDeveloperMode) {
          // Add dev mode indicator to page
          const devIndicator = document.createElement('div');
          devIndicator.style.cssText = `
            position: fixed;
            top: 10px;
            right: 10px;
            background: #4CAF50;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 10000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
          `;
          devIndicator.textContent = 'üîì DEV MODE';
          devIndicator.title = 'All content unlocked. Add ?unlock=off to disable.';
          document.body.appendChild(devIndicator);
          console.log('üîì Developer mode active. All content is unlocked.');
          return; // Skip all restrictions
        }

        // PREVIEW MODE RESTRICTIONS
        console.log('üîí Preview mode active. Some content is locked.');
        console.log('üí° To unlock all content for development, add ?unlock=all to the URL');

        const previewConfig = {
          paths: {
            curious: {
              unlocked: ['stage-1'], // Only stage-1 unlocked
              locked: ['stage-2', 'stage-3', 'stage-4']
            },
            hurried: {
              unlocked: ['all'], // All modules unlocked (Hurried path is single page)
              locked: []
            },
            builder: {
              unlocked: ['stage-1'], // Only Genesis timeline (assuming it's in stage-1)
              locked: ['stage-2', 'stage-3', 'stage-4']
            },
            sovereign: {
              unlocked: [], // Everything locked
              locked: ['stage-1', 'stage-2', 'stage-3', 'stage-4', 'stage-5']
            }
          },
          demos: {
            unlocked: ['consensus-game'], // Only Consensus Game
            locked: [
              'bitcoin-sovereign-game',
              'transaction-builder',
              'mining-simulator',
              'lightning-lab',
              'wallet-workshop',
              'utxo-visualizer-enhanced',
              'security-dojo',
              'time-machine'
            ]
          },
          aiAgents: {
            unlocked: ['visual-synthesizer'], // Only Visual Synthesizer
            locked: [
              'story-navigator',
              'debate-arena',
              'future-oracle',
              'strategy-advisor',
              'data-poet',
              'philosophy-guide',
              'time-machine'
            ]
          }
        };

        // Helper function to add lock overlay
        function addLockOverlay(element, message = 'Coming Soon in Full Release') {
          element.style.position = 'relative';
          element.style.opacity = '0.5';
          element.style.pointerEvents = 'none';
          element.style.cursor = 'not-allowed';

          // Remove any existing onclick handlers
          element.removeAttribute('onclick');
          element.onclick = null;

          const lockBadge = document.createElement('div');
          lockBadge.style.cssText = `
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(244, 67, 54, 0.9);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 4px;
          `;
          lockBadge.innerHTML = `üîí LOCKED`;
          lockBadge.title = message;
          element.appendChild(lockBadge);

          // Prevent clicks with capture phase
          element.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            alert(`üîí ${message}\n\nThis content will be available in the full release.`);
            return false;
          }, true);

          // Also prevent with standard phase
          element.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            return false;
          });
        }

        // Lock Learning Paths
        const pathCards = document.querySelectorAll('.path-card');
        pathCards.forEach(card => {
          const href = card.getAttribute('href') || '';

          // Curious Path - lock stages 2-4
          if (href.includes('/paths/curious/')) {
            card.setAttribute('data-path', 'curious');
          }

          // Hurried Path - all unlocked (single page)
          if (href.includes('/paths/hurried/')) {
            card.setAttribute('data-path', 'hurried');
            // No locking needed
          }

          // Builder Path - lock stages 2-4
          if (href.includes('/paths/builder/')) {
            card.setAttribute('data-path', 'builder');
          }

          // Sovereign Path - lock everything
          if (href.includes('/paths/sovereign/')) {
            console.log('üîí Locking Sovereign Path card on homepage');
            addLockOverlay(card, 'Sovereign Path - Coming in Full Release');
          }
        });

        // Lock Demos
        const demoCards = document.querySelectorAll('.feature-card');
        demoCards.forEach(card => {
          const href = card.getAttribute('href') || '';

          // Check if demo is locked
          const isLocked = previewConfig.demos.locked.some(demo =>
            href.includes(demo)
          );

          if (isLocked) {
            addLockOverlay(card, 'Demo - Coming in Full Release');
          }
        });

        // Lock AI Agents
        const agentCards = document.querySelectorAll('.agent-card');
        agentCards.forEach(card => {
          const dataLink = card.getAttribute('data-link') || '';

          // Check if agent is locked
          const isLocked = previewConfig.aiAgents.locked.some(agent =>
            dataLink.includes(agent) ||
            card.textContent.toLowerCase().includes(agent.replace('-', ' '))
          );

          if (isLocked) {
            addLockOverlay(card, 'AI Agent - Coming in Full Release');
          }
        });

        // Add info message to console
        console.log('üìã Preview Mode Access:');
        console.log('  Paths:');
        console.log('    ‚úÖ Curious: Stage 1 only');
        console.log('    ‚úÖ Hurried: All modules');
        console.log('    ‚úÖ Builder: Genesis timeline only');
        console.log('    üîí Sovereign: All locked');
        console.log('  Demos:');
        console.log('    ‚úÖ Consensus Game');
        console.log('    üîí All other demos locked');
        console.log('  AI Agents:');
        console.log('    ‚úÖ Visual Synthesizer');
        console.log('    üîí Story Navigator, Debate Arena, Future Oracle');
        console.log('    üîí Strategy Advisor, Data Poet, Philosophy Guide, Time Machine');
        console.log('');
        console.log('üí° Add ?unlock=all to URL to enable developer mode');

      })();
    </script>

</body>
</html>
